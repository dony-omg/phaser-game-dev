"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_pages-dir-node_src_App_tsx";
exports.ids = ["_pages-dir-node_src_App_tsx"];
exports.modules = {

/***/ "(pages-dir-node)/./src/App.tsx":
/*!*********************!*\
  !*** ./src/App.tsx ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _PhaserGame__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./PhaserGame */ \"(pages-dir-node)/./src/PhaserGame.tsx\");\n\n\nfunction App({ gameCode }) {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        id: \"app\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_PhaserGame__WEBPACK_IMPORTED_MODULE_1__.PhaserGame, {\n            gameCode: gameCode\n        }, void 0, false, {\n            fileName: \"/Users/nb230601/Documents/phaser-gamedev/src/App.tsx\",\n            lineNumber: 11,\n            columnNumber: 13\n        }, this)\n    }, void 0, false, {\n        fileName: \"/Users/nb230601/Documents/phaser-gamedev/src/App.tsx\",\n        lineNumber: 10,\n        columnNumber: 9\n    }, this);\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (App);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9BcHAudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQTBDO0FBTTFDLFNBQVNDLElBQUksRUFBRUMsUUFBUSxFQUFZO0lBRS9CLHFCQUNJLDhEQUFDQztRQUFJQyxJQUFHO2tCQUNKLDRFQUFDSixtREFBVUE7WUFBQ0UsVUFBVUE7Ozs7Ozs7Ozs7O0FBR2xDO0FBRUEsaUVBQWVELEdBQUdBLEVBQUEiLCJzb3VyY2VzIjpbIi9Vc2Vycy9uYjIzMDYwMS9Eb2N1bWVudHMvcGhhc2VyLWdhbWVkZXYvc3JjL0FwcC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGhhc2VyR2FtZSB9IGZyb20gJy4vUGhhc2VyR2FtZSc7XG5cbnR5cGUgQXBwUHJvcHMgPSB7XG4gICAgZ2FtZUNvZGU/OiBzdHJpbmc7XG59O1xuXG5mdW5jdGlvbiBBcHAoeyBnYW1lQ29kZSB9OiBBcHBQcm9wcylcbntcbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGlkPVwiYXBwXCI+XG4gICAgICAgICAgICA8UGhhc2VyR2FtZSBnYW1lQ29kZT17Z2FtZUNvZGV9IC8+XG4gICAgICAgIDwvZGl2PlxuICAgIClcbn1cblxuZXhwb3J0IGRlZmF1bHQgQXBwXG4iXSwibmFtZXMiOlsiUGhhc2VyR2FtZSIsIkFwcCIsImdhbWVDb2RlIiwiZGl2IiwiaWQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/App.tsx\n");

/***/ }),

/***/ "(pages-dir-node)/./src/PhaserGame.tsx":
/*!****************************!*\
  !*** ./src/PhaserGame.tsx ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PhaserGame: () => (/* binding */ PhaserGame)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _game_main__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./game/main */ \"(pages-dir-node)/./src/game/main.ts\");\n/* harmony import */ var _game_EventBus__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./game/EventBus */ \"(pages-dir-node)/./src/game/EventBus.ts\");\n\n\n\n\nconst PhaserGame = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.forwardRef)(function PhaserGame({ currentActiveScene, gameCode }, ref) {\n    const game = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect)({\n        \"PhaserGame.PhaserGame.useLayoutEffect\": ()=>{\n            if (game.current === null) {\n                game.current = (0,_game_main__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(\"game-container\", {\n                    gameCode\n                });\n                if (typeof ref === 'function') {\n                    ref({\n                        game: game.current,\n                        scene: null\n                    });\n                } else if (ref) {\n                    ref.current = {\n                        game: game.current,\n                        scene: null\n                    };\n                }\n            }\n            return ({\n                \"PhaserGame.PhaserGame.useLayoutEffect\": ()=>{\n                    if (game.current) {\n                        game.current.destroy(true);\n                        if (game.current !== null) {\n                            game.current = null;\n                        }\n                    }\n                }\n            })[\"PhaserGame.PhaserGame.useLayoutEffect\"];\n        }\n    }[\"PhaserGame.PhaserGame.useLayoutEffect\"], [\n        ref\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"PhaserGame.PhaserGame.useEffect\": ()=>{\n            _game_EventBus__WEBPACK_IMPORTED_MODULE_3__.EventBus.on('current-scene-ready', {\n                \"PhaserGame.PhaserGame.useEffect\": (scene_instance)=>{\n                    if (currentActiveScene && typeof currentActiveScene === 'function') {\n                        currentActiveScene(scene_instance);\n                    }\n                    if (typeof ref === 'function') {\n                        ref({\n                            game: game.current,\n                            scene: scene_instance\n                        });\n                    } else if (ref) {\n                        ref.current = {\n                            game: game.current,\n                            scene: scene_instance\n                        };\n                    }\n                }\n            }[\"PhaserGame.PhaserGame.useEffect\"]);\n            return ({\n                \"PhaserGame.PhaserGame.useEffect\": ()=>{\n                    _game_EventBus__WEBPACK_IMPORTED_MODULE_3__.EventBus.removeListener('current-scene-ready');\n                }\n            })[\"PhaserGame.PhaserGame.useEffect\"];\n        }\n    }[\"PhaserGame.PhaserGame.useEffect\"], [\n        currentActiveScene,\n        ref\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        id: \"game-container\"\n    }, void 0, false, {\n        fileName: \"/Users/nb230601/Documents/phaser-gamedev/src/PhaserGame.tsx\",\n        lineNumber: 84,\n        columnNumber: 9\n    }, this);\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9QaGFzZXJHYW1lLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUF1RTtBQUNuQztBQUNPO0FBY3BDLE1BQU1NLDJCQUFhTixpREFBVUEsQ0FBeUIsU0FBU00sV0FBVyxFQUFFQyxrQkFBa0IsRUFBRUMsUUFBUSxFQUFFLEVBQUVDLEdBQUc7SUFFbEgsTUFBTUMsT0FBT1AsNkNBQU1BLENBQXFCO0lBRXhDRCxzREFBZUE7aURBQUM7WUFFWixJQUFJUSxLQUFLQyxPQUFPLEtBQUssTUFDckI7Z0JBRUlELEtBQUtDLE9BQU8sR0FBR1Asc0RBQVNBLENBQUMsa0JBQWtCO29CQUFFSTtnQkFBUztnQkFFdEQsSUFBSSxPQUFPQyxRQUFRLFlBQ25CO29CQUNJQSxJQUFJO3dCQUFFQyxNQUFNQSxLQUFLQyxPQUFPO3dCQUFFQyxPQUFPO29CQUFLO2dCQUMxQyxPQUFPLElBQUlILEtBQ1g7b0JBQ0lBLElBQUlFLE9BQU8sR0FBRzt3QkFBRUQsTUFBTUEsS0FBS0MsT0FBTzt3QkFBRUMsT0FBTztvQkFBSztnQkFDcEQ7WUFFSjtZQUVBO3lEQUFPO29CQUVILElBQUlGLEtBQUtDLE9BQU8sRUFDaEI7d0JBQ0lELEtBQUtDLE9BQU8sQ0FBQ0UsT0FBTyxDQUFDO3dCQUNyQixJQUFJSCxLQUFLQyxPQUFPLEtBQUssTUFDckI7NEJBQ0lELEtBQUtDLE9BQU8sR0FBRzt3QkFDbkI7b0JBQ0o7Z0JBQ0o7O1FBQ0o7Z0RBQUc7UUFBQ0Y7S0FBSTtJQUVSUixnREFBU0E7MkNBQUM7WUFFTkksb0RBQVFBLENBQUNTLEVBQUUsQ0FBQzttREFBdUIsQ0FBQ0M7b0JBRWhDLElBQUlSLHNCQUFzQixPQUFPQSx1QkFBdUIsWUFDeEQ7d0JBRUlBLG1CQUFtQlE7b0JBRXZCO29CQUVBLElBQUksT0FBT04sUUFBUSxZQUNuQjt3QkFFSUEsSUFBSTs0QkFBRUMsTUFBTUEsS0FBS0MsT0FBTzs0QkFBRUMsT0FBT0c7d0JBQWU7b0JBRXBELE9BQU8sSUFBSU4sS0FDWDt3QkFFSUEsSUFBSUUsT0FBTyxHQUFHOzRCQUFFRCxNQUFNQSxLQUFLQyxPQUFPOzRCQUFFQyxPQUFPRzt3QkFBZTtvQkFFOUQ7Z0JBRUo7O1lBQ0E7bURBQU87b0JBR0hWLG9EQUFRQSxDQUFDVyxjQUFjLENBQUM7Z0JBRTVCOztRQUNKOzBDQUFHO1FBQUNUO1FBQW9CRTtLQUFJO0lBRTVCLHFCQUNJLDhEQUFDUTtRQUFJQyxJQUFHOzs7Ozs7QUFHaEIsR0FBRyIsInNvdXJjZXMiOlsiL1VzZXJzL25iMjMwNjAxL0RvY3VtZW50cy9waGFzZXItZ2FtZWRldi9zcmMvUGhhc2VyR2FtZS50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZm9yd2FyZFJlZiwgdXNlRWZmZWN0LCB1c2VMYXlvdXRFZmZlY3QsIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IFN0YXJ0R2FtZSBmcm9tICcuL2dhbWUvbWFpbic7XHJcbmltcG9ydCB7IEV2ZW50QnVzIH0gZnJvbSAnLi9nYW1lL0V2ZW50QnVzJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVJlZlBoYXNlckdhbWVcclxue1xyXG4gICAgZ2FtZTogUGhhc2VyLkdhbWUgfCBudWxsO1xyXG4gICAgc2NlbmU6IFBoYXNlci5TY2VuZSB8IG51bGw7XHJcbn1cclxuXHJcbmludGVyZmFjZSBJUHJvcHNcbntcbiAgICBjdXJyZW50QWN0aXZlU2NlbmU/OiAoc2NlbmVfaW5zdGFuY2U6IFBoYXNlci5TY2VuZSkgPT4gdm9pZFxuICAgIGdhbWVDb2RlPzogc3RyaW5nXG59XG5cbmV4cG9ydCBjb25zdCBQaGFzZXJHYW1lID0gZm9yd2FyZFJlZjxJUmVmUGhhc2VyR2FtZSwgSVByb3BzPihmdW5jdGlvbiBQaGFzZXJHYW1lKHsgY3VycmVudEFjdGl2ZVNjZW5lLCBnYW1lQ29kZSB9LCByZWYpXG57XG4gICAgY29uc3QgZ2FtZSA9IHVzZVJlZjxQaGFzZXIuR2FtZSB8IG51bGw+KG51bGwhKTtcblxuICAgIHVzZUxheW91dEVmZmVjdCgoKSA9PlxuICAgIHtcbiAgICAgICAgaWYgKGdhbWUuY3VycmVudCA9PT0gbnVsbClcclxuICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICBnYW1lLmN1cnJlbnQgPSBTdGFydEdhbWUoXCJnYW1lLWNvbnRhaW5lclwiLCB7IGdhbWVDb2RlIH0pO1xuXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcmVmID09PSAnZnVuY3Rpb24nKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZWYoeyBnYW1lOiBnYW1lLmN1cnJlbnQsIHNjZW5lOiBudWxsIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlZilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmVmLmN1cnJlbnQgPSB7IGdhbWU6IGdhbWUuY3VycmVudCwgc2NlbmU6IG51bGwgfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiAoKSA9PlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGdhbWUuY3VycmVudClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZ2FtZS5jdXJyZW50LmRlc3Ryb3kodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZ2FtZS5jdXJyZW50ICE9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGdhbWUuY3VycmVudCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LCBbcmVmXSk7XHJcblxyXG4gICAgdXNlRWZmZWN0KCgpID0+XHJcbiAgICB7XHJcbiAgICAgICAgRXZlbnRCdXMub24oJ2N1cnJlbnQtc2NlbmUtcmVhZHknLCAoc2NlbmVfaW5zdGFuY2U6IFBoYXNlci5TY2VuZSkgPT5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50QWN0aXZlU2NlbmUgJiYgdHlwZW9mIGN1cnJlbnRBY3RpdmVTY2VuZSA9PT0gJ2Z1bmN0aW9uJylcclxuICAgICAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgICAgIGN1cnJlbnRBY3RpdmVTY2VuZShzY2VuZV9pbnN0YW5jZSk7XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHJlZiA9PT0gJ2Z1bmN0aW9uJylcclxuICAgICAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgICAgIHJlZih7IGdhbWU6IGdhbWUuY3VycmVudCwgc2NlbmU6IHNjZW5lX2luc3RhbmNlIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChyZWYpXHJcbiAgICAgICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgICAgICByZWYuY3VycmVudCA9IHsgZ2FtZTogZ2FtZS5jdXJyZW50LCBzY2VuZTogc2NlbmVfaW5zdGFuY2UgfTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuICgpID0+XHJcbiAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgRXZlbnRCdXMucmVtb3ZlTGlzdGVuZXIoJ2N1cnJlbnQtc2NlbmUtcmVhZHknKTtcclxuICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICB9LCBbY3VycmVudEFjdGl2ZVNjZW5lLCByZWZdKTtcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICAgIDxkaXYgaWQ9XCJnYW1lLWNvbnRhaW5lclwiPjwvZGl2PlxyXG4gICAgKTtcclxuXHJcbn0pO1xyXG4iXSwibmFtZXMiOlsiZm9yd2FyZFJlZiIsInVzZUVmZmVjdCIsInVzZUxheW91dEVmZmVjdCIsInVzZVJlZiIsIlN0YXJ0R2FtZSIsIkV2ZW50QnVzIiwiUGhhc2VyR2FtZSIsImN1cnJlbnRBY3RpdmVTY2VuZSIsImdhbWVDb2RlIiwicmVmIiwiZ2FtZSIsImN1cnJlbnQiLCJzY2VuZSIsImRlc3Ryb3kiLCJvbiIsInNjZW5lX2luc3RhbmNlIiwicmVtb3ZlTGlzdGVuZXIiLCJkaXYiLCJpZCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/PhaserGame.tsx\n");

/***/ }),

/***/ "(pages-dir-node)/./src/game/EventBus.ts":
/*!******************************!*\
  !*** ./src/game/EventBus.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EventBus: () => (/* binding */ EventBus)\n/* harmony export */ });\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_0__);\n\n// Used to emit events between components, HTML and Phaser scenes\nconst EventBus = new phaser__WEBPACK_IMPORTED_MODULE_0__.Events.EventEmitter();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9nYW1lL0V2ZW50QnVzLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFnQztBQUVoQyxpRUFBaUU7QUFDMUQsTUFBTUMsV0FBVyxJQUFJRCwwQ0FBTUEsQ0FBQ0UsWUFBWSxHQUFHIiwic291cmNlcyI6WyIvVXNlcnMvbmIyMzA2MDEvRG9jdW1lbnRzL3BoYXNlci1nYW1lZGV2L3NyYy9nYW1lL0V2ZW50QnVzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEV2ZW50cyB9IGZyb20gJ3BoYXNlcic7XHJcblxyXG4vLyBVc2VkIHRvIGVtaXQgZXZlbnRzIGJldHdlZW4gY29tcG9uZW50cywgSFRNTCBhbmQgUGhhc2VyIHNjZW5lc1xyXG5leHBvcnQgY29uc3QgRXZlbnRCdXMgPSBuZXcgRXZlbnRzLkV2ZW50RW1pdHRlcigpOyJdLCJuYW1lcyI6WyJFdmVudHMiLCJFdmVudEJ1cyIsIkV2ZW50RW1pdHRlciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/game/EventBus.ts\n");

/***/ }),

/***/ "(pages-dir-node)/./src/game/gameConfig.ts":
/*!********************************!*\
  !*** ./src/game/gameConfig.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_GAME_CODE: () => (/* binding */ DEFAULT_GAME_CODE),\n/* harmony export */   getGameConfig: () => (/* binding */ getGameConfig),\n/* harmony export */   resolveGameCode: () => (/* binding */ resolveGameCode)\n/* harmony export */ });\nconst gameConfigs = {\n    vocab_race: {\n        code: 'vocab_race',\n        label: 'Tower',\n        mapKey: 'bg-tower',\n        mapPath: 'maps/bg 2.png',\n        assetRoot: 'games/tower',\n        backgroundColor: 0x3fb3e8,\n        useTexturePath: true\n    },\n    train_game: {\n        code: 'train_game',\n        label: 'Nối Đuôi Xe Lửa',\n        mapKey: 'bg-train',\n        mapPath: 'background copy 2.png',\n        assetRoot: 'games/train',\n        backgroundColor: 0xf59e0b,\n        useTexturePath: false\n    }\n};\nconst DEFAULT_GAME_CODE = 'vocab_race';\nfunction resolveGameCode(raw) {\n    if (!raw) return DEFAULT_GAME_CODE;\n    if (raw === 'tower') return 'vocab_race';\n    if (raw === 'town') return 'vocab_race';\n    if (raw === 'train') return 'train_game';\n    return raw in gameConfigs ? raw : DEFAULT_GAME_CODE;\n}\nfunction getGameConfig(raw) {\n    const code = resolveGameCode(raw);\n    return gameConfigs[code];\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9nYW1lL2dhbWVDb25maWcudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBWUEsTUFBTUEsY0FBNEM7SUFDOUNDLFlBQVk7UUFDUkMsTUFBTTtRQUNOQyxPQUFPO1FBQ1BDLFFBQVE7UUFDUkMsU0FBUztRQUNUQyxXQUFXO1FBQ1hDLGlCQUFpQjtRQUNqQkMsZ0JBQWdCO0lBQ3BCO0lBQ0FDLFlBQVk7UUFDUlAsTUFBTTtRQUNOQyxPQUFPO1FBQ1BDLFFBQVE7UUFDUkMsU0FBUztRQUNUQyxXQUFXO1FBQ1hDLGlCQUFpQjtRQUNqQkMsZ0JBQWdCO0lBQ3BCO0FBQ0o7QUFFTyxNQUFNRSxvQkFBOEIsYUFBYTtBQUVqRCxTQUFTQyxnQkFBZ0JDLEdBQW1CO0lBQy9DLElBQUksQ0FBQ0EsS0FBSyxPQUFPRjtJQUVqQixJQUFJRSxRQUFRLFNBQVMsT0FBTztJQUM1QixJQUFJQSxRQUFRLFFBQVEsT0FBTztJQUMzQixJQUFJQSxRQUFRLFNBQVMsT0FBTztJQUU1QixPQUFRQSxPQUFPWixjQUFjWSxNQUFNRjtBQUN2QztBQUVPLFNBQVNHLGNBQWNELEdBQW1CO0lBQzdDLE1BQU1WLE9BQU9TLGdCQUFnQkM7SUFDN0IsT0FBT1osV0FBVyxDQUFDRSxLQUFLO0FBQzVCIiwic291cmNlcyI6WyIvVXNlcnMvbmIyMzA2MDEvRG9jdW1lbnRzL3BoYXNlci1nYW1lZGV2L3NyYy9nYW1lL2dhbWVDb25maWcudHMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHR5cGUgR2FtZUNvZGUgPSAndm9jYWJfcmFjZScgfCAndHJhaW5fZ2FtZSc7XG5cbmV4cG9ydCB0eXBlIEdhbWVDb25maWcgPSB7XG4gICAgY29kZTogR2FtZUNvZGU7XG4gICAgbGFiZWw6IHN0cmluZztcbiAgICBtYXBLZXk6IHN0cmluZztcbiAgICBtYXBQYXRoOiBzdHJpbmc7XG4gICAgYXNzZXRSb290OiBzdHJpbmc7XG4gICAgYmFja2dyb3VuZENvbG9yOiBudW1iZXI7XG4gICAgdXNlVGV4dHVyZVBhdGg6IGJvb2xlYW47XG59O1xuXG5jb25zdCBnYW1lQ29uZmlnczogUmVjb3JkPEdhbWVDb2RlLCBHYW1lQ29uZmlnPiA9IHtcbiAgICB2b2NhYl9yYWNlOiB7XG4gICAgICAgIGNvZGU6ICd2b2NhYl9yYWNlJyxcbiAgICAgICAgbGFiZWw6ICdUb3dlcicsXG4gICAgICAgIG1hcEtleTogJ2JnLXRvd2VyJyxcbiAgICAgICAgbWFwUGF0aDogJ21hcHMvYmcgMi5wbmcnLFxuICAgICAgICBhc3NldFJvb3Q6ICdnYW1lcy90b3dlcicsXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogMHgzZmIzZTgsXG4gICAgICAgIHVzZVRleHR1cmVQYXRoOiB0cnVlXG4gICAgfSxcbiAgICB0cmFpbl9nYW1lOiB7XG4gICAgICAgIGNvZGU6ICd0cmFpbl9nYW1lJyxcbiAgICAgICAgbGFiZWw6ICdO4buRaSDEkHXDtGkgWGUgTOG7rWEnLFxuICAgICAgICBtYXBLZXk6ICdiZy10cmFpbicsXG4gICAgICAgIG1hcFBhdGg6ICdiYWNrZ3JvdW5kIGNvcHkgMi5wbmcnLFxuICAgICAgICBhc3NldFJvb3Q6ICdnYW1lcy90cmFpbicsXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogMHhmNTllMGIsXG4gICAgICAgIHVzZVRleHR1cmVQYXRoOiBmYWxzZVxuICAgIH1cbn07XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX0dBTUVfQ09ERTogR2FtZUNvZGUgPSAndm9jYWJfcmFjZSc7XG5cbmV4cG9ydCBmdW5jdGlvbiByZXNvbHZlR2FtZUNvZGUocmF3Pzogc3RyaW5nIHwgbnVsbCk6IEdhbWVDb2RlIHtcbiAgICBpZiAoIXJhdykgcmV0dXJuIERFRkFVTFRfR0FNRV9DT0RFO1xuXG4gICAgaWYgKHJhdyA9PT0gJ3Rvd2VyJykgcmV0dXJuICd2b2NhYl9yYWNlJztcbiAgICBpZiAocmF3ID09PSAndG93bicpIHJldHVybiAndm9jYWJfcmFjZSc7XG4gICAgaWYgKHJhdyA9PT0gJ3RyYWluJykgcmV0dXJuICd0cmFpbl9nYW1lJztcblxuICAgIHJldHVybiAocmF3IGluIGdhbWVDb25maWdzID8gcmF3IDogREVGQVVMVF9HQU1FX0NPREUpIGFzIEdhbWVDb2RlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0R2FtZUNvbmZpZyhyYXc/OiBzdHJpbmcgfCBudWxsKTogR2FtZUNvbmZpZyB7XG4gICAgY29uc3QgY29kZSA9IHJlc29sdmVHYW1lQ29kZShyYXcpO1xuICAgIHJldHVybiBnYW1lQ29uZmlnc1tjb2RlXTtcbn1cbiJdLCJuYW1lcyI6WyJnYW1lQ29uZmlncyIsInZvY2FiX3JhY2UiLCJjb2RlIiwibGFiZWwiLCJtYXBLZXkiLCJtYXBQYXRoIiwiYXNzZXRSb290IiwiYmFja2dyb3VuZENvbG9yIiwidXNlVGV4dHVyZVBhdGgiLCJ0cmFpbl9nYW1lIiwiREVGQVVMVF9HQU1FX0NPREUiLCJyZXNvbHZlR2FtZUNvZGUiLCJyYXciLCJnZXRHYW1lQ29uZmlnIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/game/gameConfig.ts\n");

/***/ }),

/***/ "(pages-dir-node)/./src/game/main.ts":
/*!**************************!*\
  !*** ./src/game/main.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _scenes_Boot__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./scenes/Boot */ \"(pages-dir-node)/./src/game/scenes/Boot.ts\");\n/* harmony import */ var _scenes_GameOver__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./scenes/GameOver */ \"(pages-dir-node)/./src/game/scenes/GameOver.ts\");\n/* harmony import */ var _scenes_Game__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./scenes/Game */ \"(pages-dir-node)/./src/game/scenes/Game.ts\");\n/* harmony import */ var _scenes_TrainGame__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./scenes/TrainGame */ \"(pages-dir-node)/./src/game/scenes/TrainGame.ts\");\n/* harmony import */ var _scenes_MainMenu__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./scenes/MainMenu */ \"(pages-dir-node)/./src/game/scenes/MainMenu.ts\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _scenes_Preloader__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./scenes/Preloader */ \"(pages-dir-node)/./src/game/scenes/Preloader.ts\");\n/* harmony import */ var _gameConfig__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./gameConfig */ \"(pages-dir-node)/./src/game/gameConfig.ts\");\n\n\n\n\n\n\n\n\n//  Find out more information about the Game Config at:\n//  https://newdocs.phaser.io/docs/3.70.0/Phaser.Types.Core.GameConfig\nconst config = {\n    type: phaser__WEBPACK_IMPORTED_MODULE_5__.AUTO,\n    parent: 'game-container',\n    backgroundColor: '#3fb3e8',\n    scale: {\n        mode: (phaser__WEBPACK_IMPORTED_MODULE_5___default().Scale).FIT,\n        autoCenter: (phaser__WEBPACK_IMPORTED_MODULE_5___default().Scale).CENTER_BOTH,\n        width: 720,\n        height: 1280\n    },\n    scene: [\n        _scenes_Boot__WEBPACK_IMPORTED_MODULE_0__.Boot,\n        _scenes_Preloader__WEBPACK_IMPORTED_MODULE_6__.Preloader,\n        _scenes_MainMenu__WEBPACK_IMPORTED_MODULE_4__.MainMenu,\n        _scenes_Game__WEBPACK_IMPORTED_MODULE_2__.Game,\n        _scenes_TrainGame__WEBPACK_IMPORTED_MODULE_3__.TrainGame,\n        _scenes_GameOver__WEBPACK_IMPORTED_MODULE_1__.GameOver\n    ]\n};\nconst StartGame = (parent, options)=>{\n    const gameCode = (0,_gameConfig__WEBPACK_IMPORTED_MODULE_7__.resolveGameCode)(options?.gameCode ?? _gameConfig__WEBPACK_IMPORTED_MODULE_7__.DEFAULT_GAME_CODE);\n    return new phaser__WEBPACK_IMPORTED_MODULE_5__.Game({\n        ...config,\n        parent,\n        callbacks: {\n            preBoot: (game)=>{\n                game.registry.set('gameCode', gameCode);\n            }\n        }\n    });\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (StartGame);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9nYW1lL21haW4udHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFxQztBQUNRO0FBQ0k7QUFDRjtBQUNGO0FBQ0Q7QUFDRztBQUNtQjtBQUVsRSx1REFBdUQ7QUFDdkQsc0VBQXNFO0FBQ3RFLE1BQU1XLFNBQXVDO0lBQ3pDQyxNQUFNTCx3Q0FBSUE7SUFDVk0sUUFBUTtJQUNSQyxpQkFBaUI7SUFDakJDLE9BQU87UUFDSEMsTUFBTVYscURBQVksQ0FBQ1ksR0FBRztRQUN0QkMsWUFBWWIscURBQVksQ0FBQ2MsV0FBVztRQUNwQ0MsT0FBTztRQUNQQyxRQUFRO0lBQ1o7SUFDQUMsT0FBTztRQUNIdkIsOENBQUlBO1FBQ0pRLHdEQUFTQTtRQUNUSCxzREFBUUE7UUFDUkYsOENBQVFBO1FBQ1JDLHdEQUFTQTtRQUNUSCxzREFBUUE7S0FDWDtBQUNMO0FBTUEsTUFBTXVCLFlBQVksQ0FBQ1gsUUFBZ0JZO0lBQy9CLE1BQU1DLFdBQVdoQiw0REFBZUEsQ0FBQ2UsU0FBU0MsWUFBWWpCLDBEQUFpQkE7SUFFdkUsT0FBTyxJQUFJUCx3Q0FBSUEsQ0FBQztRQUNaLEdBQUdTLE1BQU07UUFDVEU7UUFDQWMsV0FBVztZQUNQQyxTQUFTLENBQUNDO2dCQUNOQSxLQUFLQyxRQUFRLENBQUNDLEdBQUcsQ0FBQyxZQUFZTDtZQUNsQztRQUNKO0lBQ0o7QUFFSjtBQUVBLGlFQUFlRixTQUFTQSxFQUFDIiwic291cmNlcyI6WyIvVXNlcnMvbmIyMzA2MDEvRG9jdW1lbnRzL3BoYXNlci1nYW1lZGV2L3NyYy9nYW1lL21haW4udHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQm9vdCB9IGZyb20gJy4vc2NlbmVzL0Jvb3QnO1xuaW1wb3J0IHsgR2FtZU92ZXIgfSBmcm9tICcuL3NjZW5lcy9HYW1lT3Zlcic7XG5pbXBvcnQgeyBHYW1lIGFzIE1haW5HYW1lIH0gZnJvbSAnLi9zY2VuZXMvR2FtZSc7XG5pbXBvcnQgeyBUcmFpbkdhbWUgfSBmcm9tICcuL3NjZW5lcy9UcmFpbkdhbWUnO1xuaW1wb3J0IHsgTWFpbk1lbnUgfSBmcm9tICcuL3NjZW5lcy9NYWluTWVudSc7XG5pbXBvcnQgUGhhc2VyLCB7IEFVVE8sIEdhbWUgfSBmcm9tICdwaGFzZXInO1xuaW1wb3J0IHsgUHJlbG9hZGVyIH0gZnJvbSAnLi9zY2VuZXMvUHJlbG9hZGVyJztcbmltcG9ydCB7IERFRkFVTFRfR0FNRV9DT0RFLCByZXNvbHZlR2FtZUNvZGUgfSBmcm9tICcuL2dhbWVDb25maWcnO1xuXG4vLyAgRmluZCBvdXQgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgR2FtZSBDb25maWcgYXQ6XG4vLyAgaHR0cHM6Ly9uZXdkb2NzLnBoYXNlci5pby9kb2NzLzMuNzAuMC9QaGFzZXIuVHlwZXMuQ29yZS5HYW1lQ29uZmlnXG5jb25zdCBjb25maWc6IFBoYXNlci5UeXBlcy5Db3JlLkdhbWVDb25maWcgPSB7XG4gICAgdHlwZTogQVVUTyxcbiAgICBwYXJlbnQ6ICdnYW1lLWNvbnRhaW5lcicsXG4gICAgYmFja2dyb3VuZENvbG9yOiAnIzNmYjNlOCcsXG4gICAgc2NhbGU6IHtcbiAgICAgICAgbW9kZTogUGhhc2VyLlNjYWxlLkZJVCxcbiAgICAgICAgYXV0b0NlbnRlcjogUGhhc2VyLlNjYWxlLkNFTlRFUl9CT1RILFxuICAgICAgICB3aWR0aDogNzIwLFxuICAgICAgICBoZWlnaHQ6IDEyODBcbiAgICB9LFxuICAgIHNjZW5lOiBbXG4gICAgICAgIEJvb3QsXG4gICAgICAgIFByZWxvYWRlcixcbiAgICAgICAgTWFpbk1lbnUsXG4gICAgICAgIE1haW5HYW1lLFxuICAgICAgICBUcmFpbkdhbWUsXG4gICAgICAgIEdhbWVPdmVyXG4gICAgXVxufTtcblxudHlwZSBTdGFydEdhbWVPcHRpb25zID0ge1xuICAgIGdhbWVDb2RlPzogc3RyaW5nIHwgbnVsbDtcbn07XG5cbmNvbnN0IFN0YXJ0R2FtZSA9IChwYXJlbnQ6IHN0cmluZywgb3B0aW9ucz86IFN0YXJ0R2FtZU9wdGlvbnMpID0+IHtcbiAgICBjb25zdCBnYW1lQ29kZSA9IHJlc29sdmVHYW1lQ29kZShvcHRpb25zPy5nYW1lQ29kZSA/PyBERUZBVUxUX0dBTUVfQ09ERSk7XG5cbiAgICByZXR1cm4gbmV3IEdhbWUoe1xuICAgICAgICAuLi5jb25maWcsXG4gICAgICAgIHBhcmVudCxcbiAgICAgICAgY2FsbGJhY2tzOiB7XG4gICAgICAgICAgICBwcmVCb290OiAoZ2FtZSkgPT4ge1xuICAgICAgICAgICAgICAgIGdhbWUucmVnaXN0cnkuc2V0KCdnYW1lQ29kZScsIGdhbWVDb2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuXG59XG5cbmV4cG9ydCBkZWZhdWx0IFN0YXJ0R2FtZTtcbiJdLCJuYW1lcyI6WyJCb290IiwiR2FtZU92ZXIiLCJHYW1lIiwiTWFpbkdhbWUiLCJUcmFpbkdhbWUiLCJNYWluTWVudSIsIlBoYXNlciIsIkFVVE8iLCJQcmVsb2FkZXIiLCJERUZBVUxUX0dBTUVfQ09ERSIsInJlc29sdmVHYW1lQ29kZSIsImNvbmZpZyIsInR5cGUiLCJwYXJlbnQiLCJiYWNrZ3JvdW5kQ29sb3IiLCJzY2FsZSIsIm1vZGUiLCJTY2FsZSIsIkZJVCIsImF1dG9DZW50ZXIiLCJDRU5URVJfQk9USCIsIndpZHRoIiwiaGVpZ2h0Iiwic2NlbmUiLCJTdGFydEdhbWUiLCJvcHRpb25zIiwiZ2FtZUNvZGUiLCJjYWxsYmFja3MiLCJwcmVCb290IiwiZ2FtZSIsInJlZ2lzdHJ5Iiwic2V0Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/game/main.ts\n");

/***/ }),

/***/ "(pages-dir-node)/./src/game/objects/EmoteCharacter.ts":
/*!********************************************!*\
  !*** ./src/game/objects/EmoteCharacter.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EmoteCharacter: () => (/* binding */ EmoteCharacter)\n/* harmony export */ });\n/**\n * EmoteCharacter - Nhân vật robot từ emotes spritesheet\n *\n * 3 trạng thái:\n * - idle: Robot bình thường (frame 0)\n * - correct: Robot vui mừng (frame 1)\n * - incorrect: Robot tức giận (frame 2)\n *\n * File: emotes/emo.png - chứa 3 nhân vật theo chiều ngang\n */ class EmoteCharacter {\n    constructor(scene, x, y){\n        // State\n        this.currentState = 'idle';\n        this.isFlipped = false;\n        // Config\n        this.spriteScale = 0.16;\n        this.shadowAlpha = 0.3;\n        this.jumpScale = 0.36;\n        this.scene = scene;\n        // Create container\n        this.container = scene.add.container(x, y);\n        // Shadow (rendered first = behind)\n        this.shadowSprite = scene.add.ellipse(0, 60, 120, 30, 0x000000, this.shadowAlpha);\n        this.container.add(this.shadowSprite);\n        // Character image - dùng 1 trong 3 file riêng biệt\n        // Mặc định load idle\n        this.characterSprite = scene.add.sprite(0, 0, 'emote-tran-idle');\n        this.characterSprite.setScale(this.spriteScale);\n        this.container.add(this.characterSprite);\n    }\n    /**\n     * Get container for positioning\n     */ getContainer() {\n        return this.container;\n    }\n    /**\n     * Get x position\n     */ get x() {\n        return this.container.x;\n    }\n    /**\n     * Get y position\n     */ get y() {\n        return this.container.y;\n    }\n    /**\n     * Set position\n     */ setPosition(x, y) {\n        this.container.setPosition(x, y);\n    }\n    /**\n     * Set trạng thái nhân vật\n     */ setState(state) {\n        this.currentState = state;\n        // Đổi texture theo state\n        const idleTexture = this.isFlipped ? 'emote-tran-idle-flipped' : 'emote-tran-idle';\n        const correctTexture = this.isFlipped ? 'emote-tran-correct-flipped' : 'emote-tran-correct';\n        const incorrectTexture = this.isFlipped ? 'emote-tran-incorrect-flipped' : 'emote-tran-incorrect';\n        const textureMap = {\n            'idle': idleTexture,\n            'correct': correctTexture,\n            'incorrect': incorrectTexture\n        };\n        this.characterSprite.anims?.stop();\n        this.characterSprite.setScale(this.spriteScale);\n        this.characterSprite.setTexture(textureMap[state]);\n        this.characterSprite.setFlipX(false);\n    }\n    /**\n     * Get current state\n     */ getState() {\n        return this.currentState;\n    }\n    /**\n     * Flip character direction\n     */ flip(faceRight) {\n        this.isFlipped = !faceRight;\n        if (this.currentState === 'idle') {\n            this.setState('idle');\n            return;\n        }\n        this.setState(this.currentState);\n    }\n    /**\n     * Jump to a target position with animation\n     */ jumpTo(targetX, targetY, duration = 600) {\n        return new Promise((resolve)=>{\n            if (this.stateResetTimer) {\n                this.stateResetTimer.remove(false);\n                this.stateResetTimer = undefined;\n            }\n            this.scene.tweens.killTweensOf(this.characterSprite);\n            // Determine direction\n            const movingRight = targetX > this.container.x;\n            const shouldFlipX = !movingRight;\n            if (shouldFlipX !== this.isFlipped) {\n                this.flip(movingRight);\n            }\n            // Switch to jump spritesheet animation\n            this.characterSprite.anims?.stop();\n            this.characterSprite.setTexture('character');\n            this.characterSprite.setScale(this.jumpScale);\n            this.characterSprite.setFlipX(this.isFlipped);\n            this.characterSprite.y = 0;\n            this.characterSprite.play('tran-jump', true);\n            // Hide shadow during jump\n            this.scene.tweens.add({\n                targets: this.shadowSprite,\n                alpha: 0,\n                scaleX: 0.5,\n                scaleY: 0.5,\n                duration: duration * 0.3\n            });\n            // Main jump movement (parabolic arc)\n            const startX = this.container.x;\n            const startY = this.container.y;\n            const distance = Phaser.Math.Distance.Between(startX, startY, targetX, targetY);\n            const jumpHeight = Phaser.Math.Clamp(distance * 0.35, 80, 180);\n            this.scene.tweens.add({\n                targets: this.container,\n                x: targetX,\n                duration: duration,\n                ease: 'Sine.easeInOut',\n                onUpdate: (tween)=>{\n                    const t = tween.progress;\n                    const baseY = Phaser.Math.Linear(startY, targetY, t);\n                    const arcY = Math.sin(Math.PI * t) * jumpHeight;\n                    this.container.y = baseY - arcY;\n                },\n                onComplete: ()=>{\n                    this.scene.tweens.killTweensOf(this.characterSprite);\n                    this.characterSprite.setScale(this.spriteScale);\n                    this.characterSprite.anims?.stop();\n                    this.setState('idle');\n                    resolve();\n                }\n            });\n            // Squash/stretch + vertical arc for jump feel\n            this.scene.tweens.add({\n                targets: this.characterSprite,\n                scaleX: this.jumpScale * 0.95,\n                scaleY: this.jumpScale * 1.08,\n                duration: duration * 0.5,\n                yoyo: true,\n                ease: 'Sine.easeInOut'\n            });\n            this.characterSprite.y = 0;\n            // Shadow reappears at end\n            this.scene.tweens.add({\n                targets: this.shadowSprite,\n                alpha: this.shadowAlpha,\n                scaleX: 1,\n                scaleY: 1,\n                duration: duration * 0.3,\n                delay: duration * 0.7\n            });\n        });\n    }\n    /**\n     * Idle animation (subtle breathing effect)\n     */ playIdle() {\n        this.scene.tweens.add({\n            targets: this.characterSprite,\n            y: -10,\n            duration: 800,\n            yoyo: true,\n            repeat: -1,\n            ease: 'Sine.easeInOut'\n        });\n    }\n    /**\n     * Stop idle animation\n     */ stopIdle() {\n        this.scene.tweens.killTweensOf(this.characterSprite);\n        this.characterSprite.y = 0;\n    }\n    /**\n     * Show \"correct\" state temporarily then return to idle\n     */ showCorrect(duration = 1000) {\n        if (this.stateResetTimer) {\n            this.stateResetTimer.remove(false);\n            this.stateResetTimer = undefined;\n        }\n        this.setState('correct');\n        // Pop effect\n        this.scene.tweens.add({\n            targets: this.characterSprite,\n            scale: this.spriteScale * 1.2,\n            duration: 200,\n            yoyo: true\n        });\n        // Return to idle after delay\n        this.stateResetTimer = this.scene.time.delayedCall(duration, ()=>{\n            this.setState('idle');\n            this.stateResetTimer = undefined;\n        });\n    }\n    /**\n     * Show \"incorrect\" state temporarily then return to idle\n     */ showIncorrect(duration = 1000) {\n        if (this.stateResetTimer) {\n            this.stateResetTimer.remove(false);\n            this.stateResetTimer = undefined;\n        }\n        this.setState('incorrect');\n        // Shake effect\n        this.scene.tweens.add({\n            targets: this.container,\n            x: this.container.x + 5,\n            duration: 50,\n            yoyo: true,\n            repeat: 5\n        });\n        // Return to idle after delay\n        this.stateResetTimer = this.scene.time.delayedCall(duration, ()=>{\n            this.setState('idle');\n            this.stateResetTimer = undefined;\n        });\n    }\n    /**\n     * Check if currently jumping (based on active tweens)\n     */ isJumping() {\n        return this.scene.tweens.getTweensOf(this.container).length > 0;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9nYW1lL29iamVjdHMvRW1vdGVDaGFyYWN0ZXIudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUVBOzs7Ozs7Ozs7Q0FTQyxHQUNNLE1BQU1BO0lBaUJULFlBQVlDLEtBQVksRUFBRUMsQ0FBUyxFQUFFQyxDQUFTLENBQzlDO1FBVkEsUUFBUTthQUNBQyxlQUFpRDthQUNqREMsWUFBcUI7UUFFN0IsU0FBUzthQUNRQyxjQUFjO2FBQ2RDLGNBQWM7YUFDZEMsWUFBWTtRQUl6QixJQUFJLENBQUNQLEtBQUssR0FBR0E7UUFFYixtQkFBbUI7UUFDbkIsSUFBSSxDQUFDUSxTQUFTLEdBQUdSLE1BQU1TLEdBQUcsQ0FBQ0QsU0FBUyxDQUFDUCxHQUFHQztRQUV4QyxtQ0FBbUM7UUFDbkMsSUFBSSxDQUFDUSxZQUFZLEdBQUdWLE1BQU1TLEdBQUcsQ0FBQ0UsT0FBTyxDQUFDLEdBQUcsSUFBSSxLQUFLLElBQUksVUFBVSxJQUFJLENBQUNMLFdBQVc7UUFDaEYsSUFBSSxDQUFDRSxTQUFTLENBQUNDLEdBQUcsQ0FBQyxJQUFJLENBQUNDLFlBQVk7UUFFcEMsbURBQW1EO1FBQ25ELHFCQUFxQjtRQUNyQixJQUFJLENBQUNFLGVBQWUsR0FBR1osTUFBTVMsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxHQUFHO1FBQzlDLElBQUksQ0FBQ0QsZUFBZSxDQUFDRSxRQUFRLENBQUMsSUFBSSxDQUFDVCxXQUFXO1FBQzlDLElBQUksQ0FBQ0csU0FBUyxDQUFDQyxHQUFHLENBQUMsSUFBSSxDQUFDRyxlQUFlO0lBQzNDO0lBRUE7O0tBRUMsR0FDREcsZUFDQTtRQUNJLE9BQU8sSUFBSSxDQUFDUCxTQUFTO0lBQ3pCO0lBRUE7O0tBRUMsR0FDRCxJQUFJUCxJQUNKO1FBQ0ksT0FBTyxJQUFJLENBQUNPLFNBQVMsQ0FBQ1AsQ0FBQztJQUMzQjtJQUVBOztLQUVDLEdBQ0QsSUFBSUMsSUFDSjtRQUNJLE9BQU8sSUFBSSxDQUFDTSxTQUFTLENBQUNOLENB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O1FBRUEsNkJBQTZCO1FBQzdCLElBQUksQ0FBQ2hDLGVBQWUsR0FBRyxJQUFJLENBQUNwQyxLQUFLLENBQUMyRSxJQUFJLENBQUNDLFdBQVcsQ0FBQzNDLFVBQVU7WUFDekQsSUFBSSxDQUFDaEIsUUFBUSxDQUFDO1lBQ2QsSUFBSSxDQUFDbUIsZUFBZSxHQUFHRTtRQUMzQjtJQUNKO0lBRUE7O0tBRUMsR0FDRHVDLGNBQWM1QyxXQUFtQixJQUFJLEVBQ3JDO1FBQ0ksSUFBSSxJQUFJLENBQUNHLGVBQWUsRUFBRTtZQUN0QixJQUFJLENBQUNBLGVBQWUsQ0FBQ0MsTUFBTSxDQUFDO1lBQzVCLElBQUksQ0FBQ0QsZUFBZSxHQUFHRTtRQUMzQjtRQUNBLElBQUksQ0FBQ3JCLFFBQVEsQ0FBQztRQUVkLGVBQWU7UUFDZixJQUFJLENBQUNqQixLQUFLLENBQUN1QyxNQUFNLENBQUM5QixHQUFHLENBQUM7WUFDbEJtQyxTQUFTLElBQUksQ0FBQ3BDLFNBQVM7WUFDdkJQLEdBQUcsSUFBSSxDQUFDTyxTQUFTLENBQUNQLENBQUMsR0FBRztZQUN0QmdDLFVBQVU7WUFDVm1DLE1BQU07WUFDTkcsUUFBUTtRQUNaO1FBRUEsNkJBQTZCO1FBQzdCLElBQUksQ0FBQ25DLGVBQWUsR0FBRyxJQUFJLENBQUNwQyxLQUFLLENBQUMyRSxJQUFJLENBQUNDLFdBQVcsQ0FBQzNDLFVBQVU7WUFDekQsSUFBSSxDQUFDaEIsUUFBUSxDQUFDO1lBQ2QsSUFBSSxDQUFDbUIsZUFBZSxHQUFHRTtRQUMzQjtJQUNKO0lBRUE7O0tBRUMsR0FDRHdDLFlBQ0E7UUFDSSxPQUFPLElBQUksQ0FBQzlFLEtBQUssQ0FBQ3VDLE1BQU0sQ0FBQ3dDLFdBQVcsQ0FBQyxJQUFJLENBQUN2RSxTQUFTLEVBQUV3RSxNQUFNLEdBQUc7SUFDbEU7QUFDSiIsInNvdXJjZXMiOlsiL1VzZXJzL25iMjMwNjAxL0RvY3VtZW50cy9waGFzZXItZ2FtZWRldi9zcmMvZ2FtZS9vYmplY3RzL0Vtb3RlQ2hhcmFjdGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdhbWVPYmplY3RzLCBTY2VuZSB9IGZyb20gJ3BoYXNlcic7XG5cbi8qKlxuICogRW1vdGVDaGFyYWN0ZXIgLSBOaMOibiB24bqtdCByb2JvdCB04burIGVtb3RlcyBzcHJpdGVzaGVldFxuICpcbiAqIDMgdHLhuqFuZyB0aMOhaTpcbiAqIC0gaWRsZTogUm9ib3QgYsOsbmggdGjGsOG7nW5nIChmcmFtZSAwKVxuICogLSBjb3JyZWN0OiBSb2JvdCB2dWkgbeG7q25nIChmcmFtZSAxKVxuICogLSBpbmNvcnJlY3Q6IFJvYm90IHThu6ljIGdp4bqtbiAoZnJhbWUgMilcbiAqXG4gKiBGaWxlOiBlbW90ZXMvZW1vLnBuZyAtIGNo4bupYSAzIG5ow6JuIHbhuq10IHRoZW8gY2hp4buBdSBuZ2FuZ1xuICovXG5leHBvcnQgY2xhc3MgRW1vdGVDaGFyYWN0ZXJcbntcbiAgICBwcml2YXRlIHNjZW5lOiBTY2VuZTtcbiAgICBwcml2YXRlIGNvbnRhaW5lcjogR2FtZU9iamVjdHMuQ29udGFpbmVyO1xuICAgIHByaXZhdGUgY2hhcmFjdGVyU3ByaXRlOiBHYW1lT2JqZWN0cy5TcHJpdGU7XG4gICAgcHJpdmF0ZSBzaGFkb3dTcHJpdGU6IEdhbWVPYmplY3RzLkVsbGlwc2U7XG4gICAgcHJpdmF0ZSBzdGF0ZVJlc2V0VGltZXI/OiBQaGFzZXIuVGltZS5UaW1lckV2ZW50O1xuXG4gICAgLy8gU3RhdGVcbiAgICBwcml2YXRlIGN1cnJlbnRTdGF0ZTogJ2lkbGUnIHwgJ2NvcnJlY3QnIHwgJ2luY29ycmVjdCcgPSAnaWRsZSc7XG4gICAgcHJpdmF0ZSBpc0ZsaXBwZWQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgIC8vIENvbmZpZ1xuICAgIHByaXZhdGUgcmVhZG9ubHkgc3ByaXRlU2NhbGUgPSAwLjE2O1xuICAgIHByaXZhdGUgcmVhZG9ubHkgc2hhZG93QWxwaGEgPSAwLjM7XG4gICAgcHJpdmF0ZSByZWFkb25seSBqdW1wU2NhbGUgPSAwLjM2O1xuXG4gICAgY29uc3RydWN0b3Ioc2NlbmU6IFNjZW5lLCB4OiBudW1iZXIsIHk6IG51bWJlcilcbiAgICB7XG4gICAgICAgIHRoaXMuc2NlbmUgPSBzY2VuZTtcblxuICAgICAgICAvLyBDcmVhdGUgY29udGFpbmVyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gc2NlbmUuYWRkLmNvbnRhaW5lcih4LCB5KTtcblxuICAgICAgICAvLyBTaGFkb3cgKHJlbmRlcmVkIGZpcnN0ID0gYmVoaW5kKVxuICAgICAgICB0aGlzLnNoYWRvd1Nwcml0ZSA9IHNjZW5lLmFkZC5lbGxpcHNlKDAsIDYwLCAxMjAsIDMwLCAweDAwMDAwMCwgdGhpcy5zaGFkb3dBbHBoYSk7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFkZCh0aGlzLnNoYWRvd1Nwcml0ZSk7XG5cbiAgICAgICAgLy8gQ2hhcmFjdGVyIGltYWdlIC0gZMO5bmcgMSB0cm9uZyAzIGZpbGUgcmnDqm5nIGJp4buHdFxuICAgICAgICAvLyBN4bq3YyDEkeG7i25oIGxvYWQgaWRsZVxuICAgICAgICB0aGlzLmNoYXJhY3RlclNwcml0ZSA9IHNjZW5lLmFkZC5zcHJpdGUoMCwgMCwgJ2Vtb3RlLXRyYW4taWRsZScpO1xuICAgICAgICB0aGlzLmNoYXJhY3RlclNwcml0ZS5zZXRTY2FsZSh0aGlzLnNwcml0ZVNjYWxlKTtcbiAgICAgICAgdGhpcy5jb250YWluZXIuYWRkKHRoaXMuY2hhcmFjdGVyU3ByaXRlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgY29udGFpbmVyIGZvciBwb3NpdGlvbmluZ1xuICAgICAqL1xuICAgIGdldENvbnRhaW5lcigpOiBHYW1lT2JqZWN0cy5Db250YWluZXJcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRhaW5lcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgeCBwb3NpdGlvblxuICAgICAqL1xuICAgIGdldCB4KCk6IG51bWJlclxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGFpbmVyLng7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHkgcG9zaXRpb25cbiAgICAgKi9cbiAgICBnZXQgeSgpOiBudW1iZXJcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRhaW5lci55O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCBwb3NpdGlvblxuICAgICAqL1xuICAgIHNldFBvc2l0aW9uKHg6IG51bWJlciwgeTogbnVtYmVyKTogdm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5jb250YWluZXIuc2V0UG9zaXRpb24oeCwgeSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHRy4bqhbmcgdGjDoWkgbmjDom4gduG6rXRcbiAgICAgKi9cbiAgICBzZXRTdGF0ZShzdGF0ZTogJ2lkbGUnIHwgJ2NvcnJlY3QnIHwgJ2luY29ycmVjdCcpOiB2b2lkXG4gICAge1xuICAgICAgICB0aGlzLmN1cnJlbnRTdGF0ZSA9IHN0YXRlO1xuXG4gICAgICAgIC8vIMSQ4buVaSB0ZXh0dXJlIHRoZW8gc3RhdGVcbiAgICAgICAgY29uc3QgaWRsZVRleHR1cmUgPSB0aGlzLmlzRmxpcHBlZCA/ICdlbW90ZS10cmFuLWlkbGUtZmxpcHBlZCcgOiAnZW1vdGUtdHJhbi1pZGxlJztcbiAgICAgICAgY29uc3QgY29ycmVjdFRleHR1cmUgPSB0aGlzLmlzRmxpcHBlZCA/ICdlbW90ZS10cmFuLWNvcnJlY3QtZmxpcHBlZCcgOiAnZW1vdGUtdHJhbi1jb3JyZWN0JztcbiAgICAgICAgY29uc3QgaW5jb3JyZWN0VGV4dHVyZSA9IHRoaXMuaXNGbGlwcGVkID8gJ2Vtb3RlLXRyYW4taW5jb3JyZWN0LWZsaXBwZWQnIDogJ2Vtb3RlLXRyYW4taW5jb3JyZWN0JztcbiAgICAgICAgY29uc3QgdGV4dHVyZU1hcCA9IHtcbiAgICAgICAgICAgICdpZGxlJzogaWRsZVRleHR1cmUsXG4gICAgICAgICAgICAnY29ycmVjdCc6IGNvcnJlY3RUZXh0dXJlLFxuICAgICAgICAgICAgJ2luY29ycmVjdCc6IGluY29ycmVjdFRleHR1cmVcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5jaGFyYWN0ZXJTcHJpdGUuYW5pbXM/LnN0b3AoKTtcbiAgICAgICAgdGhpcy5jaGFyYWN0ZXJTcHJpdGUuc2V0U2NhbGUodGhpcy5zcHJpdGVTY2FsZSk7XG4gICAgICAgIHRoaXMuY2hhcmFjdGVyU3ByaXRlLnNldFRleHR1cmUodGV4dHVyZU1hcFtzdGF0ZV0pO1xuICAgICAgICB0aGlzLmNoYXJhY3RlclNwcml0ZS5zZXRGbGlwWChmYWxzZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGN1cnJlbnQgc3RhdGVcbiAgICAgKi9cbiAgICBnZXRTdGF0ZSgpOiAnaWRsZScgfCAnY29ycmVjdCcgfCAnaW5jb3JyZWN0J1xuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFN0YXRlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZsaXAgY2hhcmFjdGVyIGRpcmVjdGlvblxuICAgICAqL1xuICAgIGZsaXAoZmFjZVJpZ2h0OiBib29sZWFuKTogdm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5pc0ZsaXBwZWQgPSAhZmFjZVJpZ2h0O1xuICAgICAgICBpZiAodGhpcy5jdXJyZW50U3RhdGUgPT09ICdpZGxlJykge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSgnaWRsZScpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0U3RhdGUodGhpcy5jdXJyZW50U3RhdGUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEp1bXAgdG8gYSB0YXJnZXQgcG9zaXRpb24gd2l0aCBhbmltYXRpb25cbiAgICAgKi9cbiAgICBqdW1wVG8odGFyZ2V0WDogbnVtYmVyLCB0YXJnZXRZOiBudW1iZXIsIGR1cmF0aW9uOiBudW1iZXIgPSA2MDApOiBQcm9taXNlPHZvaWQ+XG4gICAge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlUmVzZXRUaW1lcikge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVSZXNldFRpbWVyLnJlbW92ZShmYWxzZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZVJlc2V0VGltZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNjZW5lLnR3ZWVucy5raWxsVHdlZW5zT2YodGhpcy5jaGFyYWN0ZXJTcHJpdGUpO1xuICAgICAgICAgICAgLy8gRGV0ZXJtaW5lIGRpcmVjdGlvblxuICAgICAgICAgICAgY29uc3QgbW92aW5nUmlnaHQgPSB0YXJnZXRYID4gdGhpcy5jb250YWluZXIueDtcbiAgICAgICAgICAgIGNvbnN0IHNob3VsZEZsaXBYID0gIW1vdmluZ1JpZ2h0O1xuICAgICAgICAgICAgaWYgKHNob3VsZEZsaXBYICE9PSB0aGlzLmlzRmxpcHBlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZmxpcChtb3ZpbmdSaWdodCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFN3aXRjaCB0byBqdW1wIHNwcml0ZXNoZWV0IGFuaW1hdGlvblxuICAgICAgICAgICAgdGhpcy5jaGFyYWN0ZXJTcHJpdGUuYW5pbXM/LnN0b3AoKTtcbiAgICAgICAgICAgIHRoaXMuY2hhcmFjdGVyU3ByaXRlLnNldFRleHR1cmUoJ2NoYXJhY3RlcicpO1xuICAgICAgICAgICAgdGhpcy5jaGFyYWN0ZXJTcHJpdGUuc2V0U2NhbGUodGhpcy5qdW1wU2NhbGUpO1xuICAgICAgICAgICAgdGhpcy5jaGFyYWN0ZXJTcHJpdGUuc2V0RmxpcFgodGhpcy5pc0ZsaXBwZWQpO1xuICAgICAgICAgICAgdGhpcy5jaGFyYWN0ZXJTcHJpdGUueSA9IDA7XG4gICAgICAgICAgICB0aGlzLmNoYXJhY3RlclNwcml0ZS5wbGF5KCd0cmFuLWp1bXAnLCB0cnVlKTtcblxuICAgICAgICAgICAgLy8gSGlkZSBzaGFkb3cgZHVyaW5nIGp1bXBcbiAgICAgICAgICAgIHRoaXMuc2NlbmUudHdlZW5zLmFkZCh7XG4gICAgICAgICAgICAgICAgdGFyZ2V0czogdGhpcy5zaGFkb3dTcHJpdGUsXG4gICAgICAgICAgICAgICAgYWxwaGE6IDAsXG4gICAgICAgICAgICAgICAgc2NhbGVYOiAwLjUsXG4gICAgICAgICAgICAgICAgc2NhbGVZOiAwLjUsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IGR1cmF0aW9uICogMC4zXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gTWFpbiBqdW1wIG1vdmVtZW50IChwYXJhYm9saWMgYXJjKVxuICAgICAgICAgICAgY29uc3Qgc3RhcnRYID0gdGhpcy5jb250YWluZXIueDtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0WSA9IHRoaXMuY29udGFpbmVyLnk7XG4gICAgICAgICAgICBjb25zdCBkaXN0YW5jZSA9IFBoYXNlci5NYXRoLkRpc3RhbmNlLkJldHdlZW4oc3RhcnRYLCBzdGFydFksIHRhcmdldFgsIHRhcmdldFkpO1xuICAgICAgICAgICAgY29uc3QganVtcEhlaWdodCA9IFBoYXNlci5NYXRoLkNsYW1wKGRpc3RhbmNlICogMC4zNSwgODAsIDE4MCk7XG5cbiAgICAgICAgICAgIHRoaXMuc2NlbmUudHdlZW5zLmFkZCh7XG4gICAgICAgICAgICAgICAgdGFyZ2V0czogdGhpcy5jb250YWluZXIsXG4gICAgICAgICAgICAgICAgeDogdGFyZ2V0WCxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogZHVyYXRpb24sXG4gICAgICAgICAgICAgICAgZWFzZTogJ1NpbmUuZWFzZUluT3V0JyxcbiAgICAgICAgICAgICAgICBvblVwZGF0ZTogKHR3ZWVuKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0d2Vlbi5wcm9ncmVzcztcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmFzZVkgPSBQaGFzZXIuTWF0aC5MaW5lYXIoc3RhcnRZLCB0YXJnZXRZLCB0KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXJjWSA9IE1hdGguc2luKE1hdGguUEkgKiB0KSAqIGp1bXBIZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLnkgPSBiYXNlWSAtIGFyY1k7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUudHdlZW5zLmtpbGxUd2VlbnNPZih0aGlzLmNoYXJhY3RlclNwcml0ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhcmFjdGVyU3ByaXRlLnNldFNjYWxlKHRoaXMuc3ByaXRlU2NhbGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYXJhY3RlclNwcml0ZS5hbmltcz8uc3RvcCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKCdpZGxlJyk7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gU3F1YXNoL3N0cmV0Y2ggKyB2ZXJ0aWNhbCBhcmMgZm9yIGp1bXAgZmVlbFxuICAgICAgICAgICAgdGhpcy5zY2VuZS50d2VlbnMuYWRkKHtcbiAgICAgICAgICAgICAgICB0YXJnZXRzOiB0aGlzLmNoYXJhY3RlclNwcml0ZSxcbiAgICAgICAgICAgICAgICBzY2FsZVg6IHRoaXMuanVtcFNjYWxlICogMC45NSxcbiAgICAgICAgICAgICAgICBzY2FsZVk6IHRoaXMuanVtcFNjYWxlICogMS4wOCxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogZHVyYXRpb24gKiAwLjUsXG4gICAgICAgICAgICAgICAgeW95bzogdHJ1ZSxcbiAgICAgICAgICAgICAgICBlYXNlOiAnU2luZS5lYXNlSW5PdXQnXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5jaGFyYWN0ZXJTcHJpdGUueSA9IDA7XG5cblxuICAgICAgICAgICAgLy8gU2hhZG93IHJlYXBwZWFycyBhdCBlbmRcbiAgICAgICAgICAgIHRoaXMuc2NlbmUudHdlZW5zLmFkZCh7XG4gICAgICAgICAgICAgICAgdGFyZ2V0czogdGhpcy5zaGFkb3dTcHJpdGUsXG4gICAgICAgICAgICAgICAgYWxwaGE6IHRoaXMuc2hhZG93QWxwaGEsXG4gICAgICAgICAgICAgICAgc2NhbGVYOiAxLFxuICAgICAgICAgICAgICAgIHNjYWxlWTogMSxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogZHVyYXRpb24gKiAwLjMsXG4gICAgICAgICAgICAgICAgZGVsYXk6IGR1cmF0aW9uICogMC43XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSWRsZSBhbmltYXRpb24gKHN1YnRsZSBicmVhdGhpbmcgZWZmZWN0KVxuICAgICAqL1xuICAgIHBsYXlJZGxlKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMuc2NlbmUudHdlZW5zLmFkZCh7XG4gICAgICAgICAgICB0YXJnZXRzOiB0aGlzLmNoYXJhY3RlclNwcml0ZSxcbiAgICAgICAgICAgIHk6IC0xMCxcbiAgICAgICAgICAgIGR1cmF0aW9uOiA4MDAsXG4gICAgICAgICAgICB5b3lvOiB0cnVlLFxuICAgICAgICAgICAgcmVwZWF0OiAtMSxcbiAgICAgICAgICAgIGVhc2U6ICdTaW5lLmVhc2VJbk91dCdcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU3RvcCBpZGxlIGFuaW1hdGlvblxuICAgICAqL1xuICAgIHN0b3BJZGxlKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMuc2NlbmUudHdlZW5zLmtpbGxUd2VlbnNPZih0aGlzLmNoYXJhY3RlclNwcml0ZSk7XG4gICAgICAgIHRoaXMuY2hhcmFjdGVyU3ByaXRlLnkgPSAwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNob3cgXCJjb3JyZWN0XCIgc3RhdGUgdGVtcG9yYXJpbHkgdGhlbiByZXR1cm4gdG8gaWRsZVxuICAgICAqL1xuICAgIHNob3dDb3JyZWN0KGR1cmF0aW9uOiBudW1iZXIgPSAxMDAwKTogdm9pZFxuICAgIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGVSZXNldFRpbWVyKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlUmVzZXRUaW1lci5yZW1vdmUoZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZVJlc2V0VGltZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSgnY29ycmVjdCcpO1xuXG4gICAgICAgIC8vIFBvcCBlZmZlY3RcbiAgICAgICAgdGhpcy5zY2VuZS50d2VlbnMuYWRkKHtcbiAgICAgICAgICAgIHRhcmdldHM6IHRoaXMuY2hhcmFjdGVyU3ByaXRlLFxuICAgICAgICAgICAgc2NhbGU6IHRoaXMuc3ByaXRlU2NhbGUgKiAxLjIsXG4gICAgICAgICAgICBkdXJhdGlvbjogMjAwLFxuICAgICAgICAgICAgeW95bzogdHJ1ZVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBSZXR1cm4gdG8gaWRsZSBhZnRlciBkZWxheVxuICAgICAgICB0aGlzLnN0YXRlUmVzZXRUaW1lciA9IHRoaXMuc2NlbmUudGltZS5kZWxheWVkQ2FsbChkdXJhdGlvbiwgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSgnaWRsZScpO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZVJlc2V0VGltZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNob3cgXCJpbmNvcnJlY3RcIiBzdGF0ZSB0ZW1wb3JhcmlseSB0aGVuIHJldHVybiB0byBpZGxlXG4gICAgICovXG4gICAgc2hvd0luY29ycmVjdChkdXJhdGlvbjogbnVtYmVyID0gMTAwMCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlUmVzZXRUaW1lcikge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZVJlc2V0VGltZXIucmVtb3ZlKGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGVSZXNldFRpbWVyID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoJ2luY29ycmVjdCcpO1xuXG4gICAgICAgIC8vIFNoYWtlIGVmZmVjdFxuICAgICAgICB0aGlzLnNjZW5lLnR3ZWVucy5hZGQoe1xuICAgICAgICAgICAgdGFyZ2V0czogdGhpcy5jb250YWluZXIsXG4gICAgICAgICAgICB4OiB0aGlzLmNvbnRhaW5lci54ICsgNSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiA1MCxcbiAgICAgICAgICAgIHlveW86IHRydWUsXG4gICAgICAgICAgICByZXBlYXQ6IDVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gUmV0dXJuIHRvIGlkbGUgYWZ0ZXIgZGVsYXlcbiAgICAgICAgdGhpcy5zdGF0ZVJlc2V0VGltZXIgPSB0aGlzLnNjZW5lLnRpbWUuZGVsYXllZENhbGwoZHVyYXRpb24sICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoJ2lkbGUnKTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGVSZXNldFRpbWVyID0gdW5kZWZpbmVkO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiBjdXJyZW50bHkganVtcGluZyAoYmFzZWQgb24gYWN0aXZlIHR3ZWVucylcbiAgICAgKi9cbiAgICBpc0p1bXBpbmcoKTogYm9vbGVhblxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NlbmUudHdlZW5zLmdldFR3ZWVuc09mKHRoaXMuY29udGFpbmVyKS5sZW5ndGggPiAwO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJFbW90ZUNoYXJhY3RlciIsInNjZW5lIiwieCIsInkiLCJjdXJyZW50U3RhdGUiLCJpc0ZsaXBwZWQiLCJzcHJpdGVTY2FsZSIsInNoYWRvd0FscGhhIiwianVtcFNjYWxlIiwiY29udGFpbmVyIiwiYWRkIiwic2hhZG93U3ByaXRlIiwiZWxsaXBzZSIsImNoYXJhY3RlclNwcml0ZSIsInNwcml0ZSIsInNldFNjYWxlIiwiZ2V0Q29udGFpbmVyIiwic2V0UG9zaXRpb24iLCJzZXRTdGF0ZSIsInN0YXRlIiwiaWRsZVRleHR1cmUiLCJjb3JyZWN0VGV4dHVyZSIsImluY29ycmVjdFRleHR1cmUiLCJ0ZXh0dXJlTWFwIiwiYW5pbXMiLCJzdG9wIiwic2V0VGV4dHVyZSIsInNldEZsaXBYIiwiZ2V0U3RhdGUiLCJmbGlwIiwiZmFjZVJpZ2h0IiwianVtcFRvIiwidGFyZ2V0WCIsInRhcmdldFkiLCJkdXJhdGlvbiIsIlByb21pc2UiLCJyZXNvbHZlIiwic3RhdGVSZXNldFRpbWVyIiwicmVtb3ZlIiwidW5kZWZpbmVkIiwidHdlZW5zIiwia2lsbFR3ZWVuc09mIiwibW92aW5nUmlnaHQiLCJzaG91bGRGbGlwWCIsInBsYXkiLCJ0YXJnZXRzIiwiYWxwaGEiLCJzY2FsZVgiLCJzY2FsZVkiLCJzdGFydFgiLCJzdGFydFkiLCJkaXN0YW5jZSIsIlBoYXNlciIsIk1hdGgiLCJEaXN0YW5jZSIsIkJldHdlZW4iLCJqdW1wSGVpZ2h0IiwiQ2xhbXAiLCJlYXNlIiwib25VcGRhdGUiLCJ0d2VlbiIsInQiLCJwcm9ncmVzcyIsImJhc2VZIiwiTGluZWFyIiwiYXJjWSIsInNpbiIsIlBJIiwib25Db21wbGV0ZSIsInlveW8iLCJkZWxheSIsInBsYXlJZGxlIiwicmVwZWF0Iiwic3RvcElkbGUiLCJzaG93Q29ycmVjdCIsInNjYWxlIiwidGltZSIsImRlbGF5ZWRDYWxsIiwic2hvd0luY29ycmVjdCIsImlzSnVtcGluZyIsImdldFR3ZWVuc09mIiwibGVuZ3RoIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/game/objects/EmoteCharacter.ts\n");

/***/ }),

/***/ "(pages-dir-node)/./src/game/scenes/Boot.ts":
/*!*********************************!*\
  !*** ./src/game/scenes/Boot.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Boot: () => (/* binding */ Boot)\n/* harmony export */ });\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _gameConfig__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../gameConfig */ \"(pages-dir-node)/./src/game/gameConfig.ts\");\n\n\n/**\n * Boot Scene - Stage 1: Load minimal assets for Preloader UI\n *\n * Strategy: Two-stage loading\n * - Stage 1 (Boot): Load only assets needed for loading screen\n * - Stage 2 (Preloader): Load all game assets with progress bar\n *\n * Benefits:\n * - Fast initial feedback\n * - Visual progress indication\n * - Better perceived performance\n */ class Boot extends phaser__WEBPACK_IMPORTED_MODULE_0__.Scene {\n    constructor(){\n        super('Boot');\n    }\n    preload() {\n        const gameCode = this.registry.get('gameCode');\n        const gameConfig = (0,_gameConfig__WEBPACK_IMPORTED_MODULE_1__.getGameConfig)(gameCode);\n        const assetRoot = gameConfig.assetRoot;\n        // Ensure assets resolve from site root even on /game/* routes\n        this.load.setPath('/assets');\n        // Load only minimal assets needed for Preloader UI\n        // These should be small file sizes as there's no progress bar yet\n        if (gameConfig.code === 'train_game') {\n            // Train assets don't include layered backgrounds; reuse the same image.\n            const loaderBg = `${assetRoot}/background.png`;\n            this.load.image('bg-1', loaderBg);\n            this.load.image('bg-2', loaderBg);\n            this.load.image('bg-3', loaderBg);\n            this.load.image('bg-4', loaderBg);\n            this.load.image('bg-5', loaderBg);\n            this.load.image('bg-6', loaderBg);\n            // Logo for branding during load\n            this.load.image('logo', `${assetRoot}/background.png`);\n        } else {\n            // Parallax background layers for loader\n            this.load.image('bg-1', `${assetRoot}/backgrounds/1.png`);\n            this.load.image('bg-2', `${assetRoot}/backgrounds/2.png`);\n            this.load.image('bg-3', `${assetRoot}/backgrounds/3.png`);\n            this.load.image('bg-4', `${assetRoot}/backgrounds/4.png`);\n            this.load.image('bg-5', `${assetRoot}/backgrounds/5.png`);\n            this.load.image('bg-6', `${assetRoot}/backgrounds/6.png`);\n            // Logo for branding during load\n            this.load.image('logo', `${assetRoot}/ui/logo.png`);\n        }\n    }\n    create() {\n        // Transition to Preloader to load main game assets\n        this.scene.start('Preloader');\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9nYW1lL3NjZW5lcy9Cb290LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBK0I7QUFDZTtBQUU5Qzs7Ozs7Ozs7Ozs7Q0FXQyxHQUNNLE1BQU1FLGFBQWFGLHlDQUFLQTtJQUUzQixhQUNBO1FBQ0ksS0FBSyxDQUFDO0lBQ1Y7SUFFQUcsVUFDQTtRQUNJLE1BQU1DLFdBQVcsSUFBSSxDQUFDQyxRQUFRLENBQUNDLEdBQUcsQ0FBQztRQUNuQyxNQUFNQyxhQUFhTiwwREFBYUEsQ0FBQ0c7UUFDakMsTUFBTUksWUFBWUQsV0FBV0MsU0FBUztRQUV0Qyw4REFBOEQ7UUFDOUQsSUFBSSxDQUFDQyxJQUFJLENBQUNDLE9BQU8sQ0FBQztRQUVsQixtREFBbUQ7UUFDbkQsa0VBQWtFO1FBRWxFLElBQUlILFdBQVdJLElBQUksS0FBSyxjQUFjO1lBQ2xDLHdFQUF3RTtZQUN4RSxNQUFNQyxXQUFXLEdBQUdKLFVBQVUsZUFBZSxDQUFDO1lBQzlDLElBQUksQ0FBQ0MsSUFBSSxDQUFDSSxLQUFLLENBQUMsUUFBUUQ7WUFDeEIsSUFBSSxDQUFDSCxJQUFJLENBQUNJLEtBQUssQ0FBQyxRQUFRRDtZQUN4QixJQUFJLENBQUNILElBQUksQ0FBQ0ksS0FBSyxDQUFDLFFBQVFEO1lBQ3hCLElBQUksQ0FBQ0gsSUFBSSxDQUFDSSxLQUFLLENBQUMsUUFBUUQ7WUFDeEIsSUFBSSxDQUFDSCxJQUFJLENBQUNJLEtBQUssQ0FBQyxRQUFRRDtZQUN4QixJQUFJLENBQUNILElBQUksQ0FBQ0ksS0FBSyxDQUFDLFFBQVFEO1lBRXhCLGdDQUFnQztZQUNoQyxJQUFJLENBQUNILElBQUksQ0FBQ0ksS0FBSyxDQUFDLFFBQVEsR0FBR0wsVUFBVSxlQUFlLENBQUM7UUFDekQsT0FBTztZQUNILHdDQUF3QztZQUN4QyxJQUFJLENBQUNDLElBQUksQ0FBQ0ksS0FBSyxDQUFDLFFBQVEsR0FBR0wsVUFBVSxrQkFBa0IsQ0FBQztZQUN4RCxJQUFJLENBQUNDLElBQUksQ0FBQ0ksS0FBSyxDQUFDLFFBQVEsR0FBR0wsVUFBVSxrQkFBa0IsQ0FBQztZQUN4RCxJQUFJLENBQUNDLElBQUksQ0FBQ0ksS0FBSyxDQUFDLFFBQVEsR0FBR0wsVUFBVSxrQkFBa0IsQ0FBQztZQUN4RCxJQUFJLENBQUNDLElBQUksQ0FBQ0ksS0FBSyxDQUFDLFFBQVEsR0FBR0wsVUFBVSxrQkFBa0IsQ0FBQztZQUN4RCxJQUFJLENBQUNDLElBQUksQ0FBQ0ksS0FBSyxDQUFDLFFBQVEsR0FBR0wsVUFBVSxrQkFBa0IsQ0FBQztZQUN4RCxJQUFJLENBQUNDLElBQUksQ0FBQ0ksS0FBSyxDQUFDLFFBQVEsR0FBR0wsVUFBVSxrQkFBa0IsQ0FBQztZQUV4RCxnQ0FBZ0M7WUFDaEMsSUFBSSxDQUFDQyxJQUFJLENBQUNJLEtBQUssQ0FBQyxRQUFRLEdBQUdMLFVBQVUsWUFBWSxDQUFDO1FBQ3REO0lBQ0o7SUFFQU0sU0FDQTtRQUNJLG1EQUFtRDtRQUNuRCxJQUFJLENBQUNDLEtBQUssQ0FBQ0MsS0FBSyxDQUFDO0lBQ3JCO0FBQ0oiLCJzb3VyY2VzIjpbIi9Vc2Vycy9uYjIzMDYwMS9Eb2N1bWVudHMvcGhhc2VyLWdhbWVkZXYvc3JjL2dhbWUvc2NlbmVzL0Jvb3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU2NlbmUgfSBmcm9tICdwaGFzZXInO1xuaW1wb3J0IHsgZ2V0R2FtZUNvbmZpZyB9IGZyb20gJy4uL2dhbWVDb25maWcnO1xuXG4vKipcbiAqIEJvb3QgU2NlbmUgLSBTdGFnZSAxOiBMb2FkIG1pbmltYWwgYXNzZXRzIGZvciBQcmVsb2FkZXIgVUlcbiAqXG4gKiBTdHJhdGVneTogVHdvLXN0YWdlIGxvYWRpbmdcbiAqIC0gU3RhZ2UgMSAoQm9vdCk6IExvYWQgb25seSBhc3NldHMgbmVlZGVkIGZvciBsb2FkaW5nIHNjcmVlblxuICogLSBTdGFnZSAyIChQcmVsb2FkZXIpOiBMb2FkIGFsbCBnYW1lIGFzc2V0cyB3aXRoIHByb2dyZXNzIGJhclxuICpcbiAqIEJlbmVmaXRzOlxuICogLSBGYXN0IGluaXRpYWwgZmVlZGJhY2tcbiAqIC0gVmlzdWFsIHByb2dyZXNzIGluZGljYXRpb25cbiAqIC0gQmV0dGVyIHBlcmNlaXZlZCBwZXJmb3JtYW5jZVxuICovXG5leHBvcnQgY2xhc3MgQm9vdCBleHRlbmRzIFNjZW5lXG57XG4gICAgY29uc3RydWN0b3IgKClcbiAgICB7XG4gICAgICAgIHN1cGVyKCdCb290Jyk7XG4gICAgfVxuXG4gICAgcHJlbG9hZCAoKVxuICAgIHtcbiAgICAgICAgY29uc3QgZ2FtZUNvZGUgPSB0aGlzLnJlZ2lzdHJ5LmdldCgnZ2FtZUNvZGUnKSBhcyBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgICAgIGNvbnN0IGdhbWVDb25maWcgPSBnZXRHYW1lQ29uZmlnKGdhbWVDb2RlKTtcbiAgICAgICAgY29uc3QgYXNzZXRSb290ID0gZ2FtZUNvbmZpZy5hc3NldFJvb3Q7XG5cbiAgICAgICAgLy8gRW5zdXJlIGFzc2V0cyByZXNvbHZlIGZyb20gc2l0ZSByb290IGV2ZW4gb24gL2dhbWUvKiByb3V0ZXNcbiAgICAgICAgdGhpcy5sb2FkLnNldFBhdGgoJy9hc3NldHMnKTtcblxuICAgICAgICAvLyBMb2FkIG9ubHkgbWluaW1hbCBhc3NldHMgbmVlZGVkIGZvciBQcmVsb2FkZXIgVUlcbiAgICAgICAgLy8gVGhlc2Ugc2hvdWxkIGJlIHNtYWxsIGZpbGUgc2l6ZXMgYXMgdGhlcmUncyBubyBwcm9ncmVzcyBiYXIgeWV0XG5cbiAgICAgICAgaWYgKGdhbWVDb25maWcuY29kZSA9PT0gJ3RyYWluX2dhbWUnKSB7XG4gICAgICAgICAgICAvLyBUcmFpbiBhc3NldHMgZG9uJ3QgaW5jbHVkZSBsYXllcmVkIGJhY2tncm91bmRzOyByZXVzZSB0aGUgc2FtZSBpbWFnZS5cbiAgICAgICAgICAgIGNvbnN0IGxvYWRlckJnID0gYCR7YXNzZXRSb290fS9iYWNrZ3JvdW5kLnBuZ2A7XG4gICAgICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ2JnLTEnLCBsb2FkZXJCZyk7XG4gICAgICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ2JnLTInLCBsb2FkZXJCZyk7XG4gICAgICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ2JnLTMnLCBsb2FkZXJCZyk7XG4gICAgICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ2JnLTQnLCBsb2FkZXJCZyk7XG4gICAgICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ2JnLTUnLCBsb2FkZXJCZyk7XG4gICAgICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ2JnLTYnLCBsb2FkZXJCZyk7XG5cbiAgICAgICAgICAgIC8vIExvZ28gZm9yIGJyYW5kaW5nIGR1cmluZyBsb2FkXG4gICAgICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ2xvZ28nLCBgJHthc3NldFJvb3R9L2JhY2tncm91bmQucG5nYCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBQYXJhbGxheCBiYWNrZ3JvdW5kIGxheWVycyBmb3IgbG9hZGVyXG4gICAgICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ2JnLTEnLCBgJHthc3NldFJvb3R9L2JhY2tncm91bmRzLzEucG5nYCk7XG4gICAgICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ2JnLTInLCBgJHthc3NldFJvb3R9L2JhY2tncm91bmRzLzIucG5nYCk7XG4gICAgICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ2JnLTMnLCBgJHthc3NldFJvb3R9L2JhY2tncm91bmRzLzMucG5nYCk7XG4gICAgICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ2JnLTQnLCBgJHthc3NldFJvb3R9L2JhY2tncm91bmRzLzQucG5nYCk7XG4gICAgICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ2JnLTUnLCBgJHthc3NldFJvb3R9L2JhY2tncm91bmRzLzUucG5nYCk7XG4gICAgICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ2JnLTYnLCBgJHthc3NldFJvb3R9L2JhY2tncm91bmRzLzYucG5nYCk7XG5cbiAgICAgICAgICAgIC8vIExvZ28gZm9yIGJyYW5kaW5nIGR1cmluZyBsb2FkXG4gICAgICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ2xvZ28nLCBgJHthc3NldFJvb3R9L3VpL2xvZ28ucG5nYCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjcmVhdGUgKClcbiAgICB7XG4gICAgICAgIC8vIFRyYW5zaXRpb24gdG8gUHJlbG9hZGVyIHRvIGxvYWQgbWFpbiBnYW1lIGFzc2V0c1xuICAgICAgICB0aGlzLnNjZW5lLnN0YXJ0KCdQcmVsb2FkZXInKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiU2NlbmUiLCJnZXRHYW1lQ29uZmlnIiwiQm9vdCIsInByZWxvYWQiLCJnYW1lQ29kZSIsInJlZ2lzdHJ5IiwiZ2V0IiwiZ2FtZUNvbmZpZyIsImFzc2V0Um9vdCIsImxvYWQiLCJzZXRQYXRoIiwiY29kZSIsImxvYWRlckJnIiwiaW1hZ2UiLCJjcmVhdGUiLCJzY2VuZSIsInN0YXJ0Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/game/scenes/Boot.ts\n");

/***/ }),

/***/ "(pages-dir-node)/./src/game/scenes/Game.ts":
/*!*********************************!*\
  !*** ./src/game/scenes/Game.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Game: () => (/* binding */ Game)\n/* harmony export */ });\n/* harmony import */ var _EventBus__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../EventBus */ \"(pages-dir-node)/./src/game/EventBus.ts\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _objects_EmoteCharacter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../objects/EmoteCharacter */ \"(pages-dir-node)/./src/game/objects/EmoteCharacter.ts\");\n/* harmony import */ var _gameConfig__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../gameConfig */ \"(pages-dir-node)/./src/game/gameConfig.ts\");\n/* harmony import */ var _ui_QuizPanel__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../ui/QuizPanel */ \"(pages-dir-node)/./src/game/ui/QuizPanel.ts\");\n\n\n\n\n\nclass Game extends phaser__WEBPACK_IMPORTED_MODULE_1__.Scene {\n    constructor(){\n        super('Game'), this.quizPanelWidth = 0, this.quizPanelHeight = 0, this.uiScale = 1, this.safeInsetBottom = 16, this.quizFeedbackState = 'idle', this.quizOptionButtons = [], this.quizOpen = false, this.quizLocked = false, this.quizCurrentIndex = 0, this.startModalOpen = false, this.gameCompleted = false, this.gameOver = false, this.totalTimeMs = 180000, this.jumpDurationMs = 900, // Game State\n        this.score = 0, this.currentLeafIndex = 0, this.sessionId = null, this.sessionGameId = null, this.sessionQuestions = null, this.sessionTimeLimit = null, this.questionSourceLogged = false, this.gameCode = 'vocab_race', this.gameConfig = (0,_gameConfig__WEBPACK_IMPORTED_MODULE_3__.getGameConfig)('vocab_race'), // Leaf path (detected from track texture)\n        this.leafPath = [], // Fallback zig-zag config\n        this.leafStartY = 940, this.leafStepY = 140, this.leafSideOffset = 180;\n    }\n    init(data) {\n        this.gameCode = (0,_gameConfig__WEBPACK_IMPORTED_MODULE_3__.resolveGameCode)(data?.gameCode ?? this.registry.get('gameCode'));\n        this.registry.set('gameCode', this.gameCode);\n        this.gameConfig = (0,_gameConfig__WEBPACK_IMPORTED_MODULE_3__.getGameConfig)(this.gameCode);\n        this.sessionId = data?.sessionId ?? null;\n        this.sessionGameId = data?.gameId ?? null;\n        this.sessionQuestions = data?.questions ?? null;\n        this.sessionTimeLimit = data?.timeLimit ?? null;\n    }\n    create() {\n        const { width, height } = this.scale;\n        this.camera = this.cameras.main;\n        // Parallax background\n        this.createParallaxBackground();\n        // Track (Leaves) - Use bg-main as the scrolling map\n        this.trackImage = this.add.image(width / 2, height, this.gameConfig.mapKey).setOrigin(0.5, 1);\n        const trackScale = width / this.trackImage.width;\n        this.trackImage.setScale(trackScale);\n        const mapTop = this.trackImage.y - this.trackImage.displayHeight;\n        this.camera.setBounds(0, mapTop, width, this.trackImage.displayHeight);\n        // Build leaf path based on the map texture\n        this.leafPath = this.gameConfig.useTexturePath ? this.buildLeafPath(this.gameConfig.mapKey) : [];\n        // Player Setup - Using EmoteCharacter (idle/correct/incorrect states)\n        const startPos = this.getLeafPosition(0);\n        this.player = new _objects_EmoteCharacter__WEBPACK_IMPORTED_MODULE_2__.EmoteCharacter(this, startPos.x, startPos.y);\n        this.currentLeafIndex = 0;\n        const nextPos = this.getLeafPosition(this.currentLeafIndex + 1);\n        this.player.flip(nextPos.x > startPos.x);\n        // Start idle animation\n        this.player.playIdle();\n        // Initial Camera Position\n        this.camera.scrollY = startPos.y - 900;\n        // UI camera (fixed screen-space)\n        this.uiCamera = this.cameras.add(0, 0, width, height);\n        this.uiCamera.setScroll(0, 0);\n        this.uiCamera.ignore(this.children.list);\n        // UI\n        this.createUI();\n        if (this.sessionTimeLimit && this.sessionTimeLimit > 0) {\n            this.totalTimeMs = this.sessionTimeLimit * 1000;\n        }\n        _EventBus__WEBPACK_IMPORTED_MODULE_0__.EventBus.emit('current-scene-ready', this);\n    }\n    createParallaxBackground() {\n        this.cameras.main.setBackgroundColor(this.gameConfig.backgroundColor);\n        this.parallaxLayers = [];\n    }\n    update() {\n        if (!this.parallaxLayers?.length) return;\n        const scrollY = this.camera.scrollY;\n        this.parallaxLayers.forEach((layer)=>{\n            const factor = layer.getData('scrollFactor');\n            const baseY = layer.getData('baseY');\n            layer.y = baseY + scrollY * factor;\n        });\n    }\n    createUI() {\n        const { width, height } = this.scale;\n        // Fixed UI Container\n        this.uiRoot = this.add.container(0, 0).setScrollFactor(0).setDepth(100);\n        // Timer + Score HUD\n        this.timerOverlay = this.add.container(0, 0).setScrollFactor(0).setDepth(2000);\n        // Back button\n        this.hudBackButton = this.add.container(0, 0);\n        const backBg = this.add.graphics();\n        backBg.fillStyle(0xffffff, 0.95);\n        backBg.fillRoundedRect(-24, -24, 48, 48, 14);\n        backBg.lineStyle(2, 0x0ea5e9, 0.2);\n        backBg.strokeRoundedRect(-24, -24, 48, 48, 14);\n        const backIcon = this.add.text(0, 1, '<', {\n            fontFamily: 'Arial Black',\n            fontSize: '28px',\n            color: '#0f172a'\n        }).setOrigin(0.5);\n        const backHit = this.add.zone(0, 0, 48, 48).setOrigin(0.5).setInteractive({\n            useHandCursor: true\n        });\n        backHit.on('pointerup', ()=>this.handleBackToGameList());\n        this.hudBackButton.add([\n            backBg,\n            backIcon\n        ]);\n        this.hudBackButton.setSize(48, 48);\n        this.hudBackButton.add(backHit);\n        // Points pill\n        this.hudPointsPill = this.add.container(0, 0);\n        const pointsBg = this.add.graphics();\n        const pointsW = 170;\n        const pointsH = 44;\n        pointsBg.fillStyle(0xe0f2fe, 0.98);\n        pointsBg.fillRoundedRect(-pointsW / 2, -pointsH / 2, pointsW, pointsH, 22);\n        pointsBg.lineStyle(2, 0x93c5fd, 0.7);\n        pointsBg.strokeRoundedRect(-pointsW / 2, -pointsH / 2, pointsW, pointsH, 22);\n        const star = this.add.image(-pointsW / 2 + 24, 0, 'star').setScale(0.32).setTint(0xfbbf24);\n        this.scoreText = this.add.text(-pointsW / 2 + 46, 0, 'POINTS: 00', {\n            fontFamily: 'Arial Black',\n            fontSize: '18px',\n            color: '#0f172a'\n        }).setOrigin(0, 0.5);\n        this.hudPointsPill.add([\n            pointsBg,\n            star,\n            this.scoreText\n        ]);\n        // Timer pill\n        this.hudTimerPill = this.add.container(0, 0);\n        const timerBg = this.add.graphics();\n        const timerW = 100;\n        const timerH = 40;\n        timerBg.fillStyle(0xdbeafe, 0.98);\n        timerBg.fillRoundedRect(-timerW / 2, -timerH / 2, timerW, timerH, 20);\n        timerBg.lineStyle(2, 0x60a5fa, 0.6);\n        timerBg.strokeRoundedRect(-timerW / 2, -timerH / 2, timerW, timerH, 20);\n        this.timerText = this.add.text(0, 0, '03:00', {\n            fontFamily: 'Arial Black',\n            fontSize: '18px',\n            color: '#0f172a'\n        }).setOrigin(0.5);\n        this.hudTimerPill.add([\n            timerBg,\n            this.timerText\n        ]);\n        // Hearts pill\n        this.hudHeartsPill = this.add.container(0, 0);\n        const heartsBg = this.add.graphics();\n        const heartsW = 92;\n        const heartsH = 36;\n        heartsBg.fillStyle(0xffffff, 0.98);\n        heartsBg.fillRoundedRect(-heartsW / 2, -heartsH / 2, heartsW, heartsH, 18);\n        heartsBg.lineStyle(2, 0x93c5fd, 0.35);\n        heartsBg.strokeRoundedRect(-heartsW / 2, -heartsH / 2, heartsW, heartsH, 18);\n        const heartsText = this.add.text(0, 0, '❤ ❤ ❤', {\n            fontFamily: 'Arial Black',\n            fontSize: '16px',\n            color: '#ef4444'\n        }).setOrigin(0.5);\n        this.hudHeartsPill.add([\n            heartsBg,\n            heartsText\n        ]);\n        this.timerOverlay.add([\n            this.hudBackButton,\n            this.hudPointsPill,\n            this.hudTimerPill,\n            this.hudHeartsPill\n        ]);\n        this.uiRoot.add(this.timerOverlay);\n        this.layoutHud();\n        // Jump Button\n        this.jumpButton = this.createJumpButton(width / 2, height - 150);\n        this.jumpButton.setScrollFactor(0);\n        this.uiRoot.add(this.jumpButton);\n        this.jumpButton.setVisible(false);\n        this.jumpButton.setActive(false);\n        this.setupJumpInput();\n        // Quiz Modal (UI overlay)\n        this.createQuizModal();\n        this.scale.on('resize', ()=>{\n            if (this.quizModal) this.layoutQuiz();\n            this.layoutHud();\n        });\n        // Start Modal (first screen)\n        this.createStartModal();\n        this.openStartModal();\n        // Ensure only UI camera renders UI\n        this.cameras.main.ignore([\n            this.uiRoot,\n            this.timerOverlay\n        ]);\n        // End Modal\n        this.createEndModal();\n        // Time Up Modal\n        this.createTimeUpModal();\n    }\n    layoutHud() {\n        if (!this.hudBackButton || !this.hudPointsPill || !this.hudTimerPill || !this.hudHeartsPill) return;\n        const { width, height } = this.scale;\n        const topInset = Math.max(20, Math.round(height * 0.03));\n        const sideInset = Math.max(16, Math.round(width * 0.045));\n        const gap = 10;\n        const heartsW = 92;\n        const timerW = 100;\n        this.hudBackButton.setPosition(sideInset + 24, topInset + 24);\n        this.hudPointsPill.setPosition(width / 2, topInset + 24);\n        const rightEdge = width - sideInset;\n        this.hudHeartsPill.setPosition(rightEdge - heartsW / 2, topInset + 24);\n        this.hudTimerPill.setPosition(rightEdge - heartsW - gap - timerW / 2, topInset + 24);\n    }\n    handleBackToGameList() {\n        window.location.href = '/';\n    }\n    createJumpButton(x, y) {\n        const container = this.add.container(x, y);\n        const width = 300;\n        const height = 100;\n        const bg = this.add.rectangle(0, 0, width, height, 0xfbbf24).setStrokeStyle(4, 0xffffff).setFillStyle(0x22c55e);\n        const text = this.add.text(0, 0, 'NEXT JUMP!', {\n            fontFamily: 'Arial Black',\n            fontSize: '32px',\n            color: '#ffffff'\n        }).setOrigin(0.5);\n        container.add([\n            bg,\n            text\n        ]);\n        container.setSize(width, height);\n        this.jumpButtonBg = bg;\n        const onPress = ()=>{\n            if (this.quizOpen || this.startModalOpen) return;\n            bg.setFillStyle(0x16a34a);\n            this.openQuizModal();\n        };\n        const onRelease = ()=>{\n            bg.setFillStyle(0x22c55e);\n        };\n        container.setInteractive(new Phaser.Geom.Rectangle(-width / 2, -height / 2, width, height), Phaser.Geom.Rectangle.Contains);\n        container.on('pointerdown', onPress);\n        container.on('pointerup', onRelease);\n        container.on('pointerout', onRelease);\n        // Add simple pulse tween\n        this.tweens.add({\n            targets: container,\n            scale: 1.05,\n            duration: 800,\n            yoyo: true,\n            repeat: -1\n        });\n        return container;\n    }\n    setupJumpInput() {\n        this.input.enabled = true;\n        if (this.input.mouse) this.input.mouse.enabled = true;\n        this.input.on('pointerdown', (pointer)=>{\n            if (this.quizOpen || this.startModalOpen) return;\n            const bounds = this.jumpButton.getBounds();\n            if (bounds.contains(pointer.x, pointer.y)) {\n                this.jumpButtonBg.setFillStyle(0x16a34a);\n                this.openQuizModal();\n            }\n        });\n        this.input.on('pointerup', ()=>{\n            this.jumpButtonBg.setFillStyle(0x22c55e);\n        });\n    }\n    createQuizModal() {\n        this.quizPanel = new _ui_QuizPanel__WEBPACK_IMPORTED_MODULE_4__.QuizPanel(this, {\n            optionCount: 4,\n            depth: 200,\n            parent: this.uiRoot,\n            showIndex: true\n        });\n        this.quizModal = this.quizPanel.container;\n        this.quizPanelContainer = this.quizPanel.panelContainer;\n        this.quizPanelShadow = this.quizPanel.panelShadow;\n        this.quizPanelBg = this.quizPanel.panelBg;\n        this.quizPanelGlow = this.quizPanel.panelGlow;\n        this.quizIndexText = this.quizPanel.indexText;\n        this.quizFeedbackTitleText = this.quizPanel.feedbackTitleText;\n        this.quizFeedbackSubtitleText = this.quizPanel.feedbackSubtitleText;\n        this.quizQuestionText = this.quizPanel.questionText;\n        this.quizOptionButtons = this.quizPanel.optionButtons;\n        this.quizPanel.onOptionSelected((index)=>{\n            if (!this.quizOpen || this.quizLocked) return;\n            this.handleQuizAnswer(index);\n        });\n        this.layoutQuiz();\n    }\n    createStartModal() {\n        const { width, height } = this.scale;\n        const container = this.add.container(0, 0).setScrollFactor(0).setDepth(220);\n        const overlay = this.add.rectangle(0, 0, width, height, 0x000000, 0.12).setOrigin(0, 0);\n        const panelWidth = Math.min(520, width - 80);\n        const panelHeight = 160;\n        const panelContainer = this.add.container(width / 2, Math.round(height * 0.58)).setScrollFactor(0);\n        const panelShadow = this.add.graphics();\n        panelShadow.fillStyle(0x000000, 0.15);\n        panelShadow.fillRoundedRect(-panelWidth / 2 + 6, -panelHeight / 2 + 10, panelWidth, panelHeight, 26);\n        const panelBg = this.add.graphics();\n        panelBg.fillStyle(0xffffff, 0.85);\n        panelBg.fillRoundedRect(-panelWidth / 2, -panelHeight / 2, panelWidth, panelHeight, 24);\n        panelBg.lineStyle(2, 0x93c5fd, 0.45);\n        panelBg.strokeRoundedRect(-panelWidth / 2, -panelHeight / 2, panelWidth, panelHeight, 24);\n        const title = this.add.text(0, -26, 'Help the robot cross the river.', {\n            fontFamily: 'Arial Black',\n            fontSize: '22px',\n            color: '#0f172a',\n            align: 'center',\n            wordWrap: {\n                width: panelWidth - 60,\n                useAdvancedWrap: true\n            }\n        }).setOrigin(0.5);\n        const button = this.createStartButton(0, 42);\n        panelContainer.add([\n            panelShadow,\n            panelBg,\n            title,\n            button\n        ]);\n        container.add([\n            overlay,\n            panelContainer\n        ]);\n        container.setVisible(false);\n        this.startModal = container;\n        if (this.uiRoot) this.uiRoot.add(container);\n    }\n    createEndModal() {\n        const { width, height } = this.scale;\n        const container = this.add.container(0, 0).setScrollFactor(0).setDepth(230);\n        const overlay = this.add.rectangle(0, 0, width, height, 0x000000, 0.6).setOrigin(0, 0);\n        const panelWidth = Math.min(520, width - 80);\n        const panelHeight = 220;\n        const panelContainer = this.add.container(width / 2, Math.round(height * 0.56)).setScrollFactor(0);\n        overlay.setDepth(0);\n        panelContainer.setDepth(1);\n        const blocker = this.add.zone(0, 0, width, height).setOrigin(0, 0);\n        blocker.setInteractive(new Phaser.Geom.Rectangle(0, 0, width, height), (shape, x, y)=>{\n            const panelBounds = panelContainer.getBounds();\n            if (Phaser.Geom.Rectangle.Contains(panelBounds, x, y)) return false;\n            return Phaser.Geom.Rectangle.Contains(shape, x, y);\n        });\n        blocker.on('pointerdown', ()=>{});\n        const panelShadow = this.add.graphics();\n        panelShadow.fillStyle(0x000000, 0.15);\n        panelShadow.fillRoundedRect(-panelWidth / 2 + 6, -panelHeight / 2 + 10, panelWidth, panelHeight, 26);\n        const panelBg = this.add.graphics();\n        panelBg.fillStyle(0xffffff, 0.85);\n        panelBg.fillRoundedRect(-panelWidth / 2, -panelHeight / 2, panelWidth, panelHeight, 24);\n        panelBg.lineStyle(2, 0x93c5fd, 0.45);\n        panelBg.strokeRoundedRect(-panelWidth / 2, -panelHeight / 2, panelWidth, panelHeight, 24);\n        const title = this.add.text(0, -64, 'Congratulations!', {\n            fontFamily: 'Arial Black',\n            fontSize: '22px',\n            color: '#0f172a'\n        }).setOrigin(0.5);\n        const subtitle = this.add.text(0, -36, 'You completed the run.', {\n            fontFamily: 'Arial',\n            fontSize: '18px',\n            color: '#0f172a',\n            align: 'center',\n            wordWrap: {\n                width: panelWidth - 60,\n                useAdvancedWrap: true\n            }\n        }).setOrigin(0.5);\n        const statsGap = 16;\n        const cardWidth = Math.min(200, Math.floor((panelWidth - 120) / 2));\n        const cardHeight = 46;\n        const statsY = 62;\n        const scoreCard = this.add.graphics();\n        scoreCard.fillStyle(0x93c5fd, 0.18);\n        scoreCard.fillRoundedRect(-cardWidth / 2, -cardHeight / 2, cardWidth, cardHeight, 16);\n        scoreCard.lineStyle(2, 0x93c5fd, 0.45);\n        scoreCard.strokeRoundedRect(-cardWidth / 2, -cardHeight / 2, cardWidth, cardHeight, 16);\n        const timeCard = this.add.graphics();\n        timeCard.fillStyle(0x93c5fd, 0.18);\n        timeCard.fillRoundedRect(-cardWidth / 2, -cardHeight / 2, cardWidth, cardHeight, 16);\n        timeCard.lineStyle(2, 0x93c5fd, 0.45);\n        timeCard.strokeRoundedRect(-cardWidth / 2, -cardHeight / 2, cardWidth, cardHeight, 16);\n        const scoreCardContainer = this.add.container(-cardWidth / 2 - statsGap / 2, statsY, [\n            scoreCard\n        ]);\n        const timeCardContainer = this.add.container(cardWidth / 2 + statsGap / 2, statsY, [\n            timeCard\n        ]);\n        const scoreLabel = this.add.text(scoreCardContainer.x, statsY - 16, 'SCORE', {\n            fontFamily: 'Arial Black',\n            fontSize: '12px',\n            color: '#1e3a8a'\n        }).setOrigin(0.5);\n        const timeLabel = this.add.text(timeCardContainer.x, statsY - 16, 'TIME', {\n            fontFamily: 'Arial Black',\n            fontSize: '12px',\n            color: '#1e3a8a'\n        }).setOrigin(0.5);\n        this.endModalScoreText = this.add.text(scoreCardContainer.x, statsY + 6, '0', {\n            fontFamily: 'Arial Black',\n            fontSize: '18px',\n            color: '#0f172a'\n        }).setOrigin(0.5);\n        this.endModalTimeText = this.add.text(timeCardContainer.x, statsY + 6, '00:00', {\n            fontFamily: 'Arial Black',\n            fontSize: '18px',\n            color: '#0f172a'\n        }).setOrigin(0.5);\n        const restartButton = this.createEndRestartButton(0, panelHeight / 2 + 56);\n        restartButton.setDepth(2);\n        panelContainer.add([\n            panelShadow,\n            panelBg,\n            title,\n            subtitle,\n            scoreCardContainer,\n            timeCardContainer,\n            scoreLabel,\n            timeLabel,\n            this.endModalScoreText,\n            this.endModalTimeText\n        ]);\n        panelContainer.add(restartButton);\n        container.add([\n            overlay,\n            blocker,\n            panelContainer\n        ]);\n        container.setVisible(false);\n        this.endModal = container;\n        this.endModal.setData('panel', panelContainer);\n        this.endModal.setData('overlay', overlay);\n        if (this.uiRoot) this.uiRoot.add(container);\n    }\n    createEndRestartButton(x, y) {\n        const container = this.add.container(x, y).setScrollFactor(0);\n        const width = 260;\n        const height = 52;\n        const radius = 20;\n        const shadow = this.add.graphics();\n        shadow.fillStyle(0x000000, 0.2);\n        shadow.fillRoundedRect(-width / 2 + 4, -height / 2 + 6, width, height, radius);\n        const bg = this.add.graphics();\n        const draw = (fill, stroke)=>{\n            bg.clear();\n            bg.fillStyle(fill, 1);\n            bg.fillRoundedRect(-width / 2, -height / 2, width, height, radius);\n            bg.lineStyle(2, stroke, 0.8);\n            bg.strokeRoundedRect(-width / 2, -height / 2, width, height, radius);\n        };\n        draw(0x3b82f6, 0x93c5fd);\n        const text = this.add.text(0, 0, 'Play Again', {\n            fontFamily: 'Arial Black',\n            fontSize: '20px',\n            color: '#ffffff'\n        }).setOrigin(0.5);\n        const hit = this.add.rectangle(0, 0, width, height, 0xffffff, 0.001);\n        hit.setInteractive();\n        container.add([\n            shadow,\n            bg,\n            text,\n            hit\n        ]);\n        container.setSize(width, height);\n        hit.on('pointerover', ()=>{\n            draw(0x2563eb, 0xbfdbfe);\n            this.tweens.add({\n                targets: container,\n                scale: 1.02,\n                duration: 120,\n                ease: 'Sine.easeOut'\n            });\n        });\n        hit.on('pointerout', ()=>{\n            draw(0x3b82f6, 0x93c5fd);\n            this.tweens.add({\n                targets: container,\n                scale: 1,\n                duration: 120,\n                ease: 'Sine.easeOut'\n            });\n        });\n        hit.on('pointerdown', ()=>{\n            draw(0x1d4ed8, 0xbfdbfe);\n            this.tweens.add({\n                targets: container,\n                scale: 0.98,\n                duration: 80,\n                ease: 'Sine.easeOut'\n            });\n            this.restartRun();\n        });\n        hit.on('pointerup', ()=>{\n            draw(0x2563eb, 0xbfdbfe);\n            this.tweens.add({\n                targets: container,\n                scale: 1.02,\n                duration: 80,\n                ease: 'Sine.easeOut'\n            });\n        });\n        return container;\n    }\n    createTimeUpModal() {\n        const { width, height } = this.scale;\n        const container = this.add.container(0, 0).setScrollFactor(0).setDepth(240);\n        const overlay = this.add.rectangle(0, 0, width, height, 0x000000, 0.12).setOrigin(0, 0);\n        const panelWidth = Math.min(520, width - 80);\n        const panelHeight = 160;\n        const panelContainer = this.add.container(width / 2, Math.round(height * 0.56)).setScrollFactor(0);\n        const panelShadow = this.add.graphics();\n        panelShadow.fillStyle(0x000000, 0.15);\n        panelShadow.fillRoundedRect(-panelWidth / 2 + 6, -panelHeight / 2 + 10, panelWidth, panelHeight, 26);\n        const panelBg = this.add.graphics();\n        panelBg.fillStyle(0xffffff, 0.85);\n        panelBg.fillRoundedRect(-panelWidth / 2, -panelHeight / 2, panelWidth, panelHeight, 24);\n        panelBg.lineStyle(2, 0x93c5fd, 0.45);\n        panelBg.strokeRoundedRect(-panelWidth / 2, -panelHeight / 2, panelWidth, panelHeight, 24);\n        const title = this.add.text(0, -26, 'Out of time! Failed', {\n            fontFamily: 'Arial Black',\n            fontSize: '22px',\n            color: '#0f172a'\n        }).setOrigin(0.5);\n        const restartButton = this.createRestartButton(0, 42);\n        panelContainer.add([\n            panelShadow,\n            panelBg,\n            title,\n            restartButton\n        ]);\n        container.add([\n            overlay,\n            panelContainer\n        ]);\n        container.setVisible(false);\n        this.timeUpModal = container;\n        this.timeUpModal.setData('panel', panelContainer);\n        if (this.uiRoot) this.uiRoot.add(container);\n    }\n    createRestartButton(x, y) {\n        const container = this.add.container(x, y).setScrollFactor(0);\n        const width = 260;\n        const height = 52;\n        const radius = 20;\n        const shadow = this.add.graphics();\n        shadow.fillStyle(0x000000, 0.2);\n        shadow.fillRoundedRect(-width / 2 + 4, -height / 2 + 6, width, height, radius);\n        const bg = this.add.graphics();\n        const draw = (fill, stroke)=>{\n            bg.clear();\n            bg.fillStyle(fill, 1);\n            bg.fillRoundedRect(-width / 2, -height / 2, width, height, radius);\n            bg.lineStyle(2, stroke, 0.8);\n            bg.strokeRoundedRect(-width / 2, -height / 2, width, height, radius);\n        };\n        draw(0x3b82f6, 0x93c5fd);\n        const text = this.add.text(0, 0, 'Continue', {\n            fontFamily: 'Arial Black',\n            fontSize: '20px',\n            color: '#ffffff'\n        }).setOrigin(0.5);\n        const hit = this.add.rectangle(0, 0, width, height, 0xffffff, 0.001);\n        hit.setInteractive();\n        container.add([\n            shadow,\n            bg,\n            text,\n            hit\n        ]);\n        container.setSize(width, height);\n        hit.on('pointerover', ()=>{\n            draw(0x2563eb, 0xbfdbfe);\n            this.tweens.add({\n                targets: container,\n                scale: 1.02,\n                duration: 120,\n                ease: 'Sine.easeOut'\n            });\n        });\n        hit.on('pointerout', ()=>{\n            draw(0x3b82f6, 0x93c5fd);\n            this.tweens.add({\n                targets: container,\n                scale: 1,\n                duration: 120,\n                ease: 'Sine.easeOut'\n            });\n        });\n        hit.on('pointerdown', ()=>{\n            draw(0x1d4ed8, 0xbfdbfe);\n            this.tweens.add({\n                targets: container,\n                scale: 0.98,\n                duration: 80,\n                ease: 'Sine.easeOut'\n            });\n            this.restartRun();\n        });\n        hit.on('pointerup', ()=>{\n            draw(0x2563eb, 0xbfdbfe);\n            this.tweens.add({\n                targets: container,\n                scale: 1.02,\n                duration: 80,\n                ease: 'Sine.easeOut'\n            });\n        });\n        return container;\n    }\n    createStartButton(x, y) {\n        const container = this.add.container(x, y).setScrollFactor(0);\n        const width = 260;\n        const height = 52;\n        const radius = 20;\n        const shadow = this.add.graphics();\n        shadow.fillStyle(0x000000, 0.2);\n        shadow.fillRoundedRect(-width / 2 + 4, -height / 2 + 6, width, height, radius);\n        const bg = this.add.graphics();\n        const draw = (fill, stroke)=>{\n            bg.clear();\n            bg.fillStyle(fill, 1);\n            bg.fillRoundedRect(-width / 2, -height / 2, width, height, radius);\n            bg.lineStyle(2, stroke, 0.8);\n            bg.strokeRoundedRect(-width / 2, -height / 2, width, height, radius);\n        };\n        draw(0x3b82f6, 0x93c5fd);\n        const text = this.add.text(0, 0, 'Start Game', {\n            fontFamily: 'Arial Black',\n            fontSize: '20px',\n            color: '#ffffff'\n        }).setOrigin(0.5);\n        const hitPad = 16;\n        const hitW = width + hitPad * 2;\n        const hitH = height + hitPad * 2;\n        const hit = this.add.rectangle(0, 0, hitW, hitH, 0xffffff, 0.001);\n        hit.setInteractive();\n        container.add([\n            shadow,\n            bg,\n            text,\n            hit\n        ]);\n        container.setSize(width, height);\n        const onPress = ()=>{\n            if (!this.startModalOpen) return;\n            draw(0x1d4ed8, 0xbfdbfe);\n            this.closeStartModal();\n            this.openQuizModal();\n        };\n        const onRelease = ()=>{\n            draw(0x3b82f6, 0x93c5fd);\n        };\n        hit.on('pointerdown', onPress);\n        hit.on('pointerup', onRelease);\n        hit.on('pointerout', onRelease);\n        this.tweens.add({\n            targets: container,\n            scale: 1.05,\n            duration: 800,\n            yoyo: true,\n            repeat: -1\n        });\n        return container;\n    }\n    openStartModal() {\n        this.startModalOpen = true;\n        this.jumpButton.setAlpha(0.4);\n        this.stopTimer();\n        this.startModal.setVisible(true);\n        this.startModal.setAlpha(0);\n        this.tweens.add({\n            targets: this.startModal,\n            alpha: 1,\n            duration: 180\n        });\n    }\n    closeStartModal() {\n        this.startModalOpen = false;\n        this.jumpButton.setAlpha(1);\n        this.startTimer();\n        this.startModal.setVisible(false);\n    }\n    setQuestion(data) {\n        this.quizPanel.setFeedback('idle');\n        this.quizPanel.setQuestion(data);\n        this.layoutQuiz();\n    }\n    layoutQuiz() {\n        if (!this.quizPanel) return;\n        const { width, height } = this.scale;\n        const result = this.quizPanel.layout(width, height);\n        this.uiScale = result.uiScale;\n        this.quizPanelHeight = result.panelHeight;\n        this.quizPanelWidth = result.panelWidth;\n    }\n    openQuizModal() {\n        if (this.gameOver) return;\n        if (this.gameCompleted) return;\n        if (this.player.isJumping()) return;\n        this.quizOpen = true;\n        this.quizLocked = false;\n        this.jumpButton.setAlpha(0.6);\n        const questionPool = this.getQuestionPool();\n        const question = questionPool[this.quizCurrentIndex % questionPool.length];\n        this.setQuestion({\n            index: this.quizCurrentIndex + 1,\n            total: questionPool.length,\n            question: question.question,\n            options: question.options\n        });\n        this.quizModal.setVisible(true);\n        this.quizModal.setAlpha(0);\n        const panel = this.quizPanel.panelContainer;\n        panel.setScale(0.96);\n        panel.y += 18;\n        this.tweens.add({\n            targets: this.quizModal,\n            alpha: 1,\n            duration: 180\n        });\n        this.tweens.add({\n            targets: panel,\n            scale: 1,\n            y: panel.y - 18,\n            duration: 220,\n            ease: 'Back.easeOut'\n        });\n    }\n    closeQuizModal() {\n        this.quizOpen = false;\n        this.quizLocked = false;\n        this.jumpButton.setAlpha(1);\n        this.quizModal.setVisible(false);\n    }\n    async handleQuizAnswer(index) {\n        const questionPool = this.getQuestionPool();\n        const question = questionPool[this.quizCurrentIndex % questionPool.length];\n        let isCorrect = index === question.correctIndex;\n        const selectedOptionId = question.optionIds[index];\n        if (this.sessionId && question.sessionQuestionId && selectedOptionId) {\n            try {\n                const { submitAnswer } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../../services/api */ \"(pages-dir-node)/./src/services/api.ts\"));\n                const res = await submitAnswer(this.sessionId, question.sessionQuestionId, selectedOptionId);\n                isCorrect = res.data.is_correct;\n            } catch (error) {\n                console.error('submitAnswer failed, fallback to local check', error);\n            }\n        }\n        const btn = this.quizOptionButtons[index];\n        const redraw = btn.getData('redraw');\n        if (isCorrect) {\n            this.quizLocked = true;\n            redraw('correct');\n            this.setQuizFeedback('correct');\n            this.updateScore(1);\n            this.speedUpJump();\n            await this.delay(400);\n            this.closeQuizModal();\n            await this.handleJump();\n            this.quizCurrentIndex += 1;\n            this.time.delayedCall(250, ()=>{\n                this.openQuizModal();\n            });\n        } else {\n            this.quizLocked = true;\n            redraw('wrong');\n            this.setQuizFeedback('wrong');\n            this.updateScore(-1);\n            this.showPlayerState('incorrect');\n            const panel = this.quizPanel.panelContainer;\n            const startX = panel.x;\n            this.tweens.add({\n                targets: panel,\n                x: startX + 10,\n                duration: 60,\n                yoyo: true,\n                repeat: 3,\n                ease: 'Sine.easeInOut',\n                onComplete: ()=>{\n                    panel.x = startX;\n                    this.quizLocked = false;\n                    redraw('normal');\n                }\n            });\n        }\n    }\n    getQuestionPool() {\n        const apiQuestions = this.sessionQuestions;\n        if (apiQuestions?.length) {\n            if (!this.questionSourceLogged) {\n                this.questionSourceLogged = true;\n                console.log('[GAME][TOWN] Using session questions', {\n                    gameCode: this.gameCode,\n                    count: apiQuestions.length,\n                    sample: apiQuestions[0]?.question?.content ?? null\n                });\n            }\n            return apiQuestions.map((item)=>{\n                const options = item.question.options.map((opt)=>opt.text);\n                const optionIds = item.question.options.map((opt)=>opt.id ?? '');\n                let correctIndex = item.question.options.findIndex((opt)=>opt.is_correct);\n                if (correctIndex < 0) correctIndex = 0;\n                return {\n                    sessionQuestionId: item.session_question_id ?? null,\n                    question: item.question.content,\n                    options,\n                    optionIds,\n                    correctIndex\n                };\n            });\n        }\n        if (!this.questionSourceLogged) {\n            this.questionSourceLogged = true;\n            console.warn('[GAME][TOWN] Using fallback local questions', {\n                gameCode: this.gameCode\n            });\n        }\n        return [\n            {\n                sessionQuestionId: null,\n                question: 'What is the capital of Vietnam?',\n                options: [\n                    'Hanoi',\n                    'Da Nang',\n                    'Hai Phong',\n                    'Can Tho'\n                ],\n                optionIds: [\n                    '',\n                    '',\n                    '',\n                    ''\n                ],\n                correctIndex: 0\n            },\n            {\n                sessionQuestionId: null,\n                question: 'Which language does Phaser use?',\n                options: [\n                    'TypeScript/JavaScript',\n                    'C#',\n                    'Python',\n                    'Go'\n                ],\n                optionIds: [\n                    '',\n                    '',\n                    '',\n                    ''\n                ],\n                correctIndex: 0\n            },\n            {\n                sessionQuestionId: null,\n                question: 'What color are the leaves in the game?',\n                options: [\n                    'Green',\n                    'Red',\n                    'Purple',\n                    'Yellow'\n                ],\n                optionIds: [\n                    '',\n                    '',\n                    '',\n                    ''\n                ],\n                correctIndex: 0\n            }\n        ];\n    }\n    async handleJump() {\n        if (this.player.isJumping()) return;\n        if (this.gameOver) return;\n        const nextIndex = this.currentLeafIndex + 1;\n        const maxIndex = this.leafPath.length > 0 ? this.leafPath.length - 1 : Number.POSITIVE_INFINITY;\n        if (this.leafPath.length > 0 && nextIndex > maxIndex) {\n            return;\n        }\n        const targetPos = this.getLeafPosition(nextIndex);\n        // Stop idle animation during jump\n        this.player.stopIdle();\n        // Scroll Camera\n        this.tweens.add({\n            targets: this.camera,\n            scrollY: targetPos.y - 800,\n            duration: 600,\n            ease: 'Sine.easeInOut'\n        });\n        // Perform jump using EmoteCharacter\n        await this.player.jumpTo(targetPos.x, targetPos.y, this.jumpDurationMs);\n        // Update state after jump completes\n        this.currentLeafIndex = nextIndex;\n        const nextPos = this.getLeafPosition(this.currentLeafIndex + 1);\n        this.player.flip(nextPos.x > targetPos.x);\n        // Show correct state on new leaf, then resume idle\n        this.player.showCorrect(800);\n        this.time.delayedCall(800, ()=>{\n            this.player.playIdle();\n        });\n        if (this.leafPath.length > 0 && this.currentLeafIndex >= maxIndex) {\n            this.gameCompleted = true;\n            this.jumpButton.setAlpha(0.4);\n            this.quizOpen = false;\n            this.quizLocked = false;\n            this.stopTimer();\n            this.timerOverlay.setVisible(false);\n            if (this.totalTimeMs > 0) {\n                this.updateScore(3);\n            }\n            this.updateEndTimeText();\n            this.time.delayedCall(400, ()=>{\n                this.openEndModal();\n            });\n        }\n    }\n    startTimer() {\n        if (this.timerEvent) {\n            this.timerEvent.remove(false);\n        }\n        this.totalTimeMs = this.sessionTimeLimit && this.sessionTimeLimit > 0 ? this.sessionTimeLimit * 1000 : 180000;\n        this.updateTimerText(this.totalTimeMs);\n        this.timerEvent = this.time.addEvent({\n            delay: 1000,\n            loop: true,\n            callback: ()=>{\n                if (this.gameCompleted || this.gameOver) return;\n                this.totalTimeMs -= 1000;\n                this.updateTimerText(this.totalTimeMs);\n                if (this.totalTimeMs <= 0) {\n                    this.totalTimeMs = 0;\n                    this.updateTimerText(this.totalTimeMs);\n                    this.handleTimeUp();\n                }\n            }\n        });\n    }\n    stopTimer() {\n        if (this.timerEvent) {\n            this.timerEvent.remove(false);\n        }\n    }\n    updateTimerText(ms) {\n        const totalSeconds = Math.max(0, Math.floor(ms / 1000));\n        const minutes = Math.floor(totalSeconds / 60);\n        const seconds = totalSeconds % 60;\n        const pad = (n)=>n < 10 ? `0${n}` : `${n}`;\n        const text = `${minutes}m ${pad(seconds)}s`;\n        this.timerText.setText(text);\n    }\n    handleTimeUp() {\n        if (this.gameOver || this.gameCompleted) return;\n        this.gameOver = true;\n        this.quizOpen = false;\n        this.quizLocked = false;\n        this.jumpButton.setAlpha(0.4);\n        this.closeQuizModal();\n        this.openTimeUpModal();\n    }\n    openEndModal() {\n        if (!this.endModal) return;\n        const panel = this.endModal.getData('panel');\n        const overlay = this.endModal.getData('overlay');\n        panel.setScale(0.9);\n        if (overlay) overlay.setAlpha(0);\n        this.endModal.setVisible(true);\n        this.endModal.setAlpha(1);\n        this.launchConfetti();\n        this.submitSessionResult();\n        this.tweens.add({\n            targets: overlay,\n            alpha: 0.6,\n            duration: 200\n        });\n        this.tweens.add({\n            targets: panel,\n            scale: 1,\n            duration: 260,\n            ease: 'Back.easeOut'\n        });\n    }\n    launchConfetti() {\n        if (this.confettiEmitter) {\n            this.confettiEmitter.destroy();\n        }\n        if (this.confettiBurstEvent) {\n            this.confettiBurstEvent.remove(false);\n            this.confettiBurstEvent = undefined;\n        }\n        const { width, height } = this.scale;\n        this.confettiEmitter = this.add.particles(0, 0, 'tile-flower', {\n            speed: {\n                min: 90,\n                max: 170\n            },\n            angle: {\n                min: 0,\n                max: 360\n            },\n            rotate: {\n                min: -220,\n                max: 220\n            },\n            scale: {\n                start: 0.32,\n                end: 0.1\n            },\n            lifespan: {\n                min: 1400,\n                max: 2200\n            },\n            quantity: 0,\n            frequency: -1,\n            gravityY: 160\n        });\n        this.confettiEmitter.setScrollFactor(0);\n        this.confettiEmitter.setDepth(2100);\n        this.uiRoot.add(this.confettiEmitter);\n        this.confettiBurstEvent = this.time.addEvent({\n            delay: 900,\n            repeat: 0,\n            callback: ()=>{\n                if (!this.confettiEmitter) return;\n                this.confettiEmitter.explode(18, width / 2, height / 2);\n            }\n        });\n        this.time.delayedCall(3500, ()=>{\n            this.confettiEmitter?.destroy();\n            this.confettiEmitter = undefined;\n            this.confettiBurstEvent?.remove(false);\n            this.confettiBurstEvent = undefined;\n        });\n    }\n    openTimeUpModal() {\n        if (!this.timeUpModal) return;\n        const panel = this.timeUpModal.getData('panel');\n        panel.setScale(0.96);\n        this.timeUpModal.setVisible(true);\n        this.timeUpModal.setAlpha(0);\n        this.tweens.add({\n            targets: this.timeUpModal,\n            alpha: 1,\n            duration: 200\n        });\n        this.tweens.add({\n            targets: panel,\n            scale: 1,\n            duration: 240,\n            ease: 'Back.easeOut'\n        });\n    }\n    closeTimeUpModal() {\n        if (!this.timeUpModal) return;\n        this.timeUpModal.setVisible(false);\n    }\n    closeEndModal() {\n        if (!this.endModal) return;\n        this.endModal.setVisible(false);\n        this.endModal.setAlpha(0);\n        const overlay = this.endModal.getData('overlay');\n        if (overlay) overlay.setAlpha(0);\n        if (this.confettiEmitter) {\n            this.confettiEmitter.destroy();\n            this.confettiEmitter = undefined;\n        }\n        if (this.confettiBurstEvent) {\n            this.confettiBurstEvent.remove(false);\n            this.confettiBurstEvent = undefined;\n        }\n    }\n    submitSessionResult() {\n        if (!this.sessionGameId) return;\n        Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../../services/api */ \"(pages-dir-node)/./src/services/api.ts\")).then(({ endGameSession })=>endGameSession(this.sessionGameId, this.score)).catch((err)=>{\n            console.error('endGameSession failed', err);\n        });\n    }\n    restartRun() {\n        this.gameOver = false;\n        this.gameCompleted = false;\n        this.quizOpen = false;\n        this.quizLocked = false;\n        this.quizCurrentIndex = 0;\n        this.startModalOpen = false;\n        this.score = 0;\n        this.scoreText.setText('POINTS: 00');\n        this.jumpDurationMs = 900;\n        this.closeTimeUpModal();\n        this.closeQuizModal();\n        this.closeEndModal();\n        if (this.startModal) this.startModal.setVisible(false);\n        const startPos = this.getLeafPosition(0);\n        this.player.setPosition(startPos.x, startPos.y);\n        this.player.playIdle();\n        this.currentLeafIndex = 0;\n        const nextPos = this.getLeafPosition(this.currentLeafIndex + 1);\n        this.player.flip(nextPos.x > startPos.x);\n        this.camera.scrollY = startPos.y - 900;\n        this.stopTimer();\n        this.timerOverlay.setVisible(true);\n        this.jumpButton.setAlpha(1);\n        this.startTimer();\n        this.openQuizModal();\n    }\n    updateScore(delta) {\n        this.score += delta;\n        const points = Math.max(0, this.score);\n        this.scoreText.setText(`POINTS: ${points.toString().padStart(2, '0')}`);\n        if (this.endModalScoreText) {\n            this.endModalScoreText.setText(`Score: ${this.score}`);\n        }\n    }\n    updateEndTimeText() {\n        if (!this.endModalTimeText) return;\n        const baseMs = this.sessionTimeLimit && this.sessionTimeLimit > 0 ? this.sessionTimeLimit * 1000 : 180000;\n        const elapsedMs = baseMs - this.totalTimeMs;\n        const totalSeconds = Math.max(0, Math.floor(elapsedMs / 1000));\n        const minutes = Math.floor(totalSeconds / 60);\n        const seconds = totalSeconds % 60;\n        const pad = (n)=>n < 10 ? `0${n}` : `${n}`;\n        this.endModalTimeText.setText(`Time: ${pad(minutes)}:${pad(seconds)}`);\n    }\n    speedUpJump() {\n        this.jumpDurationMs = Math.max(450, this.jumpDurationMs - 40);\n    }\n    getLeafPosition(index) {\n        if (this.leafPath.length > 0 && this.trackImage) {\n            const pathLength = this.leafPath.length;\n            const pathIndex = Math.min(index, pathLength - 1);\n            const leaf = this.leafPath[pathIndex];\n            const scale = this.trackImage.scaleX;\n            const mapLeft = this.trackImage.x - this.trackImage.displayWidth / 2;\n            const mapTop = this.trackImage.y - this.trackImage.displayHeight;\n            const x = mapLeft + leaf.x * scale;\n            const y = mapTop + leaf.y * scale;\n            return {\n                x,\n                y\n            };\n        }\n        const centerX = this.scale.width / 2;\n        const isLeft = index % 2 === 0;\n        // Adjacent leaf = alternate left/right with a small upward step\n        const y = this.leafStartY - index * this.leafStepY;\n        const x = isLeft ? centerX - this.leafSideOffset : centerX + this.leafSideOffset;\n        return {\n            x,\n            y\n        };\n    }\n    buildLeafPath(textureKey) {\n        const texture = this.textures.get(textureKey);\n        const source = texture?.getSourceImage();\n        if (!source || !source.width || !source.height) {\n            return [];\n        }\n        const canvas = this.sys.game.canvas.ownerDocument.createElement('canvas');\n        canvas.width = source.width;\n        canvas.height = source.height;\n        const ctx = canvas.getContext('2d');\n        if (!ctx) return [];\n        ctx.drawImage(source, 0, 0);\n        const imageData = ctx.getImageData(0, 0, source.width, source.height);\n        const data = imageData.data;\n        const width = source.width;\n        const height = source.height;\n        const visited = new Uint8Array(width * height);\n        const centers = [];\n        const isLeafPixel = (idx)=>{\n            const r = data[idx] / 255;\n            const g = data[idx + 1] / 255;\n            const b = data[idx + 2] / 255;\n            const max = Math.max(r, g, b);\n            const min = Math.min(r, g, b);\n            const delta = max - min;\n            if (delta === 0) return false;\n            let hue = 0;\n            if (max === r) {\n                hue = (g - b) / delta % 6;\n            } else if (max === g) {\n                hue = (b - r) / delta + 2;\n            } else {\n                hue = (r - g) / delta + 4;\n            }\n            hue = Math.round(hue * 60);\n            if (hue < 0) hue += 360;\n            const saturation = max === 0 ? 0 : delta / max;\n            const isGreenHue = hue >= 70 && hue <= 150;\n            const isSaturated = saturation >= 0.35;\n            return isGreenHue && isSaturated;\n        };\n        const minBlobSize = 4500;\n        const stack = [];\n        for(let y = 0; y < height; y++){\n            for(let x = 0; x < width; x++){\n                const index = y * width + x;\n                if (visited[index]) continue;\n                const dataIndex = index * 4;\n                if (!isLeafPixel(dataIndex)) {\n                    visited[index] = 1;\n                    continue;\n                }\n                let sumX = 0;\n                let sumY = 0;\n                let count = 0;\n                let minX = x;\n                let maxX = x;\n                let minY = y;\n                let maxY = y;\n                stack.push(index);\n                visited[index] = 1;\n                while(stack.length){\n                    const current = stack.pop();\n                    const cy = Math.floor(current / width);\n                    const cx = current - cy * width;\n                    const currentDataIndex = current * 4;\n                    if (!isLeafPixel(currentDataIndex)) {\n                        continue;\n                    }\n                    sumX += cx;\n                    sumY += cy;\n                    count += 1;\n                    if (cx < minX) minX = cx;\n                    if (cx > maxX) maxX = cx;\n                    if (cy < minY) minY = cy;\n                    if (cy > maxY) maxY = cy;\n                    if (cx > 0) {\n                        const left = current - 1;\n                        if (!visited[left]) {\n                            const leftIndex = left * 4;\n                            if (isLeafPixel(leftIndex)) {\n                                visited[left] = 1;\n                                stack.push(left);\n                            } else {\n                                visited[left] = 1;\n                            }\n                        }\n                    }\n                    if (cx < width - 1) {\n                        const right = current + 1;\n                        if (!visited[right]) {\n                            const rightIndex = right * 4;\n                            if (isLeafPixel(rightIndex)) {\n                                visited[right] = 1;\n                                stack.push(right);\n                            } else {\n                                visited[right] = 1;\n                            }\n                        }\n                    }\n                    if (cy > 0) {\n                        const up = current - width;\n                        if (!visited[up]) {\n                            const upIndex = up * 4;\n                            if (isLeafPixel(upIndex)) {\n                                visited[up] = 1;\n                                stack.push(up);\n                            } else {\n                                visited[up] = 1;\n                            }\n                        }\n                    }\n                    if (cy < height - 1) {\n                        const down = current + width;\n                        if (!visited[down]) {\n                            const downIndex = down * 4;\n                            if (isLeafPixel(downIndex)) {\n                                visited[down] = 1;\n                                stack.push(down);\n                            } else {\n                                visited[down] = 1;\n                            }\n                        }\n                    }\n                }\n                if (count >= minBlobSize) {\n                    const blobWidth = maxX - minX;\n                    const blobHeight = maxY - minY;\n                    const aspect = blobWidth / (blobHeight || 1);\n                    if (blobWidth >= 90 && blobHeight >= 90 && aspect > 0.6 && aspect < 1.7) {\n                        centers.push(new Phaser.Math.Vector2(sumX / count, sumY / count));\n                    }\n                }\n            }\n        }\n        centers.sort((a, b)=>{\n            const dy = b.y - a.y;\n            if (Math.abs(dy) > 2) return dy;\n            return a.x - b.x;\n        });\n        return centers;\n    }\n    /**\n     * Show player state - correct or incorrect\n     */ showPlayerState(state) {\n        if (state === 'correct') {\n            this.player.showCorrect(800);\n        } else {\n            this.player.showIncorrect(800);\n        }\n    }\n    setQuizFeedback(state) {\n        if (!this.quizPanel) return;\n        this.quizPanel.setFeedback(state);\n        this.quizFeedbackState = state;\n    }\n    delay(ms) {\n        return new Promise((resolve)=>{\n            this.time.delayedCall(ms, ()=>resolve());\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFBSSxDQUFDLENBQUNDLEdBQUdqQztZQUNiLE1BQU1rQyxLQUFLbEMsRUFBRXJVLENBQUMsR0FBR3NXLEVBQUV0VyxDQUFDO1lBQ3BCLElBQUlxRixLQUFLbVIsR0FBRyxDQUFDRCxNQUFNLEdBQUcsT0FBT0E7WUFDN0IsT0FBT0QsRUFBRTlWLENBQUMsR0FBRzZULEVBQUU3VCxDQUFDO1FBQ3BCO1FBRUEsT0FBT3dUO0lBQ1g7SUFFQTs7S0FFQyxHQUNEOUYsZ0JBQWdCdUksS0FBOEIsRUFBRTtRQUM1QyxJQUFJQSxVQUFVLFdBQVc7WUFDckIsSUFBSSxDQUFDbFcsTUFBTSxDQUFDaVAsV0FBVyxDQUFDO1FBQzVCLE9BQU87WUFDSCxJQUFJLENBQUNqUCxNQUFNLENBQUNtVyxhQUFhLENBQUM7UUFDOUI7SUFDSjtJQUVRL0ksZ0JBQWdCOEksS0FBbUMsRUFBUTtRQUMvRCxJQUFJLENBQUMsSUFBSSxDQUFDbFAsU0FBUyxFQUFFO1FBQ3JCLElBQUksQ0FBQ0EsU0FBUyxDQUFDNkUsV0FBVyxDQUFDcUs7UUFDM0IsSUFBSSxDQUFDeFosaUJBQWlCLEdBQUd3WjtJQUM3QjtJQUVRM0ksTUFBTW9DLEVBQVUsRUFBaUI7UUFDckMsT0FBTyxJQUFJeUcsUUFBUSxDQUFDQztZQUNoQixJQUFJLENBQUM1SSxJQUFJLENBQUNDLFdBQVcsQ0FBQ2lDLElBQUksSUFBTTBHO1FBQ3BDO0lBQ0o7QUFDSiIsInNvdXJjZXMiOlsiL1VzZXJzL25iMjMwNjAxL0RvY3VtZW50cy9waGFzZXItZ2FtZWRldi9zcmMvZ2FtZS9zY2VuZXMvR2FtZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFdmVudEJ1cyB9IGZyb20gJy4uL0V2ZW50QnVzJztcbmltcG9ydCB7IFNjZW5lIH0gZnJvbSAncGhhc2VyJztcbmltcG9ydCB7IEVtb3RlQ2hhcmFjdGVyIH0gZnJvbSAnLi4vb2JqZWN0cy9FbW90ZUNoYXJhY3Rlcic7XG5pbXBvcnQgdHlwZSB7IEdhbWVRdWVzdGlvbiB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL2FwaSc7XG5pbXBvcnQgeyBnZXRHYW1lQ29uZmlnLCByZXNvbHZlR2FtZUNvZGUgfSBmcm9tICcuLi9nYW1lQ29uZmlnJztcbmltcG9ydCB7IFF1aXpQYW5lbCB9IGZyb20gJy4uL3VpL1F1aXpQYW5lbCc7XG5cbmV4cG9ydCBjbGFzcyBHYW1lIGV4dGVuZHMgU2NlbmVcbntcbiAgICBjYW1lcmE6IFBoYXNlci5DYW1lcmFzLlNjZW5lMkQuQ2FtZXJhO1xuICAgIHRyYWNrSW1hZ2UhOiBQaGFzZXIuR2FtZU9iamVjdHMuSW1hZ2U7XG4gICAgcGxheWVyITogRW1vdGVDaGFyYWN0ZXI7XG4gICAgcGFyYWxsYXhMYXllcnM6IFBoYXNlci5HYW1lT2JqZWN0cy5JbWFnZVtdO1xuICAgIHVpUm9vdCE6IFBoYXNlci5HYW1lT2JqZWN0cy5Db250YWluZXI7XG4gICAgdWlDYW1lcmEhOiBQaGFzZXIuQ2FtZXJhcy5TY2VuZTJELkNhbWVyYTtcbiAgICB0aW1lck92ZXJsYXkhOiBQaGFzZXIuR2FtZU9iamVjdHMuQ29udGFpbmVyO1xuICAgIGh1ZEJhY2tCdXR0b24hOiBQaGFzZXIuR2FtZU9iamVjdHMuQ29udGFpbmVyO1xuICAgIGh1ZFBvaW50c1BpbGwhOiBQaGFzZXIuR2FtZU9iamVjdHMuQ29udGFpbmVyO1xuICAgIGh1ZFRpbWVyUGlsbCE6IFBoYXNlci5HYW1lT2JqZWN0cy5Db250YWluZXI7XG4gICAgaHVkSGVhcnRzUGlsbCE6IFBoYXNlci5HYW1lT2JqZWN0cy5Db250YWluZXI7XG5cbiAgICAvLyBVSVxuICAgIGp1bXBCdXR0b246IFBoYXNlci5HYW1lT2JqZWN0cy5Db250YWluZXI7XG4gICAganVtcEJ1dHRvbkJnITogUGhhc2VyLkdhbWVPYmplY3RzLlJlY3RhbmdsZTtcbiAgICBzY29yZVRleHQ6IFBoYXNlci5HYW1lT2JqZWN0cy5UZXh0O1xuICAgIHF1aXpNb2RhbCE6IFBoYXNlci5HYW1lT2JqZWN0cy5Db250YWluZXI7XG4gICAgcXVpelBhbmVsQ29udGFpbmVyITogUGhhc2VyLkdhbWVPYmplY3RzLkNvbnRhaW5lcjtcbiAgICBxdWl6UGFuZWxTaGFkb3chOiBQaGFzZXIuR2FtZU9iamVjdHMuR3JhcGhpY3M7XG4gICAgcXVpelBhbmVsQmchOiBQaGFzZXIuR2FtZU9iamVjdHMuR3JhcGhpY3M7XG4gICAgcXVpelBhbmVsR2xvdyE6IFBoYXNlci5HYW1lT2JqZWN0cy5HcmFwaGljcztcbiAgICBxdWl6UGFuZWxXaWR0aDogbnVtYmVyID0gMDtcbiAgICBxdWl6UGFuZWxIZWlnaHQ6IG51bWJlciA9IDA7XG4gICAgdWlTY2FsZTogbnVtYmVyID0gMTtcbiAgICBzYWZlSW5zZXRCb3R0b206IG51bWJlciA9IDE2O1xuICAgIHF1aXpGZWVkYmFja1RpdGxlVGV4dCE6IFBoYXNlci5HYW1lT2JqZWN0cy5UZXh0O1xuICAgIHF1aXpGZWVkYmFja1N1YnRpdGxlVGV4dCE6IFBoYXNlci5HYW1lT2JqZWN0cy5UZXh0O1xuICAgIHF1aXpGZWVkYmFja1N0YXRlOiAnaWRsZScgfCAnY29ycmVjdCcgfCAnd3JvbmcnID0gJ2lkbGUnO1xuICAgIHF1aXpRdWVzdGlvblRleHQhOiBQaGFzZXIuR2FtZU9iamVjdHMuVGV4dDtcbiAgICBxdWl6SW5kZXhUZXh0ITogUGhhc2VyLkdhbWVPYmplY3RzLlRleHQ7XG4gICAgcXVpek9wdGlvbkJ1dHRvbnM6IFBoYXNlci5HYW1lT2JqZWN0cy5Db250YWluZXJbXSA9IFtdO1xuICAgIHF1aXpPcGVuOiBib29sZWFuID0gZmFsc2U7XG4gICAgcXVpekxvY2tlZDogYm9vbGVhbiA9IGZhbHNlO1xuICAgIHF1aXpDdXJyZW50SW5kZXg6IG51bWJlciA9IDA7XG4gICAgcXVpelBhbmVsITogUXVpelBhbmVsO1xuICAgIHN0YXJ0TW9kYWwhOiBQaGFzZXIuR2FtZU9iamVjdHMuQ29udGFpbmVyO1xuICAgIHN0YXJ0TW9kYWxPcGVuOiBib29sZWFuID0gZmFsc2U7XG4gICAgZW5kTW9kYWwhOiBQaGFzZXIuR2FtZU9iamVjdHMuQ29udGFpbmVyO1xuICAgIGVuZE1vZGFsU2NvcmVUZXh0ITogUGhhc2VyLkdhbWVPYmplY3RzLlRleHQ7XG4gICAgZW5kTW9kYWxUaW1lVGV4dCE6IFBoYXNlci5HYW1lT2JqZWN0cy5UZXh0O1xuICAgIGNvbmZldHRpRW1pdHRlcj86IFBoYXNlci5HYW1lT2JqZWN0cy5QYXJ0aWNsZXMuUGFydGljbGVFbWl0dGVyO1xuICAgIGNvbmZldHRpQnVyc3RFdmVudD86IFBoYXNlci5UaW1lLlRpbWVyRXZlbnQ7XG4gICAgZ2FtZUNvbXBsZXRlZDogYm9vbGVhbiA9IGZhbHNlO1xuICAgIHRpbWVVcE1vZGFsITogUGhhc2VyLkdhbWVPYmplY3RzLkNvbnRhaW5lcjtcbiAgICBnYW1lT3ZlcjogYm9vbGVhbiA9IGZhbHNlO1xuICAgIHRpbWVyVGV4dCE6IFBoYXNlci5HYW1lT2JqZWN0cy5UZXh0O1xuICAgIHRpbWVyRXZlbnQhOiBQaGFzZXIuVGltZS5UaW1lckV2ZW50O1xuICAgIHRvdGFsVGltZU1zOiBudW1iZXIgPSAxODAwMDA7XG4gICAganVtcER1cmF0aW9uTXM6IG51bWJlciA9IDkwMDtcblxuICAgIC8vIEdhbWUgU3RhdGVcbiAgICBzY29yZTogbnVtYmVyID0gMDtcbiAgICBjdXJyZW50TGVhZkluZGV4OiBudW1iZXIgPSAwO1xuICAgIHNlc3Npb25JZDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gICAgc2Vzc2lvbkdhbWVJZDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gICAgc2Vzc2lvblF1ZXN0aW9uczogR2FtZVF1ZXN0aW9uW10gfCBudWxsID0gbnVsbDtcbiAgICBzZXNzaW9uVGltZUxpbWl0OiBudW1iZXIgfCBudWxsID0gbnVsbDtcbiAgICBxdWVzdGlvblNvdXJjZUxvZ2dlZDogYm9vbGVhbiA9IGZhbHNlO1xuICAgIGdhbWVDb2RlOiBzdHJpbmcgPSAndm9jYWJfcmFjZSc7XG4gICAgZ2FtZUNvbmZpZyA9IGdldEdhbWVDb25maWcoJ3ZvY2FiX3JhY2UnKTtcblxuICAgIC8vIExlYWYgcGF0aCAoZGV0ZWN0ZWQgZnJvbSB0cmFjayB0ZXh0dXJlKVxuICAgIHByaXZhdGUgbGVhZlBhdGg6IFBoYXNlci5NYXRoLlZlY3RvcjJbXSA9IFtdO1xuXG4gICAgLy8gRmFsbGJhY2sgemlnLXphZyBjb25maWdcbiAgICBwcml2YXRlIHJlYWRvbmx5IGxlYWZTdGFydFkgPSA5NDA7XG4gICAgcHJpdmF0ZSByZWFkb25seSBsZWFmU3RlcFkgPSAxNDA7XG4gICAgcHJpdmF0ZSByZWFkb25seSBsZWFmU2lkZU9mZnNldCA9IDE4MDtcblxuICAgIFxuICAgIGNvbnN0cnVjdG9yICgpXG4gICAge1xuICAgICAgICBzdXBlcignR2FtZScpO1xuICAgIH1cblxuICAgIGluaXQgKGRhdGE6IHsgZ2FtZUNvZGU/OiBzdHJpbmcgfCBudWxsOyBzZXNzaW9uSWQ/OiBzdHJpbmcgfCBudWxsOyBnYW1lSWQ/OiBzdHJpbmcgfCBudWxsOyBxdWVzdGlvbnM/OiBHYW1lUXVlc3Rpb25bXSB8IG51bGw7IHRpbWVMaW1pdD86IG51bWJlciB8IG51bGwgfSlcbiAgICB7XG4gICAgICAgIHRoaXMuZ2FtZUNvZGUgPSByZXNvbHZlR2FtZUNvZGUoZGF0YT8uZ2FtZUNvZGUgPz8gKHRoaXMucmVnaXN0cnkuZ2V0KCdnYW1lQ29kZScpIGFzIHN0cmluZyB8IHVuZGVmaW5lZCkpO1xuICAgICAgICB0aGlzLnJlZ2lzdHJ5LnNldCgnZ2FtZUNvZGUnLCB0aGlzLmdhbWVDb2RlKTtcbiAgICAgICAgdGhpcy5nYW1lQ29uZmlnID0gZ2V0R2FtZUNvbmZpZyh0aGlzLmdhbWVDb2RlKTtcbiAgICAgICAgdGhpcy5zZXNzaW9uSWQgPSBkYXRhPy5zZXNzaW9uSWQgPz8gbnVsbDtcbiAgICAgICAgdGhpcy5zZXNzaW9uR2FtZUlkID0gZGF0YT8uZ2FtZUlkID8/IG51bGw7XG4gICAgICAgIHRoaXMuc2Vzc2lvblF1ZXN0aW9ucyA9IGRhdGE/LnF1ZXN0aW9ucyA/PyBudWxsO1xuICAgICAgICB0aGlzLnNlc3Npb25UaW1lTGltaXQgPSBkYXRhPy50aW1lTGltaXQgPz8gbnVsbDtcbiAgICB9XG5cbiAgICBjcmVhdGUgKClcbiAgICB7XG4gICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gdGhpcy5zY2FsZTtcbiAgICAgICAgdGhpcy5jYW1lcmEgPSB0aGlzLmNhbWVyYXMubWFpbjtcblxuICAgICAgICAvLyBQYXJhbGxheCBiYWNrZ3JvdW5kXG4gICAgICAgIHRoaXMuY3JlYXRlUGFyYWxsYXhCYWNrZ3JvdW5kKCk7XG5cbiAgICAgICAgLy8gVHJhY2sgKExlYXZlcykgLSBVc2UgYmctbWFpbiBhcyB0aGUgc2Nyb2xsaW5nIG1hcFxuICAgICAgICB0aGlzLnRyYWNrSW1hZ2UgPSB0aGlzLmFkZC5pbWFnZSh3aWR0aCAvIDIsIGhlaWdodCwgdGhpcy5nYW1lQ29uZmlnLm1hcEtleSkuc2V0T3JpZ2luKDAuNSwgMSk7XG4gICAgICAgIGNvbnN0IHRyYWNrU2NhbGUgPSB3aWR0aCAvIHRoaXMudHJhY2tJbWFnZS53aWR0aDtcbiAgICAgICAgdGhpcy50cmFja0ltYWdlLnNldFNjYWxlKHRyYWNrU2NhbGUpO1xuXG4gICAgICAgIGNvbnN0IG1hcFRvcCA9IHRoaXMudHJhY2tJbWFnZS55IC0gdGhpcy50cmFja0ltYWdlLmRpc3BsYXlIZWlnaHQ7XG4gICAgICAgIHRoaXMuY2FtZXJhLnNldEJvdW5kcygwLCBtYXBUb3AsIHdpZHRoLCB0aGlzLnRyYWNrSW1hZ2UuZGlzcGxheUhlaWdodCk7XG5cbiAgICAgICAgLy8gQnVpbGQgbGVhZiBwYXRoIGJhc2VkIG9uIHRoZSBtYXAgdGV4dHVyZVxuICAgICAgICB0aGlzLmxlYWZQYXRoID0gdGhpcy5nYW1lQ29uZmlnLnVzZVRleHR1cmVQYXRoID8gdGhpcy5idWlsZExlYWZQYXRoKHRoaXMuZ2FtZUNvbmZpZy5tYXBLZXkpIDogW107XG5cbiAgICAgICAgLy8gUGxheWVyIFNldHVwIC0gVXNpbmcgRW1vdGVDaGFyYWN0ZXIgKGlkbGUvY29ycmVjdC9pbmNvcnJlY3Qgc3RhdGVzKVxuICAgICAgICBjb25zdCBzdGFydFBvcyA9IHRoaXMuZ2V0TGVhZlBvc2l0aW9uKDApO1xuICAgICAgICB0aGlzLnBsYXllciA9IG5ldyBFbW90ZUNoYXJhY3Rlcih0aGlzLCBzdGFydFBvcy54LCBzdGFydFBvcy55KTtcbiAgICAgICAgdGhpcy5jdXJyZW50TGVhZkluZGV4ID0gMDtcblxuICAgICAgICBjb25zdCBuZXh0UG9zID0gdGhpcy5nZXRMZWFmUG9zaXRpb24odGhpcy5jdXJyZW50TGVhZkluZGV4ICsgMSk7XG4gICAgICAgIHRoaXMucGxheWVyLmZsaXAobmV4dFBvcy54ID4gc3RhcnRQb3MueCk7XG5cbiAgICAgICAgLy8gU3RhcnQgaWRsZSBhbmltYXRpb25cbiAgICAgICAgdGhpcy5wbGF5ZXIucGxheUlkbGUoKTtcblxuICAgICAgICAvLyBJbml0aWFsIENhbWVyYSBQb3NpdGlvblxuICAgICAgICB0aGlzLmNhbWVyYS5zY3JvbGxZID0gc3RhcnRQb3MueSAtIDkwMDtcblxuICAgICAgICAvLyBVSSBjYW1lcmEgKGZpeGVkIHNjcmVlbi1zcGFjZSlcbiAgICAgICAgdGhpcy51aUNhbWVyYSA9IHRoaXMuY2FtZXJhcy5hZGQoMCwgMCwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgIHRoaXMudWlDYW1lcmEuc2V0U2Nyb2xsKDAsIDApO1xuICAgICAgICB0aGlzLnVpQ2FtZXJhLmlnbm9yZSh0aGlzLmNoaWxkcmVuLmxpc3QpO1xuXG4gICAgICAgIC8vIFVJXG4gICAgICAgIHRoaXMuY3JlYXRlVUkoKTtcblxuICAgICAgICBpZiAodGhpcy5zZXNzaW9uVGltZUxpbWl0ICYmIHRoaXMuc2Vzc2lvblRpbWVMaW1pdCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMudG90YWxUaW1lTXMgPSB0aGlzLnNlc3Npb25UaW1lTGltaXQgKiAxMDAwO1xuICAgICAgICB9XG5cbiAgICAgICAgRXZlbnRCdXMuZW1pdCgnY3VycmVudC1zY2VuZS1yZWFkeScsIHRoaXMpO1xuICAgIH1cblxuICAgIGNyZWF0ZVBhcmFsbGF4QmFja2dyb3VuZCgpIHtcbiAgICAgICAgdGhpcy5jYW1lcmFzLm1haW4uc2V0QmFja2dyb3VuZENvbG9yKHRoaXMuZ2FtZUNvbmZpZy5iYWNrZ3JvdW5kQ29sb3IpO1xuICAgICAgICB0aGlzLnBhcmFsbGF4TGF5ZXJzID0gW107XG4gICAgfVxuXG4gICAgdXBkYXRlKCkge1xuICAgICAgICBpZiAoIXRoaXMucGFyYWxsYXhMYXllcnM/Lmxlbmd0aCkgcmV0dXJuO1xuICAgICAgICBjb25zdCBzY3JvbGxZID0gdGhpcy5jYW1lcmEuc2Nyb2xsWTtcblxuICAgICAgICB0aGlzLnBhcmFsbGF4TGF5ZXJzLmZvckVhY2goKGxheWVyKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBmYWN0b3IgPSBsYXllci5nZXREYXRhKCdzY3JvbGxGYWN0b3InKSBhcyBudW1iZXI7XG4gICAgICAgICAgICBjb25zdCBiYXNlWSA9IGxheWVyLmdldERhdGEoJ2Jhc2VZJykgYXMgbnVtYmVyO1xuICAgICAgICAgICAgbGF5ZXIueSA9IGJhc2VZICsgc2Nyb2xsWSAqIGZhY3RvcjtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgY3JlYXRlVUkoKSB7XG4gICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gdGhpcy5zY2FsZTtcbiAgICAgICAgXG4gICAgICAgIC8vIEZpeGVkIFVJIENvbnRhaW5lclxuICAgICAgICB0aGlzLnVpUm9vdCA9IHRoaXMuYWRkLmNvbnRhaW5lcigwLCAwKS5zZXRTY3JvbGxGYWN0b3IoMCkuc2V0RGVwdGgoMTAwKTtcblxuICAgICAgICAvLyBUaW1lciArIFNjb3JlIEhVRFxuICAgICAgICB0aGlzLnRpbWVyT3ZlcmxheSA9IHRoaXMuYWRkLmNvbnRhaW5lcigwLCAwKS5zZXRTY3JvbGxGYWN0b3IoMCkuc2V0RGVwdGgoMjAwMCk7XG5cbiAgICAgICAgLy8gQmFjayBidXR0b25cbiAgICAgICAgdGhpcy5odWRCYWNrQnV0dG9uID0gdGhpcy5hZGQuY29udGFpbmVyKDAsIDApO1xuICAgICAgICBjb25zdCBiYWNrQmcgPSB0aGlzLmFkZC5ncmFwaGljcygpO1xuICAgICAgICBiYWNrQmcuZmlsbFN0eWxlKDB4ZmZmZmZmLCAwLjk1KTtcbiAgICAgICAgYmFja0JnLmZpbGxSb3VuZGVkUmVjdCgtMjQsIC0yNCwgNDgsIDQ4LCAxNCk7XG4gICAgICAgIGJhY2tCZy5saW5lU3R5bGUoMiwgMHgwZWE1ZTksIDAuMik7XG4gICAgICAgIGJhY2tCZy5zdHJva2VSb3VuZGVkUmVjdCgtMjQsIC0yNCwgNDgsIDQ4LCAxNCk7XG4gICAgICAgIGNvbnN0IGJhY2tJY29uID0gdGhpcy5hZGQudGV4dCgwLCAxLCAnPCcsIHtcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCBCbGFjaycsXG4gICAgICAgICAgICBmb250U2l6ZTogJzI4cHgnLFxuICAgICAgICAgICAgY29sb3I6ICcjMGYxNzJhJ1xuICAgICAgICB9KS5zZXRPcmlnaW4oMC41KTtcbiAgICAgICAgY29uc3QgYmFja0hpdCA9IHRoaXMuYWRkLnpvbmUoMCwgMCwgNDgsIDQ4KVxuICAgICAgICAgICAgLnNldE9yaWdpbigwLjUpXG4gICAgICAgICAgICAuc2V0SW50ZXJhY3RpdmUoeyB1c2VIYW5kQ3Vyc29yOiB0cnVlIH0pO1xuICAgICAgICBiYWNrSGl0Lm9uKCdwb2ludGVydXAnLCAoKSA9PiB0aGlzLmhhbmRsZUJhY2tUb0dhbWVMaXN0KCkpO1xuICAgICAgICB0aGlzLmh1ZEJhY2tCdXR0b24uYWRkKFtiYWNrQmcsIGJhY2tJY29uXSk7XG4gICAgICAgIHRoaXMuaHVkQmFja0J1dHRvbi5zZXRTaXplKDQ4LCA0OCk7XG4gICAgICAgIHRoaXMuaHVkQmFja0J1dHRvbi5hZGQoYmFja0hpdCk7XG5cbiAgICAgICAgLy8gUG9pbnRzIHBpbGxcbiAgICAgICAgdGhpcy5odWRQb2ludHNQaWxsID0gdGhpcy5hZGQuY29udGFpbmVyKDAsIDApO1xuICAgICAgICBjb25zdCBwb2ludHNCZyA9IHRoaXMuYWRkLmdyYXBoaWNzKCk7XG4gICAgICAgIGNvbnN0IHBvaW50c1cgPSAxNzA7XG4gICAgICAgIGNvbnN0IHBvaW50c0ggPSA0NDtcbiAgICAgICAgcG9pbnRzQmcuZmlsbFN0eWxlKDB4ZTBmMmZlLCAwLjk4KTtcbiAgICAgICAgcG9pbnRzQmcuZmlsbFJvdW5kZWRSZWN0KC1wb2ludHNXIC8gMiwgLXBvaW50c0ggLyAyLCBwb2ludHNXLCBwb2ludHNILCAyMik7XG4gICAgICAgIHBvaW50c0JnLmxpbmVTdHlsZSgyLCAweDkzYzVmZCwgMC43KTtcbiAgICAgICAgcG9pbnRzQmcuc3Ryb2tlUm91bmRlZFJlY3QoLXBvaW50c1cgLyAyLCAtcG9pbnRzSCAvIDIsIHBvaW50c1csIHBvaW50c0gsIDIyKTtcbiAgICAgICAgY29uc3Qgc3RhciA9IHRoaXMuYWRkLmltYWdlKC1wb2ludHNXIC8gMiArIDI0LCAwLCAnc3RhcicpLnNldFNjYWxlKDAuMzIpLnNldFRpbnQoMHhmYmJmMjQpO1xuICAgICAgICB0aGlzLnNjb3JlVGV4dCA9IHRoaXMuYWRkLnRleHQoLXBvaW50c1cgLyAyICsgNDYsIDAsICdQT0lOVFM6IDAwJywge1xuICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsIEJsYWNrJyxcbiAgICAgICAgICAgIGZvbnRTaXplOiAnMThweCcsXG4gICAgICAgICAgICBjb2xvcjogJyMwZjE3MmEnXG4gICAgICAgIH0pLnNldE9yaWdpbigwLCAwLjUpO1xuICAgICAgICB0aGlzLmh1ZFBvaW50c1BpbGwuYWRkKFtwb2ludHNCZywgc3RhciwgdGhpcy5zY29yZVRleHRdKTtcblxuICAgICAgICAvLyBUaW1lciBwaWxsXG4gICAgICAgIHRoaXMuaHVkVGltZXJQaWxsID0gdGhpcy5hZGQuY29udGFpbmVyKDAsIDApO1xuICAgICAgICBjb25zdCB0aW1lckJnID0gdGhpcy5hZGQuZ3JhcGhpY3MoKTtcbiAgICAgICAgY29uc3QgdGltZXJXID0gMTAwO1xuICAgICAgICBjb25zdCB0aW1lckggPSA0MDtcbiAgICAgICAgdGltZXJCZy5maWxsU3R5bGUoMHhkYmVhZmUsIDAuOTgpO1xuICAgICAgICB0aW1lckJnLmZpbGxSb3VuZGVkUmVjdCgtdGltZXJXIC8gMiwgLXRpbWVySCAvIDIsIHRpbWVyVywgdGltZXJILCAyMCk7XG4gICAgICAgIHRpbWVyQmcubGluZVN0eWxlKDIsIDB4NjBhNWZhLCAwLjYpO1xuICAgICAgICB0aW1lckJnLnN0cm9rZVJvdW5kZWRSZWN0KC10aW1lclcgLyAyLCAtdGltZXJIIC8gMiwgdGltZXJXLCB0aW1lckgsIDIwKTtcbiAgICAgICAgdGhpcy50aW1lclRleHQgPSB0aGlzLmFkZC50ZXh0KDAsIDAsICcwMzowMCcsIHtcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCBCbGFjaycsXG4gICAgICAgICAgICBmb250U2l6ZTogJzE4cHgnLFxuICAgICAgICAgICAgY29sb3I6ICcjMGYxNzJhJ1xuICAgICAgICB9KS5zZXRPcmlnaW4oMC41KTtcbiAgICAgICAgdGhpcy5odWRUaW1lclBpbGwuYWRkKFt0aW1lckJnLCB0aGlzLnRpbWVyVGV4dF0pO1xuXG4gICAgICAgIC8vIEhlYXJ0cyBwaWxsXG4gICAgICAgIHRoaXMuaHVkSGVhcnRzUGlsbCA9IHRoaXMuYWRkLmNvbnRhaW5lcigwLCAwKTtcbiAgICAgICAgY29uc3QgaGVhcnRzQmcgPSB0aGlzLmFkZC5ncmFwaGljcygpO1xuICAgICAgICBjb25zdCBoZWFydHNXID0gOTI7XG4gICAgICAgIGNvbnN0IGhlYXJ0c0ggPSAzNjtcbiAgICAgICAgaGVhcnRzQmcuZmlsbFN0eWxlKDB4ZmZmZmZmLCAwLjk4KTtcbiAgICAgICAgaGVhcnRzQmcuZmlsbFJvdW5kZWRSZWN0KC1oZWFydHNXIC8gMiwgLWhlYXJ0c0ggLyAyLCBoZWFydHNXLCBoZWFydHNILCAxOCk7XG4gICAgICAgIGhlYXJ0c0JnLmxpbmVTdHlsZSgyLCAweDkzYzVmZCwgMC4zNSk7XG4gICAgICAgIGhlYXJ0c0JnLnN0cm9rZVJvdW5kZWRSZWN0KC1oZWFydHNXIC8gMiwgLWhlYXJ0c0ggLyAyLCBoZWFydHNXLCBoZWFydHNILCAxOCk7XG4gICAgICAgIGNvbnN0IGhlYXJ0c1RleHQgPSB0aGlzLmFkZC50ZXh0KDAsIDAsICfinaQg4p2kIOKdpCcsIHtcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCBCbGFjaycsXG4gICAgICAgICAgICBmb250U2l6ZTogJzE2cHgnLFxuICAgICAgICAgICAgY29sb3I6ICcjZWY0NDQ0J1xuICAgICAgICB9KS5zZXRPcmlnaW4oMC41KTtcbiAgICAgICAgdGhpcy5odWRIZWFydHNQaWxsLmFkZChbaGVhcnRzQmcsIGhlYXJ0c1RleHRdKTtcblxuICAgICAgICB0aGlzLnRpbWVyT3ZlcmxheS5hZGQoW3RoaXMuaHVkQmFja0J1dHRvbiwgdGhpcy5odWRQb2ludHNQaWxsLCB0aGlzLmh1ZFRpbWVyUGlsbCwgdGhpcy5odWRIZWFydHNQaWxsXSk7XG4gICAgICAgIHRoaXMudWlSb290LmFkZCh0aGlzLnRpbWVyT3ZlcmxheSk7XG4gICAgICAgIHRoaXMubGF5b3V0SHVkKCk7XG5cbiAgICAgICAgLy8gSnVtcCBCdXR0b25cbiAgICAgICAgdGhpcy5qdW1wQnV0dG9uID0gdGhpcy5jcmVhdGVKdW1wQnV0dG9uKHdpZHRoIC8gMiwgaGVpZ2h0IC0gMTUwKTtcbiAgICAgICAgdGhpcy5qdW1wQnV0dG9uLnNldFNjcm9sbEZhY3RvcigwKTtcbiAgICAgICAgdGhpcy51aVJvb3QuYWRkKHRoaXMuanVtcEJ1dHRvbik7XG4gICAgICAgIHRoaXMuanVtcEJ1dHRvbi5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgdGhpcy5qdW1wQnV0dG9uLnNldEFjdGl2ZShmYWxzZSk7XG5cbiAgICAgICAgdGhpcy5zZXR1cEp1bXBJbnB1dCgpO1xuXG4gICAgICAgIC8vIFF1aXogTW9kYWwgKFVJIG92ZXJsYXkpXG4gICAgICAgIHRoaXMuY3JlYXRlUXVpek1vZGFsKCk7XG4gICAgICAgIHRoaXMuc2NhbGUub24oJ3Jlc2l6ZScsICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnF1aXpNb2RhbCkgdGhpcy5sYXlvdXRRdWl6KCk7XG4gICAgICAgICAgICB0aGlzLmxheW91dEh1ZCgpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBTdGFydCBNb2RhbCAoZmlyc3Qgc2NyZWVuKVxuICAgICAgICB0aGlzLmNyZWF0ZVN0YXJ0TW9kYWwoKTtcbiAgICAgICAgdGhpcy5vcGVuU3RhcnRNb2RhbCgpO1xuXG4gICAgICAgIC8vIEVuc3VyZSBvbmx5IFVJIGNhbWVyYSByZW5kZXJzIFVJXG4gICAgICAgIHRoaXMuY2FtZXJhcy5tYWluLmlnbm9yZShbdGhpcy51aVJvb3QsIHRoaXMudGltZXJPdmVybGF5XSk7XG5cbiAgICAgICAgLy8gRW5kIE1vZGFsXG4gICAgICAgIHRoaXMuY3JlYXRlRW5kTW9kYWwoKTtcblxuICAgICAgICAvLyBUaW1lIFVwIE1vZGFsXG4gICAgICAgIHRoaXMuY3JlYXRlVGltZVVwTW9kYWwoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGxheW91dEh1ZCgpOiB2b2lkIHtcbiAgICAgICAgaWYgKCF0aGlzLmh1ZEJhY2tCdXR0b24gfHwgIXRoaXMuaHVkUG9pbnRzUGlsbCB8fCAhdGhpcy5odWRUaW1lclBpbGwgfHwgIXRoaXMuaHVkSGVhcnRzUGlsbCkgcmV0dXJuO1xuICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMuc2NhbGU7XG4gICAgICAgIGNvbnN0IHRvcEluc2V0ID0gTWF0aC5tYXgoMjAsIE1hdGgucm91bmQoaGVpZ2h0ICogMC4wMykpO1xuICAgICAgICBjb25zdCBzaWRlSW5zZXQgPSBNYXRoLm1heCgxNiwgTWF0aC5yb3VuZCh3aWR0aCAqIDAuMDQ1KSk7XG4gICAgICAgIGNvbnN0IGdhcCA9IDEwO1xuICAgICAgICBjb25zdCBoZWFydHNXID0gOTI7XG4gICAgICAgIGNvbnN0IHRpbWVyVyA9IDEwMDtcblxuICAgICAgICB0aGlzLmh1ZEJhY2tCdXR0b24uc2V0UG9zaXRpb24oc2lkZUluc2V0ICsgMjQsIHRvcEluc2V0ICsgMjQpO1xuICAgICAgICB0aGlzLmh1ZFBvaW50c1BpbGwuc2V0UG9zaXRpb24od2lkdGggLyAyLCB0b3BJbnNldCArIDI0KTtcblxuICAgICAgICBjb25zdCByaWdodEVkZ2UgPSB3aWR0aCAtIHNpZGVJbnNldDtcbiAgICAgICAgdGhpcy5odWRIZWFydHNQaWxsLnNldFBvc2l0aW9uKHJpZ2h0RWRnZSAtIGhlYXJ0c1cgLyAyLCB0b3BJbnNldCArIDI0KTtcbiAgICAgICAgdGhpcy5odWRUaW1lclBpbGwuc2V0UG9zaXRpb24ocmlnaHRFZGdlIC0gaGVhcnRzVyAtIGdhcCAtIHRpbWVyVyAvIDIsIHRvcEluc2V0ICsgMjQpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlQmFja1RvR2FtZUxpc3QoKTogdm9pZCB7XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy8nO1xuICAgIH1cblxuICAgIGNyZWF0ZUp1bXBCdXR0b24oeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5hZGQuY29udGFpbmVyKHgsIHkpO1xuICAgICAgICBjb25zdCB3aWR0aCA9IDMwMDtcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gMTAwO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgYmcgPSB0aGlzLmFkZC5yZWN0YW5nbGUoMCwgMCwgd2lkdGgsIGhlaWdodCwgMHhmYmJmMjQpXG4gICAgICAgICAgICAuc2V0U3Ryb2tlU3R5bGUoNCwgMHhmZmZmZmYpXG4gICAgICAgICAgICAuc2V0RmlsbFN0eWxlKDB4MjJjNTVlKTtcbiAgICAgICAgICAgIFxuICAgICAgICBjb25zdCB0ZXh0ID0gdGhpcy5hZGQudGV4dCgwLCAwLCAnTkVYVCBKVU1QIScsIHtcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCBCbGFjaycsIGZvbnRTaXplOiAnMzJweCcsIGNvbG9yOiAnI2ZmZmZmZidcbiAgICAgICAgfSkuc2V0T3JpZ2luKDAuNSk7XG5cbiAgICAgICAgY29udGFpbmVyLmFkZChbYmcsIHRleHRdKTtcbiAgICAgICAgY29udGFpbmVyLnNldFNpemUod2lkdGgsIGhlaWdodCk7XG5cbiAgICAgICAgdGhpcy5qdW1wQnV0dG9uQmcgPSBiZztcblxuICAgICAgICBjb25zdCBvblByZXNzID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMucXVpek9wZW4gfHwgdGhpcy5zdGFydE1vZGFsT3BlbikgcmV0dXJuO1xuICAgICAgICAgICAgYmcuc2V0RmlsbFN0eWxlKDB4MTZhMzRhKTtcbiAgICAgICAgICAgIHRoaXMub3BlblF1aXpNb2RhbCgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IG9uUmVsZWFzZSA9ICgpID0+IHtcbiAgICAgICAgICAgIGJnLnNldEZpbGxTdHlsZSgweDIyYzU1ZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgY29udGFpbmVyLnNldEludGVyYWN0aXZlKG5ldyBQaGFzZXIuR2VvbS5SZWN0YW5nbGUoLXdpZHRoIC8gMiwgLWhlaWdodCAvIDIsIHdpZHRoLCBoZWlnaHQpLCBQaGFzZXIuR2VvbS5SZWN0YW5nbGUuQ29udGFpbnMpO1xuXG4gICAgICAgIGNvbnRhaW5lci5vbigncG9pbnRlcmRvd24nLCBvblByZXNzKTtcblxuICAgICAgICBjb250YWluZXIub24oJ3BvaW50ZXJ1cCcsIG9uUmVsZWFzZSk7XG5cbiAgICAgICAgY29udGFpbmVyLm9uKCdwb2ludGVyb3V0Jywgb25SZWxlYXNlKTtcblxuICAgICAgICAvLyBBZGQgc2ltcGxlIHB1bHNlIHR3ZWVuXG4gICAgICAgIHRoaXMudHdlZW5zLmFkZCh7XG4gICAgICAgICAgICB0YXJnZXRzOiBjb250YWluZXIsXG4gICAgICAgICAgICBzY2FsZTogMS4wNSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiA4MDAsXG4gICAgICAgICAgICB5b3lvOiB0cnVlLFxuICAgICAgICAgICAgcmVwZWF0OiAtMVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gY29udGFpbmVyO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2V0dXBKdW1wSW5wdXQoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuaW5wdXQuZW5hYmxlZCA9IHRydWU7XG4gICAgICAgIGlmICh0aGlzLmlucHV0Lm1vdXNlKSB0aGlzLmlucHV0Lm1vdXNlLmVuYWJsZWQgPSB0cnVlO1xuXG4gICAgICAgIHRoaXMuaW5wdXQub24oJ3BvaW50ZXJkb3duJywgKHBvaW50ZXI6IFBoYXNlci5JbnB1dC5Qb2ludGVyKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5xdWl6T3BlbiB8fCB0aGlzLnN0YXJ0TW9kYWxPcGVuKSByZXR1cm47XG4gICAgICAgICAgICBjb25zdCBib3VuZHMgPSB0aGlzLmp1bXBCdXR0b24uZ2V0Qm91bmRzKCk7XG4gICAgICAgICAgICBpZiAoYm91bmRzLmNvbnRhaW5zKHBvaW50ZXIueCwgcG9pbnRlci55KSkge1xuICAgICAgICAgICAgICAgIHRoaXMuanVtcEJ1dHRvbkJnLnNldEZpbGxTdHlsZSgweDE2YTM0YSk7XG4gICAgICAgICAgICAgICAgdGhpcy5vcGVuUXVpek1vZGFsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuaW5wdXQub24oJ3BvaW50ZXJ1cCcsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuanVtcEJ1dHRvbkJnLnNldEZpbGxTdHlsZSgweDIyYzU1ZSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlUXVpek1vZGFsKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnF1aXpQYW5lbCA9IG5ldyBRdWl6UGFuZWwodGhpcywgeyBvcHRpb25Db3VudDogNCwgZGVwdGg6IDIwMCwgcGFyZW50OiB0aGlzLnVpUm9vdCwgc2hvd0luZGV4OiB0cnVlIH0pO1xuICAgICAgICB0aGlzLnF1aXpNb2RhbCA9IHRoaXMucXVpelBhbmVsLmNvbnRhaW5lcjtcbiAgICAgICAgdGhpcy5xdWl6UGFuZWxDb250YWluZXIgPSB0aGlzLnF1aXpQYW5lbC5wYW5lbENvbnRhaW5lcjtcbiAgICAgICAgdGhpcy5xdWl6UGFuZWxTaGFkb3cgPSB0aGlzLnF1aXpQYW5lbC5wYW5lbFNoYWRvdztcbiAgICAgICAgdGhpcy5xdWl6UGFuZWxCZyA9IHRoaXMucXVpelBhbmVsLnBhbmVsQmc7XG4gICAgICAgIHRoaXMucXVpelBhbmVsR2xvdyA9IHRoaXMucXVpelBhbmVsLnBhbmVsR2xvdztcbiAgICAgICAgdGhpcy5xdWl6SW5kZXhUZXh0ID0gdGhpcy5xdWl6UGFuZWwuaW5kZXhUZXh0O1xuICAgICAgICB0aGlzLnF1aXpGZWVkYmFja1RpdGxlVGV4dCA9IHRoaXMucXVpelBhbmVsLmZlZWRiYWNrVGl0bGVUZXh0O1xuICAgICAgICB0aGlzLnF1aXpGZWVkYmFja1N1YnRpdGxlVGV4dCA9IHRoaXMucXVpelBhbmVsLmZlZWRiYWNrU3VidGl0bGVUZXh0O1xuICAgICAgICB0aGlzLnF1aXpRdWVzdGlvblRleHQgPSB0aGlzLnF1aXpQYW5lbC5xdWVzdGlvblRleHQ7XG4gICAgICAgIHRoaXMucXVpek9wdGlvbkJ1dHRvbnMgPSB0aGlzLnF1aXpQYW5lbC5vcHRpb25CdXR0b25zO1xuXG4gICAgICAgIHRoaXMucXVpelBhbmVsLm9uT3B0aW9uU2VsZWN0ZWQoKGluZGV4KSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucXVpek9wZW4gfHwgdGhpcy5xdWl6TG9ja2VkKSByZXR1cm47XG4gICAgICAgICAgICB0aGlzLmhhbmRsZVF1aXpBbnN3ZXIoaW5kZXgpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmxheW91dFF1aXooKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZVN0YXJ0TW9kYWwoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gdGhpcy5zY2FsZTtcblxuICAgICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmFkZC5jb250YWluZXIoMCwgMCkuc2V0U2Nyb2xsRmFjdG9yKDApLnNldERlcHRoKDIyMCk7XG5cbiAgICAgICAgY29uc3Qgb3ZlcmxheSA9IHRoaXMuYWRkLnJlY3RhbmdsZSgwLCAwLCB3aWR0aCwgaGVpZ2h0LCAweDAwMDAwMCwgMC4xMilcbiAgICAgICAgICAgIC5zZXRPcmlnaW4oMCwgMCk7XG5cbiAgICAgICAgY29uc3QgcGFuZWxXaWR0aCA9IE1hdGgubWluKDUyMCwgd2lkdGggLSA4MCk7XG4gICAgICAgIGNvbnN0IHBhbmVsSGVpZ2h0ID0gMTYwO1xuICAgICAgICBjb25zdCBwYW5lbENvbnRhaW5lciA9IHRoaXMuYWRkLmNvbnRhaW5lcih3aWR0aCAvIDIsIE1hdGgucm91bmQoaGVpZ2h0ICogMC41OCkpLnNldFNjcm9sbEZhY3RvcigwKTtcblxuICAgICAgICBjb25zdCBwYW5lbFNoYWRvdyA9IHRoaXMuYWRkLmdyYXBoaWNzKCk7XG4gICAgICAgIHBhbmVsU2hhZG93LmZpbGxTdHlsZSgweDAwMDAwMCwgMC4xNSk7XG4gICAgICAgIHBhbmVsU2hhZG93LmZpbGxSb3VuZGVkUmVjdCgtcGFuZWxXaWR0aCAvIDIgKyA2LCAtcGFuZWxIZWlnaHQgLyAyICsgMTAsIHBhbmVsV2lkdGgsIHBhbmVsSGVpZ2h0LCAyNik7XG5cbiAgICAgICAgY29uc3QgcGFuZWxCZyA9IHRoaXMuYWRkLmdyYXBoaWNzKCk7XG4gICAgICAgIHBhbmVsQmcuZmlsbFN0eWxlKDB4ZmZmZmZmLCAwLjg1KTtcbiAgICAgICAgcGFuZWxCZy5maWxsUm91bmRlZFJlY3QoLXBhbmVsV2lkdGggLyAyLCAtcGFuZWxIZWlnaHQgLyAyLCBwYW5lbFdpZHRoLCBwYW5lbEhlaWdodCwgMjQpO1xuICAgICAgICBwYW5lbEJnLmxpbmVTdHlsZSgyLCAweDkzYzVmZCwgMC40NSk7XG4gICAgICAgIHBhbmVsQmcuc3Ryb2tlUm91bmRlZFJlY3QoLXBhbmVsV2lkdGggLyAyLCAtcGFuZWxIZWlnaHQgLyAyLCBwYW5lbFdpZHRoLCBwYW5lbEhlaWdodCwgMjQpO1xuXG4gICAgICAgIGNvbnN0IHRpdGxlID0gdGhpcy5hZGQudGV4dCgwLCAtMjYsICdIZWxwIHRoZSByb2JvdCBjcm9zcyB0aGUgcml2ZXIuJywge1xuICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsIEJsYWNrJyxcbiAgICAgICAgICAgIGZvbnRTaXplOiAnMjJweCcsXG4gICAgICAgICAgICBjb2xvcjogJyMwZjE3MmEnLFxuICAgICAgICAgICAgYWxpZ246ICdjZW50ZXInLFxuICAgICAgICAgICAgd29yZFdyYXA6IHsgd2lkdGg6IHBhbmVsV2lkdGggLSA2MCwgdXNlQWR2YW5jZWRXcmFwOiB0cnVlIH1cbiAgICAgICAgfSkuc2V0T3JpZ2luKDAuNSk7XG5cbiAgICAgICAgY29uc3QgYnV0dG9uID0gdGhpcy5jcmVhdGVTdGFydEJ1dHRvbigwLCA0Mik7XG5cbiAgICAgICAgcGFuZWxDb250YWluZXIuYWRkKFtwYW5lbFNoYWRvdywgcGFuZWxCZywgdGl0bGUsIGJ1dHRvbl0pO1xuICAgICAgICBjb250YWluZXIuYWRkKFtvdmVybGF5LCBwYW5lbENvbnRhaW5lcl0pO1xuICAgICAgICBjb250YWluZXIuc2V0VmlzaWJsZShmYWxzZSk7XG5cbiAgICAgICAgdGhpcy5zdGFydE1vZGFsID0gY29udGFpbmVyO1xuICAgICAgICBpZiAodGhpcy51aVJvb3QpIHRoaXMudWlSb290LmFkZChjb250YWluZXIpO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlRW5kTW9kYWwoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gdGhpcy5zY2FsZTtcblxuICAgICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmFkZC5jb250YWluZXIoMCwgMCkuc2V0U2Nyb2xsRmFjdG9yKDApLnNldERlcHRoKDIzMCk7XG5cbiAgICAgICAgY29uc3Qgb3ZlcmxheSA9IHRoaXMuYWRkLnJlY3RhbmdsZSgwLCAwLCB3aWR0aCwgaGVpZ2h0LCAweDAwMDAwMCwgMC42KVxuICAgICAgICAgICAgLnNldE9yaWdpbigwLCAwKTtcblxuICAgICAgICBjb25zdCBwYW5lbFdpZHRoID0gTWF0aC5taW4oNTIwLCB3aWR0aCAtIDgwKTtcbiAgICAgICAgY29uc3QgcGFuZWxIZWlnaHQgPSAyMjA7XG4gICAgICAgIGNvbnN0IHBhbmVsQ29udGFpbmVyID0gdGhpcy5hZGQuY29udGFpbmVyKHdpZHRoIC8gMiwgTWF0aC5yb3VuZChoZWlnaHQgKiAwLjU2KSkuc2V0U2Nyb2xsRmFjdG9yKDApO1xuICAgICAgICBvdmVybGF5LnNldERlcHRoKDApO1xuICAgICAgICBwYW5lbENvbnRhaW5lci5zZXREZXB0aCgxKTtcblxuICAgICAgICBjb25zdCBibG9ja2VyID0gdGhpcy5hZGQuem9uZSgwLCAwLCB3aWR0aCwgaGVpZ2h0KS5zZXRPcmlnaW4oMCwgMCk7XG4gICAgICAgIGJsb2NrZXIuc2V0SW50ZXJhY3RpdmUobmV3IFBoYXNlci5HZW9tLlJlY3RhbmdsZSgwLCAwLCB3aWR0aCwgaGVpZ2h0KSwgKHNoYXBlLCB4LCB5KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwYW5lbEJvdW5kcyA9IHBhbmVsQ29udGFpbmVyLmdldEJvdW5kcygpO1xuICAgICAgICAgICAgaWYgKFBoYXNlci5HZW9tLlJlY3RhbmdsZS5Db250YWlucyhwYW5lbEJvdW5kcywgeCwgeSkpIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybiBQaGFzZXIuR2VvbS5SZWN0YW5nbGUuQ29udGFpbnMoc2hhcGUgYXMgUGhhc2VyLkdlb20uUmVjdGFuZ2xlLCB4LCB5KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGJsb2NrZXIub24oJ3BvaW50ZXJkb3duJywgKCkgPT4ge30pO1xuXG4gICAgICAgIGNvbnN0IHBhbmVsU2hhZG93ID0gdGhpcy5hZGQuZ3JhcGhpY3MoKTtcbiAgICAgICAgcGFuZWxTaGFkb3cuZmlsbFN0eWxlKDB4MDAwMDAwLCAwLjE1KTtcbiAgICAgICAgcGFuZWxTaGFkb3cuZmlsbFJvdW5kZWRSZWN0KC1wYW5lbFdpZHRoIC8gMiArIDYsIC1wYW5lbEhlaWdodCAvIDIgKyAxMCwgcGFuZWxXaWR0aCwgcGFuZWxIZWlnaHQsIDI2KTtcblxuICAgICAgICBjb25zdCBwYW5lbEJnID0gdGhpcy5hZGQuZ3JhcGhpY3MoKTtcbiAgICAgICAgcGFuZWxCZy5maWxsU3R5bGUoMHhmZmZmZmYsIDAuODUpO1xuICAgICAgICBwYW5lbEJnLmZpbGxSb3VuZGVkUmVjdCgtcGFuZWxXaWR0aCAvIDIsIC1wYW5lbEhlaWdodCAvIDIsIHBhbmVsV2lkdGgsIHBhbmVsSGVpZ2h0LCAyNCk7XG4gICAgICAgIHBhbmVsQmcubGluZVN0eWxlKDIsIDB4OTNjNWZkLCAwLjQ1KTtcbiAgICAgICAgcGFuZWxCZy5zdHJva2VSb3VuZGVkUmVjdCgtcGFuZWxXaWR0aCAvIDIsIC1wYW5lbEhlaWdodCAvIDIsIHBhbmVsV2lkdGgsIHBhbmVsSGVpZ2h0LCAyNCk7XG5cbiAgICAgICAgY29uc3QgdGl0bGUgPSB0aGlzLmFkZC50ZXh0KDAsIC02NCwgJ0NvbmdyYXR1bGF0aW9ucyEnLCB7XG4gICAgICAgICAgICBmb250RmFtaWx5OiAnQXJpYWwgQmxhY2snLFxuICAgICAgICAgICAgZm9udFNpemU6ICcyMnB4JyxcbiAgICAgICAgICAgIGNvbG9yOiAnIzBmMTcyYSdcbiAgICAgICAgfSkuc2V0T3JpZ2luKDAuNSk7XG5cbiAgICAgICAgY29uc3Qgc3VidGl0bGUgPSB0aGlzLmFkZC50ZXh0KDAsIC0zNiwgJ1lvdSBjb21wbGV0ZWQgdGhlIHJ1bi4nLCB7XG4gICAgICAgICAgICBmb250RmFtaWx5OiAnQXJpYWwnLFxuICAgICAgICAgICAgZm9udFNpemU6ICcxOHB4JyxcbiAgICAgICAgICAgIGNvbG9yOiAnIzBmMTcyYScsXG4gICAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsXG4gICAgICAgICAgICB3b3JkV3JhcDogeyB3aWR0aDogcGFuZWxXaWR0aCAtIDYwLCB1c2VBZHZhbmNlZFdyYXA6IHRydWUgfVxuICAgICAgICB9KS5zZXRPcmlnaW4oMC41KTtcblxuICAgICAgICBjb25zdCBzdGF0c0dhcCA9IDE2O1xuICAgICAgICBjb25zdCBjYXJkV2lkdGggPSBNYXRoLm1pbigyMDAsIE1hdGguZmxvb3IoKHBhbmVsV2lkdGggLSAxMjApIC8gMikpO1xuICAgICAgICBjb25zdCBjYXJkSGVpZ2h0ID0gNDY7XG4gICAgICAgIGNvbnN0IHN0YXRzWSA9IDYyO1xuXG4gICAgICAgIGNvbnN0IHNjb3JlQ2FyZCA9IHRoaXMuYWRkLmdyYXBoaWNzKCk7XG4gICAgICAgIHNjb3JlQ2FyZC5maWxsU3R5bGUoMHg5M2M1ZmQsIDAuMTgpO1xuICAgICAgICBzY29yZUNhcmQuZmlsbFJvdW5kZWRSZWN0KC1jYXJkV2lkdGggLyAyLCAtY2FyZEhlaWdodCAvIDIsIGNhcmRXaWR0aCwgY2FyZEhlaWdodCwgMTYpO1xuICAgICAgICBzY29yZUNhcmQubGluZVN0eWxlKDIsIDB4OTNjNWZkLCAwLjQ1KTtcbiAgICAgICAgc2NvcmVDYXJkLnN0cm9rZVJvdW5kZWRSZWN0KC1jYXJkV2lkdGggLyAyLCAtY2FyZEhlaWdodCAvIDIsIGNhcmRXaWR0aCwgY2FyZEhlaWdodCwgMTYpO1xuXG4gICAgICAgIGNvbnN0IHRpbWVDYXJkID0gdGhpcy5hZGQuZ3JhcGhpY3MoKTtcbiAgICAgICAgdGltZUNhcmQuZmlsbFN0eWxlKDB4OTNjNWZkLCAwLjE4KTtcbiAgICAgICAgdGltZUNhcmQuZmlsbFJvdW5kZWRSZWN0KC1jYXJkV2lkdGggLyAyLCAtY2FyZEhlaWdodCAvIDIsIGNhcmRXaWR0aCwgY2FyZEhlaWdodCwgMTYpO1xuICAgICAgICB0aW1lQ2FyZC5saW5lU3R5bGUoMiwgMHg5M2M1ZmQsIDAuNDUpO1xuICAgICAgICB0aW1lQ2FyZC5zdHJva2VSb3VuZGVkUmVjdCgtY2FyZFdpZHRoIC8gMiwgLWNhcmRIZWlnaHQgLyAyLCBjYXJkV2lkdGgsIGNhcmRIZWlnaHQsIDE2KTtcblxuICAgICAgICBjb25zdCBzY29yZUNhcmRDb250YWluZXIgPSB0aGlzLmFkZC5jb250YWluZXIoLWNhcmRXaWR0aCAvIDIgLSBzdGF0c0dhcCAvIDIsIHN0YXRzWSwgW3Njb3JlQ2FyZF0pO1xuICAgICAgICBjb25zdCB0aW1lQ2FyZENvbnRhaW5lciA9IHRoaXMuYWRkLmNvbnRhaW5lcihjYXJkV2lkdGggLyAyICsgc3RhdHNHYXAgLyAyLCBzdGF0c1ksIFt0aW1lQ2FyZF0pO1xuXG4gICAgICAgIGNvbnN0IHNjb3JlTGFiZWwgPSB0aGlzLmFkZC50ZXh0KHNjb3JlQ2FyZENvbnRhaW5lci54LCBzdGF0c1kgLSAxNiwgJ1NDT1JFJywge1xuICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsIEJsYWNrJyxcbiAgICAgICAgICAgIGZvbnRTaXplOiAnMTJweCcsXG4gICAgICAgICAgICBjb2xvcjogJyMxZTNhOGEnXG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUpO1xuXG4gICAgICAgIGNvbnN0IHRpbWVMYWJlbCA9IHRoaXMuYWRkLnRleHQodGltZUNhcmRDb250YWluZXIueCwgc3RhdHNZIC0gMTYsICdUSU1FJywge1xuICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsIEJsYWNrJyxcbiAgICAgICAgICAgIGZvbnRTaXplOiAnMTJweCcsXG4gICAgICAgICAgICBjb2xvcjogJyMxZTNhOGEnXG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUpO1xuXG4gICAgICAgIHRoaXMuZW5kTW9kYWxTY29yZVRleHQgPSB0aGlzLmFkZC50ZXh0KHNjb3JlQ2FyZENvbnRhaW5lci54LCBzdGF0c1kgKyA2LCAnMCcsIHtcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCBCbGFjaycsXG4gICAgICAgICAgICBmb250U2l6ZTogJzE4cHgnLFxuICAgICAgICAgICAgY29sb3I6ICcjMGYxNzJhJ1xuICAgICAgICB9KS5zZXRPcmlnaW4oMC41KTtcblxuICAgICAgICB0aGlzLmVuZE1vZGFsVGltZVRleHQgPSB0aGlzLmFkZC50ZXh0KHRpbWVDYXJkQ29udGFpbmVyLngsIHN0YXRzWSArIDYsICcwMDowMCcsIHtcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCBCbGFjaycsXG4gICAgICAgICAgICBmb250U2l6ZTogJzE4cHgnLFxuICAgICAgICAgICAgY29sb3I6ICcjMGYxNzJhJ1xuICAgICAgICB9KS5zZXRPcmlnaW4oMC41KTtcblxuICAgICAgICBjb25zdCByZXN0YXJ0QnV0dG9uID0gdGhpcy5jcmVhdGVFbmRSZXN0YXJ0QnV0dG9uKDAsIHBhbmVsSGVpZ2h0IC8gMiArIDU2KTtcbiAgICAgICAgcmVzdGFydEJ1dHRvbi5zZXREZXB0aCgyKTtcblxuICAgICAgICBwYW5lbENvbnRhaW5lci5hZGQoW1xuICAgICAgICAgICAgcGFuZWxTaGFkb3csXG4gICAgICAgICAgICBwYW5lbEJnLFxuICAgICAgICAgICAgdGl0bGUsXG4gICAgICAgICAgICBzdWJ0aXRsZSxcbiAgICAgICAgICAgIHNjb3JlQ2FyZENvbnRhaW5lcixcbiAgICAgICAgICAgIHRpbWVDYXJkQ29udGFpbmVyLFxuICAgICAgICAgICAgc2NvcmVMYWJlbCxcbiAgICAgICAgICAgIHRpbWVMYWJlbCxcbiAgICAgICAgICAgIHRoaXMuZW5kTW9kYWxTY29yZVRleHQsXG4gICAgICAgICAgICB0aGlzLmVuZE1vZGFsVGltZVRleHRcbiAgICAgICAgXSk7XG4gICAgICAgIHBhbmVsQ29udGFpbmVyLmFkZChyZXN0YXJ0QnV0dG9uKTtcblxuICAgICAgICBjb250YWluZXIuYWRkKFtvdmVybGF5LCBibG9ja2VyLCBwYW5lbENvbnRhaW5lcl0pO1xuICAgICAgICBjb250YWluZXIuc2V0VmlzaWJsZShmYWxzZSk7XG5cbiAgICAgICAgdGhpcy5lbmRNb2RhbCA9IGNvbnRhaW5lcjtcbiAgICAgICAgdGhpcy5lbmRNb2RhbC5zZXREYXRhKCdwYW5lbCcsIHBhbmVsQ29udGFpbmVyKTtcbiAgICAgICAgdGhpcy5lbmRNb2RhbC5zZXREYXRhKCdvdmVybGF5Jywgb3ZlcmxheSk7XG4gICAgICAgIGlmICh0aGlzLnVpUm9vdCkgdGhpcy51aVJvb3QuYWRkKGNvbnRhaW5lcik7XG4gICAgfVxuICAgIFxuICAgIHByaXZhdGUgY3JlYXRlRW5kUmVzdGFydEJ1dHRvbih4OiBudW1iZXIsIHk6IG51bWJlcik6IFBoYXNlci5HYW1lT2JqZWN0cy5Db250YWluZXIge1xuICAgICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmFkZC5jb250YWluZXIoeCwgeSkuc2V0U2Nyb2xsRmFjdG9yKDApO1xuICAgICAgICBjb25zdCB3aWR0aCA9IDI2MDtcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gNTI7XG4gICAgICAgIGNvbnN0IHJhZGl1cyA9IDIwO1xuXG4gICAgICAgIGNvbnN0IHNoYWRvdyA9IHRoaXMuYWRkLmdyYXBoaWNzKCk7XG4gICAgICAgIHNoYWRvdy5maWxsU3R5bGUoMHgwMDAwMDAsIDAuMik7XG4gICAgICAgIHNoYWRvdy5maWxsUm91bmRlZFJlY3QoLXdpZHRoIC8gMiArIDQsIC1oZWlnaHQgLyAyICsgNiwgd2lkdGgsIGhlaWdodCwgcmFkaXVzKTtcblxuICAgICAgICBjb25zdCBiZyA9IHRoaXMuYWRkLmdyYXBoaWNzKCk7XG4gICAgICAgIGNvbnN0IGRyYXcgPSAoZmlsbDogbnVtYmVyLCBzdHJva2U6IG51bWJlcikgPT4ge1xuICAgICAgICAgICAgYmcuY2xlYXIoKTtcbiAgICAgICAgICAgIGJnLmZpbGxTdHlsZShmaWxsLCAxKTtcbiAgICAgICAgICAgIGJnLmZpbGxSb3VuZGVkUmVjdCgtd2lkdGggLyAyLCAtaGVpZ2h0IC8gMiwgd2lkdGgsIGhlaWdodCwgcmFkaXVzKTtcbiAgICAgICAgICAgIGJnLmxpbmVTdHlsZSgyLCBzdHJva2UsIDAuOCk7XG4gICAgICAgICAgICBiZy5zdHJva2VSb3VuZGVkUmVjdCgtd2lkdGggLyAyLCAtaGVpZ2h0IC8gMiwgd2lkdGgsIGhlaWdodCwgcmFkaXVzKTtcbiAgICAgICAgfTtcbiAgICAgICAgZHJhdygweDNiODJmNiwgMHg5M2M1ZmQpO1xuXG4gICAgICAgIGNvbnN0IHRleHQgPSB0aGlzLmFkZC50ZXh0KDAsIDAsICdQbGF5IEFnYWluJywge1xuICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsIEJsYWNrJyxcbiAgICAgICAgICAgIGZvbnRTaXplOiAnMjBweCcsXG4gICAgICAgICAgICBjb2xvcjogJyNmZmZmZmYnXG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUpO1xuXG4gICAgICAgIGNvbnN0IGhpdCA9IHRoaXMuYWRkLnJlY3RhbmdsZSgwLCAwLCB3aWR0aCwgaGVpZ2h0LCAweGZmZmZmZiwgMC4wMDEpO1xuICAgICAgICBoaXQuc2V0SW50ZXJhY3RpdmUoKTtcblxuICAgICAgICBjb250YWluZXIuYWRkKFtzaGFkb3csIGJnLCB0ZXh0LCBoaXRdKTtcbiAgICAgICAgY29udGFpbmVyLnNldFNpemUod2lkdGgsIGhlaWdodCk7XG5cbiAgICAgICAgaGl0Lm9uKCdwb2ludGVyb3ZlcicsICgpID0+IHtcbiAgICAgICAgICAgIGRyYXcoMHgyNTYzZWIsIDB4YmZkYmZlKTtcbiAgICAgICAgICAgIHRoaXMudHdlZW5zLmFkZCh7IHRhcmdldHM6IGNvbnRhaW5lciwgc2NhbGU6IDEuMDIsIGR1cmF0aW9uOiAxMjAsIGVhc2U6ICdTaW5lLmVhc2VPdXQnIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgaGl0Lm9uKCdwb2ludGVyb3V0JywgKCkgPT4ge1xuICAgICAgICAgICAgZHJhdygweDNiODJmNiwgMHg5M2M1ZmQpO1xuICAgICAgICAgICAgdGhpcy50d2VlbnMuYWRkKHsgdGFyZ2V0czogY29udGFpbmVyLCBzY2FsZTogMSwgZHVyYXRpb246IDEyMCwgZWFzZTogJ1NpbmUuZWFzZU91dCcgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBoaXQub24oJ3BvaW50ZXJkb3duJywgKCkgPT4ge1xuICAgICAgICAgICAgZHJhdygweDFkNGVkOCwgMHhiZmRiZmUpO1xuICAgICAgICAgICAgdGhpcy50d2VlbnMuYWRkKHsgdGFyZ2V0czogY29udGFpbmVyLCBzY2FsZTogMC45OCwgZHVyYXRpb246IDgwLCBlYXNlOiAnU2luZS5lYXNlT3V0JyB9KTtcbiAgICAgICAgICAgIHRoaXMucmVzdGFydFJ1bigpO1xuICAgICAgICB9KTtcbiAgICAgICAgaGl0Lm9uKCdwb2ludGVydXAnLCAoKSA9PiB7XG4gICAgICAgICAgICBkcmF3KDB4MjU2M2ViLCAweGJmZGJmZSk7XG4gICAgICAgICAgICB0aGlzLnR3ZWVucy5hZGQoeyB0YXJnZXRzOiBjb250YWluZXIsIHNjYWxlOiAxLjAyLCBkdXJhdGlvbjogODAsIGVhc2U6ICdTaW5lLmVhc2VPdXQnIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gY29udGFpbmVyO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlVGltZVVwTW9kYWwoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gdGhpcy5zY2FsZTtcblxuICAgICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmFkZC5jb250YWluZXIoMCwgMCkuc2V0U2Nyb2xsRmFjdG9yKDApLnNldERlcHRoKDI0MCk7XG5cbiAgICAgICAgY29uc3Qgb3ZlcmxheSA9IHRoaXMuYWRkLnJlY3RhbmdsZSgwLCAwLCB3aWR0aCwgaGVpZ2h0LCAweDAwMDAwMCwgMC4xMilcbiAgICAgICAgICAgIC5zZXRPcmlnaW4oMCwgMCk7XG5cbiAgICAgICAgY29uc3QgcGFuZWxXaWR0aCA9IE1hdGgubWluKDUyMCwgd2lkdGggLSA4MCk7XG4gICAgICAgIGNvbnN0IHBhbmVsSGVpZ2h0ID0gMTYwO1xuICAgICAgICBjb25zdCBwYW5lbENvbnRhaW5lciA9IHRoaXMuYWRkLmNvbnRhaW5lcih3aWR0aCAvIDIsIE1hdGgucm91bmQoaGVpZ2h0ICogMC41NikpLnNldFNjcm9sbEZhY3RvcigwKTtcblxuICAgICAgICBjb25zdCBwYW5lbFNoYWRvdyA9IHRoaXMuYWRkLmdyYXBoaWNzKCk7XG4gICAgICAgIHBhbmVsU2hhZG93LmZpbGxTdHlsZSgweDAwMDAwMCwgMC4xNSk7XG4gICAgICAgIHBhbmVsU2hhZG93LmZpbGxSb3VuZGVkUmVjdCgtcGFuZWxXaWR0aCAvIDIgKyA2LCAtcGFuZWxIZWlnaHQgLyAyICsgMTAsIHBhbmVsV2lkdGgsIHBhbmVsSGVpZ2h0LCAyNik7XG5cbiAgICAgICAgY29uc3QgcGFuZWxCZyA9IHRoaXMuYWRkLmdyYXBoaWNzKCk7XG4gICAgICAgIHBhbmVsQmcuZmlsbFN0eWxlKDB4ZmZmZmZmLCAwLjg1KTtcbiAgICAgICAgcGFuZWxCZy5maWxsUm91bmRlZFJlY3QoLXBhbmVsV2lkdGggLyAyLCAtcGFuZWxIZWlnaHQgLyAyLCBwYW5lbFdpZHRoLCBwYW5lbEhlaWdodCwgMjQpO1xuICAgICAgICBwYW5lbEJnLmxpbmVTdHlsZSgyLCAweDkzYzVmZCwgMC40NSk7XG4gICAgICAgIHBhbmVsQmcuc3Ryb2tlUm91bmRlZFJlY3QoLXBhbmVsV2lkdGggLyAyLCAtcGFuZWxIZWlnaHQgLyAyLCBwYW5lbFdpZHRoLCBwYW5lbEhlaWdodCwgMjQpO1xuXG4gICAgICAgIGNvbnN0IHRpdGxlID0gdGhpcy5hZGQudGV4dCgwLCAtMjYsICdPdXQgb2YgdGltZSEgRmFpbGVkJywge1xuICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsIEJsYWNrJyxcbiAgICAgICAgICAgIGZvbnRTaXplOiAnMjJweCcsXG4gICAgICAgICAgICBjb2xvcjogJyMwZjE3MmEnXG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUpO1xuXG4gICAgICAgIGNvbnN0IHJlc3RhcnRCdXR0b24gPSB0aGlzLmNyZWF0ZVJlc3RhcnRCdXR0b24oMCwgNDIpO1xuXG4gICAgICAgIHBhbmVsQ29udGFpbmVyLmFkZChbcGFuZWxTaGFkb3csIHBhbmVsQmcsIHRpdGxlLCByZXN0YXJ0QnV0dG9uXSk7XG5cbiAgICAgICAgY29udGFpbmVyLmFkZChbb3ZlcmxheSwgcGFuZWxDb250YWluZXJdKTtcbiAgICAgICAgY29udGFpbmVyLnNldFZpc2libGUoZmFsc2UpO1xuXG4gICAgICAgIHRoaXMudGltZVVwTW9kYWwgPSBjb250YWluZXI7XG4gICAgICAgIHRoaXMudGltZVVwTW9kYWwuc2V0RGF0YSgncGFuZWwnLCBwYW5lbENvbnRhaW5lcik7XG4gICAgICAgIGlmICh0aGlzLnVpUm9vdCkgdGhpcy51aVJvb3QuYWRkKGNvbnRhaW5lcik7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVSZXN0YXJ0QnV0dG9uKHg6IG51bWJlciwgeTogbnVtYmVyKTogUGhhc2VyLkdhbWVPYmplY3RzLkNvbnRhaW5lciB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuYWRkLmNvbnRhaW5lcih4LCB5KS5zZXRTY3JvbGxGYWN0b3IoMCk7XG4gICAgICAgIGNvbnN0IHdpZHRoID0gMjYwO1xuICAgICAgICBjb25zdCBoZWlnaHQgPSA1MjtcbiAgICAgICAgY29uc3QgcmFkaXVzID0gMjA7XG5cbiAgICAgICAgY29uc3Qgc2hhZG93ID0gdGhpcy5hZGQuZ3JhcGhpY3MoKTtcbiAgICAgICAgc2hhZG93LmZpbGxTdHlsZSgweDAwMDAwMCwgMC4yKTtcbiAgICAgICAgc2hhZG93LmZpbGxSb3VuZGVkUmVjdCgtd2lkdGggLyAyICsgNCwgLWhlaWdodCAvIDIgKyA2LCB3aWR0aCwgaGVpZ2h0LCByYWRpdXMpO1xuXG4gICAgICAgIGNvbnN0IGJnID0gdGhpcy5hZGQuZ3JhcGhpY3MoKTtcbiAgICAgICAgY29uc3QgZHJhdyA9IChmaWxsOiBudW1iZXIsIHN0cm9rZTogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICBiZy5jbGVhcigpO1xuICAgICAgICAgICAgYmcuZmlsbFN0eWxlKGZpbGwsIDEpO1xuICAgICAgICAgICAgYmcuZmlsbFJvdW5kZWRSZWN0KC13aWR0aCAvIDIsIC1oZWlnaHQgLyAyLCB3aWR0aCwgaGVpZ2h0LCByYWRpdXMpO1xuICAgICAgICAgICAgYmcubGluZVN0eWxlKDIsIHN0cm9rZSwgMC44KTtcbiAgICAgICAgICAgIGJnLnN0cm9rZVJvdW5kZWRSZWN0KC13aWR0aCAvIDIsIC1oZWlnaHQgLyAyLCB3aWR0aCwgaGVpZ2h0LCByYWRpdXMpO1xuICAgICAgICB9O1xuICAgICAgICBkcmF3KDB4M2I4MmY2LCAweDkzYzVmZCk7XG5cbiAgICAgICAgY29uc3QgdGV4dCA9IHRoaXMuYWRkLnRleHQoMCwgMCwgJ0NvbnRpbnVlJywge1xuICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsIEJsYWNrJyxcbiAgICAgICAgICAgIGZvbnRTaXplOiAnMjBweCcsXG4gICAgICAgICAgICBjb2xvcjogJyNmZmZmZmYnXG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUpO1xuXG4gICAgICAgIGNvbnN0IGhpdCA9IHRoaXMuYWRkLnJlY3RhbmdsZSgwLCAwLCB3aWR0aCwgaGVpZ2h0LCAweGZmZmZmZiwgMC4wMDEpO1xuICAgICAgICBoaXQuc2V0SW50ZXJhY3RpdmUoKTtcblxuICAgICAgICBjb250YWluZXIuYWRkKFtzaGFkb3csIGJnLCB0ZXh0LCBoaXRdKTtcbiAgICAgICAgY29udGFpbmVyLnNldFNpemUod2lkdGgsIGhlaWdodCk7XG4gICAgICAgIGhpdC5vbigncG9pbnRlcm92ZXInLCAoKSA9PiB7XG4gICAgICAgICAgICBkcmF3KDB4MjU2M2ViLCAweGJmZGJmZSk7XG4gICAgICAgICAgICB0aGlzLnR3ZWVucy5hZGQoeyB0YXJnZXRzOiBjb250YWluZXIsIHNjYWxlOiAxLjAyLCBkdXJhdGlvbjogMTIwLCBlYXNlOiAnU2luZS5lYXNlT3V0JyB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGhpdC5vbigncG9pbnRlcm91dCcsICgpID0+IHtcbiAgICAgICAgICAgIGRyYXcoMHgzYjgyZjYsIDB4OTNjNWZkKTtcbiAgICAgICAgICAgIHRoaXMudHdlZW5zLmFkZCh7IHRhcmdldHM6IGNvbnRhaW5lciwgc2NhbGU6IDEsIGR1cmF0aW9uOiAxMjAsIGVhc2U6ICdTaW5lLmVhc2VPdXQnIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgaGl0Lm9uKCdwb2ludGVyZG93bicsICgpID0+IHtcbiAgICAgICAgICAgIGRyYXcoMHgxZDRlZDgsIDB4YmZkYmZlKTtcbiAgICAgICAgICAgIHRoaXMudHdlZW5zLmFkZCh7IHRhcmdldHM6IGNvbnRhaW5lciwgc2NhbGU6IDAuOTgsIGR1cmF0aW9uOiA4MCwgZWFzZTogJ1NpbmUuZWFzZU91dCcgfSk7XG4gICAgICAgICAgICB0aGlzLnJlc3RhcnRSdW4oKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGhpdC5vbigncG9pbnRlcnVwJywgKCkgPT4ge1xuICAgICAgICAgICAgZHJhdygweDI1NjNlYiwgMHhiZmRiZmUpO1xuICAgICAgICAgICAgdGhpcy50d2VlbnMuYWRkKHsgdGFyZ2V0czogY29udGFpbmVyLCBzY2FsZTogMS4wMiwgZHVyYXRpb246IDgwLCBlYXNlOiAnU2luZS5lYXNlT3V0JyB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZVN0YXJ0QnV0dG9uKHg6IG51bWJlciwgeTogbnVtYmVyKTogUGhhc2VyLkdhbWVPYmplY3RzLkNvbnRhaW5lciB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuYWRkLmNvbnRhaW5lcih4LCB5KS5zZXRTY3JvbGxGYWN0b3IoMCk7XG4gICAgICAgIGNvbnN0IHdpZHRoID0gMjYwO1xuICAgICAgICBjb25zdCBoZWlnaHQgPSA1MjtcbiAgICAgICAgY29uc3QgcmFkaXVzID0gMjA7XG5cbiAgICAgICAgY29uc3Qgc2hhZG93ID0gdGhpcy5hZGQuZ3JhcGhpY3MoKTtcbiAgICAgICAgc2hhZG93LmZpbGxTdHlsZSgweDAwMDAwMCwgMC4yKTtcbiAgICAgICAgc2hhZG93LmZpbGxSb3VuZGVkUmVjdCgtd2lkdGggLyAyICsgNCwgLWhlaWdodCAvIDIgKyA2LCB3aWR0aCwgaGVpZ2h0LCByYWRpdXMpO1xuXG4gICAgICAgIGNvbnN0IGJnID0gdGhpcy5hZGQuZ3JhcGhpY3MoKTtcbiAgICAgICAgY29uc3QgZHJhdyA9IChmaWxsOiBudW1iZXIsIHN0cm9rZTogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICBiZy5jbGVhcigpO1xuICAgICAgICAgICAgYmcuZmlsbFN0eWxlKGZpbGwsIDEpO1xuICAgICAgICAgICAgYmcuZmlsbFJvdW5kZWRSZWN0KC13aWR0aCAvIDIsIC1oZWlnaHQgLyAyLCB3aWR0aCwgaGVpZ2h0LCByYWRpdXMpO1xuICAgICAgICAgICAgYmcubGluZVN0eWxlKDIsIHN0cm9rZSwgMC44KTtcbiAgICAgICAgICAgIGJnLnN0cm9rZVJvdW5kZWRSZWN0KC13aWR0aCAvIDIsIC1oZWlnaHQgLyAyLCB3aWR0aCwgaGVpZ2h0LCByYWRpdXMpO1xuICAgICAgICB9O1xuICAgICAgICBkcmF3KDB4M2I4MmY2LCAweDkzYzVmZCk7XG4gICAgICAgICAgICBcbiAgICAgICAgY29uc3QgdGV4dCA9IHRoaXMuYWRkLnRleHQoMCwgMCwgJ1N0YXJ0IEdhbWUnLCB7XG4gICAgICAgICAgICBmb250RmFtaWx5OiAnQXJpYWwgQmxhY2snLCBmb250U2l6ZTogJzIwcHgnLCBjb2xvcjogJyNmZmZmZmYnXG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUpO1xuXG4gICAgICAgIGNvbnN0IGhpdFBhZCA9IDE2O1xuICAgICAgICBjb25zdCBoaXRXID0gd2lkdGggKyBoaXRQYWQgKiAyO1xuICAgICAgICBjb25zdCBoaXRIID0gaGVpZ2h0ICsgaGl0UGFkICogMjtcbiAgICAgICAgY29uc3QgaGl0ID0gdGhpcy5hZGQucmVjdGFuZ2xlKDAsIDAsIGhpdFcsIGhpdEgsIDB4ZmZmZmZmLCAwLjAwMSk7XG4gICAgICAgIGhpdC5zZXRJbnRlcmFjdGl2ZSgpO1xuXG4gICAgICAgIGNvbnRhaW5lci5hZGQoW3NoYWRvdywgYmcsIHRleHQsIGhpdF0pO1xuICAgICAgICBjb250YWluZXIuc2V0U2l6ZSh3aWR0aCwgaGVpZ2h0KTtcblxuICAgICAgICBjb25zdCBvblByZXNzID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnN0YXJ0TW9kYWxPcGVuKSByZXR1cm47XG4gICAgICAgICAgICBkcmF3KDB4MWQ0ZWQ4LCAweGJmZGJmZSk7XG4gICAgICAgICAgICB0aGlzLmNsb3NlU3RhcnRNb2RhbCgpO1xuICAgICAgICAgICAgdGhpcy5vcGVuUXVpek1vZGFsKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3Qgb25SZWxlYXNlID0gKCkgPT4ge1xuICAgICAgICAgICAgZHJhdygweDNiODJmNiwgMHg5M2M1ZmQpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGhpdC5vbigncG9pbnRlcmRvd24nLCBvblByZXNzKTtcbiAgICAgICAgaGl0Lm9uKCdwb2ludGVydXAnLCBvblJlbGVhc2UpO1xuICAgICAgICBoaXQub24oJ3BvaW50ZXJvdXQnLCBvblJlbGVhc2UpO1xuXG4gICAgICAgIHRoaXMudHdlZW5zLmFkZCh7XG4gICAgICAgICAgICB0YXJnZXRzOiBjb250YWluZXIsXG4gICAgICAgICAgICBzY2FsZTogMS4wNSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiA4MDAsXG4gICAgICAgICAgICB5b3lvOiB0cnVlLFxuICAgICAgICAgICAgcmVwZWF0OiAtMVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gY29udGFpbmVyO1xuICAgIH1cblxuICAgIHByaXZhdGUgb3BlblN0YXJ0TW9kYWwoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc3RhcnRNb2RhbE9wZW4gPSB0cnVlO1xuICAgICAgICB0aGlzLmp1bXBCdXR0b24uc2V0QWxwaGEoMC40KTtcbiAgICAgICAgdGhpcy5zdG9wVGltZXIoKTtcblxuICAgICAgICB0aGlzLnN0YXJ0TW9kYWwuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgdGhpcy5zdGFydE1vZGFsLnNldEFscGhhKDApO1xuXG4gICAgICAgIHRoaXMudHdlZW5zLmFkZCh7XG4gICAgICAgICAgICB0YXJnZXRzOiB0aGlzLnN0YXJ0TW9kYWwsXG4gICAgICAgICAgICBhbHBoYTogMSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAxODBcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjbG9zZVN0YXJ0TW9kYWwoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc3RhcnRNb2RhbE9wZW4gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5qdW1wQnV0dG9uLnNldEFscGhhKDEpO1xuICAgICAgICB0aGlzLnN0YXJ0VGltZXIoKTtcbiAgICAgICAgdGhpcy5zdGFydE1vZGFsLnNldFZpc2libGUoZmFsc2UpO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2V0UXVlc3Rpb24oZGF0YTogeyBpbmRleDogbnVtYmVyOyB0b3RhbDogbnVtYmVyOyBxdWVzdGlvbjogc3RyaW5nOyBvcHRpb25zOiBzdHJpbmdbXSB9KTogdm9pZCB7XG4gICAgICAgIHRoaXMucXVpelBhbmVsLnNldEZlZWRiYWNrKCdpZGxlJyk7XG4gICAgICAgIHRoaXMucXVpelBhbmVsLnNldFF1ZXN0aW9uKGRhdGEpO1xuICAgICAgICB0aGlzLmxheW91dFF1aXooKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGxheW91dFF1aXooKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5xdWl6UGFuZWwpIHJldHVybjtcbiAgICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSB0aGlzLnNjYWxlO1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnF1aXpQYW5lbC5sYXlvdXQod2lkdGgsIGhlaWdodCk7XG4gICAgICAgIHRoaXMudWlTY2FsZSA9IHJlc3VsdC51aVNjYWxlO1xuICAgICAgICB0aGlzLnF1aXpQYW5lbEhlaWdodCA9IHJlc3VsdC5wYW5lbEhlaWdodDtcbiAgICAgICAgdGhpcy5xdWl6UGFuZWxXaWR0aCA9IHJlc3VsdC5wYW5lbFdpZHRoO1xuICAgIH1cblxuICAgIHByaXZhdGUgb3BlblF1aXpNb2RhbCgpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuZ2FtZU92ZXIpIHJldHVybjtcbiAgICAgICAgaWYgKHRoaXMuZ2FtZUNvbXBsZXRlZCkgcmV0dXJuO1xuICAgICAgICBpZiAodGhpcy5wbGF5ZXIuaXNKdW1waW5nKCkpIHJldHVybjtcbiAgICAgICAgdGhpcy5xdWl6T3BlbiA9IHRydWU7XG4gICAgICAgIHRoaXMucXVpekxvY2tlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmp1bXBCdXR0b24uc2V0QWxwaGEoMC42KTtcblxuICAgICAgICBjb25zdCBxdWVzdGlvblBvb2wgPSB0aGlzLmdldFF1ZXN0aW9uUG9vbCgpO1xuICAgICAgICBjb25zdCBxdWVzdGlvbiA9IHF1ZXN0aW9uUG9vbFt0aGlzLnF1aXpDdXJyZW50SW5kZXggJSBxdWVzdGlvblBvb2wubGVuZ3RoXTtcbiAgICAgICAgdGhpcy5zZXRRdWVzdGlvbih7XG4gICAgICAgICAgICBpbmRleDogdGhpcy5xdWl6Q3VycmVudEluZGV4ICsgMSxcbiAgICAgICAgICAgIHRvdGFsOiBxdWVzdGlvblBvb2wubGVuZ3RoLFxuICAgICAgICAgICAgcXVlc3Rpb246IHF1ZXN0aW9uLnF1ZXN0aW9uLFxuICAgICAgICAgICAgb3B0aW9uczogcXVlc3Rpb24ub3B0aW9uc1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnF1aXpNb2RhbC5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgICB0aGlzLnF1aXpNb2RhbC5zZXRBbHBoYSgwKTtcbiAgICAgICAgY29uc3QgcGFuZWwgPSB0aGlzLnF1aXpQYW5lbC5wYW5lbENvbnRhaW5lcjtcbiAgICAgICAgcGFuZWwuc2V0U2NhbGUoMC45Nik7XG4gICAgICAgIHBhbmVsLnkgKz0gMTg7XG4gICAgICAgIHRoaXMudHdlZW5zLmFkZCh7XG4gICAgICAgICAgICB0YXJnZXRzOiB0aGlzLnF1aXpNb2RhbCxcbiAgICAgICAgICAgIGFscGhhOiAxLFxuICAgICAgICAgICAgZHVyYXRpb246IDE4MFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy50d2VlbnMuYWRkKHtcbiAgICAgICAgICAgIHRhcmdldHM6IHBhbmVsLFxuICAgICAgICAgICAgc2NhbGU6IDEsXG4gICAgICAgICAgICB5OiBwYW5lbC55IC0gMTgsXG4gICAgICAgICAgICBkdXJhdGlvbjogMjIwLFxuICAgICAgICAgICAgZWFzZTogJ0JhY2suZWFzZU91dCdcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjbG9zZVF1aXpNb2RhbCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5xdWl6T3BlbiA9IGZhbHNlO1xuICAgICAgICB0aGlzLnF1aXpMb2NrZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5qdW1wQnV0dG9uLnNldEFscGhhKDEpO1xuICAgICAgICB0aGlzLnF1aXpNb2RhbC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGhhbmRsZVF1aXpBbnN3ZXIoaW5kZXg6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBxdWVzdGlvblBvb2wgPSB0aGlzLmdldFF1ZXN0aW9uUG9vbCgpO1xuICAgICAgICBjb25zdCBxdWVzdGlvbiA9IHF1ZXN0aW9uUG9vbFt0aGlzLnF1aXpDdXJyZW50SW5kZXggJSBxdWVzdGlvblBvb2wubGVuZ3RoXTtcbiAgICAgICAgbGV0IGlzQ29ycmVjdCA9IGluZGV4ID09PSBxdWVzdGlvbi5jb3JyZWN0SW5kZXg7XG5cbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRPcHRpb25JZCA9IHF1ZXN0aW9uLm9wdGlvbklkc1tpbmRleF07XG4gICAgICAgIGlmICh0aGlzLnNlc3Npb25JZCAmJiBxdWVzdGlvbi5zZXNzaW9uUXVlc3Rpb25JZCAmJiBzZWxlY3RlZE9wdGlvbklkKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgc3VibWl0QW5zd2VyIH0gPSBhd2FpdCBpbXBvcnQoJy4uLy4uL3NlcnZpY2VzL2FwaScpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHN1Ym1pdEFuc3dlcihcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXNzaW9uSWQsXG4gICAgICAgICAgICAgICAgICAgIHF1ZXN0aW9uLnNlc3Npb25RdWVzdGlvbklkLFxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZE9wdGlvbklkXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBpc0NvcnJlY3QgPSByZXMuZGF0YS5pc19jb3JyZWN0O1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdzdWJtaXRBbnN3ZXIgZmFpbGVkLCBmYWxsYmFjayB0byBsb2NhbCBjaGVjaycsIGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGJ0biA9IHRoaXMucXVpek9wdGlvbkJ1dHRvbnNbaW5kZXhdO1xuICAgICAgICBjb25zdCByZWRyYXcgPSBidG4uZ2V0RGF0YSgncmVkcmF3JykgYXMgKHN0YXRlOiAnbm9ybWFsJyB8ICdjb3JyZWN0JyB8ICd3cm9uZycpID0+IHZvaWQ7XG5cbiAgICAgICAgaWYgKGlzQ29ycmVjdCkge1xuICAgICAgICAgICAgdGhpcy5xdWl6TG9ja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIHJlZHJhdygnY29ycmVjdCcpO1xuICAgICAgICAgICAgdGhpcy5zZXRRdWl6RmVlZGJhY2soJ2NvcnJlY3QnKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU2NvcmUoMSk7XG4gICAgICAgICAgICB0aGlzLnNwZWVkVXBKdW1wKCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmRlbGF5KDQwMCk7XG4gICAgICAgICAgICB0aGlzLmNsb3NlUXVpek1vZGFsKCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmhhbmRsZUp1bXAoKTtcbiAgICAgICAgICAgIHRoaXMucXVpekN1cnJlbnRJbmRleCArPSAxO1xuICAgICAgICAgICAgdGhpcy50aW1lLmRlbGF5ZWRDYWxsKDI1MCwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMub3BlblF1aXpNb2RhbCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnF1aXpMb2NrZWQgPSB0cnVlO1xuICAgICAgICAgICAgcmVkcmF3KCd3cm9uZycpO1xuICAgICAgICAgICAgdGhpcy5zZXRRdWl6RmVlZGJhY2soJ3dyb25nJyk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNjb3JlKC0xKTtcbiAgICAgICAgICAgIHRoaXMuc2hvd1BsYXllclN0YXRlKCdpbmNvcnJlY3QnKTtcbiAgICAgICAgICAgIGNvbnN0IHBhbmVsID0gdGhpcy5xdWl6UGFuZWwucGFuZWxDb250YWluZXI7XG4gICAgICAgICAgICBjb25zdCBzdGFydFggPSBwYW5lbC54O1xuICAgICAgICAgICAgdGhpcy50d2VlbnMuYWRkKHtcbiAgICAgICAgICAgICAgICB0YXJnZXRzOiBwYW5lbCxcbiAgICAgICAgICAgICAgICB4OiBzdGFydFggKyAxMCxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogNjAsXG4gICAgICAgICAgICAgICAgeW95bzogdHJ1ZSxcbiAgICAgICAgICAgICAgICByZXBlYXQ6IDMsXG4gICAgICAgICAgICAgICAgZWFzZTogJ1NpbmUuZWFzZUluT3V0JyxcbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHBhbmVsLnggPSBzdGFydFg7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucXVpekxvY2tlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICByZWRyYXcoJ25vcm1hbCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRRdWVzdGlvblBvb2woKSB7XG4gICAgICAgIGNvbnN0IGFwaVF1ZXN0aW9ucyA9IHRoaXMuc2Vzc2lvblF1ZXN0aW9ucztcbiAgICAgICAgaWYgKGFwaVF1ZXN0aW9ucz8ubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucXVlc3Rpb25Tb3VyY2VMb2dnZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXN0aW9uU291cmNlTG9nZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW0dBTUVdW1RPV05dIFVzaW5nIHNlc3Npb24gcXVlc3Rpb25zJywge1xuICAgICAgICAgICAgICAgICAgICBnYW1lQ29kZTogdGhpcy5nYW1lQ29kZSxcbiAgICAgICAgICAgICAgICAgICAgY291bnQ6IGFwaVF1ZXN0aW9ucy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgIHNhbXBsZTogYXBpUXVlc3Rpb25zWzBdPy5xdWVzdGlvbj8uY29udGVudCA/PyBudWxsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYXBpUXVlc3Rpb25zLm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSBpdGVtLnF1ZXN0aW9uLm9wdGlvbnMubWFwKChvcHQpID0+IG9wdC50ZXh0KTtcbiAgICAgICAgICAgICAgICBjb25zdCBvcHRpb25JZHMgPSBpdGVtLnF1ZXN0aW9uLm9wdGlvbnMubWFwKChvcHQpID0+IG9wdC5pZCA/PyAnJyk7XG4gICAgICAgICAgICAgICAgbGV0IGNvcnJlY3RJbmRleCA9IGl0ZW0ucXVlc3Rpb24ub3B0aW9ucy5maW5kSW5kZXgoKG9wdCkgPT4gb3B0LmlzX2NvcnJlY3QpO1xuICAgICAgICAgICAgICAgIGlmIChjb3JyZWN0SW5kZXggPCAwKSBjb3JyZWN0SW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25RdWVzdGlvbklkOiBpdGVtLnNlc3Npb25fcXVlc3Rpb25faWQgPz8gbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgcXVlc3Rpb246IGl0ZW0ucXVlc3Rpb24uY29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uSWRzLFxuICAgICAgICAgICAgICAgICAgICBjb3JyZWN0SW5kZXhcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMucXVlc3Rpb25Tb3VyY2VMb2dnZWQpIHtcbiAgICAgICAgICAgIHRoaXMucXVlc3Rpb25Tb3VyY2VMb2dnZWQgPSB0cnVlO1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdbR0FNRV1bVE9XTl0gVXNpbmcgZmFsbGJhY2sgbG9jYWwgcXVlc3Rpb25zJywge1xuICAgICAgICAgICAgICAgIGdhbWVDb2RlOiB0aGlzLmdhbWVDb2RlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHNlc3Npb25RdWVzdGlvbklkOiBudWxsLFxuICAgICAgICAgICAgICAgIHF1ZXN0aW9uOiAnV2hhdCBpcyB0aGUgY2FwaXRhbCBvZiBWaWV0bmFtPycsXG4gICAgICAgICAgICAgICAgb3B0aW9uczogWydIYW5vaScsICdEYSBOYW5nJywgJ0hhaSBQaG9uZycsICdDYW4gVGhvJ10sXG4gICAgICAgICAgICAgICAgb3B0aW9uSWRzOiBbJycsICcnLCAnJywgJyddLFxuICAgICAgICAgICAgICAgIGNvcnJlY3RJbmRleDogMFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBzZXNzaW9uUXVlc3Rpb25JZDogbnVsbCxcbiAgICAgICAgICAgICAgICBxdWVzdGlvbjogJ1doaWNoIGxhbmd1YWdlIGRvZXMgUGhhc2VyIHVzZT8nLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IFsnVHlwZVNjcmlwdC9KYXZhU2NyaXB0JywgJ0MjJywgJ1B5dGhvbicsICdHbyddLFxuICAgICAgICAgICAgICAgIG9wdGlvbklkczogWycnLCAnJywgJycsICcnXSxcbiAgICAgICAgICAgICAgICBjb3JyZWN0SW5kZXg6IDBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgc2Vzc2lvblF1ZXN0aW9uSWQ6IG51bGwsXG4gICAgICAgICAgICAgICAgcXVlc3Rpb246ICdXaGF0IGNvbG9yIGFyZSB0aGUgbGVhdmVzIGluIHRoZSBnYW1lPycsXG4gICAgICAgICAgICAgICAgb3B0aW9uczogWydHcmVlbicsICdSZWQnLCAnUHVycGxlJywgJ1llbGxvdyddLFxuICAgICAgICAgICAgICAgIG9wdGlvbklkczogWycnLCAnJywgJycsICcnXSxcbiAgICAgICAgICAgICAgICBjb3JyZWN0SW5kZXg6IDBcbiAgICAgICAgICAgIH1cbiAgICAgICAgXTtcbiAgICB9XG5cbiAgICBhc3luYyBoYW5kbGVKdW1wKCkge1xuICAgICAgICBpZiAodGhpcy5wbGF5ZXIuaXNKdW1waW5nKCkpIHJldHVybjtcbiAgICAgICAgaWYgKHRoaXMuZ2FtZU92ZXIpIHJldHVybjtcblxuICAgICAgICBjb25zdCBuZXh0SW5kZXggPSB0aGlzLmN1cnJlbnRMZWFmSW5kZXggKyAxO1xuICAgICAgICBjb25zdCBtYXhJbmRleCA9IHRoaXMubGVhZlBhdGgubGVuZ3RoID4gMCA/IHRoaXMubGVhZlBhdGgubGVuZ3RoIC0gMSA6IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTtcblxuICAgICAgICBpZiAodGhpcy5sZWFmUGF0aC5sZW5ndGggPiAwICYmIG5leHRJbmRleCA+IG1heEluZGV4KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdGFyZ2V0UG9zID0gdGhpcy5nZXRMZWFmUG9zaXRpb24obmV4dEluZGV4KTtcblxuICAgICAgICAvLyBTdG9wIGlkbGUgYW5pbWF0aW9uIGR1cmluZyBqdW1wXG4gICAgICAgIHRoaXMucGxheWVyLnN0b3BJZGxlKCk7XG5cbiAgICAgICAgLy8gU2Nyb2xsIENhbWVyYVxuICAgICAgICB0aGlzLnR3ZWVucy5hZGQoe1xuICAgICAgICAgICAgdGFyZ2V0czogdGhpcy5jYW1lcmEsXG4gICAgICAgICAgICBzY3JvbGxZOiB0YXJnZXRQb3MueSAtIDgwMCxcbiAgICAgICAgICAgIGR1cmF0aW9uOiA2MDAsXG4gICAgICAgICAgICBlYXNlOiAnU2luZS5lYXNlSW5PdXQnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFBlcmZvcm0ganVtcCB1c2luZyBFbW90ZUNoYXJhY3RlclxuICAgICAgICBhd2FpdCB0aGlzLnBsYXllci5qdW1wVG8odGFyZ2V0UG9zLngsIHRhcmdldFBvcy55LCB0aGlzLmp1bXBEdXJhdGlvbk1zKTtcblxuICAgICAgICAvLyBVcGRhdGUgc3RhdGUgYWZ0ZXIganVtcCBjb21wbGV0ZXNcbiAgICAgICAgdGhpcy5jdXJyZW50TGVhZkluZGV4ID0gbmV4dEluZGV4O1xuXG4gICAgICAgIGNvbnN0IG5leHRQb3MgPSB0aGlzLmdldExlYWZQb3NpdGlvbih0aGlzLmN1cnJlbnRMZWFmSW5kZXggKyAxKTtcbiAgICAgICAgdGhpcy5wbGF5ZXIuZmxpcChuZXh0UG9zLnggPiB0YXJnZXRQb3MueCk7XG5cbiAgICAgICAgLy8gU2hvdyBjb3JyZWN0IHN0YXRlIG9uIG5ldyBsZWFmLCB0aGVuIHJlc3VtZSBpZGxlXG4gICAgICAgIHRoaXMucGxheWVyLnNob3dDb3JyZWN0KDgwMCk7XG4gICAgICAgIHRoaXMudGltZS5kZWxheWVkQ2FsbCg4MDAsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMucGxheWVyLnBsYXlJZGxlKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICh0aGlzLmxlYWZQYXRoLmxlbmd0aCA+IDAgJiYgdGhpcy5jdXJyZW50TGVhZkluZGV4ID49IG1heEluZGV4KSB7XG4gICAgICAgICAgICB0aGlzLmdhbWVDb21wbGV0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5qdW1wQnV0dG9uLnNldEFscGhhKDAuNCk7XG4gICAgICAgICAgICB0aGlzLnF1aXpPcGVuID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnF1aXpMb2NrZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuc3RvcFRpbWVyKCk7XG4gICAgICAgICAgICB0aGlzLnRpbWVyT3ZlcmxheS5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnRvdGFsVGltZU1zID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU2NvcmUoMyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUVuZFRpbWVUZXh0KCk7XG4gICAgICAgICAgICB0aGlzLnRpbWUuZGVsYXllZENhbGwoNDAwLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5vcGVuRW5kTW9kYWwoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGFydFRpbWVyKCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy50aW1lckV2ZW50KSB7XG4gICAgICAgICAgICB0aGlzLnRpbWVyRXZlbnQucmVtb3ZlKGZhbHNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudG90YWxUaW1lTXMgPSB0aGlzLnNlc3Npb25UaW1lTGltaXQgJiYgdGhpcy5zZXNzaW9uVGltZUxpbWl0ID4gMFxuICAgICAgICAgICAgPyB0aGlzLnNlc3Npb25UaW1lTGltaXQgKiAxMDAwXG4gICAgICAgICAgICA6IDE4MDAwMDtcbiAgICAgICAgdGhpcy51cGRhdGVUaW1lclRleHQodGhpcy50b3RhbFRpbWVNcyk7XG5cbiAgICAgICAgdGhpcy50aW1lckV2ZW50ID0gdGhpcy50aW1lLmFkZEV2ZW50KHtcbiAgICAgICAgICAgIGRlbGF5OiAxMDAwLFxuICAgICAgICAgICAgbG9vcDogdHJ1ZSxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZ2FtZUNvbXBsZXRlZCB8fCB0aGlzLmdhbWVPdmVyKSByZXR1cm47XG4gICAgICAgICAgICAgICAgdGhpcy50b3RhbFRpbWVNcyAtPSAxMDAwO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVGltZXJUZXh0KHRoaXMudG90YWxUaW1lTXMpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnRvdGFsVGltZU1zIDw9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b3RhbFRpbWVNcyA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVGltZXJUZXh0KHRoaXMudG90YWxUaW1lTXMpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVRpbWVVcCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdG9wVGltZXIoKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLnRpbWVyRXZlbnQpIHtcbiAgICAgICAgICAgIHRoaXMudGltZXJFdmVudC5yZW1vdmUoZmFsc2UpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB1cGRhdGVUaW1lclRleHQobXM6IG51bWJlcik6IHZvaWQge1xuICAgICAgICBjb25zdCB0b3RhbFNlY29uZHMgPSBNYXRoLm1heCgwLCBNYXRoLmZsb29yKG1zIC8gMTAwMCkpO1xuICAgICAgICBjb25zdCBtaW51dGVzID0gTWF0aC5mbG9vcih0b3RhbFNlY29uZHMgLyA2MCk7XG4gICAgICAgIGNvbnN0IHNlY29uZHMgPSB0b3RhbFNlY29uZHMgJSA2MDtcbiAgICAgICAgY29uc3QgcGFkID0gKG46IG51bWJlcikgPT4gKG4gPCAxMCA/IGAwJHtufWAgOiBgJHtufWApO1xuICAgICAgICBjb25zdCB0ZXh0ID0gYCR7bWludXRlc31tICR7cGFkKHNlY29uZHMpfXNgO1xuICAgICAgICB0aGlzLnRpbWVyVGV4dC5zZXRUZXh0KHRleHQpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlVGltZVVwKCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5nYW1lT3ZlciB8fCB0aGlzLmdhbWVDb21wbGV0ZWQpIHJldHVybjtcbiAgICAgICAgdGhpcy5nYW1lT3ZlciA9IHRydWU7XG4gICAgICAgIHRoaXMucXVpek9wZW4gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5xdWl6TG9ja2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuanVtcEJ1dHRvbi5zZXRBbHBoYSgwLjQpO1xuICAgICAgICB0aGlzLmNsb3NlUXVpek1vZGFsKCk7XG4gICAgICAgIHRoaXMub3BlblRpbWVVcE1vZGFsKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvcGVuRW5kTW9kYWwoKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5lbmRNb2RhbCkgcmV0dXJuO1xuICAgICAgICBjb25zdCBwYW5lbCA9IHRoaXMuZW5kTW9kYWwuZ2V0RGF0YSgncGFuZWwnKSBhcyBQaGFzZXIuR2FtZU9iamVjdHMuQ29udGFpbmVyO1xuICAgICAgICBjb25zdCBvdmVybGF5ID0gdGhpcy5lbmRNb2RhbC5nZXREYXRhKCdvdmVybGF5JykgYXMgUGhhc2VyLkdhbWVPYmplY3RzLlJlY3RhbmdsZSB8IHVuZGVmaW5lZDtcbiAgICAgICAgcGFuZWwuc2V0U2NhbGUoMC45KTtcbiAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc2V0QWxwaGEoMCk7XG4gICAgICAgIHRoaXMuZW5kTW9kYWwuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgdGhpcy5lbmRNb2RhbC5zZXRBbHBoYSgxKTtcbiAgICAgICAgdGhpcy5sYXVuY2hDb25mZXR0aSgpO1xuICAgICAgICB0aGlzLnN1Ym1pdFNlc3Npb25SZXN1bHQoKTtcbiAgICAgICAgdGhpcy50d2VlbnMuYWRkKHtcbiAgICAgICAgICAgIHRhcmdldHM6IG92ZXJsYXksXG4gICAgICAgICAgICBhbHBoYTogMC42LFxuICAgICAgICAgICAgZHVyYXRpb246IDIwMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy50d2VlbnMuYWRkKHtcbiAgICAgICAgICAgIHRhcmdldHM6IHBhbmVsLFxuICAgICAgICAgICAgc2NhbGU6IDEsXG4gICAgICAgICAgICBkdXJhdGlvbjogMjYwLFxuICAgICAgICAgICAgZWFzZTogJ0JhY2suZWFzZU91dCdcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBsYXVuY2hDb25mZXR0aSgpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuY29uZmV0dGlFbWl0dGVyKSB7XG4gICAgICAgICAgICB0aGlzLmNvbmZldHRpRW1pdHRlci5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY29uZmV0dGlCdXJzdEV2ZW50KSB7XG4gICAgICAgICAgICB0aGlzLmNvbmZldHRpQnVyc3RFdmVudC5yZW1vdmUoZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5jb25mZXR0aUJ1cnN0RXZlbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMuc2NhbGU7XG4gICAgICAgIHRoaXMuY29uZmV0dGlFbWl0dGVyID0gdGhpcy5hZGQucGFydGljbGVzKDAsIDAsICd0aWxlLWZsb3dlcicsIHtcbiAgICAgICAgICAgIHNwZWVkOiB7IG1pbjogOTAsIG1heDogMTcwIH0sXG4gICAgICAgICAgICBhbmdsZTogeyBtaW46IDAsIG1heDogMzYwIH0sXG4gICAgICAgICAgICByb3RhdGU6IHsgbWluOiAtMjIwLCBtYXg6IDIyMCB9LFxuICAgICAgICAgICAgc2NhbGU6IHsgc3RhcnQ6IDAuMzIsIGVuZDogMC4xIH0sXG4gICAgICAgICAgICBsaWZlc3BhbjogeyBtaW46IDE0MDAsIG1heDogMjIwMCB9LFxuICAgICAgICAgICAgcXVhbnRpdHk6IDAsXG4gICAgICAgICAgICBmcmVxdWVuY3k6IC0xLFxuICAgICAgICAgICAgZ3Jhdml0eVk6IDE2MFxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmNvbmZldHRpRW1pdHRlci5zZXRTY3JvbGxGYWN0b3IoMCk7XG4gICAgICAgIHRoaXMuY29uZmV0dGlFbWl0dGVyLnNldERlcHRoKDIxMDApO1xuICAgICAgICB0aGlzLnVpUm9vdC5hZGQodGhpcy5jb25mZXR0aUVtaXR0ZXIpO1xuXG4gICAgICAgIHRoaXMuY29uZmV0dGlCdXJzdEV2ZW50ID0gdGhpcy50aW1lLmFkZEV2ZW50KHtcbiAgICAgICAgICAgIGRlbGF5OiA5MDAsXG4gICAgICAgICAgICByZXBlYXQ6IDAsXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5jb25mZXR0aUVtaXR0ZXIpIHJldHVybjtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZldHRpRW1pdHRlci5leHBsb2RlKDE4LCB3aWR0aCAvIDIsIGhlaWdodCAvIDIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnRpbWUuZGVsYXllZENhbGwoMzUwMCwgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jb25mZXR0aUVtaXR0ZXI/LmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHRoaXMuY29uZmV0dGlFbWl0dGVyID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy5jb25mZXR0aUJ1cnN0RXZlbnQ/LnJlbW92ZShmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLmNvbmZldHRpQnVyc3RFdmVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvcGVuVGltZVVwTW9kYWwoKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy50aW1lVXBNb2RhbCkgcmV0dXJuO1xuICAgICAgICBjb25zdCBwYW5lbCA9IHRoaXMudGltZVVwTW9kYWwuZ2V0RGF0YSgncGFuZWwnKSBhcyBQaGFzZXIuR2FtZU9iamVjdHMuQ29udGFpbmVyO1xuICAgICAgICBwYW5lbC5zZXRTY2FsZSgwLjk2KTtcbiAgICAgICAgdGhpcy50aW1lVXBNb2RhbC5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgICB0aGlzLnRpbWVVcE1vZGFsLnNldEFscGhhKDApO1xuICAgICAgICB0aGlzLnR3ZWVucy5hZGQoe1xuICAgICAgICAgICAgdGFyZ2V0czogdGhpcy50aW1lVXBNb2RhbCxcbiAgICAgICAgICAgIGFscGhhOiAxLFxuICAgICAgICAgICAgZHVyYXRpb246IDIwMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy50d2VlbnMuYWRkKHtcbiAgICAgICAgICAgIHRhcmdldHM6IHBhbmVsLFxuICAgICAgICAgICAgc2NhbGU6IDEsXG4gICAgICAgICAgICBkdXJhdGlvbjogMjQwLFxuICAgICAgICAgICAgZWFzZTogJ0JhY2suZWFzZU91dCdcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjbG9zZVRpbWVVcE1vZGFsKCk6IHZvaWQge1xuICAgICAgICBpZiAoIXRoaXMudGltZVVwTW9kYWwpIHJldHVybjtcbiAgICAgICAgdGhpcy50aW1lVXBNb2RhbC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNsb3NlRW5kTW9kYWwoKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5lbmRNb2RhbCkgcmV0dXJuO1xuICAgICAgICB0aGlzLmVuZE1vZGFsLnNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICB0aGlzLmVuZE1vZGFsLnNldEFscGhhKDApO1xuICAgICAgICBjb25zdCBvdmVybGF5ID0gdGhpcy5lbmRNb2RhbC5nZXREYXRhKCdvdmVybGF5JykgYXMgUGhhc2VyLkdhbWVPYmplY3RzLlJlY3RhbmdsZSB8IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKG92ZXJsYXkpIG92ZXJsYXkuc2V0QWxwaGEoMCk7XG4gICAgICAgIGlmICh0aGlzLmNvbmZldHRpRW1pdHRlcikge1xuICAgICAgICAgICAgdGhpcy5jb25mZXR0aUVtaXR0ZXIuZGVzdHJveSgpO1xuICAgICAgICAgICAgdGhpcy5jb25mZXR0aUVtaXR0ZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY29uZmV0dGlCdXJzdEV2ZW50KSB7XG4gICAgICAgICAgICB0aGlzLmNvbmZldHRpQnVyc3RFdmVudC5yZW1vdmUoZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5jb25mZXR0aUJ1cnN0RXZlbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHN1Ym1pdFNlc3Npb25SZXN1bHQoKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5zZXNzaW9uR2FtZUlkKSByZXR1cm47XG4gICAgICAgIGltcG9ydCgnLi4vLi4vc2VydmljZXMvYXBpJylcbiAgICAgICAgICAgIC50aGVuKCh7IGVuZEdhbWVTZXNzaW9uIH0pID0+IGVuZEdhbWVTZXNzaW9uKHRoaXMuc2Vzc2lvbkdhbWVJZCBhcyBzdHJpbmcsIHRoaXMuc2NvcmUpKVxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdlbmRHYW1lU2Vzc2lvbiBmYWlsZWQnLCBlcnIpO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZXN0YXJ0UnVuKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmdhbWVPdmVyID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZ2FtZUNvbXBsZXRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnF1aXpPcGVuID0gZmFsc2U7XG4gICAgICAgIHRoaXMucXVpekxvY2tlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnF1aXpDdXJyZW50SW5kZXggPSAwO1xuICAgICAgICB0aGlzLnN0YXJ0TW9kYWxPcGVuID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2NvcmUgPSAwO1xuICAgICAgICB0aGlzLnNjb3JlVGV4dC5zZXRUZXh0KCdQT0lOVFM6IDAwJyk7XG4gICAgICAgIHRoaXMuanVtcER1cmF0aW9uTXMgPSA5MDA7XG5cbiAgICAgICAgdGhpcy5jbG9zZVRpbWVVcE1vZGFsKCk7XG4gICAgICAgIHRoaXMuY2xvc2VRdWl6TW9kYWwoKTtcbiAgICAgICAgdGhpcy5jbG9zZUVuZE1vZGFsKCk7XG4gICAgICAgIGlmICh0aGlzLnN0YXJ0TW9kYWwpIHRoaXMuc3RhcnRNb2RhbC5zZXRWaXNpYmxlKGZhbHNlKTtcblxuICAgICAgICBjb25zdCBzdGFydFBvcyA9IHRoaXMuZ2V0TGVhZlBvc2l0aW9uKDApO1xuICAgICAgICB0aGlzLnBsYXllci5zZXRQb3NpdGlvbihzdGFydFBvcy54LCBzdGFydFBvcy55KTtcbiAgICAgICAgdGhpcy5wbGF5ZXIucGxheUlkbGUoKTtcblxuICAgICAgICB0aGlzLmN1cnJlbnRMZWFmSW5kZXggPSAwO1xuICAgICAgICBjb25zdCBuZXh0UG9zID0gdGhpcy5nZXRMZWFmUG9zaXRpb24odGhpcy5jdXJyZW50TGVhZkluZGV4ICsgMSk7XG4gICAgICAgIHRoaXMucGxheWVyLmZsaXAobmV4dFBvcy54ID4gc3RhcnRQb3MueCk7XG5cbiAgICAgICAgdGhpcy5jYW1lcmEuc2Nyb2xsWSA9IHN0YXJ0UG9zLnkgLSA5MDA7XG5cbiAgICAgICAgdGhpcy5zdG9wVGltZXIoKTtcbiAgICAgICAgdGhpcy50aW1lck92ZXJsYXkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgdGhpcy5qdW1wQnV0dG9uLnNldEFscGhhKDEpO1xuICAgICAgICB0aGlzLnN0YXJ0VGltZXIoKTtcbiAgICAgICAgdGhpcy5vcGVuUXVpek1vZGFsKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB1cGRhdGVTY29yZShkZWx0YTogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc2NvcmUgKz0gZGVsdGE7XG4gICAgICAgIGNvbnN0IHBvaW50cyA9IE1hdGgubWF4KDAsIHRoaXMuc2NvcmUpO1xuICAgICAgICB0aGlzLnNjb3JlVGV4dC5zZXRUZXh0KGBQT0lOVFM6ICR7cG9pbnRzLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX1gKTtcbiAgICAgICAgaWYgKHRoaXMuZW5kTW9kYWxTY29yZVRleHQpIHtcbiAgICAgICAgICAgIHRoaXMuZW5kTW9kYWxTY29yZVRleHQuc2V0VGV4dChgU2NvcmU6ICR7dGhpcy5zY29yZX1gKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgdXBkYXRlRW5kVGltZVRleHQoKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5lbmRNb2RhbFRpbWVUZXh0KSByZXR1cm47XG4gICAgICAgIGNvbnN0IGJhc2VNcyA9IHRoaXMuc2Vzc2lvblRpbWVMaW1pdCAmJiB0aGlzLnNlc3Npb25UaW1lTGltaXQgPiAwXG4gICAgICAgICAgICA/IHRoaXMuc2Vzc2lvblRpbWVMaW1pdCAqIDEwMDBcbiAgICAgICAgICAgIDogMTgwMDAwO1xuICAgICAgICBjb25zdCBlbGFwc2VkTXMgPSBiYXNlTXMgLSB0aGlzLnRvdGFsVGltZU1zO1xuICAgICAgICBjb25zdCB0b3RhbFNlY29uZHMgPSBNYXRoLm1heCgwLCBNYXRoLmZsb29yKGVsYXBzZWRNcyAvIDEwMDApKTtcbiAgICAgICAgY29uc3QgbWludXRlcyA9IE1hdGguZmxvb3IodG90YWxTZWNvbmRzIC8gNjApO1xuICAgICAgICBjb25zdCBzZWNvbmRzID0gdG90YWxTZWNvbmRzICUgNjA7XG4gICAgICAgIGNvbnN0IHBhZCA9IChuOiBudW1iZXIpID0+IChuIDwgMTAgPyBgMCR7bn1gIDogYCR7bn1gKTtcbiAgICAgICAgdGhpcy5lbmRNb2RhbFRpbWVUZXh0LnNldFRleHQoYFRpbWU6ICR7cGFkKG1pbnV0ZXMpfToke3BhZChzZWNvbmRzKX1gKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNwZWVkVXBKdW1wKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmp1bXBEdXJhdGlvbk1zID0gTWF0aC5tYXgoNDUwLCB0aGlzLmp1bXBEdXJhdGlvbk1zIC0gNDApO1xuICAgIH1cblxuICAgIGdldExlYWZQb3NpdGlvbihpbmRleDogbnVtYmVyKSB7XG4gICAgICAgIGlmICh0aGlzLmxlYWZQYXRoLmxlbmd0aCA+IDAgJiYgdGhpcy50cmFja0ltYWdlKSB7XG4gICAgICAgICAgICBjb25zdCBwYXRoTGVuZ3RoID0gdGhpcy5sZWFmUGF0aC5sZW5ndGg7XG4gICAgICAgICAgICBjb25zdCBwYXRoSW5kZXggPSBNYXRoLm1pbihpbmRleCwgcGF0aExlbmd0aCAtIDEpO1xuXG4gICAgICAgICAgICBjb25zdCBsZWFmID0gdGhpcy5sZWFmUGF0aFtwYXRoSW5kZXhdO1xuICAgICAgICAgICAgY29uc3Qgc2NhbGUgPSB0aGlzLnRyYWNrSW1hZ2Uuc2NhbGVYO1xuICAgICAgICAgICAgY29uc3QgbWFwTGVmdCA9IHRoaXMudHJhY2tJbWFnZS54IC0gdGhpcy50cmFja0ltYWdlLmRpc3BsYXlXaWR0aCAvIDI7XG4gICAgICAgICAgICBjb25zdCBtYXBUb3AgPSB0aGlzLnRyYWNrSW1hZ2UueSAtIHRoaXMudHJhY2tJbWFnZS5kaXNwbGF5SGVpZ2h0O1xuXG4gICAgICAgICAgICBjb25zdCB4ID0gbWFwTGVmdCArIChsZWFmLnggKiBzY2FsZSk7XG4gICAgICAgICAgICBjb25zdCB5ID0gbWFwVG9wICsgKGxlYWYueSAqIHNjYWxlKTtcblxuICAgICAgICAgICAgcmV0dXJuIHsgeCwgeSB9O1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY2VudGVyWCA9IHRoaXMuc2NhbGUud2lkdGggLyAyO1xuICAgICAgICBjb25zdCBpc0xlZnQgPSBpbmRleCAlIDIgPT09IDA7XG4gICAgICAgIFxuICAgICAgICAvLyBBZGphY2VudCBsZWFmID0gYWx0ZXJuYXRlIGxlZnQvcmlnaHQgd2l0aCBhIHNtYWxsIHVwd2FyZCBzdGVwXG4gICAgICAgIGNvbnN0IHkgPSB0aGlzLmxlYWZTdGFydFkgLSAoaW5kZXggKiB0aGlzLmxlYWZTdGVwWSk7XG4gICAgICAgIGNvbnN0IHggPSBpc0xlZnQgPyBjZW50ZXJYIC0gdGhpcy5sZWFmU2lkZU9mZnNldCA6IGNlbnRlclggKyB0aGlzLmxlYWZTaWRlT2Zmc2V0O1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHsgeCwgeSB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgYnVpbGRMZWFmUGF0aCh0ZXh0dXJlS2V5OiBzdHJpbmcpOiBQaGFzZXIuTWF0aC5WZWN0b3IyW10ge1xuICAgICAgICBjb25zdCB0ZXh0dXJlID0gdGhpcy50ZXh0dXJlcy5nZXQodGV4dHVyZUtleSk7XG4gICAgICAgIGNvbnN0IHNvdXJjZSA9IHRleHR1cmU/LmdldFNvdXJjZUltYWdlKCkgYXMgSFRNTEltYWdlRWxlbWVudCB8IEhUTUxDYW52YXNFbGVtZW50IHwgdW5kZWZpbmVkO1xuXG4gICAgICAgIGlmICghc291cmNlIHx8ICFzb3VyY2Uud2lkdGggfHwgIXNvdXJjZS5oZWlnaHQpIHtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNhbnZhcyA9IHRoaXMuc3lzLmdhbWUuY2FudmFzLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICAgIGNhbnZhcy53aWR0aCA9IHNvdXJjZS53aWR0aDtcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IHNvdXJjZS5oZWlnaHQ7XG5cbiAgICAgICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgIGlmICghY3R4KSByZXR1cm4gW107XG5cbiAgICAgICAgY3R4LmRyYXdJbWFnZShzb3VyY2UsIDAsIDApO1xuICAgICAgICBjb25zdCBpbWFnZURhdGEgPSBjdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIHNvdXJjZS53aWR0aCwgc291cmNlLmhlaWdodCk7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBpbWFnZURhdGEuZGF0YTtcblxuICAgICAgICBjb25zdCB3aWR0aCA9IHNvdXJjZS53aWR0aDtcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gc291cmNlLmhlaWdodDtcbiAgICAgICAgY29uc3QgdmlzaXRlZCA9IG5ldyBVaW50OEFycmF5KHdpZHRoICogaGVpZ2h0KTtcbiAgICAgICAgY29uc3QgY2VudGVyczogUGhhc2VyLk1hdGguVmVjdG9yMltdID0gW107XG5cbiAgICAgICAgY29uc3QgaXNMZWFmUGl4ZWwgPSAoaWR4OiBudW1iZXIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBkYXRhW2lkeF0gLyAyNTU7XG4gICAgICAgICAgICBjb25zdCBnID0gZGF0YVtpZHggKyAxXSAvIDI1NTtcbiAgICAgICAgICAgIGNvbnN0IGIgPSBkYXRhW2lkeCArIDJdIC8gMjU1O1xuXG4gICAgICAgICAgICBjb25zdCBtYXggPSBNYXRoLm1heChyLCBnLCBiKTtcbiAgICAgICAgICAgIGNvbnN0IG1pbiA9IE1hdGgubWluKHIsIGcsIGIpO1xuICAgICAgICAgICAgY29uc3QgZGVsdGEgPSBtYXggLSBtaW47XG5cbiAgICAgICAgICAgIGlmIChkZWx0YSA9PT0gMCkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgICBsZXQgaHVlID0gMDtcbiAgICAgICAgICAgIGlmIChtYXggPT09IHIpIHtcbiAgICAgICAgICAgICAgICBodWUgPSAoKGcgLSBiKSAvIGRlbHRhKSAlIDY7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG1heCA9PT0gZykge1xuICAgICAgICAgICAgICAgIGh1ZSA9IChiIC0gcikgLyBkZWx0YSArIDI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGh1ZSA9IChyIC0gZykgLyBkZWx0YSArIDQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBodWUgPSBNYXRoLnJvdW5kKGh1ZSAqIDYwKTtcbiAgICAgICAgICAgIGlmIChodWUgPCAwKSBodWUgKz0gMzYwO1xuXG4gICAgICAgICAgICBjb25zdCBzYXR1cmF0aW9uID0gbWF4ID09PSAwID8gMCA6IGRlbHRhIC8gbWF4O1xuXG4gICAgICAgICAgICBjb25zdCBpc0dyZWVuSHVlID0gaHVlID49IDcwICYmIGh1ZSA8PSAxNTA7XG4gICAgICAgICAgICBjb25zdCBpc1NhdHVyYXRlZCA9IHNhdHVyYXRpb24gPj0gMC4zNTtcblxuICAgICAgICAgICAgcmV0dXJuIGlzR3JlZW5IdWUgJiYgaXNTYXR1cmF0ZWQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgbWluQmxvYlNpemUgPSA0NTAwO1xuICAgICAgICBjb25zdCBzdGFjazogbnVtYmVyW10gPSBbXTtcblxuICAgICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7XG4gICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHdpZHRoOyB4KyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHkgKiB3aWR0aCArIHg7XG4gICAgICAgICAgICAgICAgaWYgKHZpc2l0ZWRbaW5kZXhdKSBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGFJbmRleCA9IGluZGV4ICogNDtcbiAgICAgICAgICAgICAgICBpZiAoIWlzTGVhZlBpeGVsKGRhdGFJbmRleCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmlzaXRlZFtpbmRleF0gPSAxO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBsZXQgc3VtWCA9IDA7XG4gICAgICAgICAgICAgICAgbGV0IHN1bVkgPSAwO1xuICAgICAgICAgICAgICAgIGxldCBjb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgbGV0IG1pblggPSB4O1xuICAgICAgICAgICAgICAgIGxldCBtYXhYID0geDtcbiAgICAgICAgICAgICAgICBsZXQgbWluWSA9IHk7XG4gICAgICAgICAgICAgICAgbGV0IG1heFkgPSB5O1xuXG4gICAgICAgICAgICAgICAgc3RhY2sucHVzaChpbmRleCk7XG4gICAgICAgICAgICAgICAgdmlzaXRlZFtpbmRleF0gPSAxO1xuXG4gICAgICAgICAgICAgICAgd2hpbGUgKHN0YWNrLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50ID0gc3RhY2sucG9wKCkgYXMgbnVtYmVyO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjeSA9IE1hdGguZmxvb3IoY3VycmVudCAvIHdpZHRoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3ggPSBjdXJyZW50IC0gKGN5ICogd2lkdGgpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnREYXRhSW5kZXggPSBjdXJyZW50ICogNDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0xlYWZQaXhlbChjdXJyZW50RGF0YUluZGV4KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBzdW1YICs9IGN4O1xuICAgICAgICAgICAgICAgICAgICBzdW1ZICs9IGN5O1xuICAgICAgICAgICAgICAgICAgICBjb3VudCArPSAxO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3ggPCBtaW5YKSBtaW5YID0gY3g7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjeCA+IG1heFgpIG1heFggPSBjeDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN5IDwgbWluWSkgbWluWSA9IGN5O1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3kgPiBtYXhZKSBtYXhZID0gY3k7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGN4ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGVmdCA9IGN1cnJlbnQgLSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF2aXNpdGVkW2xlZnRdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGVmdEluZGV4ID0gbGVmdCAqIDQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzTGVhZlBpeGVsKGxlZnRJbmRleCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlzaXRlZFtsZWZ0XSA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrLnB1c2gobGVmdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlzaXRlZFtsZWZ0XSA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGN4IDwgd2lkdGggLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByaWdodCA9IGN1cnJlbnQgKyAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF2aXNpdGVkW3JpZ2h0XSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJpZ2h0SW5kZXggPSByaWdodCAqIDQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzTGVhZlBpeGVsKHJpZ2h0SW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpc2l0ZWRbcmlnaHRdID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2sucHVzaChyaWdodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlzaXRlZFtyaWdodF0gPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChjeSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVwID0gY3VycmVudCAtIHdpZHRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF2aXNpdGVkW3VwXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVwSW5kZXggPSB1cCAqIDQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzTGVhZlBpeGVsKHVwSW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpc2l0ZWRbdXBdID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2sucHVzaCh1cCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlzaXRlZFt1cF0gPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChjeSA8IGhlaWdodCAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRvd24gPSBjdXJyZW50ICsgd2lkdGg7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXZpc2l0ZWRbZG93bl0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkb3duSW5kZXggPSBkb3duICogNDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNMZWFmUGl4ZWwoZG93bkluZGV4KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXNpdGVkW2Rvd25dID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2sucHVzaChkb3duKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXNpdGVkW2Rvd25dID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoY291bnQgPj0gbWluQmxvYlNpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvYldpZHRoID0gbWF4WCAtIG1pblg7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJsb2JIZWlnaHQgPSBtYXhZIC0gbWluWTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXNwZWN0ID0gYmxvYldpZHRoIC8gKGJsb2JIZWlnaHQgfHwgMSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGJsb2JXaWR0aCA+PSA5MCAmJiBibG9iSGVpZ2h0ID49IDkwICYmIGFzcGVjdCA+IDAuNiAmJiBhc3BlY3QgPCAxLjcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbnRlcnMucHVzaChuZXcgUGhhc2VyLk1hdGguVmVjdG9yMihzdW1YIC8gY291bnQsIHN1bVkgLyBjb3VudCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY2VudGVycy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkeSA9IGIueSAtIGEueTtcbiAgICAgICAgICAgIGlmIChNYXRoLmFicyhkeSkgPiAyKSByZXR1cm4gZHk7XG4gICAgICAgICAgICByZXR1cm4gYS54IC0gYi54O1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gY2VudGVycztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTaG93IHBsYXllciBzdGF0ZSAtIGNvcnJlY3Qgb3IgaW5jb3JyZWN0XG4gICAgICovXG4gICAgc2hvd1BsYXllclN0YXRlKHN0YXRlOiAnY29ycmVjdCcgfCAnaW5jb3JyZWN0Jykge1xuICAgICAgICBpZiAoc3RhdGUgPT09ICdjb3JyZWN0Jykge1xuICAgICAgICAgICAgdGhpcy5wbGF5ZXIuc2hvd0NvcnJlY3QoODAwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucGxheWVyLnNob3dJbmNvcnJlY3QoODAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgc2V0UXVpekZlZWRiYWNrKHN0YXRlOiAnaWRsZScgfCAnY29ycmVjdCcgfCAnd3JvbmcnKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5xdWl6UGFuZWwpIHJldHVybjtcbiAgICAgICAgdGhpcy5xdWl6UGFuZWwuc2V0RmVlZGJhY2soc3RhdGUpO1xuICAgICAgICB0aGlzLnF1aXpGZWVkYmFja1N0YXRlID0gc3RhdGU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBkZWxheShtczogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy50aW1lLmRlbGF5ZWRDYWxsKG1zLCAoKSA9PiByZXNvbHZlKCkpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiRXZlbnRCdXMiLCJTY2VuZSIsIkVtb3RlQ2hhcmFjdGVyIiwiZ2V0R2FtZUNvbmZpZyIsInJlc29sdmVHYW1lQ29kZSIsIlF1aXpQYW5lbCIsIkdhbWUiLCJxdWl6UGFuZWxXaWR0aCIsInF1aXpQYW5lbEhlaWdodCIsInVpU2NhbGUiLCJzYWZlSW5zZXRCb3R0b20iLCJxdWl6RmVlZGJhY2tTdGF0ZSIsInF1aXpPcHRpb25CdXR0b25zIiwicXVpek9wZW4iLCJxdWl6TG9ja2VkIiwicXVpekN1cnJlbnRJbmRleCIsInN0YXJ0TW9kYWxPcGVuIiwiZ2FtZUNvbXBsZXRlZCIsImdhbWVPdmVyIiwidG90YWxUaW1lTXMiLCJqdW1wRHVyYXRpb25NcyIsInNjb3JlIiwiY3VycmVudExlYWZJbmRleCIsInNlc3Npb25JZCIsInNlc3Npb25HYW1lSWQiLCJzZXNzaW9uUXVlc3Rpb25zIiwic2Vzc2lvblRpbWVMaW1pdCIsInF1ZXN0aW9uU291cmNlTG9nZ2VkIiwiZ2FtZUNvZGUiLCJnYW1lQ29uZmlnIiwibGVhZlBhdGgiLCJsZWFmU3RhcnRZIiwibGVhZlN0ZXBZIiwibGVhZlNpZGVPZmZzZXQiLCJpbml0IiwiZGF0YSIsInJlZ2lzdHJ5IiwiZ2V0Iiwic2V0IiwiZ2FtZUlkIiwicXVlc3Rpb25zIiwidGltZUxpbWl0IiwiY3JlYXRlIiwid2lkdGgiLCJoZWlnaHQiLCJzY2FsZSIsImNhbWVyYSIsImNhbWVyYXMiLCJtYWluIiwiY3JlYXRlUGFyYWxsYXhCYWNrZ3JvdW5kIiwidHJhY2tJbWFnZSIsImFkZCIsImltYWdlIiwibWFwS2V5Iiwic2V0T3JpZ2luIiwidHJhY2tTY2FsZSIsInNldFNjYWxlIiwibWFwVG9wIiwieSIsImRpc3BsYXlIZWlnaHQiLCJzZXRCb3VuZHMiLCJ1c2VUZXh0dXJlUGF0aCIsImJ1aWxkTGVhZlBhdGgiLCJzdGFydFBvcyIsImdldExlYWZQb3NpdGlvbiIsInBsYXllciIsIngiLCJuZXh0UG9zIiwiZmxpcCIsInBsYXlJZGxlIiwic2Nyb2xsWSIsInVpQ2FtZXJhIiwic2V0U2Nyb2xsIiwiaWdub3JlIiwiY2hpbGRyZW4iLCJsaXN0IiwiY3JlYXRlVUkiLCJlbWl0Iiwic2V0QmFja2dyb3VuZENvbG9yIiwiYmFja2dyb3VuZENvbG9yIiwicGFyYWxsYXhMYXllcnMiLCJ1cGRhdGUiLCJsZW5ndGgiLCJmb3JFYWNoIiwibGF5ZXIiLCJmYWN0b3IiLCJnZXREYXRhIiwiYmFzZVkiLCJ1aVJvb3QiLCJjb250YWluZXIiLCJzZXRTY3JvbGxGYWN0b3IiLCJzZXREZXB0aCIsInRpbWVyT3ZlcmxheSIsImh1ZEJhY2tCdXR0b24iLCJiYWNrQmciLCJncmFwaGljcyIsImZpbGxTdHlsZSIsImZpbGxSb3VuZGVkUmVjdCIsImxpbmVTdHlsZSIsInN0cm9rZVJvdW5kZWRSZWN0IiwiYmFja0ljb24iLCJ0ZXh0IiwiZm9udEZhbWlseSIsImZvbnRTaXplIiwiY29sb3IiLCJiYWNrSGl0Iiwiem9uZSIsInNldEludGVyYWN0aXZlIiwidXNlSGFuZEN1cnNvciIsIm9uIiwiaGFuZGxlQmFja1RvR2FtZUxpc3QiLCJzZXRTaXplIiwiaHVkUG9pbnRzUGlsbCIsInBvaW50c0JnIiwicG9pbnRzVyIsInBvaW50c0giLCJzdGFyIiwic2V0VGludCIsInNjb3JlVGV4dCIsImh1ZFRpbWVyUGlsbCIsInRpbWVyQmciLCJ0aW1lclciLCJ0aW1lckgiLCJ0aW1lclRleHQiLCJodWRIZWFydHNQaWxsIiwiaGVhcnRzQmciLCJoZWFydHNXIiwiaGVhcnRzSCIsImhlYXJ0c1RleHQiLCJsYXlvdXRIdWQiLCJqdW1wQnV0dG9uIiwiY3JlYXRlSnVtcEJ1dHRvbiIsInNldFZpc2libGUiLCJzZXRBY3RpdmUiLCJzZXR1cEp1bXBJbnB1dCIsImNyZWF0ZVF1aXpNb2RhbCIsInF1aXpNb2RhbCIsImxheW91dFF1aXoiLCJjcmVhdGVTdGFydE1vZGFsIiwib3BlblN0YXJ0TW9kYWwiLCJjcmVhdGVFbmRNb2RhbCIsImNyZWF0ZVRpbWVVcE1vZGFsIiwidG9wSW5zZXQiLCJNYXRoIiwibWF4Iiwicm91bmQiLCJzaWRlSW5zZXQiLCJnYXAiLCJzZXRQb3NpdGlvbiIsInJpZ2h0RWRnZSIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsImJnIiwicmVjdGFuZ2xlIiwic2V0U3Ryb2tlU3R5bGUiLCJzZXRGaWxsU3R5bGUiLCJqdW1wQnV0dG9uQmciLCJvblByZXNzIiwib3BlblF1aXpNb2RhbCIsIm9uUmVsZWFzZSIsIlBoYXNlciIsIkdlb20iLCJSZWN0YW5nbGUiLCJDb250YWlucyIsInR3ZWVucyIsInRhcmdldHMiLCJkdXJhdGlvbiIsInlveW8iLCJyZXBlYXQiLCJpbnB1dCIsImVuYWJsZWQiLCJtb3VzZSIsInBvaW50ZXIiLCJib3VuZHMiLCJnZXRCb3VuZHMiLCJjb250YWlucyIsInF1aXpQYW5lbCIsIm9wdGlvbkNvdW50IiwiZGVwdGgiLCJwYXJlbnQiLCJzaG93SW5kZXgiLCJxdWl6UGFuZWxDb250YWluZXIiLCJwYW5lbENvbnRhaW5lciIsInF1aXpQYW5lbFNoYWRvdyIsInBhbmVsU2hhZG93IiwicXVpelBhbmVsQmciLCJwYW5lbEJnIiwicXVpelBhbmVsR2xvdyIsInBhbmVsR2xvdyIsInF1aXpJbmRleFRleHQiLCJpbmRleFRleHQiLCJxdWl6RmVlZGJhY2tUaXRsZVRleHQiLCJmZWVkYmFja1RpdGxlVGV4dCIsInF1aXpGZWVkYmFja1N1YnRpdGxlVGV4dCIsImZlZWRiYWNrU3VidGl0bGVUZXh0IiwicXVpelF1ZXN0aW9uVGV4dCIsInF1ZXN0aW9uVGV4dCIsIm9wdGlvbkJ1dHRvbnMiLCJvbk9wdGlvblNlbGVjdGVkIiwiaW5kZXgiLCJoYW5kbGVRdWl6QW5zd2VyIiwib3ZlcmxheSIsInBhbmVsV2lkdGgiLCJtaW4iLCJwYW5lbEhlaWdodCIsInRpdGxlIiwiYWxpZ24iLCJ3b3JkV3JhcCIsInVzZUFkdmFuY2VkV3JhcCIsImJ1dHRvbiIsImNyZWF0ZVN0YXJ0QnV0dG9uIiwic3RhcnRNb2RhbCIsImJsb2NrZXIiLCJzaGFwZSIsInBhbmVsQm91bmRzIiwic3VidGl0bGUiLCJzdGF0c0dhcCIsImNhcmRXaWR0aCIsImZsb29yIiwiY2FyZEhlaWdodCIsInN0YXRzWSIsInNjb3JlQ2FyZCIsInRpbWVDYXJkIiwic2NvcmVDYXJkQ29udGFpbmVyIiwidGltZUNhcmRDb250YWluZXIiLCJzY29yZUxhYmVsIiwidGltZUxhYmVsIiwiZW5kTW9kYWxTY29yZVRleHQiLCJlbmRNb2RhbFRpbWVUZXh0IiwicmVzdGFydEJ1dHRvbiIsImNyZWF0ZUVuZFJlc3RhcnRCdXR0b24iLCJlbmRNb2RhbCIsInNldERhdGEiLCJyYWRpdXMiLCJzaGFkb3ciLCJkcmF3IiwiZmlsbCIsInN0cm9rZSIsImNsZWFyIiwiaGl0IiwiZWFzZSIsInJlc3RhcnRSdW4iLCJjcmVhdGVSZXN0YXJ0QnV0dG9uIiwidGltZVVwTW9kYWwiLCJoaXRQYWQiLCJoaXRXIiwiaGl0SCIsImNsb3NlU3RhcnRNb2RhbCIsInNldEFscGhhIiwic3RvcFRpbWVyIiwiYWxwaGEiLCJzdGFydFRpbWVyIiwic2V0UXVlc3Rpb24iLCJzZXRGZWVkYmFjayIsInJlc3VsdCIsImxheW91dCIsImlzSnVtcGluZyIsInF1ZXN0aW9uUG9vbCIsImdldFF1ZXN0aW9uUG9vbCIsInF1ZXN0aW9uIiwidG90YWwiLCJvcHRpb25zIiwicGFuZWwiLCJjbG9zZVF1aXpNb2RhbCIsImlzQ29ycmVjdCIsImNvcnJlY3RJbmRleCIsInNlbGVjdGVkT3B0aW9uSWQiLCJvcHRpb25JZHMiLCJzZXNzaW9uUXVlc3Rpb25JZCIsInN1Ym1pdEFuc3dlciIsInJlcyIsImlzX2NvcnJlY3QiLCJlcnJvciIsImNvbnNvbGUiLCJidG4iLCJyZWRyYXciLCJzZXRRdWl6RmVlZGJhY2siLCJ1cGRhdGVTY29yZSIsInNwZWVkVXBKdW1wIiwiZGVsYXkiLCJoYW5kbGVKdW1wIiwidGltZSIsImRlbGF5ZWRDYWxsIiwic2hvd1BsYXllclN0YXRlIiwic3RhcnRYIiwib25Db21wbGV0ZSIsImFwaVF1ZXN0aW9ucyIsImxvZyIsImNvdW50Iiwic2FtcGxlIiwiY29udGVudCIsIm1hcCIsIml0ZW0iLCJvcHQiLCJpZCIsImZpbmRJbmRleCIsInNlc3Npb25fcXVlc3Rpb25faWQiLCJ3YXJuIiwibmV4dEluZGV4IiwibWF4SW5kZXgiLCJOdW1iZXIiLCJQT1NJVElWRV9JTkZJTklUWSIsInRhcmdldFBvcyIsInN0b3BJZGxlIiwianVtcFRvIiwic2hvd0NvcnJlY3QiLCJ1cGRhdGVFbmRUaW1lVGV4dCIsIm9wZW5FbmRNb2RhbCIsInRpbWVyRXZlbnQiLCJyZW1vdmUiLCJ1cGRhdGVUaW1lclRleHQiLCJhZGRFdmVudCIsImxvb3AiLCJjYWxsYmFjayIsImhhbmRsZVRpbWVVcCIsIm1zIiwidG90YWxTZWNvbmRzIiwibWludXRlcyIsInNlY29uZHMiLCJwYWQiLCJuIiwic2V0VGV4dCIsIm9wZW5UaW1lVXBNb2RhbCIsImxhdW5jaENvbmZldHRpIiwic3VibWl0U2Vzc2lvblJlc3VsdCIsImNvbmZldHRpRW1pdHRlciIsImRlc3Ryb3kiLCJjb25mZXR0aUJ1cnN0RXZlbnQiLCJ1bmRlZmluZWQiLCJwYXJ0aWNsZXMiLCJzcGVlZCIsImFuZ2xlIiwicm90YXRlIiwic3RhcnQiLCJlbmQiLCJsaWZlc3BhbiIsInF1YW50aXR5IiwiZnJlcXVlbmN5IiwiZ3Jhdml0eVkiLCJleHBsb2RlIiwiY2xvc2VUaW1lVXBNb2RhbCIsImNsb3NlRW5kTW9kYWwiLCJ0aGVuIiwiZW5kR2FtZVNlc3Npb24iLCJjYXRjaCIsImVyciIsImRlbHRhIiwicG9pbnRzIiwidG9TdHJpbmciLCJwYWRTdGFydCIsImJhc2VNcyIsImVsYXBzZWRNcyIsInBhdGhMZW5ndGgiLCJwYXRoSW5kZXgiLCJsZWFmIiwic2NhbGVYIiwibWFwTGVmdCIsImRpc3BsYXlXaWR0aCIsImNlbnRlclgiLCJpc0xlZnQiLCJ0ZXh0dXJlS2V5IiwidGV4dHVyZSIsInRleHR1cmVzIiwic291cmNlIiwiZ2V0U291cmNlSW1hZ2UiLCJjYW52YXMiLCJzeXMiLCJnYW1lIiwib3duZXJEb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjdHgiLCJnZXRDb250ZXh0IiwiZHJhd0ltYWdlIiwiaW1hZ2VEYXRhIiwiZ2V0SW1hZ2VEYXRhIiwidmlzaXRlZCIsIlVpbnQ4QXJyYXkiLCJjZW50ZXJzIiwiaXNMZWFmUGl4ZWwiLCJpZHgiLCJyIiwiZyIsImIiLCJodWUiLCJzYXR1cmF0aW9uIiwiaXNHcmVlbkh1ZSIsImlzU2F0dXJhdGVkIiwibWluQmxvYlNpemUiLCJzdGFjayIsImRhdGFJbmRleCIsInN1bVgiLCJzdW1ZIiwibWluWCIsIm1heFgiLCJtaW5ZIiwibWF4WSIsInB1c2giLCJjdXJyZW50IiwicG9wIiwiY3kiLCJjeCIsImN1cnJlbnREYXRhSW5kZXgiLCJsZWZ0IiwibGVmdEluZGV4IiwicmlnaHQiLCJyaWdodEluZGV4IiwidXAiLCJ1cEluZGV4IiwiZG93biIsImRvd25JbmRleCIsImJsb2JXaWR0aCIsImJsb2JIZWlnaHQiLCJhc3BlY3QiLCJWZWN0b3IyIiwic29ydCIsImEiLCJkeSIsImFicyIsInN0YXRlIiwic2hvd0luY29ycmVjdCIsIlByb21pc2UiLCJyZXNvbHZlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/game/scenes/Game.ts\n");

/***/ }),

/***/ "(pages-dir-node)/./src/game/scenes/GameOver.ts":
/*!*************************************!*\
  !*** ./src/game/scenes/GameOver.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GameOver: () => (/* binding */ GameOver)\n/* harmony export */ });\n/* harmony import */ var _EventBus__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../EventBus */ \"(pages-dir-node)/./src/game/EventBus.ts\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _gameConfig__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../gameConfig */ \"(pages-dir-node)/./src/game/gameConfig.ts\");\n/* harmony import */ var _services_api__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../services/api */ \"(pages-dir-node)/./src/services/api.ts\");\n\n\n\n\nclass GameOver extends phaser__WEBPACK_IMPORTED_MODULE_1__.Scene {\n    constructor(){\n        super('GameOver');\n    }\n    init(data) {\n        this.dataPayload = data;\n    }\n    create() {\n        const { width, height } = this.scale;\n        const gameCode = (0,_gameConfig__WEBPACK_IMPORTED_MODULE_2__.resolveGameCode)(this.registry.get('gameCode'));\n        const gameConfig = (0,_gameConfig__WEBPACK_IMPORTED_MODULE_2__.getGameConfig)(gameCode);\n        const { gameId, score, bonus, result, reason } = this.dataPayload || {\n            gameId: null,\n            score: 0,\n            bonus: 0,\n            result: 'lose',\n            reason: ''\n        };\n        if (gameId) {\n            (0,_services_api__WEBPACK_IMPORTED_MODULE_3__.endGameSession)(gameId, score).catch((error)=>{\n                console.error('endGameSession failed', error);\n            });\n        }\n        this.camera = this.cameras.main;\n        this.camera.setBackgroundColor(result === 'win' ? 0x16a34a : 0xdc2626);\n        this.background = this.add.image(width / 2, height / 2, gameConfig.mapKey);\n        this.background.setAlpha(0.5);\n        this.gameOverText = this.add.text(width / 2, 220, result === 'win' ? 'Chiến Thắng!' : 'Hết Giờ', {\n            fontFamily: 'Arial Black',\n            fontSize: 64,\n            color: '#ffffff',\n            stroke: '#000000',\n            strokeThickness: 8,\n            align: 'center'\n        }).setOrigin(0.5).setDepth(100);\n        const bonusText = bonus > 0 ? `(+${bonus} thưởng)` : '';\n        this.detailText = this.add.text(width / 2, 340, `Điểm: ${score} ${bonusText}\\n${reason}`, {\n            fontFamily: 'Arial',\n            fontSize: 26,\n            color: '#e2e8f0',\n            align: 'center'\n        }).setOrigin(0.5).setDepth(100);\n        this.restartButton = this.createButton(width / 2, 520, 'Chơi lại');\n        _EventBus__WEBPACK_IMPORTED_MODULE_0__.EventBus.emit('current-scene-ready', this);\n    }\n    createButton(x, y, label) {\n        const button = this.add.container(x, y);\n        const bg = this.add.rectangle(0, 0, 240, 56, 0x1f2937).setStrokeStyle(2, 0xfbbf24);\n        const text = this.add.text(0, 0, label, {\n            fontFamily: 'Arial Black',\n            fontSize: 24,\n            color: '#f8fafc'\n        }).setOrigin(0.5);\n        button.add([\n            bg,\n            text\n        ]);\n        button.setSize(240, 56);\n        button.setInteractive(new Phaser.Geom.Rectangle(-120, -28, 240, 56), Phaser.Geom.Rectangle.Contains);\n        button.on('pointerover', ()=>bg.setFillStyle(0x334155));\n        button.on('pointerout', ()=>bg.setFillStyle(0x1f2937));\n        button.on('pointerdown', ()=>this.changeScene());\n        return button;\n    }\n    changeScene() {\n        const gameCode = (0,_gameConfig__WEBPACK_IMPORTED_MODULE_2__.resolveGameCode)(this.registry.get('gameCode'));\n        this.scene.start('MainMenu', {\n            gameCode\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9nYW1lL3NjZW5lcy9HYW1lT3Zlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBdUM7QUFDUjtBQUNnQztBQUNYO0FBVTdDLE1BQU1LLGlCQUFpQkoseUNBQUtBO0lBUy9CLGFBQ0E7UUFDSSxLQUFLLENBQUM7SUFDVjtJQUVBSyxLQUFNQyxJQUFrQixFQUN4QjtRQUNJLElBQUksQ0FBQ0MsV0FBVyxHQUFHRDtJQUN2QjtJQUVBRSxTQUNBO1FBQ0ksTUFBTSxFQUFFQyxLQUFLLEVBQUVDLE1BQU0sRUFBRSxHQUFHLElBQUksQ0FBQ0MsS0FBSztRQUNwQyxNQUFNQyxXQUFXViw0REFBZUEsQ0FBQyxJQUFJLENBQUNXLFFBQVEsQ0FBQ0MsR0FBRyxDQUFDO1FBQ25ELE1BQU1DLGFBQWFkLDBEQUFhQSxDQUFDVztRQUNqQyxNQUFNLEVBQUVJLE1BQU0sRUFBRUMsS0FBSyxFQUFFQyxLQUFLLEVBQUVDLE1BQU0sRUFBRUMsTUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDYixXQUFXLElBQUk7WUFDakVTLFFBQVE7WUFDUkMsT0FBTztZQUNQQyxPQUFPO1lBQ1BDLFFBQVE7WUFDUkMsUUFBUTtRQUNaO1FBRUEsSUFBSUosUUFBUTtZQUNSYiw2REFBY0EsQ0FBQ2EsUUFBUUMsT0FBT0ksS0FBSyxDQUFDLENBQUNDO2dCQUNqQ0MsUUFBUUQsS0FBSyxDQUFDLHlCQUF5QkE7WUFDM0M7UUFDSjtRQUVBLElBQUksQ0FBQ0UsTUFBTSxHQUFHLElBQUksQ0FBQ0MsT0FBTyxDQUFDQyxJQUFJO1FBQy9CLElBQUksQ0FBQ0YsTUFBTSxDQUFDRyxrQkFBa0IsQ0FBQ1IsV0FBVyxRQUFRLFdBQVc7UUFFN0QsSUFBSSxDQUFDUyxVQUFVLEdBQUcsSUFBSSxDQUFDQyxHQUFHLENBQUNDLEtBQUssQ0FBQ3JCLFFBQVEsR0FBR0MsU0FBUyxHQUFHSyxXQUFXZ0IsTUFBTTtRQUN6RSxJQUFJLENBQUNILFVBQVUsQ0FBQ0ksUUFBUSxDQUFDO1FBRXpCLElBQUksQ0FBQ0MsWUFBWSxHQUFHLElBQUksQ0FBQ0osR0FBRyxDQUFDSyxJQUFJLENBQUN6QixRQUFRLEdBQUcsS0FBS1UsV0FBVyxRQUFRLGlCQUFpQixXQUFXO1lBQzdGZ0IsWUFBWTtZQUFlQyxVQUFVO1lBQUlDLE9BQU87WUFDaERDLFFBQVE7WUFBV0MsaUJBQWlCO1lBQ3BDQyxPQUFPO1FBQ1gsR0FBR0MsU0FBUyxDQUFDLEtBQUtDLFFBQVEsQ0FBQztRQUUzQixNQUFNQyxZQUFZekIsUUFBUSxJQUFJLENBQUMsRUFBRSxFQUFFQSxNQUFNLFFBQVEsQ0FBQyxHQUFHO1FBQ3JELElBQUksQ0FBQzBCLFVBQVUsR0FBRyxJQUFJLENBQUNmLEdBQUcsQ0FBQ0ssSUFBSSxDQUFDekIsUUFBUSxHQUFHLEtBQ3ZDLENBQUMsTUFBTSxFQUFFUSxNQUFNLENBQUMsRUFBRTBCLFVBQVUsRUFBRSxFQUFFdkIsUUFBUSxFQUN4QztZQUNJZSxZQUFZO1lBQVNDLFVBQVU7WUFBSUMsT0FBTztZQUMxQ0csT0FBTztRQUNYLEdBQ0ZDLFNBQVMsQ0FBQyxLQUFLQyxRQUFRLENBQUM7UUFFMUIsSUFBSSxDQUFDRyxhQUFhLEdBQUcsSUFBSSxDQUFDQyxZQUFZLENBQUNyQyxRQUFRLEdBQUcsS0FBSztRQUN2RFYsK0NBQVFBLENBQUNnRCxJQUFJLENBQUMsdUJBQXVCLElBQUk7SUFDN0M7SUFFQUQsYUFBY0UsQ0FBUyxFQUFFQyxDQUFTLEVBQUVDLEtBQWEsRUFDakQ7UUFDSSxNQUFNQyxTQUFTLElBQUksQ0FBQ3RCLEdBQUcsQ0FBQ3VCLFNBQVMsQ0FBQ0osR0FBR0M7UUFDckMsTUFBTUksS0FBSyxJQUFJLENBQUN4QixHQUFHLENBQUN5QixTQUFTLENBQUMsR0FBRyxHQUFHLEtBQUssSUFBSSxVQUFVQyxjQUFjLENBQUMsR0FBRztRQUN6RSxNQUFNckIsT0FBTyxJQUFJLENBQUNMLEdBQUcsQ0FBQ0ssSUFBSSxDQUFDLEdBQUcsR0FBR2dCLE9BQU87WUFDcENmLFlBQVk7WUFBZUMsVUFBVTtZQUFJQyxPQUFPO1FBQ3BELEdBQUdJLFNBQVMsQ0FBQztRQUViVSxPQUFPdEIsR0FBRyxDQUFDO1lBQUN3QjtZQUFJbkI7U0FBSztRQUNyQmlCLE9BQU9LLE9BQU8sQ0FBQyxLQUFLO1FBQ3BCTCxPQUFPTSxjQUFjLENBQUMsSUFBSUMsT0FBT0MsSUFBSSxDQUFDQyxTQUFTLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxLQUFLLEtBQUtGLE9BQU9DLElBQUksQ0FBQ0MsU0FBUyxDQUFDQyxRQUFRO1FBQ25HVixPQUFPVyxFQUFFLENBQUMsZUFBZSxJQUFNVCxHQUFHVSxZQUFZLENBQUM7UUFDL0NaLE9BQU9XLEVBQUUsQ0FBQyxjQUFjLElBQU1ULEdBQUdVLFlBQVksQ0FBQztRQUM5Q1osT0FBT1csRUFBRSxDQUFDLGVBQWUsSUFBTSxJQUFJLENBQUNFLFdBQVc7UUFFL0MsT0FBT2I7SUFDWDtJQUVBYSxjQUNBO1FBQ0ksTUFBTXBELFdBQVdWLDREQUFlQSxDQUFDLElBQUksQ0FBQ1csUUFBUSxDQUFDQyxHQUFHLENBQUM7UUFDbkQsSUFBSSxDQUFDbUQsS0FBSyxDQUFDQyxLQUFLLENBQUMsWUFBWTtZQUFFdEQ7UUFBUztJQUM1QztBQUNKIiwic291cmNlcyI6WyIvVXNlcnMvbmIyMzA2MDEvRG9jdW1lbnRzL3BoYXNlci1nYW1lZGV2L3NyYy9nYW1lL3NjZW5lcy9HYW1lT3Zlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFdmVudEJ1cyB9IGZyb20gJy4uL0V2ZW50QnVzJztcbmltcG9ydCB7IFNjZW5lIH0gZnJvbSAncGhhc2VyJztcbmltcG9ydCB7IGdldEdhbWVDb25maWcsIHJlc29sdmVHYW1lQ29kZSB9IGZyb20gJy4uL2dhbWVDb25maWcnO1xuaW1wb3J0IHsgZW5kR2FtZVNlc3Npb24gfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9hcGknO1xuXG50eXBlIEdhbWVPdmVyRGF0YSA9IHtcbiAgICBnYW1lSWQ/OiBzdHJpbmcgfCBudWxsO1xuICAgIHNjb3JlOiBudW1iZXI7XG4gICAgYm9udXM6IG51bWJlcjtcbiAgICByZXN1bHQ6ICd3aW4nIHwgJ2xvc2UnO1xuICAgIHJlYXNvbjogc3RyaW5nO1xufTtcblxuZXhwb3J0IGNsYXNzIEdhbWVPdmVyIGV4dGVuZHMgU2NlbmVcbntcbiAgICBjYW1lcmE6IFBoYXNlci5DYW1lcmFzLlNjZW5lMkQuQ2FtZXJhO1xuICAgIGJhY2tncm91bmQ6IFBoYXNlci5HYW1lT2JqZWN0cy5JbWFnZTtcbiAgICBnYW1lT3ZlclRleHQgOiBQaGFzZXIuR2FtZU9iamVjdHMuVGV4dDtcbiAgICBkZXRhaWxUZXh0OiBQaGFzZXIuR2FtZU9iamVjdHMuVGV4dDtcbiAgICByZXN0YXJ0QnV0dG9uOiBQaGFzZXIuR2FtZU9iamVjdHMuQ29udGFpbmVyO1xuICAgIGRhdGFQYXlsb2FkPzogR2FtZU92ZXJEYXRhO1xuXG4gICAgY29uc3RydWN0b3IgKClcbiAgICB7XG4gICAgICAgIHN1cGVyKCdHYW1lT3ZlcicpO1xuICAgIH1cblxuICAgIGluaXQgKGRhdGE6IEdhbWVPdmVyRGF0YSlcbiAgICB7XG4gICAgICAgIHRoaXMuZGF0YVBheWxvYWQgPSBkYXRhO1xuICAgIH1cblxuICAgIGNyZWF0ZSAoKVxuICAgIHtcbiAgICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSB0aGlzLnNjYWxlO1xuICAgICAgICBjb25zdCBnYW1lQ29kZSA9IHJlc29sdmVHYW1lQ29kZSh0aGlzLnJlZ2lzdHJ5LmdldCgnZ2FtZUNvZGUnKSBhcyBzdHJpbmcgfCB1bmRlZmluZWQpO1xuICAgICAgICBjb25zdCBnYW1lQ29uZmlnID0gZ2V0R2FtZUNvbmZpZyhnYW1lQ29kZSk7XG4gICAgICAgIGNvbnN0IHsgZ2FtZUlkLCBzY29yZSwgYm9udXMsIHJlc3VsdCwgcmVhc29uIH0gPSB0aGlzLmRhdGFQYXlsb2FkIHx8IHtcbiAgICAgICAgICAgIGdhbWVJZDogbnVsbCxcbiAgICAgICAgICAgIHNjb3JlOiAwLFxuICAgICAgICAgICAgYm9udXM6IDAsXG4gICAgICAgICAgICByZXN1bHQ6ICdsb3NlJyxcbiAgICAgICAgICAgIHJlYXNvbjogJydcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoZ2FtZUlkKSB7XG4gICAgICAgICAgICBlbmRHYW1lU2Vzc2lvbihnYW1lSWQsIHNjb3JlKS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdlbmRHYW1lU2Vzc2lvbiBmYWlsZWQnLCBlcnJvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY2FtZXJhID0gdGhpcy5jYW1lcmFzLm1haW5cbiAgICAgICAgdGhpcy5jYW1lcmEuc2V0QmFja2dyb3VuZENvbG9yKHJlc3VsdCA9PT0gJ3dpbicgPyAweDE2YTM0YSA6IDB4ZGMyNjI2KTtcblxuICAgICAgICB0aGlzLmJhY2tncm91bmQgPSB0aGlzLmFkZC5pbWFnZSh3aWR0aCAvIDIsIGhlaWdodCAvIDIsIGdhbWVDb25maWcubWFwS2V5KTtcbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kLnNldEFscGhhKDAuNSk7XG5cbiAgICAgICAgdGhpcy5nYW1lT3ZlclRleHQgPSB0aGlzLmFkZC50ZXh0KHdpZHRoIC8gMiwgMjIwLCByZXN1bHQgPT09ICd3aW4nID8gJ0NoaeG6v24gVGjhuq9uZyEnIDogJ0jhur90IEdp4budJywge1xuICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsIEJsYWNrJywgZm9udFNpemU6IDY0LCBjb2xvcjogJyNmZmZmZmYnLFxuICAgICAgICAgICAgc3Ryb2tlOiAnIzAwMDAwMCcsIHN0cm9rZVRoaWNrbmVzczogOCxcbiAgICAgICAgICAgIGFsaWduOiAnY2VudGVyJ1xuICAgICAgICB9KS5zZXRPcmlnaW4oMC41KS5zZXREZXB0aCgxMDApO1xuXG4gICAgICAgIGNvbnN0IGJvbnVzVGV4dCA9IGJvbnVzID4gMCA/IGAoKyR7Ym9udXN9IHRoxrDhu59uZylgIDogJyc7XG4gICAgICAgIHRoaXMuZGV0YWlsVGV4dCA9IHRoaXMuYWRkLnRleHQod2lkdGggLyAyLCAzNDAsXG4gICAgICAgICAgICBgxJBp4buDbTogJHtzY29yZX0gJHtib251c1RleHR9XFxuJHtyZWFzb259YCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBmb250RmFtaWx5OiAnQXJpYWwnLCBmb250U2l6ZTogMjYsIGNvbG9yOiAnI2UyZThmMCcsXG4gICAgICAgICAgICAgICAgYWxpZ246ICdjZW50ZXInXG4gICAgICAgICAgICB9XG4gICAgICAgICkuc2V0T3JpZ2luKDAuNSkuc2V0RGVwdGgoMTAwKTtcblxuICAgICAgICB0aGlzLnJlc3RhcnRCdXR0b24gPSB0aGlzLmNyZWF0ZUJ1dHRvbih3aWR0aCAvIDIsIDUyMCwgJ0NoxqFpIGzhuqFpJyk7XG4gICAgICAgIEV2ZW50QnVzLmVtaXQoJ2N1cnJlbnQtc2NlbmUtcmVhZHknLCB0aGlzKTtcbiAgICB9XG5cbiAgICBjcmVhdGVCdXR0b24gKHg6IG51bWJlciwgeTogbnVtYmVyLCBsYWJlbDogc3RyaW5nKVxuICAgIHtcbiAgICAgICAgY29uc3QgYnV0dG9uID0gdGhpcy5hZGQuY29udGFpbmVyKHgsIHkpO1xuICAgICAgICBjb25zdCBiZyA9IHRoaXMuYWRkLnJlY3RhbmdsZSgwLCAwLCAyNDAsIDU2LCAweDFmMjkzNykuc2V0U3Ryb2tlU3R5bGUoMiwgMHhmYmJmMjQpO1xuICAgICAgICBjb25zdCB0ZXh0ID0gdGhpcy5hZGQudGV4dCgwLCAwLCBsYWJlbCwge1xuICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsIEJsYWNrJywgZm9udFNpemU6IDI0LCBjb2xvcjogJyNmOGZhZmMnXG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUpO1xuXG4gICAgICAgIGJ1dHRvbi5hZGQoW2JnLCB0ZXh0XSk7XG4gICAgICAgIGJ1dHRvbi5zZXRTaXplKDI0MCwgNTYpO1xuICAgICAgICBidXR0b24uc2V0SW50ZXJhY3RpdmUobmV3IFBoYXNlci5HZW9tLlJlY3RhbmdsZSgtMTIwLCAtMjgsIDI0MCwgNTYpLCBQaGFzZXIuR2VvbS5SZWN0YW5nbGUuQ29udGFpbnMpO1xuICAgICAgICBidXR0b24ub24oJ3BvaW50ZXJvdmVyJywgKCkgPT4gYmcuc2V0RmlsbFN0eWxlKDB4MzM0MTU1KSk7XG4gICAgICAgIGJ1dHRvbi5vbigncG9pbnRlcm91dCcsICgpID0+IGJnLnNldEZpbGxTdHlsZSgweDFmMjkzNykpO1xuICAgICAgICBidXR0b24ub24oJ3BvaW50ZXJkb3duJywgKCkgPT4gdGhpcy5jaGFuZ2VTY2VuZSgpKTtcblxuICAgICAgICByZXR1cm4gYnV0dG9uO1xuICAgIH1cblxuICAgIGNoYW5nZVNjZW5lICgpXG4gICAge1xuICAgICAgICBjb25zdCBnYW1lQ29kZSA9IHJlc29sdmVHYW1lQ29kZSh0aGlzLnJlZ2lzdHJ5LmdldCgnZ2FtZUNvZGUnKSBhcyBzdHJpbmcgfCB1bmRlZmluZWQpO1xuICAgICAgICB0aGlzLnNjZW5lLnN0YXJ0KCdNYWluTWVudScsIHsgZ2FtZUNvZGUgfSk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIkV2ZW50QnVzIiwiU2NlbmUiLCJnZXRHYW1lQ29uZmlnIiwicmVzb2x2ZUdhbWVDb2RlIiwiZW5kR2FtZVNlc3Npb24iLCJHYW1lT3ZlciIsImluaXQiLCJkYXRhIiwiZGF0YVBheWxvYWQiLCJjcmVhdGUiLCJ3aWR0aCIsImhlaWdodCIsInNjYWxlIiwiZ2FtZUNvZGUiLCJyZWdpc3RyeSIsImdldCIsImdhbWVDb25maWciLCJnYW1lSWQiLCJzY29yZSIsImJvbnVzIiwicmVzdWx0IiwicmVhc29uIiwiY2F0Y2giLCJlcnJvciIsImNvbnNvbGUiLCJjYW1lcmEiLCJjYW1lcmFzIiwibWFpbiIsInNldEJhY2tncm91bmRDb2xvciIsImJhY2tncm91bmQiLCJhZGQiLCJpbWFnZSIsIm1hcEtleSIsInNldEFscGhhIiwiZ2FtZU92ZXJUZXh0IiwidGV4dCIsImZvbnRGYW1pbHkiLCJmb250U2l6ZSIsImNvbG9yIiwic3Ryb2tlIiwic3Ryb2tlVGhpY2tuZXNzIiwiYWxpZ24iLCJzZXRPcmlnaW4iLCJzZXREZXB0aCIsImJvbnVzVGV4dCIsImRldGFpbFRleHQiLCJyZXN0YXJ0QnV0dG9uIiwiY3JlYXRlQnV0dG9uIiwiZW1pdCIsIngiLCJ5IiwibGFiZWwiLCJidXR0b24iLCJjb250YWluZXIiLCJiZyIsInJlY3RhbmdsZSIsInNldFN0cm9rZVN0eWxlIiwic2V0U2l6ZSIsInNldEludGVyYWN0aXZlIiwiUGhhc2VyIiwiR2VvbSIsIlJlY3RhbmdsZSIsIkNvbnRhaW5zIiwib24iLCJzZXRGaWxsU3R5bGUiLCJjaGFuZ2VTY2VuZSIsInNjZW5lIiwic3RhcnQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/game/scenes/GameOver.ts\n");

/***/ }),

/***/ "(pages-dir-node)/./src/game/scenes/MainMenu.ts":
/*!*************************************!*\
  !*** ./src/game/scenes/MainMenu.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MainMenu: () => (/* binding */ MainMenu)\n/* harmony export */ });\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _EventBus__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../EventBus */ \"(pages-dir-node)/./src/game/EventBus.ts\");\n/* harmony import */ var _services_api__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../services/api */ \"(pages-dir-node)/./src/services/api.ts\");\n/* harmony import */ var _services_apiMode__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../services/apiMode */ \"(pages-dir-node)/./src/services/apiMode.ts\");\n/* harmony import */ var _gameConfig__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../gameConfig */ \"(pages-dir-node)/./src/game/gameConfig.ts\");\n\n\n\n\n\nclass MainMenu extends phaser__WEBPACK_IMPORTED_MODULE_0__.Scene {\n    constructor(){\n        super('MainMenu'), this.isStarting = false, this.gameCode = 'vocab_race';\n    }\n    init(data) {\n        this.gameCode = (0,_gameConfig__WEBPACK_IMPORTED_MODULE_4__.resolveGameCode)(data?.gameCode ?? this.registry.get('gameCode'));\n        this.registry.set('gameCode', this.gameCode);\n    }\n    create() {\n        const { width, height } = this.scale;\n        const gameConfig = (0,_gameConfig__WEBPACK_IMPORTED_MODULE_4__.getGameConfig)(this.gameCode);\n        this.background = this.add.image(width / 2, height / 2, gameConfig.mapKey).setDisplaySize(width, height);\n        this.logo = this.add.image(width / 2, 220, 'logo').setDepth(100).setScale(0.9);\n        this.title = this.add.text(width / 2, 360, gameConfig.label, {\n            fontFamily: 'Arial Black',\n            fontSize: 46,\n            color: '#ffffff',\n            stroke: '#000000',\n            strokeThickness: 8,\n            align: 'center'\n        }).setOrigin(0.5).setDepth(100);\n        this.description = this.add.text(width / 2, 460, 'Nhấn nút NEXT để nhảy!\\nĐạt điểm cao nhất có thể!', {\n            fontFamily: 'Arial',\n            fontSize: 28,\n            color: '#e2e8f0',\n            align: 'center',\n            wordWrap: {\n                width: 600\n            }\n        }).setOrigin(0.5).setDepth(100);\n        const tokenSource =  true ? 'env_debug_token' : 0;\n        this.debugText = this.add.text(width / 2, 660, `DEBUG: ready | token=static (${tokenSource})`, {\n            fontFamily: 'Arial',\n            fontSize: 16,\n            color: '#f8fafc',\n            align: 'center',\n            wordWrap: {\n                width: 640\n            }\n        }).setOrigin(0.5).setDepth(120);\n        this.startButton = this.createButton(width / 2, 590, 'Bắt đầu');\n        if (gameConfig.code === 'vocab_race') {\n            this.debugText.setText('DEBUG: preflight -> calling /game/list-game ...');\n            (0,_services_api__WEBPACK_IMPORTED_MODULE_2__.fetchGameList)().then((res)=>{\n                console.error('[GAME][PREFLIGHT] list-game success', {\n                    count: res.data?.length ?? 0\n                });\n                this.debugText.setText(`DEBUG: preflight success | list=${res.data?.length ?? 0}`);\n            }).catch((error)=>{\n                const msg = error instanceof Error ? error.message : String(error);\n                console.error('[GAME][PREFLIGHT] list-game failed', {\n                    error: msg\n                });\n                this.debugText.setText(`DEBUG: preflight failed | ${msg}`);\n            });\n        }\n        _EventBus__WEBPACK_IMPORTED_MODULE_1__.EventBus.emit('current-scene-ready', this);\n    }\n    createButton(x, y, label) {\n        const button = this.add.container(x, y);\n        const bg = this.add.rectangle(0, 0, 300, 80, 0x1f2937).setStrokeStyle(3, 0x38bdf8);\n        const text = this.add.text(0, 0, label, {\n            fontFamily: 'Arial Black',\n            fontSize: 32,\n            color: '#f8fafc'\n        }).setOrigin(0.5);\n        button.add([\n            bg,\n            text\n        ]);\n        // Ensure size is set \n        button.setSize(300, 80);\n        // Make interactive with a clear hit area\n        button.setInteractive(new Phaser.Geom.Rectangle(-150, -40, 300, 80), Phaser.Geom.Rectangle.Contains);\n        button.on('pointerover', ()=>{\n            bg.setFillStyle(0x334155);\n            button.setScale(1.1);\n            this.input.setDefaultCursor('pointer');\n        });\n        button.on('pointerout', ()=>{\n            bg.setFillStyle(0x1f2937);\n            button.setScale(1);\n            this.input.setDefaultCursor('default');\n        });\n        button.on('pointerdown', ()=>{\n            if (this.isStarting) return;\n            button.setScale(0.95);\n            this.time.delayedCall(100, ()=>this.changeScene());\n        });\n        return button;\n    }\n    changeScene() {\n        if (this.isStarting) return;\n        this.isStarting = true;\n        this.startButton.setAlpha(0.6);\n        console.log('[GAME][SESSION] Start button clicked', {\n            gameCode: this.gameCode\n        });\n        this.debugText.setText('DEBUG: start clicked -> calling startGameSession...');\n        const gameConfig = (0,_gameConfig__WEBPACK_IMPORTED_MODULE_4__.getGameConfig)(this.gameCode);\n        (0,_services_api__WEBPACK_IMPORTED_MODULE_2__.startGameSession)(gameConfig.code).then((res)=>{\n            const data = res.data;\n            console.log('[GAME][SESSION] startGameSession success', {\n                gameCode: this.gameCode,\n                apiMode: (0,_services_apiMode__WEBPACK_IMPORTED_MODULE_3__.getApiMode)(),\n                sessionId: data.id,\n                gameId: data.game_id,\n                questionCount: data.questions?.length ?? 0,\n                timeLimit: data.game?.time_limit ?? null\n            });\n            this.debugText.setText(`DEBUG: API success | questions=${data.questions?.length ?? 0}`);\n            const nextScene = gameConfig.code === 'train_game' ? 'TrainGame' : 'Game';\n            this.scene.start(nextScene, {\n                gameCode: this.gameCode,\n                sessionId: data.id,\n                gameId: data.game_id,\n                questions: data.questions,\n                timeLimit: data.game.time_limit\n            });\n        }).catch((err)=>{\n            console.error('[GAME][SESSION] startGameSession failed, fallback to local questions', {\n                gameCode: this.gameCode,\n                apiMode: (0,_services_apiMode__WEBPACK_IMPORTED_MODULE_3__.getApiMode)(),\n                error: err\n            });\n            const errorMessage = err instanceof Error ? err.message : String(err);\n            this.debugText.setText(`DEBUG: API failed -> ${errorMessage}`);\n            const nextScene = gameConfig.code === 'train_game' ? 'TrainGame' : 'Game';\n            this.scene.start(nextScene, {\n                gameCode: this.gameCode,\n                sessionId: null,\n                gameId: null,\n                questions: null,\n                timeLimit: null\n            });\n        }).finally(()=>{\n            this.isStarting = false;\n            this.startButton.setAlpha(1);\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9nYW1lL3NjZW5lcy9NYWluTWVudS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQTRDO0FBQ0w7QUFDOEI7QUFDakI7QUFDVztBQUV4RCxNQUFNTyxpQkFBaUJQLHlDQUFLQTtJQVcvQixhQUNBO1FBQ0ksS0FBSyxDQUFDLGtCQUxWUSxhQUFzQixZQUN0QkMsV0FBbUI7SUFLbkI7SUFFQUMsS0FBTUMsSUFBa0MsRUFDeEM7UUFDSSxJQUFJLENBQUNGLFFBQVEsR0FBR0gsNERBQWVBLENBQUNLLE1BQU1GLFlBQWEsSUFBSSxDQUFDRyxRQUFRLENBQUNDLEdBQUcsQ0FBQztRQUNyRSxJQUFJLENBQUNELFFBQVEsQ0FBQ0UsR0FBRyxDQUFDLFlBQVksSUFBSSxDQUFDTCxRQUFRO0lBQy9DO0lBRUFNLFNBQ0E7UUFDSSxNQUFNLEVBQUVDLEtBQUssRUFBRUMsTUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDQyxLQUFLO1FBQ3BDLE1BQU1DLGFBQWFkLDBEQUFhQSxDQUFDLElBQUksQ0FBQ0ksUUFBUTtRQUU5QyxJQUFJLENBQUNXLFVBQVUsR0FBRyxJQUFJLENBQUNDLEdBQUcsQ0FBQ0MsS0FBSyxDQUFDTixRQUFRLEdBQUdDLFNBQVMsR0FBR0UsV0FBV0ksTUFBTSxFQUFFQyxjQUFjLENBQUNSLE9BQU9DO1FBRWpHLElBQUksQ0FBQ1EsSUFBSSxHQUFHLElBQUksQ0FBQ0osR0FBRyxDQUFDQyxLQUFLLENBQUNOLFFBQVEsR0FBRyxLQUFLLFFBQVFVLFFBQVEsQ0FBQyxLQUFLQyxRQUFRLENBQUM7UUFFMUUsSUFBSSxDQUFDQyxLQUFLLEdBQUcsSUFBSSxDQUFDUCxHQUFHLENBQUNRLElBQUksQ0FBQ2IsUUFBUSxHQUFHLEtBQUtHLFdBQVdXLEtBQUssRUFBRTtZQUN6REMsWUFBWTtZQUFlQyxVQUFVO1lBQUlDLE9BQU87WUFDaERDLFFBQVE7WUFBV0MsaUJBQWlCO1lBQ3BDQyxPQUFPO1FBQ1gsR0FBR0MsU0FBUyxDQUFDLEtB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MUUsV0FBVzRCLElBQUksS0FBSyxlQUFlLGNBQWM7WUFDbkUsSUFBSSxDQUFDK0MsS0FBSyxDQUFDQyxLQUFLLENBQUNGLFdBQVc7Z0JBQ3hCcEYsVUFBVSxJQUFJLENBQUNBLFFBQVE7Z0JBQ3ZCMkUsV0FBV3pFLEtBQUswRSxFQUFFO2dCQUNsQkMsUUFBUTNFLEtBQUs0RSxPQUFPO2dCQUNwQkUsV0FBVzlFLEtBQUs4RSxTQUFTO2dCQUN6QkMsV0FBVy9FLEtBQUtnRixJQUFJLENBQUNDLFVBQVU7WUFDbkM7UUFDSixHQUNDckMsS0FBSyxDQUFDLENBQUN5QztZQUNKN0MsUUFBUUMsS0FBSyxDQUFDLHdFQUF3RTtnQkFDbEYzQyxVQUFVLElBQUksQ0FBQ0EsUUFBUTtnQkFDdkIwRSxTQUFTL0UsNkRBQVVBO2dCQUNuQmdELE9BQU80QztZQUNYO1lBQ0EsTUFBTUMsZUFBZUQsZUFBZXZDLFFBQVF1QyxJQUFJdEMsT0FBTyxHQUFHQyxPQUFPcUM7WUFDakUsSUFBSSxDQUFDcEQsU0FBUyxDQUFDSSxPQUFPLENBQUMsQ0FBQyxxQkFBcUIsRUFBRWlELGNBQWM7WUFFN0QsTUFBTUosWUFBWTFFLFdBQVc0QixJQUFJLEtBQUssZUFBZSxjQUFjO1lBQ25FLElBQUksQ0FBQytDLEtBQUssQ0FBQ0MsS0FBSyxDQUFDRixXQUFXO2dCQUN4QnBGLFVBQVUsSUFBSSxDQUFDQSxRQUFRO2dCQUN2QjJFLFdBQVc7Z0JBQ1hFLFFBQVE7Z0JBQ1JHLFdBQVc7Z0JBQ1hDLFdBQVc7WUFDZjtRQUNKLEdBQ0NRLE9BQU8sQ0FBQztZQUNMLElBQUksQ0FBQzFGLFVBQVUsR0FBRztZQUNsQixJQUFJLENBQUNxQyxXQUFXLENBQUNvQyxRQUFRLENBQUM7UUFDOUI7SUFDUjtBQUNKIiwic291cmNlcyI6WyIvVXNlcnMvbmIyMzA2MDEvRG9jdW1lbnRzL3BoYXNlci1nYW1lZGV2L3NyYy9nYW1lL3NjZW5lcy9NYWluTWVudS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHYW1lT2JqZWN0cywgU2NlbmUgfSBmcm9tICdwaGFzZXInO1xuaW1wb3J0IHsgRXZlbnRCdXMgfSBmcm9tICcuLi9FdmVudEJ1cyc7XG5pbXBvcnQgeyBmZXRjaEdhbWVMaXN0LCBzdGFydEdhbWVTZXNzaW9uIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvYXBpJztcbmltcG9ydCB7IGdldEFwaU1vZGUgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9hcGlNb2RlJztcbmltcG9ydCB7IGdldEdhbWVDb25maWcsIHJlc29sdmVHYW1lQ29kZSB9IGZyb20gJy4uL2dhbWVDb25maWcnO1xuXG5leHBvcnQgY2xhc3MgTWFpbk1lbnUgZXh0ZW5kcyBTY2VuZVxue1xuICAgIGJhY2tncm91bmQ6IEdhbWVPYmplY3RzLkltYWdlO1xuICAgIGxvZ286IEdhbWVPYmplY3RzLkltYWdlO1xuICAgIHRpdGxlOiBHYW1lT2JqZWN0cy5UZXh0O1xuICAgIGRlc2NyaXB0aW9uOiBHYW1lT2JqZWN0cy5UZXh0O1xuICAgIGRlYnVnVGV4dDogR2FtZU9iamVjdHMuVGV4dDtcbiAgICBzdGFydEJ1dHRvbjogR2FtZU9iamVjdHMuQ29udGFpbmVyO1xuICAgIGlzU3RhcnRpbmc6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBnYW1lQ29kZTogc3RyaW5nID0gJ3ZvY2FiX3JhY2UnO1xuXG4gICAgY29uc3RydWN0b3IgKClcbiAgICB7XG4gICAgICAgIHN1cGVyKCdNYWluTWVudScpO1xuICAgIH1cblxuICAgIGluaXQgKGRhdGE6IHsgZ2FtZUNvZGU/OiBzdHJpbmcgfCBudWxsIH0pXG4gICAge1xuICAgICAgICB0aGlzLmdhbWVDb2RlID0gcmVzb2x2ZUdhbWVDb2RlKGRhdGE/LmdhbWVDb2RlID8/ICh0aGlzLnJlZ2lzdHJ5LmdldCgnZ2FtZUNvZGUnKSBhcyBzdHJpbmcgfCB1bmRlZmluZWQpKTtcbiAgICAgICAgdGhpcy5yZWdpc3RyeS5zZXQoJ2dhbWVDb2RlJywgdGhpcy5nYW1lQ29kZSk7XG4gICAgfVxuXG4gICAgY3JlYXRlICgpXG4gICAge1xuICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMuc2NhbGU7XG4gICAgICAgIGNvbnN0IGdhbWVDb25maWcgPSBnZXRHYW1lQ29uZmlnKHRoaXMuZ2FtZUNvZGUpO1xuXG4gICAgICAgIHRoaXMuYmFja2dyb3VuZCA9IHRoaXMuYWRkLmltYWdlKHdpZHRoIC8gMiwgaGVpZ2h0IC8gMiwgZ2FtZUNvbmZpZy5tYXBLZXkpLnNldERpc3BsYXlTaXplKHdpZHRoLCBoZWlnaHQpO1xuXG4gICAgICAgIHRoaXMubG9nbyA9IHRoaXMuYWRkLmltYWdlKHdpZHRoIC8gMiwgMjIwLCAnbG9nbycpLnNldERlcHRoKDEwMCkuc2V0U2NhbGUoMC45KTtcblxuICAgICAgICB0aGlzLnRpdGxlID0gdGhpcy5hZGQudGV4dCh3aWR0aCAvIDIsIDM2MCwgZ2FtZUNvbmZpZy5sYWJlbCwge1xuICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsIEJsYWNrJywgZm9udFNpemU6IDQ2LCBjb2xvcjogJyNmZmZmZmYnLFxuICAgICAgICAgICAgc3Ryb2tlOiAnIzAwMDAwMCcsIHN0cm9rZVRoaWNrbmVzczogOCxcbiAgICAgICAgICAgIGFsaWduOiAnY2VudGVyJ1xuICAgICAgICB9KS5zZXRPcmlnaW4oMC41KS5zZXREZXB0aCgxMDApO1xuXG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSB0aGlzLmFkZC50ZXh0KHdpZHRoIC8gMiwgNDYwLFxuICAgICAgICAgICAgJ05o4bqlbiBuw7p0IE5FWFQgxJHhu4MgbmjhuqN5IVxcbsSQ4bqhdCDEkWnhu4NtIGNhbyBuaOG6pXQgY8OzIHRo4buDIScsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsJywgZm9udFNpemU6IDI4LCBjb2xvcjogJyNlMmU4ZjAnLFxuICAgICAgICAgICAgICAgIGFsaWduOiAnY2VudGVyJyxcbiAgICAgICAgICAgICAgICB3b3JkV3JhcDogeyB3aWR0aDogNjAwIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgKS5zZXRPcmlnaW4oMC41KS5zZXREZXB0aCgxMDApO1xuXG4gICAgICAgIGNvbnN0IHRva2VuU291cmNlID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfREVCVUdfQkVBUkVSX1RPS0VOID8gJ2Vudl9kZWJ1Z190b2tlbicgOiAnaGFyZGNvZGVkX2RlYnVnX3Rva2VuJztcbiAgICAgICAgdGhpcy5kZWJ1Z1RleHQgPSB0aGlzLmFkZC50ZXh0KHdpZHRoIC8gMiwgNjYwLCBgREVCVUc6IHJlYWR5IHwgdG9rZW49c3RhdGljICgke3Rva2VuU291cmNlfSlgLCB7XG4gICAgICAgICAgICBmb250RmFtaWx5OiAnQXJpYWwnLFxuICAgICAgICAgICAgZm9udFNpemU6IDE2LFxuICAgICAgICAgICAgY29sb3I6ICcjZjhmYWZjJyxcbiAgICAgICAgICAgIGFsaWduOiAnY2VudGVyJyxcbiAgICAgICAgICAgIHdvcmRXcmFwOiB7IHdpZHRoOiA2NDAgfVxuICAgICAgICB9KS5zZXRPcmlnaW4oMC41KS5zZXREZXB0aCgxMjApO1xuXG4gICAgICAgIHRoaXMuc3RhcnRCdXR0b24gPSB0aGlzLmNyZWF0ZUJ1dHRvbih3aWR0aCAvIDIsIDU5MCwgJ0Lhuq90IMSR4bqndScpO1xuXG4gICAgICAgIGlmIChnYW1lQ29uZmlnLmNvZGUgPT09ICd2b2NhYl9yYWNlJykge1xuICAgICAgICAgICAgdGhpcy5kZWJ1Z1RleHQuc2V0VGV4dCgnREVCVUc6IHByZWZsaWdodCAtPiBjYWxsaW5nIC9nYW1lL2xpc3QtZ2FtZSAuLi4nKTtcbiAgICAgICAgICAgIGZldGNoR2FtZUxpc3QoKVxuICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignW0dBTUVdW1BSRUZMSUdIVF0gbGlzdC1nYW1lIHN1Y2Nlc3MnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudDogcmVzLmRhdGE/Lmxlbmd0aCA/PyAwXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlYnVnVGV4dC5zZXRUZXh0KGBERUJVRzogcHJlZmxpZ2h0IHN1Y2Nlc3MgfCBsaXN0PSR7cmVzLmRhdGE/Lmxlbmd0aCA/PyAwfWApO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtc2cgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tHQU1FXVtQUkVGTElHSFRdIGxpc3QtZ2FtZSBmYWlsZWQnLCB7IGVycm9yOiBtc2cgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVidWdUZXh0LnNldFRleHQoYERFQlVHOiBwcmVmbGlnaHQgZmFpbGVkIHwgJHttc2d9YCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBFdmVudEJ1cy5lbWl0KCdjdXJyZW50LXNjZW5lLXJlYWR5JywgdGhpcyk7XG4gICAgfVxuICAgIFxuICAgIGNyZWF0ZUJ1dHRvbiAoeDogbnVtYmVyLCB5OiBudW1iZXIsIGxhYmVsOiBzdHJpbmcpXG4gICAge1xuICAgICAgICBjb25zdCBidXR0b24gPSB0aGlzLmFkZC5jb250YWluZXIoeCwgeSk7XG4gICAgICAgIGNvbnN0IGJnID0gdGhpcy5hZGQucmVjdGFuZ2xlKDAsIDAsIDMwMCwgODAsIDB4MWYyOTM3KS5zZXRTdHJva2VTdHlsZSgzLCAweDM4YmRmOCk7XG4gICAgICAgIGNvbnN0IHRleHQgPSB0aGlzLmFkZC50ZXh0KDAsIDAsIGxhYmVsLCB7XG4gICAgICAgICAgICBmb250RmFtaWx5OiAnQXJpYWwgQmxhY2snLCBmb250U2l6ZTogMzIsIGNvbG9yOiAnI2Y4ZmFmYydcbiAgICAgICAgfSkuc2V0T3JpZ2luKDAuNSk7XG5cbiAgICAgICAgYnV0dG9uLmFkZChbYmcsIHRleHRdKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEVuc3VyZSBzaXplIGlzIHNldCBcbiAgICAgICAgYnV0dG9uLnNldFNpemUoMzAwLCA4MCk7XG5cbiAgICAgICAgLy8gTWFrZSBpbnRlcmFjdGl2ZSB3aXRoIGEgY2xlYXIgaGl0IGFyZWFcbiAgICAgICAgYnV0dG9uLnNldEludGVyYWN0aXZlKG5ldyBQaGFzZXIuR2VvbS5SZWN0YW5nbGUoLTE1MCwgLTQwLCAzMDAsIDgwKSwgUGhhc2VyLkdlb20uUmVjdGFuZ2xlLkNvbnRhaW5zKTtcbiAgICAgICAgXG4gICAgICAgIGJ1dHRvbi5vbigncG9pbnRlcm92ZXInLCAoKSA9PiB7IFxuICAgICAgICAgICAgYmcuc2V0RmlsbFN0eWxlKDB4MzM0MTU1KTsgXG4gICAgICAgICAgICBidXR0b24uc2V0U2NhbGUoMS4xKTtcbiAgICAgICAgICAgIHRoaXMuaW5wdXQuc2V0RGVmYXVsdEN1cnNvcigncG9pbnRlcicpOyBcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBidXR0b24ub24oJ3BvaW50ZXJvdXQnLCAoKSA9PiB7IFxuICAgICAgICAgICAgYmcuc2V0RmlsbFN0eWxlKDB4MWYyOTM3KTsgXG4gICAgICAgICAgICBidXR0b24uc2V0U2NhbGUoMSk7XG4gICAgICAgICAgICB0aGlzLmlucHV0LnNldERlZmF1bHRDdXJzb3IoJ2RlZmF1bHQnKTsgXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgYnV0dG9uLm9uKCdwb2ludGVyZG93bicsICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzU3RhcnRpbmcpIHJldHVybjtcbiAgICAgICAgICAgIGJ1dHRvbi5zZXRTY2FsZSgwLjk1KTtcbiAgICAgICAgICAgIHRoaXMudGltZS5kZWxheWVkQ2FsbCgxMDAsICgpID0+IHRoaXMuY2hhbmdlU2NlbmUoKSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBidXR0b247XG4gICAgfVxuXG4gICAgY2hhbmdlU2NlbmUgKClcbiAgICB7XG4gICAgICAgIGlmICh0aGlzLmlzU3RhcnRpbmcpIHJldHVybjtcbiAgICAgICAgdGhpcy5pc1N0YXJ0aW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zdGFydEJ1dHRvbi5zZXRBbHBoYSgwLjYpO1xuICAgICAgICBjb25zb2xlLmxvZygnW0dBTUVdW1NFU1NJT05dIFN0YXJ0IGJ1dHRvbiBjbGlja2VkJywgeyBnYW1lQ29kZTogdGhpcy5nYW1lQ29kZSB9KTtcbiAgICAgICAgdGhpcy5kZWJ1Z1RleHQuc2V0VGV4dCgnREVCVUc6IHN0YXJ0IGNsaWNrZWQgLT4gY2FsbGluZyBzdGFydEdhbWVTZXNzaW9uLi4uJyk7XG5cbiAgICAgICAgY29uc3QgZ2FtZUNvbmZpZyA9IGdldEdhbWVDb25maWcodGhpcy5nYW1lQ29kZSk7XG4gICAgICAgIHN0YXJ0R2FtZVNlc3Npb24oZ2FtZUNvbmZpZy5jb2RlKVxuICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSByZXMuZGF0YTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW0dBTUVdW1NFU1NJT05dIHN0YXJ0R2FtZVNlc3Npb24gc3VjY2VzcycsIHtcbiAgICAgICAgICAgICAgICAgICAgZ2FtZUNvZGU6IHRoaXMuZ2FtZUNvZGUsXG4gICAgICAgICAgICAgICAgICAgIGFwaU1vZGU6IGdldEFwaU1vZGUoKSxcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbklkOiBkYXRhLmlkLFxuICAgICAgICAgICAgICAgICAgICBnYW1lSWQ6IGRhdGEuZ2FtZV9pZCxcbiAgICAgICAgICAgICAgICAgICAgcXVlc3Rpb25Db3VudDogZGF0YS5xdWVzdGlvbnM/Lmxlbmd0aCA/PyAwLFxuICAgICAgICAgICAgICAgICAgICB0aW1lTGltaXQ6IGRhdGEuZ2FtZT8udGltZV9saW1pdCA/PyBudWxsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5kZWJ1Z1RleHQuc2V0VGV4dChgREVCVUc6IEFQSSBzdWNjZXNzIHwgcXVlc3Rpb25zPSR7ZGF0YS5xdWVzdGlvbnM/Lmxlbmd0aCA/PyAwfWApO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5leHRTY2VuZSA9IGdhbWVDb25maWcuY29kZSA9PT0gJ3RyYWluX2dhbWUnID8gJ1RyYWluR2FtZScgOiAnR2FtZSc7XG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZS5zdGFydChuZXh0U2NlbmUsIHtcbiAgICAgICAgICAgICAgICAgICAgZ2FtZUNvZGU6IHRoaXMuZ2FtZUNvZGUsXG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25JZDogZGF0YS5pZCxcbiAgICAgICAgICAgICAgICAgICAgZ2FtZUlkOiBkYXRhLmdhbWVfaWQsXG4gICAgICAgICAgICAgICAgICAgIHF1ZXN0aW9uczogZGF0YS5xdWVzdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIHRpbWVMaW1pdDogZGF0YS5nYW1lLnRpbWVfbGltaXRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tHQU1FXVtTRVNTSU9OXSBzdGFydEdhbWVTZXNzaW9uIGZhaWxlZCwgZmFsbGJhY2sgdG8gbG9jYWwgcXVlc3Rpb25zJywge1xuICAgICAgICAgICAgICAgICAgICBnYW1lQ29kZTogdGhpcy5nYW1lQ29kZSxcbiAgICAgICAgICAgICAgICAgICAgYXBpTW9kZTogZ2V0QXBpTW9kZSgpLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZXJyXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6IFN0cmluZyhlcnIpO1xuICAgICAgICAgICAgICAgIHRoaXMuZGVidWdUZXh0LnNldFRleHQoYERFQlVHOiBBUEkgZmFpbGVkIC0+ICR7ZXJyb3JNZXNzYWdlfWApO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dFNjZW5lID0gZ2FtZUNvbmZpZy5jb2RlID09PSAndHJhaW5fZ2FtZScgPyAnVHJhaW5HYW1lJyA6ICdHYW1lJztcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLnN0YXJ0KG5leHRTY2VuZSwge1xuICAgICAgICAgICAgICAgICAgICBnYW1lQ29kZTogdGhpcy5nYW1lQ29kZSxcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbklkOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBnYW1lSWQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIHF1ZXN0aW9uczogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgdGltZUxpbWl0OiBudWxsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNTdGFydGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRCdXR0b24uc2V0QWxwaGEoMSk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiU2NlbmUiLCJFdmVudEJ1cyIsImZldGNoR2FtZUxpc3QiLCJzdGFydEdhbWVTZXNzaW9uIiwiZ2V0QXBpTW9kZSIsImdldEdhbWVDb25maWciLCJyZXNvbHZlR2FtZUNvZGUiLCJNYWluTWVudSIsImlzU3RhcnRpbmciLCJnYW1lQ29kZSIsImluaXQiLCJkYXRhIiwicmVnaXN0cnkiLCJnZXQiLCJzZXQiLCJjcmVhdGUiLCJ3aWR0aCIsImhlaWdodCIsInNjYWxlIiwiZ2FtZUNvbmZpZyIsImJhY2tncm91bmQiLCJhZGQiLCJpbWFnZSIsIm1hcEtleSIsInNldERpc3BsYXlTaXplIiwibG9nbyIsInNldERlcHRoIiwic2V0U2NhbGUiLCJ0aXRsZSIsInRleHQiLCJsYWJlbCIsImZvbnRGYW1pbHkiLCJmb250U2l6ZSIsImNvbG9yIiwic3Ryb2tlIiwic3Ryb2tlVGhpY2tuZXNzIiwiYWxpZ24iLCJzZXRPcmlnaW4iLCJkZXNjcmlwdGlvbiIsIndvcmRXcmFwIiwidG9rZW5Tb3VyY2UiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfREVCVUdfQkVBUkVSX1RPS0VOIiwiZGVidWdUZXh0Iiwic3RhcnRCdXR0b24iLCJjcmVhdGVCdXR0b24iLCJjb2RlIiwic2V0VGV4dCIsInRoZW4iLCJyZXMiLCJjb25zb2xlIiwiZXJyb3IiLCJjb3VudCIsImxlbmd0aCIsImNhdGNoIiwibXNnIiwiRXJyb3IiLCJtZXNzYWdlIiwiU3RyaW5nIiwiZW1pdCIsIngiLCJ5IiwiYnV0dG9uIiwiY29udGFpbmVyIiwiYmciLCJyZWN0YW5nbGUiLCJzZXRTdHJva2VTdHlsZSIsInNldFNpemUiLCJzZXRJbnRlcmFjdGl2ZSIsIlBoYXNlciIsIkdlb20iLCJSZWN0YW5nbGUiLCJDb250YWlucyIsIm9uIiwic2V0RmlsbFN0eWxlIiwiaW5wdXQiLCJzZXREZWZhdWx0Q3Vyc29yIiwidGltZSIsImRlbGF5ZWRDYWxsIiwiY2hhbmdlU2NlbmUiLCJzZXRBbHBoYSIsImxvZyIsImFwaU1vZGUiLCJzZXNzaW9uSWQiLCJpZCIsImdhbWVJZCIsImdhbWVfaWQiLCJxdWVzdGlvbkNvdW50IiwicXVlc3Rpb25zIiwidGltZUxpbWl0IiwiZ2FtZSIsInRpbWVfbGltaXQiLCJuZXh0U2NlbmUiLCJzY2VuZSIsInN0YXJ0IiwiZXJyIiwiZXJyb3JNZXNzYWdlIiwiZmluYWxseSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/game/scenes/MainMenu.ts\n");

/***/ }),

/***/ "(pages-dir-node)/./src/game/scenes/Preloader.ts":
/*!**************************************!*\
  !*** ./src/game/scenes/Preloader.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Preloader: () => (/* binding */ Preloader)\n/* harmony export */ });\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _gameConfig__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../gameConfig */ \"(pages-dir-node)/./src/game/gameConfig.ts\");\n\n\n/**\n * Preloader Scene - Stage 2: Load all game assets with visual progress\n *\n * Features:\n * - Visual progress bar with outline and fill\n * - Percentage text display\n * - Loading status text\n * - Error handling for failed loads\n * - Smooth transition to MainMenu\n */ class Preloader extends phaser__WEBPACK_IMPORTED_MODULE_0__.Scene {\n    constructor(){\n        super('Preloader'), this.loadErrors = [], this.parallaxLayers = [];\n    }\n    init() {\n        const { width, height } = this.cameras.main;\n        const centerX = width / 2;\n        const centerY = height / 2;\n        // Parallax background (loaded in Boot scene)\n        this.createParallaxLoaderBackground();\n        // Logo at top\n        const logo = this.add.image(centerX, centerY - 120, 'logo');\n        logo.setScale(0.8);\n        // Loading text\n        this.add.text(centerX, centerY - 40, 'Loading Game...', {\n            fontFamily: 'Arial',\n            fontSize: '24px',\n            color: '#ffffff',\n            stroke: '#000000',\n            strokeThickness: 4\n        }).setOrigin(0.5);\n        // Progress bar container (outline)\n        const barWidth = 400;\n        const barHeight = 24;\n        const barX = centerX - barWidth / 2;\n        const barY = centerY + 20;\n        // Progress bar background (dark)\n        this.add.rectangle(centerX, barY + barHeight / 2, barWidth + 4, barHeight + 4, 0x000000, 0.5);\n        // Progress bar outline\n        this.add.rectangle(centerX, barY + barHeight / 2, barWidth, barHeight).setStrokeStyle(2, 0xffffff);\n        // Progress bar fill (starts at 0 width)\n        this.progressBar = this.add.rectangle(barX + 2, barY + 2, 0, barHeight - 4, 0x00ff88);\n        this.progressBar.setOrigin(0, 0);\n        // Percentage text\n        this.progressText = this.add.text(centerX, barY + barHeight / 2, '0%', {\n            fontFamily: 'Arial',\n            fontSize: '16px',\n            color: '#ffffff',\n            stroke: '#000000',\n            strokeThickness: 3\n        }).setOrigin(0.5);\n        // Status text (shows current file being loaded)\n        this.statusText = this.add.text(centerX, barY + barHeight + 20, '', {\n            fontFamily: 'Arial',\n            fontSize: '14px',\n            color: '#cccccc'\n        }).setOrigin(0.5);\n        // Progress event - update bar width and percentage\n        this.load.on('progress', (progress)=>{\n            this.progressBar.width = (barWidth - 4) * progress;\n            this.progressText.setText(`${Math.round(progress * 100)}%`);\n        });\n        // File load event - show current file name\n        this.load.on('load', (file)=>{\n            this.statusText.setText(`Loading: ${file.key}`);\n        });\n        // Error handling - track failed loads\n        this.load.on('loaderror', (file)=>{\n            this.loadErrors.push(file.key);\n            console.warn(`Failed to load: ${file.key}`);\n            this.statusText.setText(`Error loading: ${file.key}`);\n            this.statusText.setColor('#ff6666');\n        });\n    }\n    update() {\n        if (!this.parallaxLayers.length) return;\n        const time = this.time.now;\n        this.parallaxLayers.forEach((layer)=>{\n            const speed = layer.getData('speed');\n            layer.tilePositionY = time * speed;\n        });\n    }\n    preload() {\n        const gameCode = this.registry.get('gameCode');\n        const gameConfig = (0,_gameConfig__WEBPACK_IMPORTED_MODULE_1__.getGameConfig)(gameCode);\n        const assetRoot = gameConfig.assetRoot;\n        // Ensure assets resolve from site root even on /game/* routes\n        this.load.setPath('/assets');\n        if (gameConfig.code === 'train_game') {\n            // ==================== TRAIN GAME ASSETS ====================\n            this.load.image('star', 'games/tower/ui/star.png');\n            this.load.image('train-bg', `${assetRoot}/background copy 2.png`);\n            this.load.image('train-engine', `${assetRoot}/train.png`);\n            this.load.image('train-light', `${assetRoot}/light.png`);\n            this.load.image('train-light-red', `${assetRoot}/Fox and Traffic light/Red.png`);\n            this.load.image('train-light-yellow', `${assetRoot}/Fox and Traffic light/Yellow.png`);\n            this.load.image('train-light-green', `${assetRoot}/Fox and Traffic light/Green.png`);\n            this.load.image('train-fox-idle', `${assetRoot}/Fox and Traffic light/Idle.png`);\n            this.load.image('train-fox-correct', `${assetRoot}/Fox and Traffic light/Correct.png`);\n            this.load.image('train-fox-incorrect', `${assetRoot}/Fox and Traffic light/Incorrect.png`);\n            this.load.image('train-barrier', `${assetRoot}/s.png`);\n            for(let i = 1; i <= 11; i += 1){\n                this.load.image(`train-car-${i}`, `${assetRoot}/Train/${i}.png`);\n            }\n            this.load.image(gameConfig.mapKey, `${assetRoot}/${gameConfig.mapPath}`);\n        } else {\n            // ==================== UI ASSETS ====================\n            this.load.image('star', `${assetRoot}/ui/star.png`);\n            this.load.image('ui-example', `${assetRoot}/ui/example.png`);\n            // ==================== GAMEPLAY ASSETS ====================\n            this.load.image('bg-1', `${assetRoot}/backgrounds/1.png`);\n            this.load.image('bg-2', `${assetRoot}/backgrounds/2.png`);\n            this.load.image('bg-3', `${assetRoot}/backgrounds/3.png`);\n            this.load.image('bg-4', `${assetRoot}/backgrounds/4.png`);\n            this.load.image('bg-5', `${assetRoot}/backgrounds/5.png`);\n            this.load.image('bg-6', `${assetRoot}/backgrounds/6.png`);\n            this.load.image(gameConfig.mapKey, `${assetRoot}/${gameConfig.mapPath}`);\n            // ==================== CHARACTER ASSETS ====================\n            this.load.spritesheet('character', `${assetRoot}/characters/character animation tran.png`, {\n                frameWidth: 515,\n                frameHeight: 1128,\n                margin: 15\n            });\n            // char-jump.png is not present in assets; skip loading to avoid load error\n            this.load.image('char-emotes', `${assetRoot}/characters/char-emotes.png`);\n            // ==================== EMOTE ASSETS ====================\n            // Legacy emotes\n            this.load.image('emote-tran-idle', `${assetRoot}/emotes/emo tran .png`);\n            this.load.image('emote-tran-idle-flipped', `${assetRoot}/emotes/emo tran flipped idle.png`);\n            this.load.image('emote-tran-correct', `${assetRoot}/emotes/emo tran correct.png`);\n            this.load.image('emote-tran-correct-flipped', `${assetRoot}/emotes/emo tran flipped correct.png`);\n            this.load.image('emote-tran-incorrect', `${assetRoot}/emotes/emo tran incorrect.png`);\n            this.load.image('emote-tran-incorrect-flipped', `${assetRoot}/emotes/emo tran flipped incorrect.png`);\n            // ==================== TILE ASSETS ====================\n            this.load.image('tile-1', `${assetRoot}/tiles/1.png`);\n            this.load.image('tile-2', `${assetRoot}/tiles/2.png`);\n            this.load.image('tile-3', `${assetRoot}/tiles/3.png`);\n            this.load.image('tile-4', `${assetRoot}/tiles/4.png`);\n            this.load.image('tile-5', `${assetRoot}/tiles/5.png`);\n            this.load.image('tile-6', `${assetRoot}/tiles/6.png`);\n            this.load.image('tile-flower', `${assetRoot}/tiles/flower.png`);\n            this.load.image('tile-green', `${assetRoot}/tiles/green.png`);\n            this.load.image('tile-shadow', `${assetRoot}/tiles/shadoe.png`);\n            // ==================== MAP ASSETS ====================\n            this.load.image('map-all', `${assetRoot}/maps/All map.png`);\n        }\n    }\n    createParallaxLoaderBackground() {\n        const { width, height } = this.cameras.main;\n        const layerKeys = [\n            'bg-1',\n            'bg-2',\n            'bg-3',\n            'bg-4',\n            'bg-5',\n            'bg-6'\n        ];\n        const speeds = [\n            0.01,\n            0.02,\n            0.03,\n            0.04,\n            0.055,\n            0.07\n        ];\n        this.parallaxLayers = layerKeys.map((key, index)=>{\n            const layer = this.add.tileSprite(0, 0, width, height, key).setOrigin(0, 0).setScrollFactor(0).setDepth(-100 + index);\n            layer.setData('speed', speeds[index]);\n            return layer;\n        });\n    }\n    create() {\n        // Log any loading errors\n        if (this.loadErrors.length > 0) {\n            console.warn('Assets failed to load:', this.loadErrors);\n        }\n        const gameCode = this.registry.get('gameCode');\n        // Create global animations here if needed\n        if ((0,_gameConfig__WEBPACK_IMPORTED_MODULE_1__.getGameConfig)(gameCode).code !== 'train_game') {\n            this.createGlobalAnimations();\n        }\n        // Skip MainMenu and go straight into Game\n        this.time.delayedCall(300, ()=>{\n            this.cameras.main.fadeOut(200, 0, 0, 0);\n            this.cameras.main.once('camerafadeoutcomplete', ()=>{\n                if ((0,_gameConfig__WEBPACK_IMPORTED_MODULE_1__.getGameConfig)(gameCode).code === 'train_game') {\n                    this.scene.start('TrainGame', {\n                        gameCode\n                    });\n                } else {\n                    this.scene.start('Game', {\n                        gameCode\n                    });\n                }\n            });\n        });\n    }\n    /**\n     * Create animations that will be used across multiple scenes\n     */ createGlobalAnimations() {\n        this.anims.create({\n            key: 'character-fly',\n            frames: this.anims.generateFrameNumbers('character', {\n                start: 0,\n                end: 9\n            }),\n            frameRate: 10,\n            repeat: -1\n        });\n        this.anims.create({\n            key: 'tran-jump',\n            frames: this.anims.generateFrameNumbers('character', {\n                start: 0,\n                end: 4\n            }),\n            frameRate: 6,\n            repeat: -1\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9nYW1lL3NjZW5lcy9QcmVsb2FkZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUErQjtBQUNlO0FBRTlDOzs7Ozs7Ozs7Q0FTQyxHQUNNLE1BQU1FLGtCQUFrQkYseUNBQUtBO0lBUWhDLGFBQ0E7UUFDSSxLQUFLLENBQUMsbUJBTEZHLGFBQXVCLEVBQUUsT0FDekJDLGlCQUFrRCxFQUFFO0lBSzVEO0lBRUFDLE9BQ0E7UUFDSSxNQUFNLEVBQUVDLEtBQUssRUFBRUMsTUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDQyxPQUFPLENBQUNDLElBQUk7UUFDM0MsTUFBTUMsVUFBVUosUUFBUTtRQUN4QixNQUFNSyxVQUFVSixTQUFTO1FBRXpCLDZDQUE2QztRQUM3QyxJQUFJLENBQUNLLDhCQUE4QjtRQUVuQyxjQUFjO1FBQ2QsTUFBTUMsT0FBTyxJQUFJLENBQUNDLEdBQUcsQ0FBQ0MsS0FBSyxDQUFDTCxTQUFTQyxVQUFVLEtBQUs7UUFDcERFLEtBQUtHLFFBQVEsQ0FBQztRQUVkLGVBQWU7UUFDZixJQUFJLENBQUNGLEdBQUcsQ0FBQ0csSUFBSSxDQUFDUCxTQUFTQyxVQUFVLElBQUksbUJBQW1CO1lBQ3BETyxZQUFZO1lBQ1pDLFVBQVU7WUFDVkMsT0FBTztZQUNQQyxRQUFRO1lBQ1JDLGlCQUFpQjtRQUNyQixHQUFHQyxTQUFTLENBQUM7UUFFYixtQ0FBbUM7UUFDbkMsTUFBTUMsV0FBVztRQUNqQixNQUFNQyxZQUFZO1FBQ2xCLE1BQU1DLE9BQU9oQixVQUFVYyxXQUFXO1FBQ2xDLE1BQU1HLE9BQU9oQixVQUFVO1FBRXZCLGlDQUFpQztRQUNqQyxJQUFJLENBQUNHLEdBQUcsQ0FBQ2MsU0FBUyxDQUFDbEIsU0FBU2lCLE9BQU9GLFlBQVksR0FBR0QsV0FBVyxHQUFHQyxZQUFZLEdBQUcsVUFBVTtRQUV6Rix1QkFBdUI7UUFDdkIsSUFBSSxDQUFDWCxHQUFHLENBQUNjLFNBQVMsQ0FBQ2xCLFNBQVNpQixPQUFPRixZQUFZ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UUFDMUMsSUFBSSxDQUFDL0IsSUFBSSxDQUFDZ0MsV0FBVyxDQUFDLEtBQUs7WUFDdkIsSUFBSSxDQUFDdkUsT0FBTyxDQUFDQyxJQUFJLENBQUN1RSxPQUFPLENBQUMsS0FBSyxHQUFHLEdBQUc7WUFDckMsSUFBSSxDQUFDeEUsT0FBTyxDQUFDQyxJQUFJLENBQUN3RSxJQUFJLENBQUMseUJBQXlCO2dCQUM1QyxJQUFJaEYsMERBQWFBLENBQUNzRCxVQUFVTSxJQUFJLEtBQUssY0FBYztvQkFDL0MsSUFBSSxDQUFDcUIsS0FBSyxDQUFDQyxLQUFLLENBQUMsYUFBYTt3QkFBRTVCO29CQUFTO2dCQUM3QyxPQUFPO29CQUNILElBQUksQ0FBQzJCLEtBQUssQ0FBQ0MsS0FBSyxDQUFDLFFBQVE7d0JBQUU1QjtvQkFBUztnQkFDeEM7WUFDSjtRQUNKO0lBQ0o7SUFFQTs7S0FFQyxHQUNELHlCQUNBO1FBQ0ksSUFBSSxDQUFDNkIsS0FBSyxDQUFDUCxNQUFNLENBQUM7WUFDZHJDLEtBQUs7WUFDTDZDLFFBQVEsSUFBSSxDQUFDRCxLQUFLLENBQUNFLG9CQUFvQixDQUFDLGFBQWE7Z0JBQUVILE9BQU87Z0JBQUdJLEtBQUs7WUFBRTtZQUN4RUMsV0FBVztZQUNYQyxRQUFRLENBQUM7UUFDYjtRQUVBLElBQUksQ0FBQ0wsS0FBSyxDQUFDUCxNQUFNLENBQUM7WUFDZHJDLEtBQUs7WUFDTDZDLFFBQVEsSUFBSSxDQUFDRCxLQUFLLENBQUNFLG9CQUFvQixDQUFDLGFBQWE7Z0JBQUVILE9BQU87Z0JBQUdJLEtBQUs7WUFBRTtZQUN4RUMsV0FBVztZQUNYQyxRQUFRLENBQUM7UUFDYjtJQUNKO0FBQ0oiLCJzb3VyY2VzIjpbIi9Vc2Vycy9uYjIzMDYwMS9Eb2N1bWVudHMvcGhhc2VyLWdhbWVkZXYvc3JjL2dhbWUvc2NlbmVzL1ByZWxvYWRlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTY2VuZSB9IGZyb20gJ3BoYXNlcic7XG5pbXBvcnQgeyBnZXRHYW1lQ29uZmlnIH0gZnJvbSAnLi4vZ2FtZUNvbmZpZyc7XG5cbi8qKlxuICogUHJlbG9hZGVyIFNjZW5lIC0gU3RhZ2UgMjogTG9hZCBhbGwgZ2FtZSBhc3NldHMgd2l0aCB2aXN1YWwgcHJvZ3Jlc3NcbiAqXG4gKiBGZWF0dXJlczpcbiAqIC0gVmlzdWFsIHByb2dyZXNzIGJhciB3aXRoIG91dGxpbmUgYW5kIGZpbGxcbiAqIC0gUGVyY2VudGFnZSB0ZXh0IGRpc3BsYXlcbiAqIC0gTG9hZGluZyBzdGF0dXMgdGV4dFxuICogLSBFcnJvciBoYW5kbGluZyBmb3IgZmFpbGVkIGxvYWRzXG4gKiAtIFNtb290aCB0cmFuc2l0aW9uIHRvIE1haW5NZW51XG4gKi9cbmV4cG9ydCBjbGFzcyBQcmVsb2FkZXIgZXh0ZW5kcyBTY2VuZVxue1xuICAgIHByaXZhdGUgcHJvZ3Jlc3NCYXIhOiBQaGFzZXIuR2FtZU9iamVjdHMuUmVjdGFuZ2xlO1xuICAgIHByaXZhdGUgcHJvZ3Jlc3NUZXh0ITogUGhhc2VyLkdhbWVPYmplY3RzLlRleHQ7XG4gICAgcHJpdmF0ZSBzdGF0dXNUZXh0ITogUGhhc2VyLkdhbWVPYmplY3RzLlRleHQ7XG4gICAgcHJpdmF0ZSBsb2FkRXJyb3JzOiBzdHJpbmdbXSA9IFtdO1xuICAgIHByaXZhdGUgcGFyYWxsYXhMYXllcnM6IFBoYXNlci5HYW1lT2JqZWN0cy5UaWxlU3ByaXRlW10gPSBbXTtcblxuICAgIGNvbnN0cnVjdG9yICgpXG4gICAge1xuICAgICAgICBzdXBlcignUHJlbG9hZGVyJyk7XG4gICAgfVxuXG4gICAgaW5pdCAoKVxuICAgIHtcbiAgICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSB0aGlzLmNhbWVyYXMubWFpbjtcbiAgICAgICAgY29uc3QgY2VudGVyWCA9IHdpZHRoIC8gMjtcbiAgICAgICAgY29uc3QgY2VudGVyWSA9IGhlaWdodCAvIDI7XG5cbiAgICAgICAgLy8gUGFyYWxsYXggYmFja2dyb3VuZCAobG9hZGVkIGluIEJvb3Qgc2NlbmUpXG4gICAgICAgIHRoaXMuY3JlYXRlUGFyYWxsYXhMb2FkZXJCYWNrZ3JvdW5kKCk7XG5cbiAgICAgICAgLy8gTG9nbyBhdCB0b3BcbiAgICAgICAgY29uc3QgbG9nbyA9IHRoaXMuYWRkLmltYWdlKGNlbnRlclgsIGNlbnRlclkgLSAxMjAsICdsb2dvJyk7XG4gICAgICAgIGxvZ28uc2V0U2NhbGUoMC44KTtcblxuICAgICAgICAvLyBMb2FkaW5nIHRleHRcbiAgICAgICAgdGhpcy5hZGQudGV4dChjZW50ZXJYLCBjZW50ZXJZIC0gNDAsICdMb2FkaW5nIEdhbWUuLi4nLCB7XG4gICAgICAgICAgICBmb250RmFtaWx5OiAnQXJpYWwnLFxuICAgICAgICAgICAgZm9udFNpemU6ICcyNHB4JyxcbiAgICAgICAgICAgIGNvbG9yOiAnI2ZmZmZmZicsXG4gICAgICAgICAgICBzdHJva2U6ICcjMDAwMDAwJyxcbiAgICAgICAgICAgIHN0cm9rZVRoaWNrbmVzczogNFxuICAgICAgICB9KS5zZXRPcmlnaW4oMC41KTtcblxuICAgICAgICAvLyBQcm9ncmVzcyBiYXIgY29udGFpbmVyIChvdXRsaW5lKVxuICAgICAgICBjb25zdCBiYXJXaWR0aCA9IDQwMDtcbiAgICAgICAgY29uc3QgYmFySGVpZ2h0ID0gMjQ7XG4gICAgICAgIGNvbnN0IGJhclggPSBjZW50ZXJYIC0gYmFyV2lkdGggLyAyO1xuICAgICAgICBjb25zdCBiYXJZID0gY2VudGVyWSArIDIwO1xuXG4gICAgICAgIC8vIFByb2dyZXNzIGJhciBiYWNrZ3JvdW5kIChkYXJrKVxuICAgICAgICB0aGlzLmFkZC5yZWN0YW5nbGUoY2VudGVyWCwgYmFyWSArIGJhckhlaWdodCAvIDIsIGJhcldpZHRoICsgNCwgYmFySGVpZ2h0ICsgNCwgMHgwMDAwMDAsIDAuNSk7XG5cbiAgICAgICAgLy8gUHJvZ3Jlc3MgYmFyIG91dGxpbmVcbiAgICAgICAgdGhpcy5hZGQucmVjdGFuZ2xlKGNlbnRlclgsIGJhclkgKyBiYXJIZWlnaHQgLyAyLCBiYXJXaWR0aCwgYmFySGVpZ2h0KS5zZXRTdHJva2VTdHlsZSgyLCAweGZmZmZmZik7XG5cbiAgICAgICAgLy8gUHJvZ3Jlc3MgYmFyIGZpbGwgKHN0YXJ0cyBhdCAwIHdpZHRoKVxuICAgICAgICB0aGlzLnByb2dyZXNzQmFyID0gdGhpcy5hZGQucmVjdGFuZ2xlKFxuICAgICAgICAgICAgYmFyWCArIDIsXG4gICAgICAgICAgICBiYXJZICsgMixcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICBiYXJIZWlnaHQgLSA0LFxuICAgICAgICAgICAgMHgwMGZmODhcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5wcm9ncmVzc0Jhci5zZXRPcmlnaW4oMCwgMCk7XG5cbiAgICAgICAgLy8gUGVyY2VudGFnZSB0ZXh0XG4gICAgICAgIHRoaXMucHJvZ3Jlc3NUZXh0ID0gdGhpcy5hZGQudGV4dChjZW50ZXJYLCBiYXJZICsgYmFySGVpZ2h0IC8gMiwgJzAlJywge1xuICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsJyxcbiAgICAgICAgICAgIGZvbnRTaXplOiAnMTZweCcsXG4gICAgICAgICAgICBjb2xvcjogJyNmZmZmZmYnLFxuICAgICAgICAgICAgc3Ryb2tlOiAnIzAwMDAwMCcsXG4gICAgICAgICAgICBzdHJva2VUaGlja25lc3M6IDNcbiAgICAgICAgfSkuc2V0T3JpZ2luKDAuNSk7XG5cbiAgICAgICAgLy8gU3RhdHVzIHRleHQgKHNob3dzIGN1cnJlbnQgZmlsZSBiZWluZyBsb2FkZWQpXG4gICAgICAgIHRoaXMuc3RhdHVzVGV4dCA9IHRoaXMuYWRkLnRleHQoY2VudGVyWCwgYmFyWSArIGJhckhlaWdodCArIDIwLCAnJywge1xuICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsJyxcbiAgICAgICAgICAgIGZvbnRTaXplOiAnMTRweCcsXG4gICAgICAgICAgICBjb2xvcjogJyNjY2NjY2MnXG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUpO1xuXG4gICAgICAgIC8vIFByb2dyZXNzIGV2ZW50IC0gdXBkYXRlIGJhciB3aWR0aCBhbmQgcGVyY2VudGFnZVxuICAgICAgICB0aGlzLmxvYWQub24oJ3Byb2dyZXNzJywgKHByb2dyZXNzOiBudW1iZXIpID0+IHtcbiAgICAgICAgICAgIHRoaXMucHJvZ3Jlc3NCYXIud2lkdGggPSAoYmFyV2lkdGggLSA0KSAqIHByb2dyZXNzO1xuICAgICAgICAgICAgdGhpcy5wcm9ncmVzc1RleHQuc2V0VGV4dChgJHtNYXRoLnJvdW5kKHByb2dyZXNzICogMTAwKX0lYCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEZpbGUgbG9hZCBldmVudCAtIHNob3cgY3VycmVudCBmaWxlIG5hbWVcbiAgICAgICAgdGhpcy5sb2FkLm9uKCdsb2FkJywgKGZpbGU6IFBoYXNlci5Mb2FkZXIuRmlsZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zdGF0dXNUZXh0LnNldFRleHQoYExvYWRpbmc6ICR7ZmlsZS5rZXl9YCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEVycm9yIGhhbmRsaW5nIC0gdHJhY2sgZmFpbGVkIGxvYWRzXG4gICAgICAgIHRoaXMubG9hZC5vbignbG9hZGVycm9yJywgKGZpbGU6IFBoYXNlci5Mb2FkZXIuRmlsZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5sb2FkRXJyb3JzLnB1c2goZmlsZS5rZXkpO1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGBGYWlsZWQgdG8gbG9hZDogJHtmaWxlLmtleX1gKTtcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzVGV4dC5zZXRUZXh0KGBFcnJvciBsb2FkaW5nOiAke2ZpbGUua2V5fWApO1xuICAgICAgICAgICAgdGhpcy5zdGF0dXNUZXh0LnNldENvbG9yKCcjZmY2NjY2Jyk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHVwZGF0ZSAoKVxuICAgIHtcbiAgICAgICAgaWYgKCF0aGlzLnBhcmFsbGF4TGF5ZXJzLmxlbmd0aCkgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IHRpbWUgPSB0aGlzLnRpbWUubm93O1xuICAgICAgICB0aGlzLnBhcmFsbGF4TGF5ZXJzLmZvckVhY2goKGxheWVyKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzcGVlZCA9IGxheWVyLmdldERhdGEoJ3NwZWVkJykgYXMgbnVtYmVyO1xuICAgICAgICAgICAgbGF5ZXIudGlsZVBvc2l0aW9uWSA9IHRpbWUgKiBzcGVlZDtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJlbG9hZCAoKVxuICAgIHtcbiAgICAgICAgY29uc3QgZ2FtZUNvZGUgPSB0aGlzLnJlZ2lzdHJ5LmdldCgnZ2FtZUNvZGUnKSBhcyBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgICAgIGNvbnN0IGdhbWVDb25maWcgPSBnZXRHYW1lQ29uZmlnKGdhbWVDb2RlKTtcbiAgICAgICAgY29uc3QgYXNzZXRSb290ID0gZ2FtZUNvbmZpZy5hc3NldFJvb3Q7XG5cbiAgICAgICAgLy8gRW5zdXJlIGFzc2V0cyByZXNvbHZlIGZyb20gc2l0ZSByb290IGV2ZW4gb24gL2dhbWUvKiByb3V0ZXNcbiAgICAgICAgdGhpcy5sb2FkLnNldFBhdGgoJy9hc3NldHMnKTtcblxuICAgICAgICBpZiAoZ2FtZUNvbmZpZy5jb2RlID09PSAndHJhaW5fZ2FtZScpIHtcbiAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09IFRSQUlOIEdBTUUgQVNTRVRTID09PT09PT09PT09PT09PT09PT09XG4gICAgICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ3N0YXInLCAnZ2FtZXMvdG93ZXIvdWkvc3Rhci5wbmcnKTtcbiAgICAgICAgICAgIHRoaXMubG9hZC5pbWFnZSgndHJhaW4tYmcnLCBgJHthc3NldFJvb3R9L2JhY2tncm91bmQgY29weSAyLnBuZ2ApO1xuICAgICAgICAgICAgdGhpcy5sb2FkLmltYWdlKCd0cmFpbi1lbmdpbmUnLCBgJHthc3NldFJvb3R9L3RyYWluLnBuZ2ApO1xuICAgICAgICAgICAgdGhpcy5sb2FkLmltYWdlKCd0cmFpbi1saWdodCcsIGAke2Fzc2V0Um9vdH0vbGlnaHQucG5nYCk7XG4gICAgICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ3RyYWluLWxpZ2h0LXJlZCcsIGAke2Fzc2V0Um9vdH0vRm94IGFuZCBUcmFmZmljIGxpZ2h0L1JlZC5wbmdgKTtcbiAgICAgICAgICAgIHRoaXMubG9hZC5pbWFnZSgndHJhaW4tbGlnaHQteWVsbG93JywgYCR7YXNzZXRSb290fS9Gb3ggYW5kIFRyYWZmaWMgbGlnaHQvWWVsbG93LnBuZ2ApO1xuICAgICAgICAgICAgdGhpcy5sb2FkLmltYWdlKCd0cmFpbi1saWdodC1ncmVlbicsIGAke2Fzc2V0Um9vdH0vRm94IGFuZCBUcmFmZmljIGxpZ2h0L0dyZWVuLnBuZ2ApO1xuICAgICAgICAgICAgdGhpcy5sb2FkLmltYWdlKCd0cmFpbi1mb3gtaWRsZScsIGAke2Fzc2V0Um9vdH0vRm94IGFuZCBUcmFmZmljIGxpZ2h0L0lkbGUucG5nYCk7XG4gICAgICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ3RyYWluLWZveC1jb3JyZWN0JywgYCR7YXNzZXRSb290fS9Gb3ggYW5kIFRyYWZmaWMgbGlnaHQvQ29ycmVjdC5wbmdgKTtcbiAgICAgICAgICAgIHRoaXMubG9hZC5pbWFnZSgndHJhaW4tZm94LWluY29ycmVjdCcsIGAke2Fzc2V0Um9vdH0vRm94IGFuZCBUcmFmZmljIGxpZ2h0L0luY29ycmVjdC5wbmdgKTtcbiAgICAgICAgICAgIHRoaXMubG9hZC5pbWFnZSgndHJhaW4tYmFycmllcicsIGAke2Fzc2V0Um9vdH0vcy5wbmdgKTtcblxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gMTE7IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgIHRoaXMubG9hZC5pbWFnZShgdHJhaW4tY2FyLSR7aX1gLCBgJHthc3NldFJvb3R9L1RyYWluLyR7aX0ucG5nYCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMubG9hZC5pbWFnZShnYW1lQ29uZmlnLm1hcEtleSwgYCR7YXNzZXRSb290fS8ke2dhbWVDb25maWcubWFwUGF0aH1gKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09IFVJIEFTU0VUUyA9PT09PT09PT09PT09PT09PT09PVxuICAgICAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdzdGFyJywgYCR7YXNzZXRSb290fS91aS9zdGFyLnBuZ2ApO1xuICAgICAgICAgICAgdGhpcy5sb2FkLmltYWdlKCd1aS1leGFtcGxlJywgYCR7YXNzZXRSb290fS91aS9leGFtcGxlLnBuZ2ApO1xuXG4gICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PSBHQU1FUExBWSBBU1NFVFMgPT09PT09PT09PT09PT09PT09PT1cbiAgICAgICAgICAgIHRoaXMubG9hZC5pbWFnZSgnYmctMScsIGAke2Fzc2V0Um9vdH0vYmFja2dyb3VuZHMvMS5wbmdgKTtcbiAgICAgICAgICAgIHRoaXMubG9hZC5pbWFnZSgnYmctMicsIGAke2Fzc2V0Um9vdH0vYmFja2dyb3VuZHMvMi5wbmdgKTtcbiAgICAgICAgICAgIHRoaXMubG9hZC5pbWFnZSgnYmctMycsIGAke2Fzc2V0Um9vdH0vYmFja2dyb3VuZHMvMy5wbmdgKTtcbiAgICAgICAgICAgIHRoaXMubG9hZC5pbWFnZSgnYmctNCcsIGAke2Fzc2V0Um9vdH0vYmFja2dyb3VuZHMvNC5wbmdgKTtcbiAgICAgICAgICAgIHRoaXMubG9hZC5pbWFnZSgnYmctNScsIGAke2Fzc2V0Um9vdH0vYmFja2dyb3VuZHMvNS5wbmdgKTtcbiAgICAgICAgICAgIHRoaXMubG9hZC5pbWFnZSgnYmctNicsIGAke2Fzc2V0Um9vdH0vYmFja2dyb3VuZHMvNi5wbmdgKTtcbiAgICAgICAgICAgIHRoaXMubG9hZC5pbWFnZShnYW1lQ29uZmlnLm1hcEtleSwgYCR7YXNzZXRSb290fS8ke2dhbWVDb25maWcubWFwUGF0aH1gKTtcblxuICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT0gQ0hBUkFDVEVSIEFTU0VUUyA9PT09PT09PT09PT09PT09PT09PVxuICAgICAgICAgICAgdGhpcy5sb2FkLnNwcml0ZXNoZWV0KCdjaGFyYWN0ZXInLCBgJHthc3NldFJvb3R9L2NoYXJhY3RlcnMvY2hhcmFjdGVyIGFuaW1hdGlvbiB0cmFuLnBuZ2AsIHtcbiAgICAgICAgICAgICAgICBmcmFtZVdpZHRoOiA1MTUsXG4gICAgICAgICAgICAgICAgZnJhbWVIZWlnaHQ6IDExMjgsXG4gICAgICAgICAgICAgICAgbWFyZ2luOiAxNVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBjaGFyLWp1bXAucG5nIGlzIG5vdCBwcmVzZW50IGluIGFzc2V0czsgc2tpcCBsb2FkaW5nIHRvIGF2b2lkIGxvYWQgZXJyb3JcbiAgICAgICAgICAgIHRoaXMubG9hZC5pbWFnZSgnY2hhci1lbW90ZXMnLCBgJHthc3NldFJvb3R9L2NoYXJhY3RlcnMvY2hhci1lbW90ZXMucG5nYCk7XG5cbiAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09IEVNT1RFIEFTU0VUUyA9PT09PT09PT09PT09PT09PT09PVxuICAgICAgICAgICAgLy8gTGVnYWN5IGVtb3Rlc1xuICAgICAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdlbW90ZS10cmFuLWlkbGUnLCBgJHthc3NldFJvb3R9L2Vtb3Rlcy9lbW8gdHJhbiAucG5nYCk7XG4gICAgICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ2Vtb3RlLXRyYW4taWRsZS1mbGlwcGVkJywgYCR7YXNzZXRSb290fS9lbW90ZXMvZW1vIHRyYW4gZmxpcHBlZCBpZGxlLnBuZ2ApO1xuICAgICAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdlbW90ZS10cmFuLWNvcnJlY3QnLCBgJHthc3NldFJvb3R9L2Vtb3Rlcy9lbW8gdHJhbiBjb3JyZWN0LnBuZ2ApO1xuICAgICAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdlbW90ZS10cmFuLWNvcnJlY3QtZmxpcHBlZCcsIGAke2Fzc2V0Um9vdH0vZW1vdGVzL2VtbyB0cmFuIGZsaXBwZWQgY29ycmVjdC5wbmdgKTtcbiAgICAgICAgICAgIHRoaXMubG9hZC5pbWFnZSgnZW1vdGUtdHJhbi1pbmNvcnJlY3QnLCBgJHthc3NldFJvb3R9L2Vtb3Rlcy9lbW8gdHJhbiBpbmNvcnJlY3QucG5nYCk7XG4gICAgICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ2Vtb3RlLXRyYW4taW5jb3JyZWN0LWZsaXBwZWQnLCBgJHthc3NldFJvb3R9L2Vtb3Rlcy9lbW8gdHJhbiBmbGlwcGVkIGluY29ycmVjdC5wbmdgKTtcblxuICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT0gVElMRSBBU1NFVFMgPT09PT09PT09PT09PT09PT09PT1cbiAgICAgICAgICAgIHRoaXMubG9hZC5pbWFnZSgndGlsZS0xJywgYCR7YXNzZXRSb290fS90aWxlcy8xLnBuZ2ApO1xuICAgICAgICAgICAgdGhpcy5sb2FkLmltYWdlKCd0aWxlLTInLCBgJHthc3NldFJvb3R9L3RpbGVzLzIucG5nYCk7XG4gICAgICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ3RpbGUtMycsIGAke2Fzc2V0Um9vdH0vdGlsZXMvMy5wbmdgKTtcbiAgICAgICAgICAgIHRoaXMubG9hZC5pbWFnZSgndGlsZS00JywgYCR7YXNzZXRSb290fS90aWxlcy80LnBuZ2ApO1xuICAgICAgICAgICAgdGhpcy5sb2FkLmltYWdlKCd0aWxlLTUnLCBgJHthc3NldFJvb3R9L3RpbGVzLzUucG5nYCk7XG4gICAgICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ3RpbGUtNicsIGAke2Fzc2V0Um9vdH0vdGlsZXMvNi5wbmdgKTtcbiAgICAgICAgICAgIHRoaXMubG9hZC5pbWFnZSgndGlsZS1mbG93ZXInLCBgJHthc3NldFJvb3R9L3RpbGVzL2Zsb3dlci5wbmdgKTtcbiAgICAgICAgICAgIHRoaXMubG9hZC5pbWFnZSgndGlsZS1ncmVlbicsIGAke2Fzc2V0Um9vdH0vdGlsZXMvZ3JlZW4ucG5nYCk7XG4gICAgICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ3RpbGUtc2hhZG93JywgYCR7YXNzZXRSb290fS90aWxlcy9zaGFkb2UucG5nYCk7XG5cbiAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09IE1BUCBBU1NFVFMgPT09PT09PT09PT09PT09PT09PT1cbiAgICAgICAgICAgIHRoaXMubG9hZC5pbWFnZSgnbWFwLWFsbCcsIGAke2Fzc2V0Um9vdH0vbWFwcy9BbGwgbWFwLnBuZ2ApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVQYXJhbGxheExvYWRlckJhY2tncm91bmQgKClcbiAgICB7XG4gICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gdGhpcy5jYW1lcmFzLm1haW47XG4gICAgICAgIGNvbnN0IGxheWVyS2V5cyA9IFsnYmctMScsICdiZy0yJywgJ2JnLTMnLCAnYmctNCcsICdiZy01JywgJ2JnLTYnXTtcbiAgICAgICAgY29uc3Qgc3BlZWRzID0gWzAuMDEsIDAuMDIsIDAuMDMsIDAuMDQsIDAuMDU1LCAwLjA3XTtcblxuICAgICAgICB0aGlzLnBhcmFsbGF4TGF5ZXJzID0gbGF5ZXJLZXlzLm1hcCgoa2V5LCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbGF5ZXIgPSB0aGlzLmFkZC50aWxlU3ByaXRlKDAsIDAsIHdpZHRoLCBoZWlnaHQsIGtleSlcbiAgICAgICAgICAgICAgICAuc2V0T3JpZ2luKDAsIDApXG4gICAgICAgICAgICAgICAgLnNldFNjcm9sbEZhY3RvcigwKVxuICAgICAgICAgICAgICAgIC5zZXREZXB0aCgtMTAwICsgaW5kZXgpO1xuICAgICAgICAgICAgbGF5ZXIuc2V0RGF0YSgnc3BlZWQnLCBzcGVlZHNbaW5kZXhdKTtcbiAgICAgICAgICAgIHJldHVybiBsYXllcjtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgY3JlYXRlICgpXG4gICAge1xuICAgICAgICAvLyBMb2cgYW55IGxvYWRpbmcgZXJyb3JzXG4gICAgICAgIGlmICh0aGlzLmxvYWRFcnJvcnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdBc3NldHMgZmFpbGVkIHRvIGxvYWQ6JywgdGhpcy5sb2FkRXJyb3JzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGdhbWVDb2RlID0gdGhpcy5yZWdpc3RyeS5nZXQoJ2dhbWVDb2RlJykgYXMgc3RyaW5nIHwgdW5kZWZpbmVkO1xuXG4gICAgICAgIC8vIENyZWF0ZSBnbG9iYWwgYW5pbWF0aW9ucyBoZXJlIGlmIG5lZWRlZFxuICAgICAgICBpZiAoZ2V0R2FtZUNvbmZpZyhnYW1lQ29kZSkuY29kZSAhPT0gJ3RyYWluX2dhbWUnKSB7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUdsb2JhbEFuaW1hdGlvbnMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNraXAgTWFpbk1lbnUgYW5kIGdvIHN0cmFpZ2h0IGludG8gR2FtZVxuICAgICAgICB0aGlzLnRpbWUuZGVsYXllZENhbGwoMzAwLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNhbWVyYXMubWFpbi5mYWRlT3V0KDIwMCwgMCwgMCwgMCk7XG4gICAgICAgICAgICB0aGlzLmNhbWVyYXMubWFpbi5vbmNlKCdjYW1lcmFmYWRlb3V0Y29tcGxldGUnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGdldEdhbWVDb25maWcoZ2FtZUNvZGUpLmNvZGUgPT09ICd0cmFpbl9nYW1lJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLnN0YXJ0KCdUcmFpbkdhbWUnLCB7IGdhbWVDb2RlIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUuc3RhcnQoJ0dhbWUnLCB7IGdhbWVDb2RlIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYW5pbWF0aW9ucyB0aGF0IHdpbGwgYmUgdXNlZCBhY3Jvc3MgbXVsdGlwbGUgc2NlbmVzXG4gICAgICovXG4gICAgcHJpdmF0ZSBjcmVhdGVHbG9iYWxBbmltYXRpb25zKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMuYW5pbXMuY3JlYXRlKHtcbiAgICAgICAgICAgIGtleTogJ2NoYXJhY3Rlci1mbHknLFxuICAgICAgICAgICAgZnJhbWVzOiB0aGlzLmFuaW1zLmdlbmVyYXRlRnJhbWVOdW1iZXJzKCdjaGFyYWN0ZXInLCB7IHN0YXJ0OiAwLCBlbmQ6IDkgfSksXG4gICAgICAgICAgICBmcmFtZVJhdGU6IDEwLFxuICAgICAgICAgICAgcmVwZWF0OiAtMVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmFuaW1zLmNyZWF0ZSh7XG4gICAgICAgICAgICBrZXk6ICd0cmFuLWp1bXAnLFxuICAgICAgICAgICAgZnJhbWVzOiB0aGlzLmFuaW1zLmdlbmVyYXRlRnJhbWVOdW1iZXJzKCdjaGFyYWN0ZXInLCB7IHN0YXJ0OiAwLCBlbmQ6IDQgfSksXG4gICAgICAgICAgICBmcmFtZVJhdGU6IDYsXG4gICAgICAgICAgICByZXBlYXQ6IC0xXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJTY2VuZSIsImdldEdhbWVDb25maWciLCJQcmVsb2FkZXIiLCJsb2FkRXJyb3JzIiwicGFyYWxsYXhMYXllcnMiLCJpbml0Iiwid2lkdGgiLCJoZWlnaHQiLCJjYW1lcmFzIiwibWFpbiIsImNlbnRlclgiLCJjZW50ZXJZIiwiY3JlYXRlUGFyYWxsYXhMb2FkZXJCYWNrZ3JvdW5kIiwibG9nbyIsImFkZCIsImltYWdlIiwic2V0U2NhbGUiLCJ0ZXh0IiwiZm9udEZhbWlseSIsImZvbnRTaXplIiwiY29sb3IiLCJzdHJva2UiLCJzdHJva2VUaGlja25lc3MiLCJzZXRPcmlnaW4iLCJiYXJXaWR0aCIsImJhckhlaWdodCIsImJhclgiLCJiYXJZIiwicmVjdGFuZ2xlIiwic2V0U3Ryb2tlU3R5bGUiLCJwcm9ncmVzc0JhciIsInByb2dyZXNzVGV4dCIsInN0YXR1c1RleHQiLCJsb2FkIiwib24iLCJwcm9ncmVzcyIsInNldFRleHQiLCJNYXRoIiwicm91bmQiLCJmaWxlIiwia2V5IiwicHVzaCIsImNvbnNvbGUiLCJ3YXJuIiwic2V0Q29sb3IiLCJ1cGRhdGUiLCJsZW5ndGgiLCJ0aW1lIiwibm93IiwiZm9yRWFjaCIsImxheWVyIiwic3BlZWQiLCJnZXREYXRhIiwidGlsZVBvc2l0aW9uWSIsInByZWxvYWQiLCJnYW1lQ29kZSIsInJlZ2lzdHJ5IiwiZ2V0IiwiZ2FtZUNvbmZpZyIsImFzc2V0Um9vdCIsInNldFBhdGgiLCJjb2RlIiwiaSIsIm1hcEtleSIsIm1hcFBhdGgiLCJzcHJpdGVzaGVldCIsImZyYW1lV2lkdGgiLCJmcmFtZUhlaWdodCIsIm1hcmdpbiIsImxheWVyS2V5cyIsInNwZWVkcyIsIm1hcCIsImluZGV4IiwidGlsZVNwcml0ZSIsInNldFNjcm9sbEZhY3RvciIsInNldERlcHRoIiwic2V0RGF0YSIsImNyZWF0ZSIsImNyZWF0ZUdsb2JhbEFuaW1hdGlvbnMiLCJkZWxheWVkQ2FsbCIsImZhZGVPdXQiLCJvbmNlIiwic2NlbmUiLCJzdGFydCIsImFuaW1zIiwiZnJhbWVzIiwiZ2VuZXJhdGVGcmFtZU51bWJlcnMiLCJlbmQiLCJmcmFtZVJhdGUiLCJyZXBlYXQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/game/scenes/Preloader.ts\n");

/***/ }),

/***/ "(pages-dir-node)/./src/game/scenes/TrainGame.ts":
/*!**************************************!*\
  !*** ./src/game/scenes/TrainGame.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TrainGame: () => (/* binding */ TrainGame)\n/* harmony export */ });\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _EventBus__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../EventBus */ \"(pages-dir-node)/./src/game/EventBus.ts\");\n/* harmony import */ var _gameConfig__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../gameConfig */ \"(pages-dir-node)/./src/game/gameConfig.ts\");\n/* harmony import */ var _ui_QuizPanel__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../ui/QuizPanel */ \"(pages-dir-node)/./src/game/ui/QuizPanel.ts\");\n\n\n\n\nconst FALLBACK_QUESTIONS = [\n    {\n        question: {\n            content: 'Thủ đô của Việt Nam là gì?',\n            options: [\n                {\n                    text: 'Hà Nội',\n                    is_correct: true\n                },\n                {\n                    text: 'Đà Nẵng',\n                    is_correct: false\n                },\n                {\n                    text: 'Hải Phòng',\n                    is_correct: false\n                },\n                {\n                    text: 'Cần Thơ',\n                    is_correct: false\n                }\n            ]\n        }\n    },\n    {\n        question: {\n            content: 'Phaser sử dụng ngôn ngữ nào?',\n            options: [\n                {\n                    text: 'TypeScript/JavaScript',\n                    is_correct: true\n                },\n                {\n                    text: 'C#',\n                    is_correct: false\n                },\n                {\n                    text: 'Python',\n                    is_correct: false\n                },\n                {\n                    text: 'Go',\n                    is_correct: false\n                }\n            ]\n        }\n    },\n    {\n        question: {\n            content: 'Chọn từ trái nghĩa của “fast”.',\n            options: [\n                {\n                    text: 'slow',\n                    is_correct: true\n                },\n                {\n                    text: 'far',\n                    is_correct: false\n                },\n                {\n                    text: 'high',\n                    is_correct: false\n                },\n                {\n                    text: 'small',\n                    is_correct: false\n                }\n            ]\n        }\n    },\n    {\n        question: {\n            content: 'Chọn đáp án đúng: She ___ to school every day.',\n            options: [\n                {\n                    text: 'goes',\n                    is_correct: true\n                },\n                {\n                    text: 'go',\n                    is_correct: false\n                },\n                {\n                    text: 'going',\n                    is_correct: false\n                },\n                {\n                    text: 'gone',\n                    is_correct: false\n                }\n            ]\n        }\n    },\n    {\n        question: {\n            content: 'Từ nào có nghĩa là “nhảy”?',\n            options: [\n                {\n                    text: 'jump',\n                    is_correct: true\n                },\n                {\n                    text: 'swim',\n                    is_correct: false\n                },\n                {\n                    text: 'crawl',\n                    is_correct: false\n                },\n                {\n                    text: 'sleep',\n                    is_correct: false\n                }\n            ]\n        }\n    },\n    {\n        question: {\n            content: 'Từ nào là danh từ?',\n            options: [\n                {\n                    text: 'river',\n                    is_correct: true\n                },\n                {\n                    text: 'run',\n                    is_correct: false\n                },\n                {\n                    text: 'quickly',\n                    is_correct: false\n                },\n                {\n                    text: 'blue',\n                    is_correct: false\n                }\n            ]\n        }\n    },\n    {\n        question: {\n            content: 'Chọn câu đúng ngữ pháp.',\n            options: [\n                {\n                    text: 'He is playing football.',\n                    is_correct: true\n                },\n                {\n                    text: 'He are playing football.',\n                    is_correct: false\n                },\n                {\n                    text: 'He playing football.',\n                    is_correct: false\n                },\n                {\n                    text: 'He play football.',\n                    is_correct: false\n                }\n            ]\n        }\n    },\n    {\n        question: {\n            content: 'Từ nào là tính từ?',\n            options: [\n                {\n                    text: 'beautiful',\n                    is_correct: true\n                },\n                {\n                    text: 'beauty',\n                    is_correct: false\n                },\n                {\n                    text: 'beautify',\n                    is_correct: false\n                },\n                {\n                    text: 'beautifully',\n                    is_correct: false\n                }\n            ]\n        }\n    },\n    {\n        question: {\n            content: 'Chọn đáp án đúng: I ___ a book now.',\n            options: [\n                {\n                    text: 'am reading',\n                    is_correct: true\n                },\n                {\n                    text: 'read',\n                    is_correct: false\n                },\n                {\n                    text: 'reads',\n                    is_correct: false\n                },\n                {\n                    text: 'reading',\n                    is_correct: false\n                }\n            ]\n        }\n    },\n    {\n        question: {\n            content: 'Từ nào là trạng từ?',\n            options: [\n                {\n                    text: 'quickly',\n                    is_correct: true\n                },\n                {\n                    text: 'quick',\n                    is_correct: false\n                },\n                {\n                    text: 'quicker',\n                    is_correct: false\n                },\n                {\n                    text: 'quickness',\n                    is_correct: false\n                }\n            ]\n        }\n    },\n    {\n        question: {\n            content: 'Chọn câu hỏi phù hợp khi gặp người mới.',\n            options: [\n                {\n                    text: 'What is your name?',\n                    is_correct: true\n                },\n                {\n                    text: 'Where do you live?',\n                    is_correct: false\n                },\n                {\n                    text: 'How old are you?',\n                    is_correct: false\n                },\n                {\n                    text: 'What time is it?',\n                    is_correct: false\n                }\n            ]\n        }\n    }\n];\nclass TrainGame extends phaser__WEBPACK_IMPORTED_MODULE_0__.Scene {\n    constructor(){\n        super('TrainGame'), this.debugTrack = false, this.showRailOverlay = false, this.showCars = true, this.trainMoving = false, this.trafficLightState = null, this.trainDistancePx = 0, this.trainSpeedPxPerSec = -180, this.trainGapPx = 0, this.trackLength = 0, this.trainCarGapFactor = 0.68, this.trainCarScaleFactor = 0.468, this.railPathPoints = [], this.railSegmentLengths = [], this.railTotalLength = 0, this.trainRotationOffset = Phaser.Math.DegToRad(-90), this.leadCarState = 'idle', this.leadCarBaseSize = null, this.debugMarkerLabels = [], this.showHoverCoords = false, this.barrierBaseAngle = 0, this.barrierIsOpen = false, this.carSlots = [], this.startModalOpen = false, this.hasStarted = false, this.gameCode = 'train_game', this.sessionId = null, this.sessionGameId = null, this.sessionQuestions = null, this.sessionTimeLimit = null, this.maxCars = 11, this.currentIndex = 0, this.score = 0, this.totalTimeMs = 300000, this.remainingMs = 300000, this.lastSecondShown = -1, this.quizOpen = false, this.quizLocked = false, this.gameOver = false, this.questions = [], this.currentCorrectIndex = 0, this.currentSessionQuestionId = null, this.currentOptionIds = [], this.trainStepPx = 0;\n    }\n    init(data) {\n        this.gameCode = (0,_gameConfig__WEBPACK_IMPORTED_MODULE_2__.resolveGameCode)(data?.gameCode ?? this.registry.get('gameCode'));\n        this.registry.set('gameCode', this.gameCode);\n        this.sessionId = data?.sessionId ?? null;\n        this.sessionGameId = data?.gameId ?? null;\n        this.sessionQuestions = data?.questions ?? null;\n        this.sessionTimeLimit = data?.timeLimit ?? null;\n    }\n    create() {\n        const { width, height } = this.scale;\n        const gameConfig = (0,_gameConfig__WEBPACK_IMPORTED_MODULE_2__.getGameConfig)(this.gameCode);\n        // Reset runtime state on every create() because scene.restart reuses the same instance.\n        this.gameOver = false;\n        this.quizOpen = false;\n        this.quizLocked = false;\n        this.startModalOpen = false;\n        this.hasStarted = false;\n        this.currentSessionQuestionId = null;\n        this.currentOptionIds = [];\n        this.leadCarState = 'idle';\n        this.barrierIsOpen = false;\n        this.carSlots = [];\n        this.leadCarBadge = undefined;\n        this.camera = this.cameras.main;\n        this.camera.setBackgroundColor(gameConfig.backgroundColor);\n        this.background = this.add.image(width / 2, height / 2, 'train-bg').setDisplaySize(width, height).setOrigin(0.5, 0.5);\n        this.setupQuestions();\n        this.setupTimer();\n        this.createHud();\n        this.currentIndex = 0;\n        this.score = 0;\n        this.createRailway();\n        if (this.showCars) {\n            this.layoutTrain();\n            this.updateTrainCars(true);\n        }\n        this.createBarrierGate();\n        this.createQuizModal();\n        this.createStartModal();\n        this.createTimeUpModal();\n        this.openStartModal();\n        this.scale.on('resize', ()=>{\n            const { width: newWidth, height: newHeight } = this.scale;\n            this.background.setPosition(newWidth / 2, newHeight / 2).setDisplaySize(newWidth, newHeight);\n            this.layoutHud();\n            this.layoutQuiz();\n            this.updateBarrierPosition();\n            this.layoutStartModal();\n            this.layoutTimeUpModal();\n        });\n        _EventBus__WEBPACK_IMPORTED_MODULE_1__.EventBus.emit('current-scene-ready', this);\n    }\n    update(_time, delta) {\n        if (this.gameOver) return;\n        if (!this.hasStarted) {\n            this.updateTrainCars();\n            return;\n        }\n        this.remainingMs = Math.max(0, this.remainingMs - delta);\n        const seconds = Math.ceil(this.remainingMs / 1000);\n        if (seconds !== this.lastSecondShown) {\n            this.lastSecondShown = seconds;\n            this.timerText.setText(this.formatTime(seconds));\n        }\n        if (this.remainingMs <= 0 && !this.gameOver) {\n            this.endGame('Out of time.', 'lose');\n        }\n        this.updateTrainCars();\n    }\n    setupQuestions() {\n        const source = this.sessionQuestions && this.sessionQuestions.length > 0 ? this.sessionQuestions : FALLBACK_QUESTIONS;\n        this.questions = source.slice(0);\n    }\n    setupTimer() {\n        if (this.sessionTimeLimit && this.sessionTimeLimit > 0) {\n            this.totalTimeMs = this.sessionTimeLimit * 1000;\n        }\n        this.remainingMs = this.totalTimeMs;\n    }\n    createHud() {\n        this.uiRoot = this.add.container(0, 0).setDepth(2000);\n        this.hudBackButton = this.add.container(0, 0);\n        const backBg = this.add.graphics();\n        backBg.fillStyle(0xffffff, 0.95);\n        backBg.fillRoundedRect(-22, -22, 44, 44, 14);\n        backBg.lineStyle(2, 0x0ea5e9, 0.2);\n        backBg.strokeRoundedRect(-22, -22, 44, 44, 14);\n        const backIcon = this.add.text(0, 1, '<', {\n            fontFamily: 'Arial Black',\n            fontSize: '26px',\n            color: '#0f172a'\n        }).setOrigin(0.5);\n        const backHit = this.add.zone(0, 0, 44, 44).setOrigin(0.5).setInteractive({\n            useHandCursor: true\n        });\n        backHit.on('pointerup', ()=>this.handleBackToGameList());\n        this.hudBackButton.add([\n            backBg,\n            backIcon\n        ]);\n        this.hudBackButton.setSize(44, 44);\n        this.hudBackButton.add(backHit);\n        this.hudPointsPill = this.add.container(0, 0);\n        const pointsBg = this.add.graphics();\n        const pointsW = 168;\n        const pointsH = 44;\n        pointsBg.fillStyle(0xffffff, 0.98);\n        pointsBg.fillRoundedRect(-pointsW / 2, -pointsH / 2, pointsW, pointsH, 22);\n        pointsBg.lineStyle(2, 0xf59e0b, 0.4);\n        pointsBg.strokeRoundedRect(-pointsW / 2, -pointsH / 2, pointsW, pointsH, 22);\n        const star = this.add.image(-pointsW / 2 + 24, 0, 'star').setScale(0.32).setTint(0xfbbf24);\n        this.scoreText = this.add.text(-pointsW / 2 + 46, 0, 'POINTS: 00', {\n            fontFamily: 'Arial Black',\n            fontSize: '18px',\n            color: '#0f172a'\n        }).setOrigin(0, 0.5);\n        this.hudPointsPill.add([\n            pointsBg,\n            star,\n            this.scoreText\n        ]);\n        this.hudTimerPill = this.add.container(0, 0);\n        const timerBg = this.add.graphics();\n        const timerW = 96;\n        const timerH = 40;\n        timerBg.fillStyle(0xffffff, 0.98);\n        timerBg.fillRoundedRect(-timerW / 2, -timerH / 2, timerW, timerH, 20);\n        timerBg.lineStyle(2, 0x94a3b8, 0.4);\n        timerBg.strokeRoundedRect(-timerW / 2, -timerH / 2, timerW, timerH, 20);\n        this.timerText = this.add.text(0, 0, this.formatTime(Math.ceil(this.remainingMs / 1000)), {\n            fontFamily: 'Arial Black',\n            fontSize: '16px',\n            color: '#0f172a'\n        }).setOrigin(0.5);\n        this.hudTimerPill.add([\n            timerBg,\n            this.timerText\n        ]);\n        this.uiRoot.add([\n            this.hudBackButton,\n            this.hudPointsPill,\n            this.hudTimerPill\n        ]);\n        this.layoutHud();\n        this.createTrafficLight();\n    }\n    layoutHud() {\n        const { width, height } = this.scale;\n        const topInset = Math.max(16, Math.round(height * 0.03));\n        const sideInset = Math.max(14, Math.round(width * 0.04));\n        const rightEdge = width - sideInset;\n        this.hudBackButton.setPosition(sideInset + 22, topInset + 22);\n        this.hudPointsPill.setPosition(width / 2, topInset + 22);\n        this.hudTimerPill.setPosition(rightEdge - 48, topInset + 22);\n    }\n    handleBackToGameList() {\n        window.location.href = '/';\n    }\n    createTrafficLight() {\n        const lightHeight = 230;\n        const sourceHeight = 1463;\n        const sourceWidth = 335;\n        const lightWidth = Math.round(lightHeight * (sourceWidth / sourceHeight));\n        const baseX = 88;\n        const baseY = 808;\n        const anchorY = Math.round(baseY + lightHeight / 2);\n        const makeVariant = (key)=>this.add.image(baseX, baseY, key).setOrigin(0.5, 1).setDisplaySize(lightWidth, lightHeight).setDepth(1000).setAlpha(1);\n        const container = this.add.container(baseX, anchorY).setDepth(1000);\n        const offsets = {\n            red: {\n                x: 0,\n                y: 0\n            },\n            yellow: {\n                x: 0,\n                y: 0\n            },\n            green: {\n                x: -1,\n                y: 0\n            }\n        };\n        const red = this.textures.exists('train-light-red') ? this.add.image(0, 0, 'train-light-red') : this.add.rectangle(0, 0, lightWidth, lightHeight, 0xef4444, 1);\n        const yellow = this.textures.exists('train-light-yellow') ? this.add.image(0, 0, 'train-light-yellow') : this.add.rectangle(0, 0, lightWidth, lightHeight, 0xfbbf24, 1);\n        const green = this.textures.exists('train-light-green') ? this.add.image(0, 0, 'train-light-green') : this.add.rectangle(0, 0, lightWidth, lightHeight, 0x22c55e, 1);\n        const normalize = (obj)=>{\n            if ('setOrigin' in obj) {\n                obj.setOrigin(0.5, 1);\n            }\n            if ('setDisplaySize' in obj) {\n                obj.setDisplaySize(lightWidth, lightHeight);\n            }\n        };\n        normalize(red);\n        normalize(yellow);\n        normalize(green);\n        red.setPosition(offsets.red.x, offsets.red.y);\n        yellow.setPosition(offsets.yellow.x, offsets.yellow.y);\n        green.setPosition(offsets.green.x, offsets.green.y);\n        container.add([\n            red,\n            yellow,\n            green\n        ]);\n        this.trafficLightVariants = {\n            red: red,\n            yellow: yellow,\n            green: green\n        };\n        this.trafficLight = this.trafficLightVariants.red;\n        const cycle = [\n            'red',\n            'yellow',\n            'green'\n        ];\n        let cycleIndex = 0;\n        this.setTrafficLightColor(cycle[cycleIndex]);\n        this.time.addEvent({\n            delay: 700,\n            loop: true,\n            callback: ()=>{\n                cycleIndex = (cycleIndex + 1) % cycle.length;\n                this.setTrafficLightColor(cycle[cycleIndex]);\n            }\n        });\n    }\n    setTrafficLightColor(color) {\n        if (!this.trafficLightVariants) return;\n        if (this.trafficLightState === color) return;\n        this.trafficLightState = color;\n        const { red, yellow, green } = this.trafficLightVariants;\n        red.setVisible(color === 'red');\n        yellow.setVisible(color === 'yellow');\n        green.setVisible(color === 'green');\n    }\n    layoutTrain() {\n        const { width, height } = this.scale;\n        const scaleX = this.background.displayWidth / this.background.width;\n        const scaleY = this.background.displayHeight / this.background.height;\n        const scale = Math.min(scaleX, scaleY) * this.trainCarScaleFactor;\n        const trackCurve = this.createTrackCurve(width, height);\n        const trackPoints = this.sampleTrack(trackCurve, this.maxCars);\n        this.carSlots = [];\n        for(let i = 0; i < this.maxCars; i += 1){\n            const carKey = `train-car-${i + 1}`;\n            const point = trackPoints[i] ?? {\n                x: width / 2,\n                y: height / 2\n            };\n            const angle = this.getTrackAngle(trackPoints, i) + this.trainRotationOffset;\n            const car = this.add.image(point.x, point.y, carKey).setScale(scale).setRotation(angle);\n            car.setAlpha(1);\n            const lock = this.createLockOverlay(point.x, point.y, car.displayWidth, car.displayHeight, i);\n            lock.setVisible(false);\n            lock.disableInteractive();\n            this.carSlots.push({\n                index: i,\n                car,\n                lock\n            });\n        }\n        if (this.carSlots.length > 0) {\n            const referenceCar = this.carSlots[0].car;\n            const carLength = Math.max(referenceCar.displayWidth, referenceCar.displayHeight);\n            this.trainGapPx = carLength * this.trainCarGapFactor;\n            this.trainStepPx = this.trainGapPx;\n            this.leadCarBaseSize = {\n                width: referenceCar.displayWidth,\n                height: referenceCar.displayHeight\n            };\n        }\n        this.carSlots[0]?.car.setTexture('train-car-1');\n        this.setLeadCarState('idle');\n        this.refreshLocks();\n    }\n    getLeadCarTextureKey(state) {\n        switch(state){\n            case 'correct':\n                return 'train-fox-correct';\n            case 'incorrect':\n                return 'train-fox-incorrect';\n            case 'idle':\n            default:\n                return 'train-fox-idle';\n        }\n    }\n    setLeadCarState(state) {\n        this.leadCarState = state;\n        const leadCar = this.carSlots[0]?.car;\n        if (!leadCar) return;\n        if (!leadCar.scene) return;\n        if (this.leadCarBadge && !this.leadCarBadge.scene) {\n            this.leadCarBadge = undefined;\n        }\n        if (leadCar.texture.key !== 'train-car-1') {\n            leadCar.setTexture('train-car-1');\n        }\n        if (this.leadCarBaseSize) {\n            leadCar.setDisplaySize(this.leadCarBaseSize.width, this.leadCarBaseSize.height);\n            leadCar.setOrigin(0.5, 0.5);\n        }\n        const textureKey = this.getLeadCarTextureKey(state);\n        if (!this.textures.exists(textureKey)) {\n            if (this.leadCarBadge) this.leadCarBadge.setVisible(false);\n            return;\n        }\n        if (!this.leadCarBadge) {\n            this.leadCarBadge = this.add.image(leadCar.x, leadCar.y, textureKey).setDepth(leadCar.depth + 1).setOrigin(0.5, 0.5);\n        } else {\n            this.leadCarBadge.setTexture(textureKey).setVisible(true);\n        }\n        if (this.leadCarBaseSize && this.leadCarBadge && this.leadCarBadge.scene) {\n            this.leadCarBadge.setDisplaySize(this.leadCarBaseSize.width * 0.5, this.leadCarBaseSize.height * 0.5);\n        }\n    }\n    createLockOverlay(x, y, width, height, index) {\n        const lock = this.add.container(x, y);\n        lock.setDepth(10);\n        const panelW = Math.max(140, width * 0.6);\n        const panelH = Math.max(48, height * 0.35);\n        const bg = this.add.rectangle(0, 0, panelW, panelH, 0x1f2937, 0.9);\n        bg.setStrokeStyle(2, 0xfbbf24, 0.9);\n        const text = this.add.text(0, 0, 'UNLOCK', {\n            fontFamily: 'Arial Black',\n            fontSize: '18px',\n            color: '#f8fafc'\n        }).setOrigin(0.5);\n        lock.add([\n            bg,\n            text\n        ]);\n        lock.setSize(panelW, panelH);\n        const hitArea = new Phaser.Geom.Rectangle(-panelW / 2, -panelH / 2, panelW, panelH);\n        lock.setInteractive(hitArea, Phaser.Geom.Rectangle.Contains);\n        lock.setData('hitArea', hitArea);\n        lock.on('pointerover', ()=>{\n            if (this.quizOpen || this.gameOver) return;\n            bg.setFillStyle(0x334155, 0.95);\n            lock.setScale(1.05);\n            this.input.setDefaultCursor('pointer');\n        });\n        lock.on('pointerout', ()=>{\n            bg.setFillStyle(0x1f2937, 0.9);\n            lock.setScale(1);\n            this.input.setDefaultCursor('default');\n        });\n        lock.on('pointerdown', ()=>{\n            if (this.quizOpen || this.gameOver) return;\n            if (index !== this.currentIndex) return;\n            this.openQuestion(index);\n        });\n        return lock;\n    }\n    refreshLocks() {\n        this.carSlots.forEach((slot)=>{\n            if (!slot || !slot.car || !slot.lock) return;\n            if (!slot.car.scene || !slot.lock.scene) return;\n            slot.car.setAlpha(1);\n            slot.lock.setVisible(false);\n            if (slot.lock.input) {\n                slot.lock.disableInteractive();\n            }\n        });\n        const points = Math.max(0, this.score);\n        this.scoreText.setText(`POINTS: ${points.toString().padStart(2, '0')}`);\n    }\n    createQuizModal() {\n        this.quizPanel = new _ui_QuizPanel__WEBPACK_IMPORTED_MODULE_3__.QuizPanel(this, {\n            optionCount: 4,\n            depth: 2000,\n            parent: this.uiRoot,\n            showIndex: true\n        });\n        this.quizModal = this.quizPanel.container;\n        this.quizPanel.onOptionSelected((index)=>{\n            if (this.quizLocked) return;\n            void this.handleAnswer(index);\n        });\n        this.layoutQuiz();\n    }\n    createStartModal() {\n        const { width, height } = this.scale;\n        const container = this.add.container(0, 0).setDepth(2100).setVisible(false);\n        const overlay = this.add.rectangle(0, 0, width, height, 0xffffff, 0.12).setOrigin(0, 0);\n        const panel = this.add.container(width / 2, Math.round(height * 0.56));\n        const panelWidth = Math.min(620, width - 80);\n        const panelHeight = Math.min(220, Math.round(height * 0.32));\n        const panelShadow = this.add.graphics();\n        panelShadow.fillStyle(0x000000, 0.18);\n        panelShadow.fillRoundedRect(-panelWidth / 2 + 8, -panelHeight / 2 + 10, panelWidth, panelHeight, 30);\n        const panelBg = this.add.graphics();\n        panelBg.fillStyle(0xffffff, 0.85);\n        panelBg.fillRoundedRect(-panelWidth / 2, -panelHeight / 2, panelWidth, panelHeight, 28);\n        panelBg.lineStyle(2, 0xffffff, 0.65);\n        panelBg.strokeRoundedRect(-panelWidth / 2, -panelHeight / 2, panelWidth, panelHeight, 28);\n        const title = this.add.text(0, -38, 'Answer the questions to help the\\ntrain go ahead.', {\n            fontFamily: 'Arial Black',\n            fontSize: '20px',\n            color: '#0f172a',\n            align: 'center',\n            lineSpacing: 6\n        }).setOrigin(0.5);\n        const button = this.createStartButton(0, Math.round(panelHeight * 0.23));\n        panel.add([\n            panelShadow,\n            panelBg,\n            title,\n            button\n        ]);\n        container.add([\n            overlay,\n            panel\n        ]);\n        this.startModal = container;\n        this.startModalPanel = panel;\n        this.uiRoot.add(container);\n        this.layoutStartModal();\n    }\n    createTimeUpModal() {\n        const { width, height } = this.scale;\n        const container = this.add.container(0, 0).setDepth(2200).setVisible(false);\n        const overlay = this.add.rectangle(0, 0, width, height, 0x000000, 0.1).setOrigin(0, 0);\n        const panel = this.add.container(width / 2, Math.round(height * 0.56));\n        const panelWidth = Math.min(620, width - 80);\n        const panelHeight = Math.min(220, Math.round(height * 0.32));\n        const panelShadow = this.add.graphics();\n        panelShadow.fillStyle(0x000000, 0.18);\n        panelShadow.fillRoundedRect(-panelWidth / 2 + 8, -panelHeight / 2 + 10, panelWidth, panelHeight, 30);\n        const panelBg = this.add.graphics();\n        panelBg.fillStyle(0xffffff, 0.85);\n        panelBg.fillRoundedRect(-panelWidth / 2, -panelHeight / 2, panelWidth, panelHeight, 28);\n        panelBg.lineStyle(2, 0xffffff, 0.65);\n        panelBg.strokeRoundedRect(-panelWidth / 2, -panelHeight / 2, panelWidth, panelHeight, 28);\n        this.timeUpTitleText = this.add.text(0, -14, 'Out of time! Failed!', {\n            fontFamily: 'Arial Black',\n            fontSize: '20px',\n            color: '#0f172a',\n            align: 'center'\n        }).setOrigin(0.5);\n        const button = this.createTimeoutButton(0, Math.round(panelHeight * 0.23));\n        panel.add([\n            panelShadow,\n            panelBg,\n            this.timeUpTitleText,\n            button\n        ]);\n        container.add([\n            overlay,\n            panel\n        ]);\n        this.timeUpModal = container;\n        this.timeUpModalPanel = panel;\n        this.uiRoot.add(container);\n        this.layoutTimeUpModal();\n    }\n    layoutStartModal() {\n        if (!this.startModal || !this.startModalPanel) return;\n        const { width, height } = this.scale;\n        const overlay = this.startModal.list[0];\n        if (overlay && 'setSize' in overlay) {\n            overlay.setSize(width, height);\n        }\n        this.startModalPanel.setPosition(width / 2, Math.round(height * 0.56));\n    }\n    layoutTimeUpModal() {\n        if (!this.timeUpModal || !this.timeUpModalPanel) return;\n        const { width, height } = this.scale;\n        const overlay = this.timeUpModal.list[0];\n        if (overlay && 'setSize' in overlay) {\n            overlay.setSize(width, height);\n        }\n        this.timeUpModalPanel.setPosition(width / 2, Math.round(height * 0.56));\n    }\n    createStartButton(x, y) {\n        const container = this.add.container(x, y);\n        const width = 530;\n        const height = 72;\n        const radius = 30;\n        const shadow = this.add.graphics();\n        shadow.fillStyle(0x1e3a8a, 0.18);\n        shadow.fillRoundedRect(-width / 2 + 4, -height / 2 + 6, width, height, radius);\n        const bg = this.add.graphics();\n        const draw = (fill, stroke)=>{\n            bg.clear();\n            bg.fillStyle(fill, 1);\n            bg.fillRoundedRect(-width / 2, -height / 2, width, height, radius);\n            bg.lineStyle(2, stroke, 0.65);\n            bg.strokeRoundedRect(-width / 2, -height / 2, width, height, radius);\n        };\n        draw(0x3b82f6, 0x93c5fd);\n        const text = this.add.text(0, 1, 'Start Game', {\n            fontFamily: 'Arial Black',\n            fontSize: '34px',\n            color: '#ffffff'\n        }).setOrigin(0.5).setScale(0.66);\n        const hit = this.add.rectangle(0, 0, width + 16, height + 16, 0xffffff, 0.001);\n        hit.setInteractive();\n        container.add([\n            shadow,\n            bg,\n            text,\n            hit\n        ]);\n        container.setSize(width, height);\n        hit.on('pointerover', ()=>{\n            draw(0x2563eb, 0xbfdbfe);\n            this.input.setDefaultCursor('pointer');\n            this.tweens.add({\n                targets: container,\n                scale: 1.02,\n                duration: 100,\n                ease: 'Sine.easeOut'\n            });\n        });\n        hit.on('pointerout', ()=>{\n            draw(0x3b82f6, 0x93c5fd);\n            this.input.setDefaultCursor('default');\n            this.tweens.add({\n                targets: container,\n                scale: 1,\n                duration: 100,\n                ease: 'Sine.easeOut'\n            });\n        });\n        hit.on('pointerdown', ()=>{\n            if (!this.startModalOpen) return;\n            draw(0x1d4ed8, 0xbfdbfe);\n            this.tweens.add({\n                targets: container,\n                scale: 0.98,\n                duration: 70,\n                ease: 'Sine.easeOut'\n            });\n            this.startGameFlow();\n        });\n        hit.on('pointerup', ()=>{\n            draw(0x2563eb, 0xbfdbfe);\n            this.tweens.add({\n                targets: container,\n                scale: 1.02,\n                duration: 70,\n                ease: 'Sine.easeOut'\n            });\n        });\n        this.tweens.add({\n            targets: container,\n            scale: 1.03,\n            duration: 850,\n            yoyo: true,\n            repeat: -1\n        });\n        return container;\n    }\n    createTimeoutButton(x, y) {\n        const container = this.add.container(x, y);\n        const width = 530;\n        const height = 72;\n        const radius = 30;\n        const shadow = this.add.graphics();\n        shadow.fillStyle(0x1e3a8a, 0.18);\n        shadow.fillRoundedRect(-width / 2 + 4, -height / 2 + 6, width, height, radius);\n        const bg = this.add.graphics();\n        const draw = (fill, stroke)=>{\n            bg.clear();\n            bg.fillStyle(fill, 1);\n            bg.fillRoundedRect(-width / 2, -height / 2, width, height, radius);\n            bg.lineStyle(2, stroke, 0.65);\n            bg.strokeRoundedRect(-width / 2, -height / 2, width, height, radius);\n        };\n        draw(0x3b82f6, 0x93c5fd);\n        const text = this.add.text(0, 1, 'Play Again', {\n            fontFamily: 'Arial Black',\n            fontSize: '34px',\n            color: '#ffffff'\n        }).setOrigin(0.5).setScale(0.66);\n        const hit = this.add.rectangle(0, 0, width + 16, height + 16, 0xffffff, 0.001);\n        hit.setInteractive();\n        container.add([\n            shadow,\n            bg,\n            text,\n            hit\n        ]);\n        container.setSize(width, height);\n        hit.on('pointerover', ()=>{\n            if (hit.getData('restarting')) return;\n            draw(0x2563eb, 0xbfdbfe);\n            this.input.setDefaultCursor('pointer');\n            this.tweens.add({\n                targets: container,\n                scale: 1.02,\n                duration: 100,\n                ease: 'Sine.easeOut'\n            });\n        });\n        hit.on('pointerout', ()=>{\n            if (hit.getData('restarting')) return;\n            draw(0x3b82f6, 0x93c5fd);\n            this.input.setDefaultCursor('default');\n            this.tweens.add({\n                targets: container,\n                scale: 1,\n                duration: 100,\n                ease: 'Sine.easeOut'\n            });\n        });\n        hit.on('pointerdown', ()=>{\n            if (hit.getData('restarting')) return;\n            hit.setData('restarting', true);\n            hit.disableInteractive();\n            draw(0x1d4ed8, 0xbfdbfe);\n            this.tweens.add({\n                targets: container,\n                scale: 0.98,\n                duration: 70,\n                ease: 'Sine.easeOut'\n            });\n            this.time.delayedCall(90, ()=>{\n                if (!this.sys.isActive()) return;\n                this.restartTrainRun();\n            });\n        });\n        hit.on('pointerup', ()=>{\n            if (hit.getData('restarting')) return;\n            draw(0x2563eb, 0xbfdbfe);\n            this.tweens.add({\n                targets: container,\n                scale: 1.02,\n                duration: 70,\n                ease: 'Sine.easeOut'\n            });\n        });\n        return container;\n    }\n    openStartModal() {\n        if (!this.startModal) return;\n        this.startModalOpen = true;\n        this.hasStarted = false;\n        this.startModal.setVisible(true);\n        this.startModal.setAlpha(0);\n        this.tweens.add({\n            targets: this.startModal,\n            alpha: 1,\n            duration: 180\n        });\n    }\n    closeStartModal() {\n        if (!this.startModal) return;\n        this.startModalOpen = false;\n        this.startModal.setVisible(false);\n    }\n    startGameFlow() {\n        if (this.hasStarted) return;\n        this.hasStarted = true;\n        this.closeStartModal();\n        this.openQuestion(this.currentIndex);\n    }\n    openTimeUpModal(message = 'Out of time! Try again.') {\n        if (!this.timeUpModal || !this.timeUpModalPanel) return;\n        this.timeUpTitleText.setText(message);\n        this.timeUpModalPanel.setScale(0.96);\n        this.timeUpModal.setVisible(true);\n        this.timeUpModal.setAlpha(0);\n        this.tweens.add({\n            targets: this.timeUpModal,\n            alpha: 1,\n            duration: 200\n        });\n        this.tweens.add({\n            targets: this.timeUpModalPanel,\n            scale: 1,\n            duration: 240,\n            ease: 'Back.easeOut'\n        });\n    }\n    submitSessionResult() {\n        if (!this.sessionGameId) return;\n        Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../../services/api */ \"(pages-dir-node)/./src/services/api.ts\")).then(({ endGameSession })=>endGameSession(this.sessionGameId, this.score)).catch((error)=>{\n            console.error('endGameSession failed', error);\n        });\n    }\n    restartTrainRun() {\n        if (!this.sys || !this.sys.isActive()) return;\n        this.input.setDefaultCursor('default');\n        this.closeQuiz();\n        if (this.timeUpModal) {\n            this.timeUpModal.setVisible(false);\n        }\n        this.scene.restart({\n            gameCode: this.gameCode,\n            sessionId: this.sessionId,\n            gameId: this.sessionGameId,\n            questions: this.sessionQuestions,\n            timeLimit: this.sessionTimeLimit\n        });\n    }\n    layoutQuiz() {\n        const { width, height } = this.scale;\n        this.quizPanel.layout(width, height);\n    }\n    openQuestion(index) {\n        if (this.quizOpen || this.gameOver) return;\n        if (!this.hasStarted) return;\n        this.setLeadCarState('idle');\n        const question = this.getQuestionForIndex(index);\n        const options = question.question.options.map((opt)=>opt.text);\n        this.currentOptionIds = question.question.options.map((opt)=>opt.id ?? '');\n        this.currentSessionQuestionId = question.session_question_id ?? null;\n        let correctIndex = question.question.options.findIndex((opt)=>opt.is_correct);\n        if (correctIndex < 0) correctIndex = 0;\n        this.currentCorrectIndex = correctIndex;\n        this.quizPanel.setFeedback('idle');\n        this.quizPanel.setQuestion({\n            index: index + 1,\n            total: this.maxCars,\n            question: question.question.content,\n            options\n        });\n        this.updateBarrierPosition();\n        this.setBarrierOpen(false);\n        this.layoutQuiz();\n        this.quizOpen = true;\n        this.quizLocked = false;\n        this.quizModal.setVisible(true);\n        this.quizPanel.setInteractive(true);\n    }\n    async handleAnswer(selectedIndex) {\n        if (this.quizLocked) return;\n        this.quizLocked = true;\n        let isCorrect = selectedIndex === this.currentCorrectIndex;\n        const selectedOptionId = this.currentOptionIds[selectedIndex];\n        if (this.sessionId && this.currentSessionQuestionId && selectedOptionId) {\n            try {\n                const { submitAnswer } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../../services/api */ \"(pages-dir-node)/./src/services/api.ts\"));\n                const res = await submitAnswer(this.sessionId, this.currentSessionQuestionId, selectedOptionId);\n                isCorrect = res.data.is_correct;\n            } catch (error) {\n                console.error('submitAnswer failed, fallback to local check', error);\n            }\n        }\n        if (isCorrect) {\n            this.setLeadCarState('correct');\n            this.quizPanel.setFeedback('correct');\n            this.quizPanel.setOptionState(selectedIndex, 'correct');\n            this.quizPanel.setInteractive(false);\n            this.time.delayedCall(500, ()=>{\n                this.closeQuiz();\n                this.applyCorrect();\n            });\n        } else {\n            this.setLeadCarState('incorrect');\n            this.quizPanel.setFeedback('wrong');\n            this.quizPanel.setOptionState(selectedIndex, 'wrong');\n            this.quizPanel.setInteractive(false);\n            this.time.delayedCall(650, ()=>{\n                this.applyWrong();\n                this.setLeadCarState('idle');\n                this.quizPanel.setOptionState(selectedIndex, 'normal');\n                this.quizPanel.setFeedback('idle');\n                this.quizPanel.setInteractive(true);\n                this.quizLocked = false;\n            });\n        }\n    }\n    applyCorrect() {\n        this.currentIndex = Math.min(this.maxCars, this.currentIndex + 1);\n        this.score = this.currentIndex;\n        this.refreshLocks();\n        if (this.currentIndex >= this.maxCars) {\n            this.setBarrierOpen(true);\n            this.moveTrainToEnd(()=>{\n                this.endGame(`You completed all ${this.maxCars} cars!`, 'win');\n            });\n            return;\n        }\n        this.moveTrainToIndex(this.currentIndex, ()=>{\n            this.openQuestion(this.currentIndex);\n        });\n    }\n    applyWrong() {\n        this.refreshLocks();\n    }\n    moveTrainToIndex(targetIndex, onComplete) {\n        if (this.railTotalLength <= 0 || this.trainStepPx <= 0) {\n            if (onComplete) onComplete();\n            return;\n        }\n        const visualIndex = Phaser.Math.Clamp(targetIndex, 0, this.maxCars);\n        const maxDistance = Math.max(0, this.railTotalLength - 1);\n        const targetDistance = Math.min(this.trainStepPx * visualIndex, maxDistance);\n        const delta = Math.abs(targetDistance - this.trainDistancePx);\n        const duration = Phaser.Math.Clamp(Math.round(420 + delta * 1.8), 650, 1200);\n        this.trainMoving = true;\n        const tweenState = {\n            value: this.trainDistancePx\n        };\n        this.tweens.add({\n            targets: tweenState,\n            value: targetDistance,\n            duration,\n            ease: 'Sine.easeInOut',\n            onUpdate: ()=>{\n                this.trainDistancePx = tweenState.value;\n                this.updateTrainCars(true);\n            },\n            onComplete: ()=>{\n                this.trainDistancePx = targetDistance;\n                this.trainMoving = false;\n                this.updateTrainCars(true);\n                if (onComplete) onComplete();\n            }\n        });\n    }\n    moveTrainToEnd(onComplete) {\n        if (this.railTotalLength <= 0) {\n            if (onComplete) onComplete();\n            return;\n        }\n        const maxDistance = Math.max(0, this.railTotalLength - 1);\n        const trainLength = Math.max(0, (this.maxCars - 1) * this.trainGapPx);\n        const targetDistance = maxDistance + trainLength;\n        const delta = Math.abs(targetDistance - this.trainDistancePx);\n        const duration = Phaser.Math.Clamp(Math.round(520 + delta * 1.6), 800, 1800);\n        this.trainMoving = true;\n        const tweenState = {\n            value: this.trainDistancePx\n        };\n        this.tweens.add({\n            targets: tweenState,\n            value: targetDistance,\n            duration,\n            ease: 'Sine.easeInOut',\n            onUpdate: ()=>{\n                this.trainDistancePx = tweenState.value;\n                this.updateTrainCars(true);\n            },\n            onComplete: ()=>{\n                this.trainDistancePx = targetDistance;\n                this.trainMoving = false;\n                this.updateTrainCars(true);\n                if (onComplete) onComplete();\n            }\n        });\n    }\n    closeQuiz() {\n        this.quizModal.setVisible(false);\n        this.quizOpen = false;\n        this.quizLocked = false;\n    }\n    getQuestionForIndex(index) {\n        if (this.questions.length === 0) {\n            return FALLBACK_QUESTIONS[0];\n        }\n        return this.questions[index % this.questions.length];\n    }\n    createTrackCurve(width, height) {\n        const baseWidth = 750;\n        const baseHeight = 1334;\n        const scaleX = width / baseWidth;\n        const scaleY = height / baseHeight;\n        const points = [\n            {\n                x: 405,\n                y: 10\n            },\n            {\n                x: 455,\n                y: 85\n            },\n            {\n                x: 515,\n                y: 200\n            },\n            {\n                x: 485,\n                y: 360\n            },\n            {\n                x: 375,\n                y: 540\n            },\n            {\n                x: 250,\n                y: 740\n            },\n            {\n                x: 220,\n                y: 920\n            },\n            {\n                x: 270,\n                y: 1100\n            },\n            {\n                x: 325,\n                y: 1185\n            },\n            {\n                x: 505,\n                y: 1325\n            }\n        ].map((p)=>new Phaser.Math.Vector2(p.x * scaleX, p.y * scaleY));\n        return new Phaser.Curves.Spline(points);\n    }\n    sampleTrack(curve, count) {\n        const points = [];\n        const total = Math.max(1, count - 1);\n        for(let i = 0; i < count; i += 1){\n            const t = total === 0 ? 0 : i / total;\n            const p = curve.getPointAt(t);\n            points.push({\n                x: p.x,\n                y: p.y\n            });\n        }\n        return points;\n    }\n    drawTrackCurve(curve) {\n        const { startT, endT } = this.getVisibleTRange(curve);\n        const graphics = this.add.graphics();\n        graphics.setDepth(1000);\n        graphics.lineStyle(10, 0xff0000, 1);\n        const steps = 120;\n        const first = curve.getPoint(startT);\n        graphics.beginPath();\n        graphics.moveTo(first.x, first.y);\n        for(let i = 1; i <= steps; i += 1){\n            const t = startT + (endT - startT) * (i / steps);\n            const p = curve.getPoint(t);\n            graphics.lineTo(p.x, p.y);\n        }\n        graphics.strokePath();\n        this.debugCurveGraphics = graphics;\n    }\n    drawCurveMarkers(curve, count) {\n        const { width, height } = this.scale;\n        const { startT, endT } = this.getVisibleTRange(curve);\n        const graphics = this.add.graphics();\n        graphics.setDepth(1001);\n        graphics.fillStyle(0x22c55e, 1);\n        graphics.lineStyle(2, 0x22c55e, 1);\n        const total = Math.max(1, count - 1);\n        for(let i = 0; i < count; i += 1){\n            const t = total === 0 ? startT : startT + (endT - startT) * (i / total);\n            const point = curve.getPoint(t);\n            const clampedX = Phaser.Math.Clamp(point.x, 16, width - 16);\n            const clampedY = Phaser.Math.Clamp(point.y, 16, height - 16);\n            if (clampedX !== point.x || clampedY !== point.y) {\n                graphics.strokeLineShape(new Phaser.Geom.Line(point.x, point.y, clampedX, clampedY));\n            }\n            graphics.fillCircle(clampedX, clampedY, 8);\n            const labelText = `${i + 1} (${Math.round(point.x)}, ${Math.round(point.y)})`;\n            const label = this.add.text(clampedX + 10, clampedY - 10, labelText, {\n                fontFamily: 'Arial Black',\n                fontSize: '18px',\n                color: '#22c55e',\n                stroke: '#0f172a',\n                strokeThickness: 3\n            });\n            label.setDepth(1002);\n            this.debugMarkerLabels.push(label);\n        }\n        this.debugMarkerGraphics = graphics;\n    }\n    getVisibleTRange(curve) {\n        const { width, height } = this.scale;\n        const margin = 8;\n        const samples = 400;\n        let startT = 0;\n        let endT = 1;\n        let foundStart = false;\n        for(let i = 0; i <= samples; i += 1){\n            const t = i / samples;\n            const p = curve.getPoint(t);\n            const inside = p.x >= margin && p.x <= width - margin && p.y >= margin && p.y <= height - margin;\n            if (inside && !foundStart) {\n                startT = t;\n                foundStart = true;\n            }\n            if (inside) {\n                endT = t;\n            }\n        }\n        const startExtend = 0.0;\n        const endExtend = 0.0;\n        return {\n            startT: Math.max(0, startT - startExtend),\n            endT: Math.min(1, endT + endExtend)\n        };\n    }\n    getTrackAngle(points, index) {\n        const curr = points[index];\n        const next = points[index + 1] ?? points[index - 1] ?? curr;\n        const angle = Math.atan2(next.y - curr.y, next.x - curr.x);\n        return angle;\n    }\n    buildRailPath(spline) {\n        const length = spline.getLength();\n        const sampleEveryPx = 20;\n        const samples = Math.max(60, Math.round(length / sampleEveryPx));\n        const points = [];\n        for(let i = 0; i <= samples; i += 1){\n            const t = i / samples;\n            const p = spline.getPointAt(t);\n            points.push(new Phaser.Math.Vector2(p.x, p.y));\n        }\n        if (points.length < 2) {\n            this.railPathPoints = points;\n            this.railSegmentLengths = [];\n            this.railTotalLength = 0;\n            return;\n        }\n        const segments = [];\n        let total = 0;\n        for(let i = 0; i < points.length - 1; i += 1){\n            const curr = points[i];\n            const next = points[i + 1];\n            const segLen = Phaser.Math.Distance.Between(curr.x, curr.y, next.x, next.y);\n            segments.push(segLen);\n            total += segLen;\n        }\n        this.railPathPoints = points;\n        this.railSegmentLengths = segments;\n        this.railTotalLength = total;\n    }\n    sampleRailByDistanceNoWrap(distancePx) {\n        if (this.railPathPoints.length < 2 || this.railTotalLength <= 0) {\n            return {\n                position: new Phaser.Math.Vector2(0, 0),\n                angle: 0\n            };\n        }\n        const total = this.railTotalLength;\n        if (distancePx <= 0) {\n            const start = this.railPathPoints[0];\n            const next = this.railPathPoints[1];\n            const angle = Math.atan2(next.y - start.y, next.x - start.x);\n            const dir = new Phaser.Math.Vector2(Math.cos(angle), Math.sin(angle));\n            const pos = new Phaser.Math.Vector2(start.x, start.y).add(dir.scale(distancePx));\n            return {\n                position: pos,\n                angle\n            };\n        }\n        if (distancePx >= total) {\n            const end = this.railPathPoints[this.railPathPoints.length - 1];\n            const prev = this.railPathPoints[this.railPathPoints.length - 2];\n            const angle = Math.atan2(end.y - prev.y, end.x - prev.x);\n            const dir = new Phaser.Math.Vector2(Math.cos(angle), Math.sin(angle));\n            const pos = new Phaser.Math.Vector2(end.x, end.y).add(dir.scale(distancePx - total));\n            return {\n                position: pos,\n                angle\n            };\n        }\n        let remaining = distancePx;\n        let segIndex = 0;\n        while(segIndex < this.railSegmentLengths.length && remaining > this.railSegmentLengths[segIndex]){\n            remaining -= this.railSegmentLengths[segIndex];\n            segIndex += 1;\n        }\n        const safeIndex = Math.min(segIndex, this.railPathPoints.length - 2);\n        const curr = this.railPathPoints[safeIndex];\n        const next = this.railPathPoints[safeIndex + 1];\n        const segLen = this.railSegmentLengths[safeIndex] || 1;\n        const ratio = Phaser.Math.Clamp(remaining / segLen, 0, 1);\n        const x = Phaser.Math.Linear(curr.x, next.x, ratio);\n        const y = Phaser.Math.Linear(curr.y, next.y, ratio);\n        const angle = Math.atan2(next.y - curr.y, next.x - curr.x);\n        return {\n            position: new Phaser.Math.Vector2(x, y),\n            angle\n        };\n    }\n    createRailway() {\n        const { width, height } = this.scale;\n        const spline = this.createTrackCurve(width, height);\n        this.trackSpline = spline;\n        this.trackLength = spline.getLength();\n        this.buildRailPath(spline);\n        const baseScale = Math.min(width / 750, height / 1334);\n        const railOffset = 18 * baseScale;\n        const sleeperWidth = railOffset * 1.8;\n        const sleeperHeight = 7 * baseScale;\n        const railwayContainer = this.add.container(0, 0);\n        this.railwayContainer = railwayContainer;\n        const railLeft = [];\n        const railRight = [];\n        const samples = 140;\n        for(let i = 0; i <= samples; i += 1){\n            const t = i / samples;\n            const point = spline.getPoint(t);\n            const tangent = spline.getTangent(t).normalize();\n            const normal = new Phaser.Math.Vector2(-tangent.y, tangent.x).normalize();\n            railLeft.push(new Phaser.Math.Vector2(point.x + normal.x * railOffset, point.y + normal.y * railOffset));\n            railRight.push(new Phaser.Math.Vector2(point.x - normal.x * railOffset, point.y - normal.y * railOffset));\n        }\n        const rails = this.add.graphics();\n        rails.lineStyle(8 * baseScale, 0xf8fafc, 1);\n        rails.beginPath();\n        rails.moveTo(railLeft[0].x, railLeft[0].y);\n        railLeft.forEach((p)=>rails.lineTo(p.x, p.y));\n        rails.strokePath();\n        rails.beginPath();\n        rails.moveTo(railRight[0].x, railRight[0].y);\n        railRight.forEach((p)=>rails.lineTo(p.x, p.y));\n        rails.strokePath();\n        rails.setDepth(5);\n        railwayContainer.add(rails);\n        const sleeperCount = 28;\n        for(let i = 0; i <= sleeperCount; i += 1){\n            const t = i / sleeperCount;\n            const point = spline.getPoint(t);\n            const tangent = spline.getTangent(t).normalize();\n            const angle = Math.atan2(tangent.y, tangent.x) + Math.PI / 2;\n            const sleeper = this.add.rectangle(point.x, point.y, sleeperWidth, sleeperHeight, 0xb45309, 0.95);\n            sleeper.setRotation(angle);\n            sleeper.setDepth(4);\n            railwayContainer.add(sleeper);\n        }\n        if (this.debugTrack) {\n            this.drawTrackCurve(spline);\n            this.drawCurveMarkers(spline, 11);\n        }\n        this.setRailwayVisible(this.showRailOverlay);\n        this.setDebugTrackVisible(this.debugTrack);\n        this.trainDistancePx = 0;\n        if (this.trainStepPx <= 0) {\n            this.trainStepPx = this.railTotalLength > 1 ? (this.railTotalLength - 1) / this.maxCars : 0;\n        }\n        this.refreshLocks();\n        this.updateTrainCars(true);\n    }\n    createBarrierGate() {\n        if (!this.textures.exists('train-barrier')) return;\n        const gate = this.add.image(0, 0, 'train-barrier');\n        gate.setDepth(6);\n        gate.setOrigin(0.08, 0.5);\n        this.barrierGate = gate;\n        this.updateBarrierPosition();\n        this.setBarrierOpen(false, true);\n    }\n    updateBarrierPosition() {\n        if (!this.barrierGate) return;\n        const baseWidth = 750;\n        const baseHeight = 1334;\n        const scaleX = this.scale.width / baseWidth;\n        const scaleY = this.scale.height / baseHeight;\n        const baseX = 355;\n        const baseY = 230;\n        this.barrierGate.setPosition(baseX * scaleX, baseY * scaleY);\n        const scale = Math.min(scaleX, scaleY) * 0.35;\n        this.barrierGate.setScale(scale);\n        this.barrierBaseAngle = 0;\n        const targetAngle = this.barrierIsOpen ? this.barrierBaseAngle - Phaser.Math.DegToRad(45) : this.barrierBaseAngle;\n        this.barrierGate.setRotation(targetAngle);\n    }\n    setBarrierOpen(open, immediate = false) {\n        if (!this.barrierGate) return;\n        this.barrierIsOpen = open;\n        const targetAngle = open ? this.barrierBaseAngle - Phaser.Math.DegToRad(45) : this.barrierBaseAngle;\n        if (immediate) {\n            this.barrierGate.setRotation(targetAngle);\n            return;\n        }\n        this.tweens.add({\n            targets: this.barrierGate,\n            rotation: targetAngle,\n            duration: 220,\n            ease: 'Sine.easeInOut'\n        });\n    }\n    updateTrainCars(force = false) {\n        if (!this.showCars) return;\n        if (!force && !this.trainMoving) return;\n        if (this.railTotalLength <= 0) return;\n        for(let i = 0; i < this.carSlots.length; i += 1){\n            const slot = this.carSlots[i];\n            const distanceFromBottom = this.trainDistancePx - i * this.trainGapPx;\n            const mappedDistance = Math.max(0, this.railTotalLength - 1) - distanceFromBottom;\n            const sample = this.sampleRailByDistanceNoWrap(mappedDistance);\n            slot.car.setPosition(sample.position.x, sample.position.y);\n            slot.car.setRotation(sample.angle + this.trainRotationOffset);\n        }\n        const leadCar = this.carSlots[0]?.car;\n        if (leadCar && this.leadCarBadge && this.leadCarBadge.scene) {\n            const offsetX = -leadCar.displayWidth * 0.34;\n            const offsetY = -leadCar.displayHeight * 0.08;\n            const rotation = leadCar.rotation;\n            const worldX = leadCar.x + Math.cos(rotation) * offsetX - Math.sin(rotation) * offsetY;\n            const worldY = leadCar.y + Math.sin(rotation) * offsetX + Math.cos(rotation) * offsetY;\n            this.leadCarBadge.setPosition(worldX, worldY);\n            this.leadCarBadge.setRotation(rotation);\n        }\n    }\n    setShowCars(value) {\n        this.showCars = value;\n        this.carSlots.forEach((slot)=>{\n            slot.car.setVisible(value);\n            slot.lock.setVisible(false);\n        });\n        if (this.leadCarBadge) {\n            this.leadCarBadge.setVisible(value);\n        }\n        if (value) {\n            this.refreshLocks();\n            this.updateTrainCars(true);\n        }\n    }\n    setRailwayVisible(value) {\n        if (this.railwayContainer) {\n            this.railwayContainer.setVisible(value);\n        }\n        if (this.debugCurveGraphics) {\n            this.debugCurveGraphics.setVisible(value && this.debugTrack);\n        }\n        if (this.debugMarkerGraphics) {\n            this.debugMarkerGraphics.setVisible(value && this.debugTrack);\n        }\n        this.debugMarkerLabels.forEach((label)=>label.setVisible(value && this.debugTrack));\n    }\n    isRailwayVisible() {\n        return this.railwayContainer?.visible ?? true;\n    }\n    setDebugTrackVisible(value) {\n        this.debugTrack = value;\n        if (this.debugCurveGraphics) {\n            this.debugCurveGraphics.setVisible(value);\n        }\n        if (this.debugMarkerGraphics) {\n            this.debugMarkerGraphics.setVisible(value);\n        }\n        this.debugMarkerLabels.forEach((label)=>label.setVisible(value));\n    }\n    setTrainMoving(value) {\n        this.trainMoving = value;\n        if (!value) {\n            this.updateTrainCars(true);\n        }\n    }\n    endGame(reason, result) {\n        if (this.gameOver) return;\n        this.gameOver = true;\n        this.quizOpen = false;\n        this.quizLocked = false;\n        this.hasStarted = false;\n        this.closeQuiz();\n        this.submitSessionResult();\n        if (result === 'lose') {\n            this.openTimeUpModal('Out of time! Try again.');\n            return;\n        }\n        this.openTimeUpModal(reason || 'Great job! You won!');\n    }\n    formatTime(seconds) {\n        const mins = Math.floor(seconds / 60);\n        const secs = seconds % 60;\n        return `${mins}m ${secs.toString().padStart(2, '0')}s`;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9nYW1lL3NjZW5lcy9UcmFpbkdhbWUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQStCO0FBQ1E7QUFFd0I7QUFDbkI7QUFrQjVDLE1BQU1LLHFCQUFxQztJQUN2QztRQUNJQyxVQUFVO1lBQ05DLFNBQVM7WUFDVEMsU0FBUztnQkFDTDtvQkFBRUMsTUFBTTtvQkFBVUMsWUFBWTtnQkFBSztnQkFDbkM7b0JBQUVELE1BQU07b0JBQVdDLFlBQVk7Z0JBQU07Z0JBQ3JDO29CQUFFRCxNQUFNO29CQUFhQyxZQUFZO2dCQUFNO2dCQUN2QztvQkFBRUQsTUFBTTtvQkFBV0MsWUFBWTtnQkFBTTthQUN4QztRQUNMO0lBQ0o7SUFDQTtRQUNJSixVQUFVO1lBQ05DLFNBQVM7WUFDVEMsU0FBUztnQkFDTDtvQkFBRUMsTUFBTTtvQkFBeUJDLFlBQVk7Z0JBQUs7Z0JBQ2xEO29CQUFFRCxNQUFNO29CQUFNQyxZQUFZO2dCQUFNO2dCQUNoQztvQkFBRUQsTUFBTTtvQkFBVUMsWUFBWTtnQkFBTTtnQkFDcEM7b0JBQUVELE1BQU07b0JBQU1DLFlBQVk7Z0JBQU07YUFDbkM7UUFDTDtJQUNKO0lBQ0E7UUFDSUosVUFBVTtZQUNOQyxTQUFTO1lBQ1RDLFNBQVM7Z0JBQ0w7b0JBQUVDLE1BQU07b0JBQVFDLFlBQVk7Z0JBQUs7Z0JBQ2pDO29CQUFFRCxNQUFNO29CQUFPQyxZQUFZO2dCQUFNO2dCQUNqQztvQkFBRUQsTUFBTTtvQkFBUUMsWUFBWTtnQkFBTTtnQkFDbEM7b0JBQUVELE1BQU07b0JBQVNDLFlBQVk7Z0JBQU07YUFDdEM7UUFDTDtJQUNKO0lBQ0E7UUFDSUosVUFBVTtZQUNOQyxTQUFTO1lBQ1RDLFNBQVM7Z0JBQ0w7b0JBQUVDLE1BQU07b0JBQVFDLFlBQVk7Z0JBQUs7Z0JBQ2pDO29CQUFFRCxNQUFNO29CQUFNQyxZQUFZO2dCQUFNO2dCQUNoQztvQkFBRUQsTUFBTTtvQkFBU0MsWUFBWTtnQkFBTTtnQkFDbkM7b0JBQUVE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QWdCckcsS0FBYyxFQUN0QztRQUNJLElBQUksQ0FBQ3RULFdBQVcsR0FBR3NUO1FBQ25CLElBQUksQ0FBQ0EsT0FBTztZQUNSLElBQUksQ0FBQzlPLGVBQWUsQ0FBQztRQUN6QjtJQUNKO0lBRVF5QixRQUFTMlQsTUFBYyxFQUFFQyxNQUFzQixFQUN2RDtRQUNJLElBQUksSUFBSSxDQUFDeFgsUUFBUSxFQUFFO1FBQ25CLElBQUksQ0FBQ0EsUUFBUSxHQUFHO1FBQ2hCLElBQUksQ0FBQ0YsUUFBUSxHQUFHO1FBQ2hCLElBQUksQ0FBQ0MsVUFBVSxHQUFHO1FBQ2xCLElBQUksQ0FBQ2IsVUFBVSxHQUFHO1FBQ2xCLElBQUksQ0FBQytQLFNBQVM7UUFDZCxJQUFJLENBQUNOLG1CQUFtQjtRQUV4QixJQUFJNkksV0FBVyxRQUFRO1lBQ25CLElBQUksQ0FBQy9JLGVBQWUsQ0FBQztZQUNyQjtRQUNKO1FBQ0EsSUFBSSxDQUFDQSxlQUFlLENBQUM4SSxVQUFVO0lBQ25DO0lBRVE1VCxXQUFZSixPQUFlLEVBQ25DO1FBQ0ksTUFBTWtVLE9BQU9qWixLQUFLa1osS0FBSyxDQUFDblUsVUFBVTtRQUNsQyxNQUFNb1UsT0FBT3BVLFVBQVU7UUFDdkIsT0FBTyxHQUFHa1UsS0FBSyxFQUFFLEVBQUVFLEtBQUtsTSxRQUFRLEdBQUdDLFFBQVEsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDO0lBQzFEO0FBQ0oiLCJzb3VyY2VzIjpbIi9Vc2Vycy9uYjIzMDYwMS9Eb2N1bWVudHMvcGhhc2VyLWdhbWVkZXYvc3JjL2dhbWUvc2NlbmVzL1RyYWluR2FtZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTY2VuZSB9IGZyb20gJ3BoYXNlcic7XG5pbXBvcnQgeyBFdmVudEJ1cyB9IGZyb20gJy4uL0V2ZW50QnVzJztcbmltcG9ydCB0eXBlIHsgR2FtZVF1ZXN0aW9uIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvYXBpJztcbmltcG9ydCB7IGdldEdhbWVDb25maWcsIHJlc29sdmVHYW1lQ29kZSB9IGZyb20gJy4uL2dhbWVDb25maWcnO1xuaW1wb3J0IHsgUXVpelBhbmVsIH0gZnJvbSAnLi4vdWkvUXVpelBhbmVsJztcblxudHlwZSBUcmFpbkNhclNsb3QgPSB7XG4gICAgaW5kZXg6IG51bWJlcjtcbiAgICBjYXI6IFBoYXNlci5HYW1lT2JqZWN0cy5JbWFnZTtcbiAgICBsb2NrOiBQaGFzZXIuR2FtZU9iamVjdHMuQ29udGFpbmVyO1xufTtcblxudHlwZSBUcmFpbkdhbWVJbml0RGF0YSA9IHtcbiAgICBnYW1lQ29kZT86IHN0cmluZyB8IG51bGw7XG4gICAgc2Vzc2lvbklkPzogc3RyaW5nIHwgbnVsbDtcbiAgICBnYW1lSWQ/OiBzdHJpbmcgfCBudWxsO1xuICAgIHF1ZXN0aW9ucz86IEdhbWVRdWVzdGlvbltdIHwgbnVsbDtcbiAgICB0aW1lTGltaXQ/OiBudW1iZXIgfCBudWxsO1xufTtcblxudHlwZSBMZWFkQ2FyU3RhdGUgPSAnaWRsZScgfCAnY29ycmVjdCcgfCAnaW5jb3JyZWN0JztcblxuY29uc3QgRkFMTEJBQ0tfUVVFU1RJT05TOiBHYW1lUXVlc3Rpb25bXSA9IFtcbiAgICB7XG4gICAgICAgIHF1ZXN0aW9uOiB7XG4gICAgICAgICAgICBjb250ZW50OiAnVGjhu6cgxJHDtCBj4bunYSBWaeG7h3QgTmFtIGzDoCBnw6w/JyxcbiAgICAgICAgICAgIG9wdGlvbnM6IFtcbiAgICAgICAgICAgICAgICB7IHRleHQ6ICdIw6AgTuG7mWknLCBpc19jb3JyZWN0OiB0cnVlIH0sXG4gICAgICAgICAgICAgICAgeyB0ZXh0OiAnxJDDoCBO4bq1bmcnLCBpc19jb3JyZWN0OiBmYWxzZSB9LFxuICAgICAgICAgICAgICAgIHsgdGV4dDogJ0jhuqNpIFBow7JuZycsIGlzX2NvcnJlY3Q6IGZhbHNlIH0sXG4gICAgICAgICAgICAgICAgeyB0ZXh0OiAnQ+G6p24gVGjGoScsIGlzX2NvcnJlY3Q6IGZhbHNlIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgICBxdWVzdGlvbjoge1xuICAgICAgICAgICAgY29udGVudDogJ1BoYXNlciBz4butIGThu6VuZyBuZ8O0biBuZ+G7ryBuw6BvPycsXG4gICAgICAgICAgICBvcHRpb25zOiBbXG4gICAgICAgICAgICAgICAgeyB0ZXh0OiAnVHlwZVNjcmlwdC9KYXZhU2NyaXB0JywgaXNfY29ycmVjdDogdHJ1ZSB9LFxuICAgICAgICAgICAgICAgIHsgdGV4dDogJ0MjJywgaXNfY29ycmVjdDogZmFsc2UgfSxcbiAgICAgICAgICAgICAgICB7IHRleHQ6ICdQeXRob24nLCBpc19jb3JyZWN0OiBmYWxzZSB9LFxuICAgICAgICAgICAgICAgIHsgdGV4dDogJ0dvJywgaXNfY29ycmVjdDogZmFsc2UgfVxuICAgICAgICAgICAgXVxuICAgICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICAgIHF1ZXN0aW9uOiB7XG4gICAgICAgICAgICBjb250ZW50OiAnQ2jhu41uIHThu6sgdHLDoWkgbmdoxKlhIGPhu6dhIOKAnGZhc3TigJ0uJyxcbiAgICAgICAgICAgIG9wdGlvbnM6IFtcbiAgICAgICAgICAgICAgICB7IHRleHQ6ICdzbG93JywgaXNfY29ycmVjdDogdHJ1ZSB9LFxuICAgICAgICAgICAgICAgIHsgdGV4dDogJ2ZhcicsIGlzX2NvcnJlY3Q6IGZhbHNlIH0sXG4gICAgICAgICAgICAgICAgeyB0ZXh0OiAnaGlnaCcsIGlzX2NvcnJlY3Q6IGZhbHNlIH0sXG4gICAgICAgICAgICAgICAgeyB0ZXh0OiAnc21hbGwnLCBpc19jb3JyZWN0OiBmYWxzZSB9XG4gICAgICAgICAgICBdXG4gICAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgICAgcXVlc3Rpb246IHtcbiAgICAgICAgICAgIGNvbnRlbnQ6ICdDaOG7jW4gxJHDoXAgw6FuIMSRw7puZzogU2hlIF9fXyB0byBzY2hvb2wgZXZlcnkgZGF5LicsXG4gICAgICAgICAgICBvcHRpb25zOiBbXG4gICAgICAgICAgICAgICAgeyB0ZXh0OiAnZ29lcycsIGlzX2NvcnJlY3Q6IHRydWUgfSxcbiAgICAgICAgICAgICAgICB7IHRleHQ6ICdnbycsIGlzX2NvcnJlY3Q6IGZhbHNlIH0sXG4gICAgICAgICAgICAgICAgeyB0ZXh0OiAnZ29pbmcnLCBpc19jb3JyZWN0OiBmYWxzZSB9LFxuICAgICAgICAgICAgICAgIHsgdGV4dDogJ2dvbmUnLCBpc19jb3JyZWN0OiBmYWxzZSB9XG4gICAgICAgICAgICBdXG4gICAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgICAgcXVlc3Rpb246IHtcbiAgICAgICAgICAgIGNvbnRlbnQ6ICdU4burIG7DoG8gY8OzIG5naMSpYSBsw6Ag4oCcbmjhuqN54oCdPycsXG4gICAgICAgICAgICBvcHRpb25zOiBbXG4gICAgICAgICAgICAgICAgeyB0ZXh0OiAnanVtcCcsIGlzX2NvcnJlY3Q6IHRydWUgfSxcbiAgICAgICAgICAgICAgICB7IHRleHQ6ICdzd2ltJywgaXNfY29ycmVjdDogZmFsc2UgfSxcbiAgICAgICAgICAgICAgICB7IHRleHQ6ICdjcmF3bCcsIGlzX2NvcnJlY3Q6IGZhbHNlIH0sXG4gICAgICAgICAgICAgICAgeyB0ZXh0OiAnc2xlZXAnLCBpc19jb3JyZWN0OiBmYWxzZSB9XG4gICAgICAgICAgICBdXG4gICAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgICAgcXVlc3Rpb246IHtcbiAgICAgICAgICAgIGNvbnRlbnQ6ICdU4burIG7DoG8gbMOgIGRhbmggdOG7qz8nLFxuICAgICAgICAgICAgb3B0aW9uczogW1xuICAgICAgICAgICAgICAgIHsgdGV4dDogJ3JpdmVyJywgaXNfY29ycmVjdDogdHJ1ZSB9LFxuICAgICAgICAgICAgICAgIHsgdGV4dDogJ3J1bicsIGlzX2NvcnJlY3Q6IGZhbHNlIH0sXG4gICAgICAgICAgICAgICAgeyB0ZXh0OiAncXVpY2tseScsIGlzX2NvcnJlY3Q6IGZhbHNlIH0sXG4gICAgICAgICAgICAgICAgeyB0ZXh0OiAnYmx1ZScsIGlzX2NvcnJlY3Q6IGZhbHNlIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgICBxdWVzdGlvbjoge1xuICAgICAgICAgICAgY29udGVudDogJ0No4buNbiBjw6J1IMSRw7puZyBuZ+G7ryBwaMOhcC4nLFxuICAgICAgICAgICAgb3B0aW9uczogW1xuICAgICAgICAgICAgICAgIHsgdGV4dDogJ0hlIGlzIHBsYXlpbmcgZm9vdGJhbGwuJywgaXNfY29ycmVjdDogdHJ1ZSB9LFxuICAgICAgICAgICAgICAgIHsgdGV4dDogJ0hlIGFyZSBwbGF5aW5nIGZvb3RiYWxsLicsIGlzX2NvcnJlY3Q6IGZhbHNlIH0sXG4gICAgICAgICAgICAgICAgeyB0ZXh0OiAnSGUgcGxheWluZyBmb290YmFsbC4nLCBpc19jb3JyZWN0OiBmYWxzZSB9LFxuICAgICAgICAgICAgICAgIHsgdGV4dDogJ0hlIHBsYXkgZm9vdGJhbGwuJywgaXNfY29ycmVjdDogZmFsc2UgfVxuICAgICAgICAgICAgXVxuICAgICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICAgIHF1ZXN0aW9uOiB7XG4gICAgICAgICAgICBjb250ZW50OiAnVOG7qyBuw6BvIGzDoCB0w61uaCB04burPycsXG4gICAgICAgICAgICBvcHRpb25zOiBbXG4gICAgICAgICAgICAgICAgeyB0ZXh0OiAnYmVhdXRpZnVsJywgaXNfY29ycmVjdDogdHJ1ZSB9LFxuICAgICAgICAgICAgICAgIHsgdGV4dDogJ2JlYXV0eScsIGlzX2NvcnJlY3Q6IGZhbHNlIH0sXG4gICAgICAgICAgICAgICAgeyB0ZXh0OiAnYmVhdXRpZnknLCBpc19jb3JyZWN0OiBmYWxzZSB9LFxuICAgICAgICAgICAgICAgIHsgdGV4dDogJ2JlYXV0aWZ1bGx5JywgaXNfY29ycmVjdDogZmFsc2UgfVxuICAgICAgICAgICAgXVxuICAgICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICAgIHF1ZXN0aW9uOiB7XG4gICAgICAgICAgICBjb250ZW50OiAnQ2jhu41uIMSRw6FwIMOhbiDEkcO6bmc6IEkgX19fIGEgYm9vayBub3cuJyxcbiAgICAgICAgICAgIG9wdGlvbnM6IFtcbiAgICAgICAgICAgICAgICB7IHRleHQ6ICdhbSByZWFkaW5nJywgaXNfY29ycmVjdDogdHJ1ZSB9LFxuICAgICAgICAgICAgICAgIHsgdGV4dDogJ3JlYWQnLCBpc19jb3JyZWN0OiBmYWxzZSB9LFxuICAgICAgICAgICAgICAgIHsgdGV4dDogJ3JlYWRzJywgaXNfY29ycmVjdDogZmFsc2UgfSxcbiAgICAgICAgICAgICAgICB7IHRleHQ6ICdyZWFkaW5nJywgaXNfY29ycmVjdDogZmFsc2UgfVxuICAgICAgICAgICAgXVxuICAgICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICAgIHF1ZXN0aW9uOiB7XG4gICAgICAgICAgICBjb250ZW50OiAnVOG7qyBuw6BvIGzDoCB0cuG6oW5nIHThu6s/JyxcbiAgICAgICAgICAgIG9wdGlvbnM6IFtcbiAgICAgICAgICAgICAgICB7IHRleHQ6ICdxdWlja2x5JywgaXNfY29ycmVjdDogdHJ1ZSB9LFxuICAgICAgICAgICAgICAgIHsgdGV4dDogJ3F1aWNrJywgaXNfY29ycmVjdDogZmFsc2UgfSxcbiAgICAgICAgICAgICAgICB7IHRleHQ6ICdxdWlja2VyJywgaXNfY29ycmVjdDogZmFsc2UgfSxcbiAgICAgICAgICAgICAgICB7IHRleHQ6ICdxdWlja25lc3MnLCBpc19jb3JyZWN0OiBmYWxzZSB9XG4gICAgICAgICAgICBdXG4gICAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgICAgcXVlc3Rpb246IHtcbiAgICAgICAgICAgIGNvbnRlbnQ6ICdDaOG7jW4gY8OidSBo4buPaSBwaMO5IGjhu6NwIGtoaSBn4bq3cCBuZ8aw4budaSBt4bubaS4nLFxuICAgICAgICAgICAgb3B0aW9uczogW1xuICAgICAgICAgICAgICAgIHsgdGV4dDogJ1doYXQgaXMgeW91ciBuYW1lPycsIGlzX2NvcnJlY3Q6IHRydWUgfSxcbiAgICAgICAgICAgICAgICB7IHRleHQ6ICdXaGVyZSBkbyB5b3UgbGl2ZT8nLCBpc19jb3JyZWN0OiBmYWxzZSB9LFxuICAgICAgICAgICAgICAgIHsgdGV4dDogJ0hvdyBvbGQgYXJlIHlvdT8nLCBpc19jb3JyZWN0OiBmYWxzZSB9LFxuICAgICAgICAgICAgICAgIHsgdGV4dDogJ1doYXQgdGltZSBpcyBpdD8nLCBpc19jb3JyZWN0OiBmYWxzZSB9XG4gICAgICAgICAgICBdXG4gICAgICAgIH1cbiAgICB9XG5dO1xuXG5leHBvcnQgY2xhc3MgVHJhaW5HYW1lIGV4dGVuZHMgU2NlbmVcbntcbiAgICBwcml2YXRlIGRlYnVnVHJhY2sgPSBmYWxzZTtcbiAgICBwcml2YXRlIHNob3dSYWlsT3ZlcmxheSA9IGZhbHNlO1xuICAgIHByaXZhdGUgc2hvd0NhcnMgPSB0cnVlO1xuICAgIHByaXZhdGUgdHJhaW5Nb3ZpbmcgPSBmYWxzZTtcbiAgICBwcml2YXRlIHRyYWNrU3BsaW5lPzogUGhhc2VyLkN1cnZlcy5TcGxpbmU7XG4gICAgcHJpdmF0ZSB0cmFpblNwcml0ZT86IFBoYXNlci5HYW1lT2JqZWN0cy5JbWFnZTtcbiAgICBwcml2YXRlIHRyYWZmaWNMaWdodD86IFBoYXNlci5HYW1lT2JqZWN0cy5JbWFnZTtcbiAgICBwcml2YXRlIHRyYWZmaWNMaWdodFZhcmlhbnRzPzoge1xuICAgICAgICByZWQ6IFBoYXNlci5HYW1lT2JqZWN0cy5JbWFnZTtcbiAgICAgICAgeWVsbG93OiBQaGFzZXIuR2FtZU9iamVjdHMuSW1hZ2U7XG4gICAgICAgIGdyZWVuOiBQaGFzZXIuR2FtZU9iamVjdHMuSW1hZ2U7XG4gICAgfTtcbiAgICBwcml2YXRlIHRyYWZmaWNMaWdodFN0YXRlOiAncmVkJyB8ICd5ZWxsb3cnIHwgJ2dyZWVuJyB8IG51bGwgPSBudWxsO1xuICAgIHByaXZhdGUgdHJhaW5EaXN0YW5jZVB4OiBudW1iZXIgPSAwO1xuICAgIHByaXZhdGUgdHJhaW5TcGVlZFB4UGVyU2VjOiBudW1iZXIgPSAtMTgwO1xuICAgIHByaXZhdGUgdHJhaW5HYXBQeDogbnVtYmVyID0gMDtcbiAgICBwcml2YXRlIHRyYWNrTGVuZ3RoOiBudW1iZXIgPSAwO1xuICAgIHByaXZhdGUgcmVhZG9ubHkgdHJhaW5DYXJHYXBGYWN0b3IgPSAwLjY4O1xuICAgIHByaXZhdGUgcmVhZG9ubHkgdHJhaW5DYXJTY2FsZUZhY3RvciA9IDAuNDY4O1xuICAgIHByaXZhdGUgcmFpbFBhdGhQb2ludHM6IFBoYXNlci5NYXRoLlZlY3RvcjJbXSA9IFtdO1xuICAgIHByaXZhdGUgcmFpbFNlZ21lbnRMZW5ndGhzOiBudW1iZXJbXSA9IFtdO1xuICAgIHByaXZhdGUgcmFpbFRvdGFsTGVuZ3RoOiBudW1iZXIgPSAwO1xuICAgIHByaXZhdGUgcmVhZG9ubHkgdHJhaW5Sb3RhdGlvbk9mZnNldCA9IFBoYXNlci5NYXRoLkRlZ1RvUmFkKC05MCk7XG4gICAgcHJpdmF0ZSBsZWFkQ2FyU3RhdGU6IExlYWRDYXJTdGF0ZSA9ICdpZGxlJztcbiAgICBwcml2YXRlIGxlYWRDYXJCYXNlU2l6ZTogeyB3aWR0aDogbnVtYmVyOyBoZWlnaHQ6IG51bWJlciB9IHwgbnVsbCA9IG51bGw7XG4gICAgcHJpdmF0ZSBsZWFkQ2FyQmFkZ2U/OiBQaGFzZXIuR2FtZU9iamVjdHMuSW1hZ2U7XG4gICAgcHJpdmF0ZSByYWlsd2F5Q29udGFpbmVyPzogUGhhc2VyLkdhbWVPYmplY3RzLkNvbnRhaW5lcjtcbiAgICBwcml2YXRlIGRlYnVnQ3VydmVHcmFwaGljcz86IFBoYXNlci5HYW1lT2JqZWN0cy5HcmFwaGljcztcbiAgICBwcml2YXRlIGRlYnVnTWFya2VyR3JhcGhpY3M/OiBQaGFzZXIuR2FtZU9iamVjdHMuR3JhcGhpY3M7XG4gICAgcHJpdmF0ZSBkZWJ1Z01hcmtlckxhYmVsczogUGhhc2VyLkdhbWVPYmplY3RzLlRleHRbXSA9IFtdO1xuICAgIHByaXZhdGUgc2hvd0hvdmVyQ29vcmRzID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBob3ZlckNvb3JkVGV4dD86IFBoYXNlci5HYW1lT2JqZWN0cy5UZXh0O1xuICAgIHByaXZhdGUgYmFycmllckdhdGU/OiBQaGFzZXIuR2FtZU9iamVjdHMuSW1hZ2U7XG4gICAgcHJpdmF0ZSBiYXJyaWVyQmFzZUFuZ2xlOiBudW1iZXIgPSAwO1xuICAgIHByaXZhdGUgYmFycmllcklzT3BlbjogYm9vbGVhbiA9IGZhbHNlO1xuICAgIGNhbWVyYSE6IFBoYXNlci5DYW1lcmFzLlNjZW5lMkQuQ2FtZXJhO1xuICAgIGJhY2tncm91bmQhOiBQaGFzZXIuR2FtZU9iamVjdHMuSW1hZ2U7XG4gICAgY2FyU2xvdHM6IFRyYWluQ2FyU2xvdFtdID0gW107XG4gICAgcXVpek1vZGFsITogUGhhc2VyLkdhbWVPYmplY3RzLkNvbnRhaW5lcjtcbiAgICBxdWl6UGFuZWwhOiBRdWl6UGFuZWw7XG4gICAgdGltZXJUZXh0ITogUGhhc2VyLkdhbWVPYmplY3RzLlRleHQ7XG4gICAgc2NvcmVUZXh0ITogUGhhc2VyLkdhbWVPYmplY3RzLlRleHQ7XG4gICAgaHVkQmFja0J1dHRvbiE6IFBoYXNlci5HYW1lT2JqZWN0cy5Db250YWluZXI7XG4gICAgaHVkUG9pbnRzUGlsbCE6IFBoYXNlci5HYW1lT2JqZWN0cy5Db250YWluZXI7XG4gICAgaHVkVGltZXJQaWxsITogUGhhc2VyLkdhbWVPYmplY3RzLkNvbnRhaW5lcjtcbiAgICB1aVJvb3QhOiBQaGFzZXIuR2FtZU9iamVjdHMuQ29udGFpbmVyO1xuICAgIHN0YXJ0TW9kYWwhOiBQaGFzZXIuR2FtZU9iamVjdHMuQ29udGFpbmVyO1xuICAgIHN0YXJ0TW9kYWxQYW5lbCE6IFBoYXNlci5HYW1lT2JqZWN0cy5Db250YWluZXI7XG4gICAgdGltZVVwTW9kYWwhOiBQaGFzZXIuR2FtZU9iamVjdHMuQ29udGFpbmVyO1xuICAgIHRpbWVVcE1vZGFsUGFuZWwhOiBQaGFzZXIuR2FtZU9iamVjdHMuQ29udGFpbmVyO1xuICAgIHRpbWVVcFRpdGxlVGV4dCE6IFBoYXNlci5HYW1lT2JqZWN0cy5UZXh0O1xuICAgIHN0YXJ0TW9kYWxPcGVuOiBib29sZWFuID0gZmFsc2U7XG4gICAgaGFzU3RhcnRlZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgZ2FtZUNvZGU6IHN0cmluZyA9ICd0cmFpbl9nYW1lJztcbiAgICBzZXNzaW9uSWQ6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICAgIHNlc3Npb25HYW1lSWQ6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICAgIHNlc3Npb25RdWVzdGlvbnM6IEdhbWVRdWVzdGlvbltdIHwgbnVsbCA9IG51bGw7XG4gICAgc2Vzc2lvblRpbWVMaW1pdDogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG5cbiAgICBtYXhDYXJzOiBudW1iZXIgPSAxMTtcbiAgICBjdXJyZW50SW5kZXg6IG51bWJlciA9IDA7XG4gICAgc2NvcmU6IG51bWJlciA9IDA7XG5cbiAgICB0b3RhbFRpbWVNczogbnVtYmVyID0gMzAwMDAwO1xuICAgIHJlbWFpbmluZ01zOiBudW1iZXIgPSAzMDAwMDA7XG4gICAgbGFzdFNlY29uZFNob3duOiBudW1iZXIgPSAtMTtcblxuICAgIHF1aXpPcGVuOiBib29sZWFuID0gZmFsc2U7XG4gICAgcXVpekxvY2tlZDogYm9vbGVhbiA9IGZhbHNlO1xuICAgIGdhbWVPdmVyOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICBwcml2YXRlIHF1ZXN0aW9uczogR2FtZVF1ZXN0aW9uW10gPSBbXTtcbiAgICBwcml2YXRlIGN1cnJlbnRDb3JyZWN0SW5kZXg6IG51bWJlciA9IDA7XG4gICAgcHJpdmF0ZSBjdXJyZW50U2Vzc2lvblF1ZXN0aW9uSWQ6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICAgIHByaXZhdGUgY3VycmVudE9wdGlvbklkczogc3RyaW5nW10gPSBbXTtcbiAgICBwcml2YXRlIHRyYWluU3RlcFB4OiBudW1iZXIgPSAwO1xuXG4gICAgY29uc3RydWN0b3IgKClcbiAgICB7XG4gICAgICAgIHN1cGVyKCdUcmFpbkdhbWUnKTtcbiAgICB9XG5cbiAgICBpbml0IChkYXRhOiBUcmFpbkdhbWVJbml0RGF0YSlcbiAgICB7XG4gICAgICAgIHRoaXMuZ2FtZUNvZGUgPSByZXNvbHZlR2FtZUNvZGUoZGF0YT8uZ2FtZUNvZGUgPz8gKHRoaXMucmVnaXN0cnkuZ2V0KCdnYW1lQ29kZScpIGFzIHN0cmluZyB8IHVuZGVmaW5lZCkpO1xuICAgICAgICB0aGlzLnJlZ2lzdHJ5LnNldCgnZ2FtZUNvZGUnLCB0aGlzLmdhbWVDb2RlKTtcbiAgICAgICAgdGhpcy5zZXNzaW9uSWQgPSBkYXRhPy5zZXNzaW9uSWQgPz8gbnVsbDtcbiAgICAgICAgdGhpcy5zZXNzaW9uR2FtZUlkID0gZGF0YT8uZ2FtZUlkID8/IG51bGw7XG4gICAgICAgIHRoaXMuc2Vzc2lvblF1ZXN0aW9ucyA9IGRhdGE/LnF1ZXN0aW9ucyA/PyBudWxsO1xuICAgICAgICB0aGlzLnNlc3Npb25UaW1lTGltaXQgPSBkYXRhPy50aW1lTGltaXQgPz8gbnVsbDtcbiAgICB9XG5cbiAgICBjcmVhdGUgKClcbiAgICB7XG4gICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gdGhpcy5zY2FsZTtcbiAgICAgICAgY29uc3QgZ2FtZUNvbmZpZyA9IGdldEdhbWVDb25maWcodGhpcy5nYW1lQ29kZSk7XG5cbiAgICAgICAgLy8gUmVzZXQgcnVudGltZSBzdGF0ZSBvbiBldmVyeSBjcmVhdGUoKSBiZWNhdXNlIHNjZW5lLnJlc3RhcnQgcmV1c2VzIHRoZSBzYW1lIGluc3RhbmNlLlxuICAgICAgICB0aGlzLmdhbWVPdmVyID0gZmFsc2U7XG4gICAgICAgIHRoaXMucXVpek9wZW4gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5xdWl6TG9ja2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc3RhcnRNb2RhbE9wZW4gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5oYXNTdGFydGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuY3VycmVudFNlc3Npb25RdWVzdGlvbklkID0gbnVsbDtcbiAgICAgICAgdGhpcy5jdXJyZW50T3B0aW9uSWRzID0gW107XG4gICAgICAgIHRoaXMubGVhZENhclN0YXRlID0gJ2lkbGUnO1xuICAgICAgICB0aGlzLmJhcnJpZXJJc09wZW4gPSBmYWxzZTtcblxuICAgICAgICB0aGlzLmNhclNsb3RzID0gW107XG4gICAgICAgIHRoaXMubGVhZENhckJhZGdlID0gdW5kZWZpbmVkO1xuXG4gICAgICAgIHRoaXMuY2FtZXJhID0gdGhpcy5jYW1lcmFzLm1haW47XG4gICAgICAgIHRoaXMuY2FtZXJhLnNldEJhY2tncm91bmRDb2xvcihnYW1lQ29uZmlnLmJhY2tncm91bmRDb2xvcik7XG5cbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kID0gdGhpcy5hZGQuaW1hZ2Uod2lkdGggLyAyLCBoZWlnaHQgLyAyLCAndHJhaW4tYmcnKVxuICAgICAgICAgICAgLnNldERpc3BsYXlTaXplKHdpZHRoLCBoZWlnaHQpXG4gICAgICAgICAgICAuc2V0T3JpZ2luKDAuNSwgMC41KTtcblxuICAgICAgICB0aGlzLnNldHVwUXVlc3Rpb25zKCk7XG4gICAgICAgIHRoaXMuc2V0dXBUaW1lcigpO1xuICAgICAgICB0aGlzLmNyZWF0ZUh1ZCgpO1xuICAgICAgICB0aGlzLmN1cnJlbnRJbmRleCA9IDA7XG4gICAgICAgIHRoaXMuc2NvcmUgPSAwO1xuICAgICAgICB0aGlzLmNyZWF0ZVJhaWx3YXkoKTtcbiAgICAgICAgaWYgKHRoaXMuc2hvd0NhcnMpIHtcbiAgICAgICAgICAgIHRoaXMubGF5b3V0VHJhaW4oKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVHJhaW5DYXJzKHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY3JlYXRlQmFycmllckdhdGUoKTtcbiAgICAgICAgdGhpcy5jcmVhdGVRdWl6TW9kYWwoKTtcbiAgICAgICAgdGhpcy5jcmVhdGVTdGFydE1vZGFsKCk7XG4gICAgICAgIHRoaXMuY3JlYXRlVGltZVVwTW9kYWwoKTtcbiAgICAgICAgdGhpcy5vcGVuU3RhcnRNb2RhbCgpO1xuXG4gICAgICAgIHRoaXMuc2NhbGUub24oJ3Jlc2l6ZScsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgd2lkdGg6IG5ld1dpZHRoLCBoZWlnaHQ6IG5ld0hlaWdodCB9ID0gdGhpcy5zY2FsZTtcbiAgICAgICAgICAgIHRoaXMuYmFja2dyb3VuZC5zZXRQb3NpdGlvbihuZXdXaWR0aCAvIDIsIG5ld0hlaWdodCAvIDIpLnNldERpc3BsYXlTaXplKG5ld1dpZHRoLCBuZXdIZWlnaHQpO1xuICAgICAgICAgICAgdGhpcy5sYXlvdXRIdWQoKTtcbiAgICAgICAgICAgIHRoaXMubGF5b3V0UXVpeigpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVCYXJyaWVyUG9zaXRpb24oKTtcbiAgICAgICAgICAgIHRoaXMubGF5b3V0U3RhcnRNb2RhbCgpO1xuICAgICAgICAgICAgdGhpcy5sYXlvdXRUaW1lVXBNb2RhbCgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBFdmVudEJ1cy5lbWl0KCdjdXJyZW50LXNjZW5lLXJlYWR5JywgdGhpcyk7XG4gICAgfVxuXG4gICAgdXBkYXRlIChfdGltZTogbnVtYmVyLCBkZWx0YTogbnVtYmVyKVxuICAgIHtcbiAgICAgICAgaWYgKHRoaXMuZ2FtZU92ZXIpIHJldHVybjtcbiAgICAgICAgaWYgKCF0aGlzLmhhc1N0YXJ0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVHJhaW5DYXJzKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlbWFpbmluZ01zID0gTWF0aC5tYXgoMCwgdGhpcy5yZW1haW5pbmdNcyAtIGRlbHRhKTtcbiAgICAgICAgY29uc3Qgc2Vjb25kcyA9IE1hdGguY2VpbCh0aGlzLnJlbWFpbmluZ01zIC8gMTAwMCk7XG4gICAgICAgIGlmIChzZWNvbmRzICE9PSB0aGlzLmxhc3RTZWNvbmRTaG93bikge1xuICAgICAgICAgICAgdGhpcy5sYXN0U2Vjb25kU2hvd24gPSBzZWNvbmRzO1xuICAgICAgICAgICAgdGhpcy50aW1lclRleHQuc2V0VGV4dCh0aGlzLmZvcm1hdFRpbWUoc2Vjb25kcykpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMucmVtYWluaW5nTXMgPD0gMCAmJiAhdGhpcy5nYW1lT3Zlcikge1xuICAgICAgICAgICAgdGhpcy5lbmRHYW1lKCdPdXQgb2YgdGltZS4nLCAnbG9zZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy51cGRhdGVUcmFpbkNhcnMoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNldHVwUXVlc3Rpb25zICgpXG4gICAge1xuICAgICAgICBjb25zdCBzb3VyY2UgPSB0aGlzLnNlc3Npb25RdWVzdGlvbnMgJiYgdGhpcy5zZXNzaW9uUXVlc3Rpb25zLmxlbmd0aCA+IDBcbiAgICAgICAgICAgID8gdGhpcy5zZXNzaW9uUXVlc3Rpb25zXG4gICAgICAgICAgICA6IEZBTExCQUNLX1FVRVNUSU9OUztcblxuICAgICAgICB0aGlzLnF1ZXN0aW9ucyA9IHNvdXJjZS5zbGljZSgwKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNldHVwVGltZXIgKClcbiAgICB7XG4gICAgICAgIGlmICh0aGlzLnNlc3Npb25UaW1lTGltaXQgJiYgdGhpcy5zZXNzaW9uVGltZUxpbWl0ID4gMCkge1xuICAgICAgICAgICAgdGhpcy50b3RhbFRpbWVNcyA9IHRoaXMuc2Vzc2lvblRpbWVMaW1pdCAqIDEwMDA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW1haW5pbmdNcyA9IHRoaXMudG90YWxUaW1lTXM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVIdWQgKClcbiAgICB7XG4gICAgICAgIHRoaXMudWlSb290ID0gdGhpcy5hZGQuY29udGFpbmVyKDAsIDApLnNldERlcHRoKDIwMDApO1xuXG4gICAgICAgIHRoaXMuaHVkQmFja0J1dHRvbiA9IHRoaXMuYWRkLmNvbnRhaW5lcigwLCAwKTtcbiAgICAgICAgY29uc3QgYmFja0JnID0gdGhpcy5hZGQuZ3JhcGhpY3MoKTtcbiAgICAgICAgYmFja0JnLmZpbGxTdHlsZSgweGZmZmZmZiwgMC45NSk7XG4gICAgICAgIGJhY2tCZy5maWxsUm91bmRlZFJlY3QoLTIyLCAtMjIsIDQ0LCA0NCwgMTQpO1xuICAgICAgICBiYWNrQmcubGluZVN0eWxlKDIsIDB4MGVhNWU5LCAwLjIpO1xuICAgICAgICBiYWNrQmcuc3Ryb2tlUm91bmRlZFJlY3QoLTIyLCAtMjIsIDQ0LCA0NCwgMTQpO1xuICAgICAgICBjb25zdCBiYWNrSWNvbiA9IHRoaXMuYWRkLnRleHQoMCwgMSwgJzwnLCB7XG4gICAgICAgICAgICBmb250RmFtaWx5OiAnQXJpYWwgQmxhY2snLFxuICAgICAgICAgICAgZm9udFNpemU6ICcyNnB4JyxcbiAgICAgICAgICAgIGNvbG9yOiAnIzBmMTcyYSdcbiAgICAgICAgfSkuc2V0T3JpZ2luKDAuNSk7XG4gICAgICAgIGNvbnN0IGJhY2tIaXQgPSB0aGlzLmFkZC56b25lKDAsIDAsIDQ0LCA0NClcbiAgICAgICAgICAgIC5zZXRPcmlnaW4oMC41KVxuICAgICAgICAgICAgLnNldEludGVyYWN0aXZlKHsgdXNlSGFuZEN1cnNvcjogdHJ1ZSB9KTtcbiAgICAgICAgYmFja0hpdC5vbigncG9pbnRlcnVwJywgKCkgPT4gdGhpcy5oYW5kbGVCYWNrVG9HYW1lTGlzdCgpKTtcbiAgICAgICAgdGhpcy5odWRCYWNrQnV0dG9uLmFkZChbYmFja0JnLCBiYWNrSWNvbl0pO1xuICAgICAgICB0aGlzLmh1ZEJhY2tCdXR0b24uc2V0U2l6ZSg0NCwgNDQpO1xuICAgICAgICB0aGlzLmh1ZEJhY2tCdXR0b24uYWRkKGJhY2tIaXQpO1xuXG4gICAgICAgIHRoaXMuaHVkUG9pbnRzUGlsbCA9IHRoaXMuYWRkLmNvbnRhaW5lcigwLCAwKTtcbiAgICAgICAgY29uc3QgcG9pbnRzQmcgPSB0aGlzLmFkZC5ncmFwaGljcygpO1xuICAgICAgICBjb25zdCBwb2ludHNXID0gMTY4O1xuICAgICAgICBjb25zdCBwb2ludHNIID0gNDQ7XG4gICAgICAgIHBvaW50c0JnLmZpbGxTdHlsZSgweGZmZmZmZiwgMC45OCk7XG4gICAgICAgIHBvaW50c0JnLmZpbGxSb3VuZGVkUmVjdCgtcG9pbnRzVyAvIDIsIC1wb2ludHNIIC8gMiwgcG9pbnRzVywgcG9pbnRzSCwgMjIpO1xuICAgICAgICBwb2ludHNCZy5saW5lU3R5bGUoMiwgMHhmNTllMGIsIDAuNCk7XG4gICAgICAgIHBvaW50c0JnLnN0cm9rZVJvdW5kZWRSZWN0KC1wb2ludHNXIC8gMiwgLXBvaW50c0ggLyAyLCBwb2ludHNXLCBwb2ludHNILCAyMik7XG4gICAgICAgIGNvbnN0IHN0YXIgPSB0aGlzLmFkZC5pbWFnZSgtcG9pbnRzVyAvIDIgKyAyNCwgMCwgJ3N0YXInKVxuICAgICAgICAgICAgLnNldFNjYWxlKDAuMzIpXG4gICAgICAgICAgICAuc2V0VGludCgweGZiYmYyNCk7XG4gICAgICAgIHRoaXMuc2NvcmVUZXh0ID0gdGhpcy5hZGQudGV4dCgtcG9pbnRzVyAvIDIgKyA0NiwgMCwgJ1BPSU5UUzogMDAnLCB7XG4gICAgICAgICAgICBmb250RmFtaWx5OiAnQXJpYWwgQmxhY2snLFxuICAgICAgICAgICAgZm9udFNpemU6ICcxOHB4JyxcbiAgICAgICAgICAgIGNvbG9yOiAnIzBmMTcyYSdcbiAgICAgICAgfSkuc2V0T3JpZ2luKDAsIDAuNSk7XG4gICAgICAgIHRoaXMuaHVkUG9pbnRzUGlsbC5hZGQoW3BvaW50c0JnLCBzdGFyLCB0aGlzLnNjb3JlVGV4dF0pO1xuXG4gICAgICAgIHRoaXMuaHVkVGltZXJQaWxsID0gdGhpcy5hZGQuY29udGFpbmVyKDAsIDApO1xuICAgICAgICBjb25zdCB0aW1lckJnID0gdGhpcy5hZGQuZ3JhcGhpY3MoKTtcbiAgICAgICAgY29uc3QgdGltZXJXID0gOTY7XG4gICAgICAgIGNvbnN0IHRpbWVySCA9IDQwO1xuICAgICAgICB0aW1lckJnLmZpbGxTdHlsZSgweGZmZmZmZiwgMC45OCk7XG4gICAgICAgIHRpbWVyQmcuZmlsbFJvdW5kZWRSZWN0KC10aW1lclcgLyAyLCAtdGltZXJIIC8gMiwgdGltZXJXLCB0aW1lckgsIDIwKTtcbiAgICAgICAgdGltZXJCZy5saW5lU3R5bGUoMiwgMHg5NGEzYjgsIDAuNCk7XG4gICAgICAgIHRpbWVyQmcuc3Ryb2tlUm91bmRlZFJlY3QoLXRpbWVyVyAvIDIsIC10aW1lckggLyAyLCB0aW1lclcsIHRpbWVySCwgMjApO1xuICAgICAgICB0aGlzLnRpbWVyVGV4dCA9IHRoaXMuYWRkLnRleHQoMCwgMCwgdGhpcy5mb3JtYXRUaW1lKE1hdGguY2VpbCh0aGlzLnJlbWFpbmluZ01zIC8gMTAwMCkpLCB7XG4gICAgICAgICAgICBmb250RmFtaWx5OiAnQXJpYWwgQmxhY2snLFxuICAgICAgICAgICAgZm9udFNpemU6ICcxNnB4JyxcbiAgICAgICAgICAgIGNvbG9yOiAnIzBmMTcyYSdcbiAgICAgICAgfSkuc2V0T3JpZ2luKDAuNSk7XG4gICAgICAgIHRoaXMuaHVkVGltZXJQaWxsLmFkZChbdGltZXJCZywgdGhpcy50aW1lclRleHRdKTtcblxuICAgICAgICB0aGlzLnVpUm9vdC5hZGQoW3RoaXMuaHVkQmFja0J1dHRvbiwgdGhpcy5odWRQb2ludHNQaWxsLCB0aGlzLmh1ZFRpbWVyUGlsbF0pO1xuICAgICAgICB0aGlzLmxheW91dEh1ZCgpO1xuICAgICAgICB0aGlzLmNyZWF0ZVRyYWZmaWNMaWdodCgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgbGF5b3V0SHVkICgpXG4gICAge1xuICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMuc2NhbGU7XG4gICAgICAgIGNvbnN0IHRvcEluc2V0ID0gTWF0aC5tYXgoMTYsIE1hdGgucm91bmQoaGVpZ2h0ICogMC4wMykpO1xuICAgICAgICBjb25zdCBzaWRlSW5zZXQgPSBNYXRoLm1heCgxNCwgTWF0aC5yb3VuZCh3aWR0aCAqIDAuMDQpKTtcbiAgICAgICAgY29uc3QgcmlnaHRFZGdlID0gd2lkdGggLSBzaWRlSW5zZXQ7XG4gICAgICAgIHRoaXMuaHVkQmFja0J1dHRvbi5zZXRQb3NpdGlvbihzaWRlSW5zZXQgKyAyMiwgdG9wSW5zZXQgKyAyMik7XG4gICAgICAgIHRoaXMuaHVkUG9pbnRzUGlsbC5zZXRQb3NpdGlvbih3aWR0aCAvIDIsIHRvcEluc2V0ICsgMjIpO1xuICAgICAgICB0aGlzLmh1ZFRpbWVyUGlsbC5zZXRQb3NpdGlvbihyaWdodEVkZ2UgLSA0OCwgdG9wSW5zZXQgKyAyMik7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVCYWNrVG9HYW1lTGlzdCAoKTogdm9pZFxuICAgIHtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnLyc7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVUcmFmZmljTGlnaHQgKClcbiAgICB7XG4gICAgICAgIGNvbnN0IGxpZ2h0SGVpZ2h0ID0gMjMwO1xuICAgICAgICBjb25zdCBzb3VyY2VIZWlnaHQgPSAxNDYzO1xuICAgICAgICBjb25zdCBzb3VyY2VXaWR0aCA9IDMzNTtcbiAgICAgICAgY29uc3QgbGlnaHRXaWR0aCA9IE1hdGgucm91bmQobGlnaHRIZWlnaHQgKiAoc291cmNlV2lkdGggLyBzb3VyY2VIZWlnaHQpKTtcbiAgICAgICAgY29uc3QgYmFzZVggPSA4ODtcbiAgICAgICAgY29uc3QgYmFzZVkgPSA4MDg7XG4gICAgICAgIGNvbnN0IGFuY2hvclkgPSBNYXRoLnJvdW5kKGJhc2VZICsgbGlnaHRIZWlnaHQgLyAyKTtcbiAgICAgICAgY29uc3QgbWFrZVZhcmlhbnQgPSAoa2V5OiBzdHJpbmcpID0+IHRoaXMuYWRkLmltYWdlKGJhc2VYLCBiYXNlWSwga2V5KVxuICAgICAgICAgICAgLnNldE9yaWdpbigwLjUsIDEpXG4gICAgICAgICAgICAuc2V0RGlzcGxheVNpemUobGlnaHRXaWR0aCwgbGlnaHRIZWlnaHQpXG4gICAgICAgICAgICAuc2V0RGVwdGgoMTAwMClcbiAgICAgICAgICAgIC5zZXRBbHBoYSgxKTtcblxuICAgICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmFkZC5jb250YWluZXIoYmFzZVgsIGFuY2hvclkpLnNldERlcHRoKDEwMDApO1xuICAgICAgICBjb25zdCBvZmZzZXRzID0ge1xuICAgICAgICAgICAgcmVkOiB7IHg6IDAsIHk6IDAgfSxcbiAgICAgICAgICAgIHllbGxvdzogeyB4OiAwLCB5OiAwIH0sXG4gICAgICAgICAgICBncmVlbjogeyB4OiAtMSwgeTogMCB9XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlZCA9IHRoaXMudGV4dHVyZXMuZXhpc3RzKCd0cmFpbi1saWdodC1yZWQnKVxuICAgICAgICAgICAgPyB0aGlzLmFkZC5pbWFnZSgwLCAwLCAndHJhaW4tbGlnaHQtcmVkJylcbiAgICAgICAgICAgIDogdGhpcy5hZGQucmVjdGFuZ2xlKDAsIDAsIGxpZ2h0V2lkdGgsIGxpZ2h0SGVpZ2h0LCAweGVmNDQ0NCwgMSk7XG4gICAgICAgIGNvbnN0IHllbGxvdyA9IHRoaXMudGV4dHVyZXMuZXhpc3RzKCd0cmFpbi1saWdodC15ZWxsb3cnKVxuICAgICAgICAgICAgPyB0aGlzLmFkZC5pbWFnZSgwLCAwLCAndHJhaW4tbGlnaHQteWVsbG93JylcbiAgICAgICAgICAgIDogdGhpcy5hZGQucmVjdGFuZ2xlKDAsIDAsIGxpZ2h0V2lkdGgsIGxpZ2h0SGVpZ2h0LCAweGZiYmYyNCwgMSk7XG4gICAgICAgIGNvbnN0IGdyZWVuID0gdGhpcy50ZXh0dXJlcy5leGlzdHMoJ3RyYWluLWxpZ2h0LWdyZWVuJylcbiAgICAgICAgICAgID8gdGhpcy5hZGQuaW1hZ2UoMCwgMCwgJ3RyYWluLWxpZ2h0LWdyZWVuJylcbiAgICAgICAgICAgIDogdGhpcy5hZGQucmVjdGFuZ2xlKDAsIDAsIGxpZ2h0V2lkdGgsIGxpZ2h0SGVpZ2h0LCAweDIyYzU1ZSwgMSk7XG5cbiAgICAgICAgY29uc3Qgbm9ybWFsaXplID0gKG9iajogUGhhc2VyLkdhbWVPYmplY3RzLkdhbWVPYmplY3QpID0+IHtcbiAgICAgICAgICAgIGlmICgnc2V0T3JpZ2luJyBpbiBvYmopIHtcbiAgICAgICAgICAgICAgICAob2JqIGFzIFBoYXNlci5HYW1lT2JqZWN0cy5JbWFnZSkuc2V0T3JpZ2luKDAuNSwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoJ3NldERpc3BsYXlTaXplJyBpbiBvYmopIHtcbiAgICAgICAgICAgICAgICAob2JqIGFzIFBoYXNlci5HYW1lT2JqZWN0cy5JbWFnZSkuc2V0RGlzcGxheVNpemUobGlnaHRXaWR0aCwgbGlnaHRIZWlnaHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBub3JtYWxpemUocmVkKTtcbiAgICAgICAgbm9ybWFsaXplKHllbGxvdyk7XG4gICAgICAgIG5vcm1hbGl6ZShncmVlbik7XG4gICAgICAgIHJlZC5zZXRQb3NpdGlvbihvZmZzZXRzLnJlZC54LCBvZmZzZXRzLnJlZC55KTtcbiAgICAgICAgeWVsbG93LnNldFBvc2l0aW9uKG9mZnNldHMueWVsbG93LngsIG9mZnNldHMueWVsbG93LnkpO1xuICAgICAgICBncmVlbi5zZXRQb3NpdGlvbihvZmZzZXRzLmdyZWVuLngsIG9mZnNldHMuZ3JlZW4ueSk7XG4gICAgICAgIGNvbnRhaW5lci5hZGQoW3JlZCwgeWVsbG93LCBncmVlbl0pO1xuXG4gICAgICAgIHRoaXMudHJhZmZpY0xpZ2h0VmFyaWFudHMgPSB7XG4gICAgICAgICAgICByZWQ6IHJlZCBhcyBQaGFzZXIuR2FtZU9iamVjdHMuSW1hZ2UsXG4gICAgICAgICAgICB5ZWxsb3c6IHllbGxvdyBhcyBQaGFzZXIuR2FtZU9iamVjdHMuSW1hZ2UsXG4gICAgICAgICAgICBncmVlbjogZ3JlZW4gYXMgUGhhc2VyLkdhbWVPYmplY3RzLkltYWdlXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudHJhZmZpY0xpZ2h0ID0gdGhpcy50cmFmZmljTGlnaHRWYXJpYW50cy5yZWQ7XG4gICAgICAgIGNvbnN0IGN5Y2xlOiBBcnJheTwncmVkJyB8ICd5ZWxsb3cnIHwgJ2dyZWVuJz4gPSBbJ3JlZCcsICd5ZWxsb3cnLCAnZ3JlZW4nXTtcbiAgICAgICAgbGV0IGN5Y2xlSW5kZXggPSAwO1xuICAgICAgICB0aGlzLnNldFRyYWZmaWNMaWdodENvbG9yKGN5Y2xlW2N5Y2xlSW5kZXhdKTtcbiAgICAgICAgdGhpcy50aW1lLmFkZEV2ZW50KHtcbiAgICAgICAgICAgIGRlbGF5OiA3MDAsXG4gICAgICAgICAgICBsb29wOiB0cnVlLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBjeWNsZUluZGV4ID0gKGN5Y2xlSW5kZXggKyAxKSAlIGN5Y2xlLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFRyYWZmaWNMaWdodENvbG9yKGN5Y2xlW2N5Y2xlSW5kZXhdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZXRUcmFmZmljTGlnaHRDb2xvciAoY29sb3I6ICdyZWQnIHwgJ3llbGxvdycgfCAnZ3JlZW4nKVxuICAgIHtcbiAgICAgICAgaWYgKCF0aGlzLnRyYWZmaWNMaWdodFZhcmlhbnRzKSByZXR1cm47XG4gICAgICAgIGlmICh0aGlzLnRyYWZmaWNMaWdodFN0YXRlID09PSBjb2xvcikgcmV0dXJuO1xuICAgICAgICB0aGlzLnRyYWZmaWNMaWdodFN0YXRlID0gY29sb3I7XG5cbiAgICAgICAgY29uc3QgeyByZWQsIHllbGxvdywgZ3JlZW4gfSA9IHRoaXMudHJhZmZpY0xpZ2h0VmFyaWFudHM7XG4gICAgICAgIHJlZC5zZXRWaXNpYmxlKGNvbG9yID09PSAncmVkJyk7XG4gICAgICAgIHllbGxvdy5zZXRWaXNpYmxlKGNvbG9yID09PSAneWVsbG93Jyk7XG4gICAgICAgIGdyZWVuLnNldFZpc2libGUoY29sb3IgPT09ICdncmVlbicpO1xuICAgIH1cblxuICAgIHByaXZhdGUgbGF5b3V0VHJhaW4gKClcbiAgICB7XG4gICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gdGhpcy5zY2FsZTtcbiAgICAgICAgY29uc3Qgc2NhbGVYID0gdGhpcy5iYWNrZ3JvdW5kLmRpc3BsYXlXaWR0aCAvIHRoaXMuYmFja2dyb3VuZC53aWR0aDtcbiAgICAgICAgY29uc3Qgc2NhbGVZID0gdGhpcy5iYWNrZ3JvdW5kLmRpc3BsYXlIZWlnaHQgLyB0aGlzLmJhY2tncm91bmQuaGVpZ2h0O1xuICAgICAgICBjb25zdCBzY2FsZSA9IE1hdGgubWluKHNjYWxlWCwgc2NhbGVZKSAqIHRoaXMudHJhaW5DYXJTY2FsZUZhY3RvcjtcblxuICAgICAgICBjb25zdCB0cmFja0N1cnZlID0gdGhpcy5jcmVhdGVUcmFja0N1cnZlKHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICBjb25zdCB0cmFja1BvaW50cyA9IHRoaXMuc2FtcGxlVHJhY2sodHJhY2tDdXJ2ZSwgdGhpcy5tYXhDYXJzKTtcblxuICAgICAgICB0aGlzLmNhclNsb3RzID0gW107XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1heENhcnM7IGkgKz0gMSkge1xuICAgICAgICAgICAgY29uc3QgY2FyS2V5ID0gYHRyYWluLWNhci0ke2kgKyAxfWA7XG4gICAgICAgICAgICBjb25zdCBwb2ludCA9IHRyYWNrUG9pbnRzW2ldID8/IHsgeDogd2lkdGggLyAyLCB5OiBoZWlnaHQgLyAyIH07XG4gICAgICAgICAgICBjb25zdCBhbmdsZSA9IHRoaXMuZ2V0VHJhY2tBbmdsZSh0cmFja1BvaW50cywgaSkgKyB0aGlzLnRyYWluUm90YXRpb25PZmZzZXQ7XG4gICAgICAgICAgICBjb25zdCBjYXIgPSB0aGlzLmFkZC5pbWFnZShwb2ludC54LCBwb2ludC55LCBjYXJLZXkpLnNldFNjYWxlKHNjYWxlKS5zZXRSb3RhdGlvbihhbmdsZSk7XG4gICAgICAgICAgICBjYXIuc2V0QWxwaGEoMSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGxvY2sgPSB0aGlzLmNyZWF0ZUxvY2tPdmVybGF5KHBvaW50LngsIHBvaW50LnksIGNhci5kaXNwbGF5V2lkdGgsIGNhci5kaXNwbGF5SGVpZ2h0LCBpKTtcbiAgICAgICAgICAgIGxvY2suc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgICAgICBsb2NrLmRpc2FibGVJbnRlcmFjdGl2ZSgpO1xuXG4gICAgICAgICAgICB0aGlzLmNhclNsb3RzLnB1c2goeyBpbmRleDogaSwgY2FyLCBsb2NrIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuY2FyU2xvdHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgcmVmZXJlbmNlQ2FyID0gdGhpcy5jYXJTbG90c1swXS5jYXI7XG4gICAgICAgICAgICBjb25zdCBjYXJMZW5ndGggPSBNYXRoLm1heChyZWZlcmVuY2VDYXIuZGlzcGxheVdpZHRoLCByZWZlcmVuY2VDYXIuZGlzcGxheUhlaWdodCk7XG4gICAgICAgICAgICB0aGlzLnRyYWluR2FwUHggPSBjYXJMZW5ndGggKiB0aGlzLnRyYWluQ2FyR2FwRmFjdG9yO1xuICAgICAgICAgICAgdGhpcy50cmFpblN0ZXBQeCA9IHRoaXMudHJhaW5HYXBQeDtcbiAgICAgICAgICAgIHRoaXMubGVhZENhckJhc2VTaXplID0ge1xuICAgICAgICAgICAgICAgIHdpZHRoOiByZWZlcmVuY2VDYXIuZGlzcGxheVdpZHRoLFxuICAgICAgICAgICAgICAgIGhlaWdodDogcmVmZXJlbmNlQ2FyLmRpc3BsYXlIZWlnaHRcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNhclNsb3RzWzBdPy5jYXIuc2V0VGV4dHVyZSgndHJhaW4tY2FyLTEnKTtcbiAgICAgICAgdGhpcy5zZXRMZWFkQ2FyU3RhdGUoJ2lkbGUnKTtcbiAgICAgICAgdGhpcy5yZWZyZXNoTG9ja3MoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldExlYWRDYXJUZXh0dXJlS2V5IChzdGF0ZTogTGVhZENhclN0YXRlKVxuICAgIHtcbiAgICAgICAgc3dpdGNoIChzdGF0ZSkge1xuICAgICAgICAgICAgY2FzZSAnY29ycmVjdCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuICd0cmFpbi1mb3gtY29ycmVjdCc7XG4gICAgICAgICAgICBjYXNlICdpbmNvcnJlY3QnOlxuICAgICAgICAgICAgICAgIHJldHVybiAndHJhaW4tZm94LWluY29ycmVjdCc7XG4gICAgICAgICAgICBjYXNlICdpZGxlJzpcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuICd0cmFpbi1mb3gtaWRsZSc7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHNldExlYWRDYXJTdGF0ZSAoc3RhdGU6IExlYWRDYXJTdGF0ZSlcbiAgICB7XG4gICAgICAgIHRoaXMubGVhZENhclN0YXRlID0gc3RhdGU7XG4gICAgICAgIGNvbnN0IGxlYWRDYXIgPSB0aGlzLmNhclNsb3RzWzBdPy5jYXI7XG4gICAgICAgIGlmICghbGVhZENhcikgcmV0dXJuO1xuICAgICAgICBpZiAoIWxlYWRDYXIuc2NlbmUpIHJldHVybjtcbiAgICAgICAgaWYgKHRoaXMubGVhZENhckJhZGdlICYmICF0aGlzLmxlYWRDYXJCYWRnZS5zY2VuZSkge1xuICAgICAgICAgICAgdGhpcy5sZWFkQ2FyQmFkZ2UgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxlYWRDYXIudGV4dHVyZS5rZXkgIT09ICd0cmFpbi1jYXItMScpIHtcbiAgICAgICAgICAgIGxlYWRDYXIuc2V0VGV4dHVyZSgndHJhaW4tY2FyLTEnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5sZWFkQ2FyQmFzZVNpemUpIHtcbiAgICAgICAgICAgIGxlYWRDYXIuc2V0RGlzcGxheVNpemUodGhpcy5sZWFkQ2FyQmFzZVNpemUud2lkdGgsIHRoaXMubGVhZENhckJhc2VTaXplLmhlaWdodCk7XG4gICAgICAgICAgICBsZWFkQ2FyLnNldE9yaWdpbigwLjUsIDAuNSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB0ZXh0dXJlS2V5ID0gdGhpcy5nZXRMZWFkQ2FyVGV4dHVyZUtleShzdGF0ZSk7XG4gICAgICAgIGlmICghdGhpcy50ZXh0dXJlcy5leGlzdHModGV4dHVyZUtleSkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmxlYWRDYXJCYWRnZSkgdGhpcy5sZWFkQ2FyQmFkZ2Uuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMubGVhZENhckJhZGdlKSB7XG4gICAgICAgICAgICB0aGlzLmxlYWRDYXJCYWRnZSA9IHRoaXMuYWRkLmltYWdlKGxlYWRDYXIueCwgbGVhZENhci55LCB0ZXh0dXJlS2V5KVxuICAgICAgICAgICAgICAgIC5zZXREZXB0aChsZWFkQ2FyLmRlcHRoICsgMSlcbiAgICAgICAgICAgICAgICAuc2V0T3JpZ2luKDAuNSwgMC41KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubGVhZENhckJhZGdlLnNldFRleHR1cmUodGV4dHVyZUtleSkuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmxlYWRDYXJCYXNlU2l6ZSAmJiB0aGlzLmxlYWRDYXJCYWRnZSAmJiB0aGlzLmxlYWRDYXJCYWRnZS5zY2VuZSkge1xuICAgICAgICAgICAgdGhpcy5sZWFkQ2FyQmFkZ2Uuc2V0RGlzcGxheVNpemUodGhpcy5sZWFkQ2FyQmFzZVNpemUud2lkdGggKiAwLjUsIHRoaXMubGVhZENhckJhc2VTaXplLmhlaWdodCAqIDAuNSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZUxvY2tPdmVybGF5ICh4OiBudW1iZXIsIHk6IG51bWJlciwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIGluZGV4OiBudW1iZXIpXG4gICAge1xuICAgICAgICBjb25zdCBsb2NrID0gdGhpcy5hZGQuY29udGFpbmVyKHgsIHkpO1xuICAgICAgICBsb2NrLnNldERlcHRoKDEwKTtcbiAgICAgICAgY29uc3QgcGFuZWxXID0gTWF0aC5tYXgoMTQwLCB3aWR0aCAqIDAuNik7XG4gICAgICAgIGNvbnN0IHBhbmVsSCA9IE1hdGgubWF4KDQ4LCBoZWlnaHQgKiAwLjM1KTtcblxuICAgICAgICBjb25zdCBiZyA9IHRoaXMuYWRkLnJlY3RhbmdsZSgwLCAwLCBwYW5lbFcsIHBhbmVsSCwgMHgxZjI5MzcsIDAuOSk7XG4gICAgICAgIGJnLnNldFN0cm9rZVN0eWxlKDIsIDB4ZmJiZjI0LCAwLjkpO1xuXG4gICAgICAgIGNvbnN0IHRleHQgPSB0aGlzLmFkZC50ZXh0KDAsIDAsICdVTkxPQ0snLCB7XG4gICAgICAgICAgICBmb250RmFtaWx5OiAnQXJpYWwgQmxhY2snLFxuICAgICAgICAgICAgZm9udFNpemU6ICcxOHB4JyxcbiAgICAgICAgICAgIGNvbG9yOiAnI2Y4ZmFmYydcbiAgICAgICAgfSkuc2V0T3JpZ2luKDAuNSk7XG5cbiAgICAgICAgbG9jay5hZGQoW2JnLCB0ZXh0XSk7XG4gICAgICAgIGxvY2suc2V0U2l6ZShwYW5lbFcsIHBhbmVsSCk7XG4gICAgICAgIGNvbnN0IGhpdEFyZWEgPSBuZXcgUGhhc2VyLkdlb20uUmVjdGFuZ2xlKC1wYW5lbFcgLyAyLCAtcGFuZWxIIC8gMiwgcGFuZWxXLCBwYW5lbEgpO1xuICAgICAgICBsb2NrLnNldEludGVyYWN0aXZlKGhpdEFyZWEsIFBoYXNlci5HZW9tLlJlY3RhbmdsZS5Db250YWlucyk7XG4gICAgICAgIGxvY2suc2V0RGF0YSgnaGl0QXJlYScsIGhpdEFyZWEpO1xuXG4gICAgICAgIGxvY2sub24oJ3BvaW50ZXJvdmVyJywgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMucXVpek9wZW4gfHwgdGhpcy5nYW1lT3ZlcikgcmV0dXJuO1xuICAgICAgICAgICAgYmcuc2V0RmlsbFN0eWxlKDB4MzM0MTU1LCAwLjk1KTtcbiAgICAgICAgICAgIGxvY2suc2V0U2NhbGUoMS4wNSk7XG4gICAgICAgICAgICB0aGlzLmlucHV0LnNldERlZmF1bHRDdXJzb3IoJ3BvaW50ZXInKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbG9jay5vbigncG9pbnRlcm91dCcsICgpID0+IHtcbiAgICAgICAgICAgIGJnLnNldEZpbGxTdHlsZSgweDFmMjkzNywgMC45KTtcbiAgICAgICAgICAgIGxvY2suc2V0U2NhbGUoMSk7XG4gICAgICAgICAgICB0aGlzLmlucHV0LnNldERlZmF1bHRDdXJzb3IoJ2RlZmF1bHQnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbG9jay5vbigncG9pbnRlcmRvd24nLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5xdWl6T3BlbiB8fCB0aGlzLmdhbWVPdmVyKSByZXR1cm47XG4gICAgICAgICAgICBpZiAoaW5kZXggIT09IHRoaXMuY3VycmVudEluZGV4KSByZXR1cm47XG4gICAgICAgICAgICB0aGlzLm9wZW5RdWVzdGlvbihpbmRleCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBsb2NrO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVmcmVzaExvY2tzICgpXG4gICAge1xuICAgICAgICB0aGlzLmNhclNsb3RzLmZvckVhY2goKHNsb3QpID0+IHtcbiAgICAgICAgICAgIGlmICghc2xvdCB8fCAhc2xvdC5jYXIgfHwgIXNsb3QubG9jaykgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKCFzbG90LmNhci5zY2VuZSB8fCAhc2xvdC5sb2NrLnNjZW5lKSByZXR1cm47XG4gICAgICAgICAgICBzbG90LmNhci5zZXRBbHBoYSgxKTtcbiAgICAgICAgICAgIHNsb3QubG9jay5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgICAgIGlmIChzbG90LmxvY2suaW5wdXQpIHtcbiAgICAgICAgICAgICAgICBzbG90LmxvY2suZGlzYWJsZUludGVyYWN0aXZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHBvaW50cyA9IE1hdGgubWF4KDAsIHRoaXMuc2NvcmUpO1xuICAgICAgICB0aGlzLnNjb3JlVGV4dC5zZXRUZXh0KGBQT0lOVFM6ICR7cG9pbnRzLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX1gKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZVF1aXpNb2RhbCAoKVxuICAgIHtcbiAgICAgICAgdGhpcy5xdWl6UGFuZWwgPSBuZXcgUXVpelBhbmVsKHRoaXMsIHsgb3B0aW9uQ291bnQ6IDQsIGRlcHRoOiAyMDAwLCBwYXJlbnQ6IHRoaXMudWlSb290LCBzaG93SW5kZXg6IHRydWUgfSk7XG4gICAgICAgIHRoaXMucXVpek1vZGFsID0gdGhpcy5xdWl6UGFuZWwuY29udGFpbmVyO1xuXG4gICAgICAgIHRoaXMucXVpelBhbmVsLm9uT3B0aW9uU2VsZWN0ZWQoKGluZGV4KSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5xdWl6TG9ja2VkKSByZXR1cm47XG4gICAgICAgICAgICB2b2lkIHRoaXMuaGFuZGxlQW5zd2VyKGluZGV4KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5sYXlvdXRRdWl6KCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVTdGFydE1vZGFsICgpXG4gICAge1xuICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMuc2NhbGU7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuYWRkLmNvbnRhaW5lcigwLCAwKS5zZXREZXB0aCgyMTAwKS5zZXRWaXNpYmxlKGZhbHNlKTtcblxuICAgICAgICBjb25zdCBvdmVybGF5ID0gdGhpcy5hZGQucmVjdGFuZ2xlKDAsIDAsIHdpZHRoLCBoZWlnaHQsIDB4ZmZmZmZmLCAwLjEyKS5zZXRPcmlnaW4oMCwgMCk7XG5cbiAgICAgICAgY29uc3QgcGFuZWwgPSB0aGlzLmFkZC5jb250YWluZXIod2lkdGggLyAyLCBNYXRoLnJvdW5kKGhlaWdodCAqIDAuNTYpKTtcbiAgICAgICAgY29uc3QgcGFuZWxXaWR0aCA9IE1hdGgubWluKDYyMCwgd2lkdGggLSA4MCk7XG4gICAgICAgIGNvbnN0IHBhbmVsSGVpZ2h0ID0gTWF0aC5taW4oMjIwLCBNYXRoLnJvdW5kKGhlaWdodCAqIDAuMzIpKTtcblxuICAgICAgICBjb25zdCBwYW5lbFNoYWRvdyA9IHRoaXMuYWRkLmdyYXBoaWNzKCk7XG4gICAgICAgIHBhbmVsU2hhZG93LmZpbGxTdHlsZSgweDAwMDAwMCwgMC4xOCk7XG4gICAgICAgIHBhbmVsU2hhZG93LmZpbGxSb3VuZGVkUmVjdCgtcGFuZWxXaWR0aCAvIDIgKyA4LCAtcGFuZWxIZWlnaHQgLyAyICsgMTAsIHBhbmVsV2lkdGgsIHBhbmVsSGVpZ2h0LCAzMCk7XG5cbiAgICAgICAgY29uc3QgcGFuZWxCZyA9IHRoaXMuYWRkLmdyYXBoaWNzKCk7XG4gICAgICAgIHBhbmVsQmcuZmlsbFN0eWxlKDB4ZmZmZmZmLCAwLjg1KTtcbiAgICAgICAgcGFuZWxCZy5maWxsUm91bmRlZFJlY3QoLXBhbmVsV2lkdGggLyAyLCAtcGFuZWxIZWlnaHQgLyAyLCBwYW5lbFdpZHRoLCBwYW5lbEhlaWdodCwgMjgpO1xuICAgICAgICBwYW5lbEJnLmxpbmVTdHlsZSgyLCAweGZmZmZmZiwgMC42NSk7XG4gICAgICAgIHBhbmVsQmcuc3Ryb2tlUm91bmRlZFJlY3QoLXBhbmVsV2lkdGggLyAyLCAtcGFuZWxIZWlnaHQgLyAyLCBwYW5lbFdpZHRoLCBwYW5lbEhlaWdodCwgMjgpO1xuXG4gICAgICAgIGNvbnN0IHRpdGxlID0gdGhpcy5hZGQudGV4dCgwLCAtMzgsICdBbnN3ZXIgdGhlIHF1ZXN0aW9ucyB0byBoZWxwIHRoZVxcbnRyYWluIGdvIGFoZWFkLicsIHtcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCBCbGFjaycsXG4gICAgICAgICAgICBmb250U2l6ZTogJzIwcHgnLFxuICAgICAgICAgICAgY29sb3I6ICcjMGYxNzJhJyxcbiAgICAgICAgICAgIGFsaWduOiAnY2VudGVyJyxcbiAgICAgICAgICAgIGxpbmVTcGFjaW5nOiA2XG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUpO1xuXG4gICAgICAgIGNvbnN0IGJ1dHRvbiA9IHRoaXMuY3JlYXRlU3RhcnRCdXR0b24oMCwgTWF0aC5yb3VuZChwYW5lbEhlaWdodCAqIDAuMjMpKTtcblxuICAgICAgICBwYW5lbC5hZGQoW3BhbmVsU2hhZG93LCBwYW5lbEJnLCB0aXRsZSwgYnV0dG9uXSk7XG4gICAgICAgIGNvbnRhaW5lci5hZGQoW292ZXJsYXksIHBhbmVsXSk7XG5cbiAgICAgICAgdGhpcy5zdGFydE1vZGFsID0gY29udGFpbmVyO1xuICAgICAgICB0aGlzLnN0YXJ0TW9kYWxQYW5lbCA9IHBhbmVsO1xuICAgICAgICB0aGlzLnVpUm9vdC5hZGQoY29udGFpbmVyKTtcbiAgICAgICAgdGhpcy5sYXlvdXRTdGFydE1vZGFsKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVUaW1lVXBNb2RhbCAoKVxuICAgIHtcbiAgICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSB0aGlzLnNjYWxlO1xuICAgICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmFkZC5jb250YWluZXIoMCwgMCkuc2V0RGVwdGgoMjIwMCkuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgIGNvbnN0IG92ZXJsYXkgPSB0aGlzLmFkZC5yZWN0YW5nbGUoMCwgMCwgd2lkdGgsIGhlaWdodCwgMHgwMDAwMDAsIDAuMSkuc2V0T3JpZ2luKDAsIDApO1xuXG4gICAgICAgIGNvbnN0IHBhbmVsID0gdGhpcy5hZGQuY29udGFpbmVyKHdpZHRoIC8gMiwgTWF0aC5yb3VuZChoZWlnaHQgKiAwLjU2KSk7XG4gICAgICAgIGNvbnN0IHBhbmVsV2lkdGggPSBNYXRoLm1pbig2MjAsIHdpZHRoIC0gODApO1xuICAgICAgICBjb25zdCBwYW5lbEhlaWdodCA9IE1hdGgubWluKDIyMCwgTWF0aC5yb3VuZChoZWlnaHQgKiAwLjMyKSk7XG5cbiAgICAgICAgY29uc3QgcGFuZWxTaGFkb3cgPSB0aGlzLmFkZC5ncmFwaGljcygpO1xuICAgICAgICBwYW5lbFNoYWRvdy5maWxsU3R5bGUoMHgwMDAwMDAsIDAuMTgpO1xuICAgICAgICBwYW5lbFNoYWRvdy5maWxsUm91bmRlZFJlY3QoLXBhbmVsV2lkdGggLyAyICsgOCwgLXBhbmVsSGVpZ2h0IC8gMiArIDEwLCBwYW5lbFdpZHRoLCBwYW5lbEhlaWdodCwgMzApO1xuXG4gICAgICAgIGNvbnN0IHBhbmVsQmcgPSB0aGlzLmFkZC5ncmFwaGljcygpO1xuICAgICAgICBwYW5lbEJnLmZpbGxTdHlsZSgweGZmZmZmZiwgMC44NSk7XG4gICAgICAgIHBhbmVsQmcuZmlsbFJvdW5kZWRSZWN0KC1wYW5lbFdpZHRoIC8gMiwgLXBhbmVsSGVpZ2h0IC8gMiwgcGFuZWxXaWR0aCwgcGFuZWxIZWlnaHQsIDI4KTtcbiAgICAgICAgcGFuZWxCZy5saW5lU3R5bGUoMiwgMHhmZmZmZmYsIDAuNjUpO1xuICAgICAgICBwYW5lbEJnLnN0cm9rZVJvdW5kZWRSZWN0KC1wYW5lbFdpZHRoIC8gMiwgLXBhbmVsSGVpZ2h0IC8gMiwgcGFuZWxXaWR0aCwgcGFuZWxIZWlnaHQsIDI4KTtcblxuICAgICAgICB0aGlzLnRpbWVVcFRpdGxlVGV4dCA9IHRoaXMuYWRkLnRleHQoMCwgLTE0LCAnT3V0IG9mIHRpbWUhIEZhaWxlZCEnLCB7XG4gICAgICAgICAgICBmb250RmFtaWx5OiAnQXJpYWwgQmxhY2snLFxuICAgICAgICAgICAgZm9udFNpemU6ICcyMHB4JyxcbiAgICAgICAgICAgIGNvbG9yOiAnIzBmMTcyYScsXG4gICAgICAgICAgICBhbGlnbjogJ2NlbnRlcidcbiAgICAgICAgfSkuc2V0T3JpZ2luKDAuNSk7XG5cbiAgICAgICAgY29uc3QgYnV0dG9uID0gdGhpcy5jcmVhdGVUaW1lb3V0QnV0dG9uKDAsIE1hdGgucm91bmQocGFuZWxIZWlnaHQgKiAwLjIzKSk7XG5cbiAgICAgICAgcGFuZWwuYWRkKFtwYW5lbFNoYWRvdywgcGFuZWxCZywgdGhpcy50aW1lVXBUaXRsZVRleHQsIGJ1dHRvbl0pO1xuICAgICAgICBjb250YWluZXIuYWRkKFtvdmVybGF5LCBwYW5lbF0pO1xuXG4gICAgICAgIHRoaXMudGltZVVwTW9kYWwgPSBjb250YWluZXI7XG4gICAgICAgIHRoaXMudGltZVVwTW9kYWxQYW5lbCA9IHBhbmVsO1xuICAgICAgICB0aGlzLnVpUm9vdC5hZGQoY29udGFpbmVyKTtcbiAgICAgICAgdGhpcy5sYXlvdXRUaW1lVXBNb2RhbCgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgbGF5b3V0U3RhcnRNb2RhbCAoKVxuICAgIHtcbiAgICAgICAgaWYgKCF0aGlzLnN0YXJ0TW9kYWwgfHwgIXRoaXMuc3RhcnRNb2RhbFBhbmVsKSByZXR1cm47XG4gICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gdGhpcy5zY2FsZTtcbiAgICAgICAgY29uc3Qgb3ZlcmxheSA9IHRoaXMuc3RhcnRNb2RhbC5saXN0WzBdO1xuICAgICAgICBpZiAob3ZlcmxheSAmJiAnc2V0U2l6ZScgaW4gb3ZlcmxheSkge1xuICAgICAgICAgICAgKG92ZXJsYXkgYXMgUGhhc2VyLkdhbWVPYmplY3RzLlJlY3RhbmdsZSkuc2V0U2l6ZSh3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0YXJ0TW9kYWxQYW5lbC5zZXRQb3NpdGlvbih3aWR0aCAvIDIsIE1hdGgucm91bmQoaGVpZ2h0ICogMC41NikpO1xuICAgIH1cblxuICAgIHByaXZhdGUgbGF5b3V0VGltZVVwTW9kYWwgKClcbiAgICB7XG4gICAgICAgIGlmICghdGhpcy50aW1lVXBNb2RhbCB8fCAhdGhpcy50aW1lVXBNb2RhbFBhbmVsKSByZXR1cm47XG4gICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gdGhpcy5zY2FsZTtcbiAgICAgICAgY29uc3Qgb3ZlcmxheSA9IHRoaXMudGltZVVwTW9kYWwubGlzdFswXTtcbiAgICAgICAgaWYgKG92ZXJsYXkgJiYgJ3NldFNpemUnIGluIG92ZXJsYXkpIHtcbiAgICAgICAgICAgIChvdmVybGF5IGFzIFBoYXNlci5HYW1lT2JqZWN0cy5SZWN0YW5nbGUpLnNldFNpemUod2lkdGgsIGhlaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50aW1lVXBNb2RhbFBhbmVsLnNldFBvc2l0aW9uKHdpZHRoIC8gMiwgTWF0aC5yb3VuZChoZWlnaHQgKiAwLjU2KSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVTdGFydEJ1dHRvbiAoeDogbnVtYmVyLCB5OiBudW1iZXIpXG4gICAge1xuICAgICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmFkZC5jb250YWluZXIoeCwgeSk7XG4gICAgICAgIGNvbnN0IHdpZHRoID0gNTMwO1xuICAgICAgICBjb25zdCBoZWlnaHQgPSA3MjtcbiAgICAgICAgY29uc3QgcmFkaXVzID0gMzA7XG5cbiAgICAgICAgY29uc3Qgc2hhZG93ID0gdGhpcy5hZGQuZ3JhcGhpY3MoKTtcbiAgICAgICAgc2hhZG93LmZpbGxTdHlsZSgweDFlM2E4YSwgMC4xOCk7XG4gICAgICAgIHNoYWRvdy5maWxsUm91bmRlZFJlY3QoLXdpZHRoIC8gMiArIDQsIC1oZWlnaHQgLyAyICsgNiwgd2lkdGgsIGhlaWdodCwgcmFkaXVzKTtcblxuICAgICAgICBjb25zdCBiZyA9IHRoaXMuYWRkLmdyYXBoaWNzKCk7XG4gICAgICAgIGNvbnN0IGRyYXcgPSAoZmlsbDogbnVtYmVyLCBzdHJva2U6IG51bWJlcikgPT4ge1xuICAgICAgICAgICAgYmcuY2xlYXIoKTtcbiAgICAgICAgICAgIGJnLmZpbGxTdHlsZShmaWxsLCAxKTtcbiAgICAgICAgICAgIGJnLmZpbGxSb3VuZGVkUmVjdCgtd2lkdGggLyAyLCAtaGVpZ2h0IC8gMiwgd2lkdGgsIGhlaWdodCwgcmFkaXVzKTtcbiAgICAgICAgICAgIGJnLmxpbmVTdHlsZSgyLCBzdHJva2UsIDAuNjUpO1xuICAgICAgICAgICAgYmcuc3Ryb2tlUm91bmRlZFJlY3QoLXdpZHRoIC8gMiwgLWhlaWdodCAvIDIsIHdpZHRoLCBoZWlnaHQsIHJhZGl1cyk7XG4gICAgICAgIH07XG4gICAgICAgIGRyYXcoMHgzYjgyZjYsIDB4OTNjNWZkKTtcblxuICAgICAgICBjb25zdCB0ZXh0ID0gdGhpcy5hZGQudGV4dCgwLCAxLCAnU3RhcnQgR2FtZScsIHtcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCBCbGFjaycsXG4gICAgICAgICAgICBmb250U2l6ZTogJzM0cHgnLFxuICAgICAgICAgICAgY29sb3I6ICcjZmZmZmZmJ1xuICAgICAgICB9KS5zZXRPcmlnaW4oMC41KS5zZXRTY2FsZSgwLjY2KTtcblxuICAgICAgICBjb25zdCBoaXQgPSB0aGlzLmFkZC5yZWN0YW5nbGUoMCwgMCwgd2lkdGggKyAxNiwgaGVpZ2h0ICsgMTYsIDB4ZmZmZmZmLCAwLjAwMSk7XG4gICAgICAgIGhpdC5zZXRJbnRlcmFjdGl2ZSgpO1xuXG4gICAgICAgIGNvbnRhaW5lci5hZGQoW3NoYWRvdywgYmcsIHRleHQsIGhpdF0pO1xuICAgICAgICBjb250YWluZXIuc2V0U2l6ZSh3aWR0aCwgaGVpZ2h0KTtcblxuICAgICAgICBoaXQub24oJ3BvaW50ZXJvdmVyJywgKCkgPT4ge1xuICAgICAgICAgICAgZHJhdygweDI1NjNlYiwgMHhiZmRiZmUpO1xuICAgICAgICAgICAgdGhpcy5pbnB1dC5zZXREZWZhdWx0Q3Vyc29yKCdwb2ludGVyJyk7XG4gICAgICAgICAgICB0aGlzLnR3ZWVucy5hZGQoeyB0YXJnZXRzOiBjb250YWluZXIsIHNjYWxlOiAxLjAyLCBkdXJhdGlvbjogMTAwLCBlYXNlOiAnU2luZS5lYXNlT3V0JyB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGhpdC5vbigncG9pbnRlcm91dCcsICgpID0+IHtcbiAgICAgICAgICAgIGRyYXcoMHgzYjgyZjYsIDB4OTNjNWZkKTtcbiAgICAgICAgICAgIHRoaXMuaW5wdXQuc2V0RGVmYXVsdEN1cnNvcignZGVmYXVsdCcpO1xuICAgICAgICAgICAgdGhpcy50d2VlbnMuYWRkKHsgdGFyZ2V0czogY29udGFpbmVyLCBzY2FsZTogMSwgZHVyYXRpb246IDEwMCwgZWFzZTogJ1NpbmUuZWFzZU91dCcgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBoaXQub24oJ3BvaW50ZXJkb3duJywgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnN0YXJ0TW9kYWxPcGVuKSByZXR1cm47XG4gICAgICAgICAgICBkcmF3KDB4MWQ0ZWQ4LCAweGJmZGJmZSk7XG4gICAgICAgICAgICB0aGlzLnR3ZWVucy5hZGQoeyB0YXJnZXRzOiBjb250YWluZXIsIHNjYWxlOiAwLjk4LCBkdXJhdGlvbjogNzAsIGVhc2U6ICdTaW5lLmVhc2VPdXQnIH0pO1xuICAgICAgICAgICAgdGhpcy5zdGFydEdhbWVGbG93KCk7XG4gICAgICAgIH0pO1xuICAgICAgICBoaXQub24oJ3BvaW50ZXJ1cCcsICgpID0+IHtcbiAgICAgICAgICAgIGRyYXcoMHgyNTYzZWIsIDB4YmZkYmZlKTtcbiAgICAgICAgICAgIHRoaXMudHdlZW5zLmFkZCh7IHRhcmdldHM6IGNvbnRhaW5lciwgc2NhbGU6IDEuMDIsIGR1cmF0aW9uOiA3MCwgZWFzZTogJ1NpbmUuZWFzZU91dCcgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMudHdlZW5zLmFkZCh7XG4gICAgICAgICAgICB0YXJnZXRzOiBjb250YWluZXIsXG4gICAgICAgICAgICBzY2FsZTogMS4wMyxcbiAgICAgICAgICAgIGR1cmF0aW9uOiA4NTAsXG4gICAgICAgICAgICB5b3lvOiB0cnVlLFxuICAgICAgICAgICAgcmVwZWF0OiAtMVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gY29udGFpbmVyO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlVGltZW91dEJ1dHRvbiAoeDogbnVtYmVyLCB5OiBudW1iZXIpXG4gICAge1xuICAgICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmFkZC5jb250YWluZXIoeCwgeSk7XG4gICAgICAgIGNvbnN0IHdpZHRoID0gNTMwO1xuICAgICAgICBjb25zdCBoZWlnaHQgPSA3MjtcbiAgICAgICAgY29uc3QgcmFkaXVzID0gMzA7XG5cbiAgICAgICAgY29uc3Qgc2hhZG93ID0gdGhpcy5hZGQuZ3JhcGhpY3MoKTtcbiAgICAgICAgc2hhZG93LmZpbGxTdHlsZSgweDFlM2E4YSwgMC4xOCk7XG4gICAgICAgIHNoYWRvdy5maWxsUm91bmRlZFJlY3QoLXdpZHRoIC8gMiArIDQsIC1oZWlnaHQgLyAyICsgNiwgd2lkdGgsIGhlaWdodCwgcmFkaXVzKTtcblxuICAgICAgICBjb25zdCBiZyA9IHRoaXMuYWRkLmdyYXBoaWNzKCk7XG4gICAgICAgIGNvbnN0IGRyYXcgPSAoZmlsbDogbnVtYmVyLCBzdHJva2U6IG51bWJlcikgPT4ge1xuICAgICAgICAgICAgYmcuY2xlYXIoKTtcbiAgICAgICAgICAgIGJnLmZpbGxTdHlsZShmaWxsLCAxKTtcbiAgICAgICAgICAgIGJnLmZpbGxSb3VuZGVkUmVjdCgtd2lkdGggLyAyLCAtaGVpZ2h0IC8gMiwgd2lkdGgsIGhlaWdodCwgcmFkaXVzKTtcbiAgICAgICAgICAgIGJnLmxpbmVTdHlsZSgyLCBzdHJva2UsIDAuNjUpO1xuICAgICAgICAgICAgYmcuc3Ryb2tlUm91bmRlZFJlY3QoLXdpZHRoIC8gMiwgLWhlaWdodCAvIDIsIHdpZHRoLCBoZWlnaHQsIHJhZGl1cyk7XG4gICAgICAgIH07XG4gICAgICAgIGRyYXcoMHgzYjgyZjYsIDB4OTNjNWZkKTtcblxuICAgICAgICBjb25zdCB0ZXh0ID0gdGhpcy5hZGQudGV4dCgwLCAxLCAnUGxheSBBZ2FpbicsIHtcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCBCbGFjaycsXG4gICAgICAgICAgICBmb250U2l6ZTogJzM0cHgnLFxuICAgICAgICAgICAgY29sb3I6ICcjZmZmZmZmJ1xuICAgICAgICB9KS5zZXRPcmlnaW4oMC41KS5zZXRTY2FsZSgwLjY2KTtcblxuICAgICAgICBjb25zdCBoaXQgPSB0aGlzLmFkZC5yZWN0YW5nbGUoMCwgMCwgd2lkdGggKyAxNiwgaGVpZ2h0ICsgMTYsIDB4ZmZmZmZmLCAwLjAwMSk7XG4gICAgICAgIGhpdC5zZXRJbnRlcmFjdGl2ZSgpO1xuXG4gICAgICAgIGNvbnRhaW5lci5hZGQoW3NoYWRvdywgYmcsIHRleHQsIGhpdF0pO1xuICAgICAgICBjb250YWluZXIuc2V0U2l6ZSh3aWR0aCwgaGVpZ2h0KTtcblxuICAgICAgICBoaXQub24oJ3BvaW50ZXJvdmVyJywgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGhpdC5nZXREYXRhKCdyZXN0YXJ0aW5nJykpIHJldHVybjtcbiAgICAgICAgICAgIGRyYXcoMHgyNTYzZWIsIDB4YmZkYmZlKTtcbiAgICAgICAgICAgIHRoaXMuaW5wdXQuc2V0RGVmYXVsdEN1cnNvcigncG9pbnRlcicpO1xuICAgICAgICAgICAgdGhpcy50d2VlbnMuYWRkKHsgdGFyZ2V0czogY29udGFpbmVyLCBzY2FsZTogMS4wMiwgZHVyYXRpb246IDEwMCwgZWFzZTogJ1NpbmUuZWFzZU91dCcgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBoaXQub24oJ3BvaW50ZXJvdXQnLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoaGl0LmdldERhdGEoJ3Jlc3RhcnRpbmcnKSkgcmV0dXJuO1xuICAgICAgICAgICAgZHJhdygweDNiODJmNiwgMHg5M2M1ZmQpO1xuICAgICAgICAgICAgdGhpcy5pbnB1dC5zZXREZWZhdWx0Q3Vyc29yKCdkZWZhdWx0Jyk7XG4gICAgICAgICAgICB0aGlzLnR3ZWVucy5hZGQoeyB0YXJnZXRzOiBjb250YWluZXIsIHNjYWxlOiAxLCBkdXJhdGlvbjogMTAwLCBlYXNlOiAnU2luZS5lYXNlT3V0JyB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGhpdC5vbigncG9pbnRlcmRvd24nLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoaGl0LmdldERhdGEoJ3Jlc3RhcnRpbmcnKSkgcmV0dXJuO1xuICAgICAgICAgICAgaGl0LnNldERhdGEoJ3Jlc3RhcnRpbmcnLCB0cnVlKTtcbiAgICAgICAgICAgIGhpdC5kaXNhYmxlSW50ZXJhY3RpdmUoKTtcbiAgICAgICAgICAgIGRyYXcoMHgxZDRlZDgsIDB4YmZkYmZlKTtcbiAgICAgICAgICAgIHRoaXMudHdlZW5zLmFkZCh7IHRhcmdldHM6IGNvbnRhaW5lciwgc2NhbGU6IDAuOTgsIGR1cmF0aW9uOiA3MCwgZWFzZTogJ1NpbmUuZWFzZU91dCcgfSk7XG4gICAgICAgICAgICB0aGlzLnRpbWUuZGVsYXllZENhbGwoOTAsICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc3lzLmlzQWN0aXZlKCkpIHJldHVybjtcbiAgICAgICAgICAgICAgICB0aGlzLnJlc3RhcnRUcmFpblJ1bigpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBoaXQub24oJ3BvaW50ZXJ1cCcsICgpID0+IHtcbiAgICAgICAgICAgIGlmIChoaXQuZ2V0RGF0YSgncmVzdGFydGluZycpKSByZXR1cm47XG4gICAgICAgICAgICBkcmF3KDB4MjU2M2ViLCAweGJmZGJmZSk7XG4gICAgICAgICAgICB0aGlzLnR3ZWVucy5hZGQoeyB0YXJnZXRzOiBjb250YWluZXIsIHNjYWxlOiAxLjAyLCBkdXJhdGlvbjogNzAsIGVhc2U6ICdTaW5lLmVhc2VPdXQnIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gY29udGFpbmVyO1xuICAgIH1cblxuICAgIHByaXZhdGUgb3BlblN0YXJ0TW9kYWwgKClcbiAgICB7XG4gICAgICAgIGlmICghdGhpcy5zdGFydE1vZGFsKSByZXR1cm47XG4gICAgICAgIHRoaXMuc3RhcnRNb2RhbE9wZW4gPSB0cnVlO1xuICAgICAgICB0aGlzLmhhc1N0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zdGFydE1vZGFsLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgIHRoaXMuc3RhcnRNb2RhbC5zZXRBbHBoYSgwKTtcbiAgICAgICAgdGhpcy50d2VlbnMuYWRkKHtcbiAgICAgICAgICAgIHRhcmdldHM6IHRoaXMuc3RhcnRNb2RhbCxcbiAgICAgICAgICAgIGFscGhhOiAxLFxuICAgICAgICAgICAgZHVyYXRpb246IDE4MFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNsb3NlU3RhcnRNb2RhbCAoKVxuICAgIHtcbiAgICAgICAgaWYgKCF0aGlzLnN0YXJ0TW9kYWwpIHJldHVybjtcbiAgICAgICAgdGhpcy5zdGFydE1vZGFsT3BlbiA9IGZhbHNlO1xuICAgICAgICB0aGlzLnN0YXJ0TW9kYWwuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGFydEdhbWVGbG93ICgpXG4gICAge1xuICAgICAgICBpZiAodGhpcy5oYXNTdGFydGVkKSByZXR1cm47XG4gICAgICAgIHRoaXMuaGFzU3RhcnRlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuY2xvc2VTdGFydE1vZGFsKCk7XG4gICAgICAgIHRoaXMub3BlblF1ZXN0aW9uKHRoaXMuY3VycmVudEluZGV4KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9wZW5UaW1lVXBNb2RhbCAobWVzc2FnZTogc3RyaW5nID0gJ091dCBvZiB0aW1lISBUcnkgYWdhaW4uJylcbiAgICB7XG4gICAgICAgIGlmICghdGhpcy50aW1lVXBNb2RhbCB8fCAhdGhpcy50aW1lVXBNb2RhbFBhbmVsKSByZXR1cm47XG4gICAgICAgIHRoaXMudGltZVVwVGl0bGVUZXh0LnNldFRleHQobWVzc2FnZSk7XG4gICAgICAgIHRoaXMudGltZVVwTW9kYWxQYW5lbC5zZXRTY2FsZSgwLjk2KTtcbiAgICAgICAgdGhpcy50aW1lVXBNb2RhbC5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgICB0aGlzLnRpbWVVcE1vZGFsLnNldEFscGhhKDApO1xuICAgICAgICB0aGlzLnR3ZWVucy5hZGQoe1xuICAgICAgICAgICAgdGFyZ2V0czogdGhpcy50aW1lVXBNb2RhbCxcbiAgICAgICAgICAgIGFscGhhOiAxLFxuICAgICAgICAgICAgZHVyYXRpb246IDIwMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy50d2VlbnMuYWRkKHtcbiAgICAgICAgICAgIHRhcmdldHM6IHRoaXMudGltZVVwTW9kYWxQYW5lbCxcbiAgICAgICAgICAgIHNjYWxlOiAxLFxuICAgICAgICAgICAgZHVyYXRpb246IDI0MCxcbiAgICAgICAgICAgIGVhc2U6ICdCYWNrLmVhc2VPdXQnXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgc3VibWl0U2Vzc2lvblJlc3VsdCAoKVxuICAgIHtcbiAgICAgICAgaWYgKCF0aGlzLnNlc3Npb25HYW1lSWQpIHJldHVybjtcbiAgICAgICAgaW1wb3J0KCcuLi8uLi9zZXJ2aWNlcy9hcGknKVxuICAgICAgICAgICAgLnRoZW4oKHsgZW5kR2FtZVNlc3Npb24gfSkgPT4gZW5kR2FtZVNlc3Npb24odGhpcy5zZXNzaW9uR2FtZUlkIGFzIHN0cmluZywgdGhpcy5zY29yZSkpXG4gICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignZW5kR2FtZVNlc3Npb24gZmFpbGVkJywgZXJyb3IpO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZXN0YXJ0VHJhaW5SdW4gKClcbiAgICB7XG4gICAgICAgIGlmICghdGhpcy5zeXMgfHwgIXRoaXMuc3lzLmlzQWN0aXZlKCkpIHJldHVybjtcbiAgICAgICAgdGhpcy5pbnB1dC5zZXREZWZhdWx0Q3Vyc29yKCdkZWZhdWx0Jyk7XG4gICAgICAgIHRoaXMuY2xvc2VRdWl6KCk7XG4gICAgICAgIGlmICh0aGlzLnRpbWVVcE1vZGFsKSB7XG4gICAgICAgICAgICB0aGlzLnRpbWVVcE1vZGFsLnNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2NlbmUucmVzdGFydCh7XG4gICAgICAgICAgICBnYW1lQ29kZTogdGhpcy5nYW1lQ29kZSxcbiAgICAgICAgICAgIHNlc3Npb25JZDogdGhpcy5zZXNzaW9uSWQsXG4gICAgICAgICAgICBnYW1lSWQ6IHRoaXMuc2Vzc2lvbkdhbWVJZCxcbiAgICAgICAgICAgIHF1ZXN0aW9uczogdGhpcy5zZXNzaW9uUXVlc3Rpb25zLFxuICAgICAgICAgICAgdGltZUxpbWl0OiB0aGlzLnNlc3Npb25UaW1lTGltaXRcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBsYXlvdXRRdWl6ICgpXG4gICAge1xuICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMuc2NhbGU7XG4gICAgICAgIHRoaXMucXVpelBhbmVsLmxheW91dCh3aWR0aCwgaGVpZ2h0KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9wZW5RdWVzdGlvbiAoaW5kZXg6IG51bWJlcilcbiAgICB7XG4gICAgICAgIGlmICh0aGlzLnF1aXpPcGVuIHx8IHRoaXMuZ2FtZU92ZXIpIHJldHVybjtcbiAgICAgICAgaWYgKCF0aGlzLmhhc1N0YXJ0ZWQpIHJldHVybjtcbiAgICAgICAgdGhpcy5zZXRMZWFkQ2FyU3RhdGUoJ2lkbGUnKTtcblxuICAgICAgICBjb25zdCBxdWVzdGlvbiA9IHRoaXMuZ2V0UXVlc3Rpb25Gb3JJbmRleChpbmRleCk7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSBxdWVzdGlvbi5xdWVzdGlvbi5vcHRpb25zLm1hcCgob3B0KSA9PiBvcHQudGV4dCk7XG4gICAgICAgIHRoaXMuY3VycmVudE9wdGlvbklkcyA9IHF1ZXN0aW9uLnF1ZXN0aW9uLm9wdGlvbnMubWFwKChvcHQpID0+IG9wdC5pZCA/PyAnJyk7XG4gICAgICAgIHRoaXMuY3VycmVudFNlc3Npb25RdWVzdGlvbklkID0gcXVlc3Rpb24uc2Vzc2lvbl9xdWVzdGlvbl9pZCA/PyBudWxsO1xuICAgICAgICBsZXQgY29ycmVjdEluZGV4ID0gcXVlc3Rpb24ucXVlc3Rpb24ub3B0aW9ucy5maW5kSW5kZXgoKG9wdCkgPT4gb3B0LmlzX2NvcnJlY3QpO1xuICAgICAgICBpZiAoY29ycmVjdEluZGV4IDwgMCkgY29ycmVjdEluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5jdXJyZW50Q29ycmVjdEluZGV4ID0gY29ycmVjdEluZGV4O1xuICAgICAgICB0aGlzLnF1aXpQYW5lbC5zZXRGZWVkYmFjaygnaWRsZScpO1xuICAgICAgICB0aGlzLnF1aXpQYW5lbC5zZXRRdWVzdGlvbih7XG4gICAgICAgICAgICBpbmRleDogaW5kZXggKyAxLFxuICAgICAgICAgICAgdG90YWw6IHRoaXMubWF4Q2FycyxcbiAgICAgICAgICAgIHF1ZXN0aW9uOiBxdWVzdGlvbi5xdWVzdGlvbi5jb250ZW50LFxuICAgICAgICAgICAgb3B0aW9uc1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy51cGRhdGVCYXJyaWVyUG9zaXRpb24oKTtcbiAgICAgICAgdGhpcy5zZXRCYXJyaWVyT3BlbihmYWxzZSk7XG4gICAgICAgIHRoaXMubGF5b3V0UXVpeigpO1xuXG4gICAgICAgIHRoaXMucXVpek9wZW4gPSB0cnVlO1xuICAgICAgICB0aGlzLnF1aXpMb2NrZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5xdWl6TW9kYWwuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgdGhpcy5xdWl6UGFuZWwuc2V0SW50ZXJhY3RpdmUodHJ1ZSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVBbnN3ZXIgKHNlbGVjdGVkSW5kZXg6IG51bWJlcilcbiAgICB7XG4gICAgICAgIGlmICh0aGlzLnF1aXpMb2NrZWQpIHJldHVybjtcbiAgICAgICAgdGhpcy5xdWl6TG9ja2VkID0gdHJ1ZTtcblxuICAgICAgICBsZXQgaXNDb3JyZWN0ID0gc2VsZWN0ZWRJbmRleCA9PT0gdGhpcy5jdXJyZW50Q29ycmVjdEluZGV4O1xuICAgICAgICBjb25zdCBzZWxlY3RlZE9wdGlvbklkID0gdGhpcy5jdXJyZW50T3B0aW9uSWRzW3NlbGVjdGVkSW5kZXhdO1xuICAgICAgICBpZiAodGhpcy5zZXNzaW9uSWQgJiYgdGhpcy5jdXJyZW50U2Vzc2lvblF1ZXN0aW9uSWQgJiYgc2VsZWN0ZWRPcHRpb25JZCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHN1Ym1pdEFuc3dlciB9ID0gYXdhaXQgaW1wb3J0KCcuLi8uLi9zZXJ2aWNlcy9hcGknKTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBzdWJtaXRBbnN3ZXIodGhpcy5zZXNzaW9uSWQsIHRoaXMuY3VycmVudFNlc3Npb25RdWVzdGlvbklkLCBzZWxlY3RlZE9wdGlvbklkKTtcbiAgICAgICAgICAgICAgICBpc0NvcnJlY3QgPSByZXMuZGF0YS5pc19jb3JyZWN0O1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdzdWJtaXRBbnN3ZXIgZmFpbGVkLCBmYWxsYmFjayB0byBsb2NhbCBjaGVjaycsIGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc0NvcnJlY3QpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0TGVhZENhclN0YXRlKCdjb3JyZWN0Jyk7XG4gICAgICAgICAgICB0aGlzLnF1aXpQYW5lbC5zZXRGZWVkYmFjaygnY29ycmVjdCcpO1xuICAgICAgICAgICAgdGhpcy5xdWl6UGFuZWwuc2V0T3B0aW9uU3RhdGUoc2VsZWN0ZWRJbmRleCwgJ2NvcnJlY3QnKTtcbiAgICAgICAgICAgIHRoaXMucXVpelBhbmVsLnNldEludGVyYWN0aXZlKGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMudGltZS5kZWxheWVkQ2FsbCg1MDAsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlUXVpeigpO1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlDb3JyZWN0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2V0TGVhZENhclN0YXRlKCdpbmNvcnJlY3QnKTtcbiAgICAgICAgICAgIHRoaXMucXVpelBhbmVsLnNldEZlZWRiYWNrKCd3cm9uZycpO1xuICAgICAgICAgICAgdGhpcy5xdWl6UGFuZWwuc2V0T3B0aW9uU3RhdGUoc2VsZWN0ZWRJbmRleCwgJ3dyb25nJyk7XG4gICAgICAgICAgICB0aGlzLnF1aXpQYW5lbC5zZXRJbnRlcmFjdGl2ZShmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLnRpbWUuZGVsYXllZENhbGwoNjUwLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHBseVdyb25nKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRMZWFkQ2FyU3RhdGUoJ2lkbGUnKTtcbiAgICAgICAgICAgICAgICB0aGlzLnF1aXpQYW5lbC5zZXRPcHRpb25TdGF0ZShzZWxlY3RlZEluZGV4LCAnbm9ybWFsJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5xdWl6UGFuZWwuc2V0RmVlZGJhY2soJ2lkbGUnKTtcbiAgICAgICAgICAgICAgICB0aGlzLnF1aXpQYW5lbC5zZXRJbnRlcmFjdGl2ZSh0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnF1aXpMb2NrZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhcHBseUNvcnJlY3QgKClcbiAgICB7XG4gICAgICAgIHRoaXMuY3VycmVudEluZGV4ID0gTWF0aC5taW4odGhpcy5tYXhDYXJzLCB0aGlzLmN1cnJlbnRJbmRleCArIDEpO1xuICAgICAgICB0aGlzLnNjb3JlID0gdGhpcy5jdXJyZW50SW5kZXg7XG4gICAgICAgIHRoaXMucmVmcmVzaExvY2tzKCk7XG5cbiAgICAgICAgaWYgKHRoaXMuY3VycmVudEluZGV4ID49IHRoaXMubWF4Q2Fycykge1xuICAgICAgICAgICAgdGhpcy5zZXRCYXJyaWVyT3Blbih0cnVlKTtcbiAgICAgICAgICAgIHRoaXMubW92ZVRyYWluVG9FbmQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZW5kR2FtZShgWW91IGNvbXBsZXRlZCBhbGwgJHt0aGlzLm1heENhcnN9IGNhcnMhYCwgJ3dpbicpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm1vdmVUcmFpblRvSW5kZXgodGhpcy5jdXJyZW50SW5kZXgsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMub3BlblF1ZXN0aW9uKHRoaXMuY3VycmVudEluZGV4KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhcHBseVdyb25nICgpXG4gICAge1xuICAgICAgICB0aGlzLnJlZnJlc2hMb2NrcygpO1xuICAgIH1cblxuICAgIHByaXZhdGUgbW92ZVRyYWluVG9JbmRleCAodGFyZ2V0SW5kZXg6IG51bWJlciwgb25Db21wbGV0ZT86ICgpID0+IHZvaWQpXG4gICAge1xuICAgICAgICBpZiAodGhpcy5yYWlsVG90YWxMZW5ndGggPD0gMCB8fCB0aGlzLnRyYWluU3RlcFB4IDw9IDApIHtcbiAgICAgICAgICAgIGlmIChvbkNvbXBsZXRlKSBvbkNvbXBsZXRlKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB2aXN1YWxJbmRleCA9IFBoYXNlci5NYXRoLkNsYW1wKHRhcmdldEluZGV4LCAwLCB0aGlzLm1heENhcnMpO1xuICAgICAgICBjb25zdCBtYXhEaXN0YW5jZSA9IE1hdGgubWF4KDAsIHRoaXMucmFpbFRvdGFsTGVuZ3RoIC0gMSk7XG4gICAgICAgIGNvbnN0IHRhcmdldERpc3RhbmNlID0gTWF0aC5taW4odGhpcy50cmFpblN0ZXBQeCAqIHZpc3VhbEluZGV4LCBtYXhEaXN0YW5jZSk7XG4gICAgICAgIGNvbnN0IGRlbHRhID0gTWF0aC5hYnModGFyZ2V0RGlzdGFuY2UgLSB0aGlzLnRyYWluRGlzdGFuY2VQeCk7XG4gICAgICAgIGNvbnN0IGR1cmF0aW9uID0gUGhhc2VyLk1hdGguQ2xhbXAoTWF0aC5yb3VuZCg0MjAgKyBkZWx0YSAqIDEuOCksIDY1MCwgMTIwMCk7XG5cbiAgICAgICAgdGhpcy50cmFpbk1vdmluZyA9IHRydWU7XG4gICAgICAgIGNvbnN0IHR3ZWVuU3RhdGUgPSB7IHZhbHVlOiB0aGlzLnRyYWluRGlzdGFuY2VQeCB9O1xuICAgICAgICB0aGlzLnR3ZWVucy5hZGQoe1xuICAgICAgICAgICAgdGFyZ2V0czogdHdlZW5TdGF0ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0YXJnZXREaXN0YW5jZSxcbiAgICAgICAgICAgIGR1cmF0aW9uLFxuICAgICAgICAgICAgZWFzZTogJ1NpbmUuZWFzZUluT3V0JyxcbiAgICAgICAgICAgIG9uVXBkYXRlOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy50cmFpbkRpc3RhbmNlUHggPSB0d2VlblN0YXRlLnZhbHVlO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVHJhaW5DYXJzKHRydWUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uQ29tcGxldGU6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnRyYWluRGlzdGFuY2VQeCA9IHRhcmdldERpc3RhbmNlO1xuICAgICAgICAgICAgICAgIHRoaXMudHJhaW5Nb3ZpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVRyYWluQ2Fycyh0cnVlKTtcbiAgICAgICAgICAgICAgICBpZiAob25Db21wbGV0ZSkgb25Db21wbGV0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG1vdmVUcmFpblRvRW5kIChvbkNvbXBsZXRlPzogKCkgPT4gdm9pZClcbiAgICB7XG4gICAgICAgIGlmICh0aGlzLnJhaWxUb3RhbExlbmd0aCA8PSAwKSB7XG4gICAgICAgICAgICBpZiAob25Db21wbGV0ZSkgb25Db21wbGV0ZSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbWF4RGlzdGFuY2UgPSBNYXRoLm1heCgwLCB0aGlzLnJhaWxUb3RhbExlbmd0aCAtIDEpO1xuICAgICAgICBjb25zdCB0cmFpbkxlbmd0aCA9IE1hdGgubWF4KDAsICh0aGlzLm1heENhcnMgLSAxKSAqIHRoaXMudHJhaW5HYXBQeCk7XG4gICAgICAgIGNvbnN0IHRhcmdldERpc3RhbmNlID0gbWF4RGlzdGFuY2UgKyB0cmFpbkxlbmd0aDtcbiAgICAgICAgY29uc3QgZGVsdGEgPSBNYXRoLmFicyh0YXJnZXREaXN0YW5jZSAtIHRoaXMudHJhaW5EaXN0YW5jZVB4KTtcbiAgICAgICAgY29uc3QgZHVyYXRpb24gPSBQaGFzZXIuTWF0aC5DbGFtcChNYXRoLnJvdW5kKDUyMCArIGRlbHRhICogMS42KSwgODAwLCAxODAwKTtcblxuICAgICAgICB0aGlzLnRyYWluTW92aW5nID0gdHJ1ZTtcbiAgICAgICAgY29uc3QgdHdlZW5TdGF0ZSA9IHsgdmFsdWU6IHRoaXMudHJhaW5EaXN0YW5jZVB4IH07XG4gICAgICAgIHRoaXMudHdlZW5zLmFkZCh7XG4gICAgICAgICAgICB0YXJnZXRzOiB0d2VlblN0YXRlLFxuICAgICAgICAgICAgdmFsdWU6IHRhcmdldERpc3RhbmNlLFxuICAgICAgICAgICAgZHVyYXRpb24sXG4gICAgICAgICAgICBlYXNlOiAnU2luZS5lYXNlSW5PdXQnLFxuICAgICAgICAgICAgb25VcGRhdGU6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnRyYWluRGlzdGFuY2VQeCA9IHR3ZWVuU3RhdGUudmFsdWU7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUcmFpbkNhcnModHJ1ZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25Db21wbGV0ZTogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudHJhaW5EaXN0YW5jZVB4ID0gdGFyZ2V0RGlzdGFuY2U7XG4gICAgICAgICAgICAgICAgdGhpcy50cmFpbk1vdmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVHJhaW5DYXJzKHRydWUpO1xuICAgICAgICAgICAgICAgIGlmIChvbkNvbXBsZXRlKSBvbkNvbXBsZXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgY2xvc2VRdWl6ICgpXG4gICAge1xuICAgICAgICB0aGlzLnF1aXpNb2RhbC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgdGhpcy5xdWl6T3BlbiA9IGZhbHNlO1xuICAgICAgICB0aGlzLnF1aXpMb2NrZWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFF1ZXN0aW9uRm9ySW5kZXggKGluZGV4OiBudW1iZXIpXG4gICAge1xuICAgICAgICBpZiAodGhpcy5xdWVzdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gRkFMTEJBQ0tfUVVFU1RJT05TWzBdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXN0aW9uc1tpbmRleCAlIHRoaXMucXVlc3Rpb25zLmxlbmd0aF07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVUcmFja0N1cnZlICh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcilcbiAgICB7XG4gICAgICAgIGNvbnN0IGJhc2VXaWR0aCA9IDc1MDtcbiAgICAgICAgY29uc3QgYmFzZUhlaWdodCA9IDEzMzQ7XG4gICAgICAgIGNvbnN0IHNjYWxlWCA9IHdpZHRoIC8gYmFzZVdpZHRoO1xuICAgICAgICBjb25zdCBzY2FsZVkgPSBoZWlnaHQgLyBiYXNlSGVpZ2h0O1xuXG4gICAgICAgIGNvbnN0IHBvaW50cyA9IFtcbiAgICAgICAgICAgIHsgeDogNDA1LCB5OiAxMCB9LFxuICAgICAgICAgICAgeyB4OiA0NTUsIHk6IDg1IH0sXG4gICAgICAgICAgICB7IHg6IDUxNSwgeTogMjAwIH0sXG4gICAgICAgICAgICB7IHg6IDQ4NSwgeTogMzYwIH0sXG4gICAgICAgICAgICB7IHg6IDM3NSwgeTogNTQwIH0sXG4gICAgICAgICAgICB7IHg6IDI1MCwgeTogNzQwIH0sXG4gICAgICAgICAgICB7IHg6IDIyMCwgeTogOTIwIH0sXG4gICAgICAgICAgICB7IHg6IDI3MCwgeTogMTEwMCB9LFxuICAgICAgICAgICAgeyB4OiAzMjUsIHk6IDExODUgfSxcbiAgICAgICAgICAgIHsgeDogNTA1LCB5OiAxMzI1IH1cbiAgICAgICAgXS5tYXAoKHApID0+IG5ldyBQaGFzZXIuTWF0aC5WZWN0b3IyKHAueCAqIHNjYWxlWCwgcC55ICogc2NhbGVZKSk7XG5cbiAgICAgICAgcmV0dXJuIG5ldyBQaGFzZXIuQ3VydmVzLlNwbGluZShwb2ludHMpO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2FtcGxlVHJhY2sgKGN1cnZlOiBQaGFzZXIuQ3VydmVzLlNwbGluZSwgY291bnQ6IG51bWJlcilcbiAgICB7XG4gICAgICAgIGNvbnN0IHBvaW50czogeyB4OiBudW1iZXI7IHk6IG51bWJlciB9W10gPSBbXTtcbiAgICAgICAgY29uc3QgdG90YWwgPSBNYXRoLm1heCgxLCBjb3VudCAtIDEpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyBpICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0b3RhbCA9PT0gMCA/IDAgOiBpIC8gdG90YWw7XG4gICAgICAgICAgICBjb25zdCBwID0gY3VydmUuZ2V0UG9pbnRBdCh0KTtcbiAgICAgICAgICAgIHBvaW50cy5wdXNoKHsgeDogcC54LCB5OiBwLnkgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBvaW50cztcbiAgICB9XG5cbiAgICBwcml2YXRlIGRyYXdUcmFja0N1cnZlIChjdXJ2ZTogUGhhc2VyLkN1cnZlcy5TcGxpbmUpXG4gICAge1xuICAgICAgICBjb25zdCB7IHN0YXJ0VCwgZW5kVCB9ID0gdGhpcy5nZXRWaXNpYmxlVFJhbmdlKGN1cnZlKTtcbiAgICAgICAgY29uc3QgZ3JhcGhpY3MgPSB0aGlzLmFkZC5ncmFwaGljcygpO1xuICAgICAgICBncmFwaGljcy5zZXREZXB0aCgxMDAwKTtcbiAgICAgICAgZ3JhcGhpY3MubGluZVN0eWxlKDEwLCAweGZmMDAwMCwgMSk7XG4gICAgICAgIGNvbnN0IHN0ZXBzID0gMTIwO1xuICAgICAgICBjb25zdCBmaXJzdCA9IGN1cnZlLmdldFBvaW50KHN0YXJ0VCk7XG4gICAgICAgIGdyYXBoaWNzLmJlZ2luUGF0aCgpO1xuICAgICAgICBncmFwaGljcy5tb3ZlVG8oZmlyc3QueCwgZmlyc3QueSk7XG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IHN0ZXBzOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBzdGFydFQgKyAoZW5kVCAtIHN0YXJ0VCkgKiAoaSAvIHN0ZXBzKTtcbiAgICAgICAgICAgIGNvbnN0IHAgPSBjdXJ2ZS5nZXRQb2ludCh0KTtcbiAgICAgICAgICAgIGdyYXBoaWNzLmxpbmVUbyhwLngsIHAueSk7XG4gICAgICAgIH1cbiAgICAgICAgZ3JhcGhpY3Muc3Ryb2tlUGF0aCgpO1xuICAgICAgICB0aGlzLmRlYnVnQ3VydmVHcmFwaGljcyA9IGdyYXBoaWNzO1xuICAgIH1cblxuICAgIHByaXZhdGUgZHJhd0N1cnZlTWFya2VycyAoY3VydmU6IFBoYXNlci5DdXJ2ZXMuU3BsaW5lLCBjb3VudDogbnVtYmVyKVxuICAgIHtcbiAgICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSB0aGlzLnNjYWxlO1xuICAgICAgICBjb25zdCB7IHN0YXJ0VCwgZW5kVCB9ID0gdGhpcy5nZXRWaXNpYmxlVFJhbmdlKGN1cnZlKTtcbiAgICAgICAgY29uc3QgZ3JhcGhpY3MgPSB0aGlzLmFkZC5ncmFwaGljcygpO1xuICAgICAgICBncmFwaGljcy5zZXREZXB0aCgxMDAxKTtcbiAgICAgICAgZ3JhcGhpY3MuZmlsbFN0eWxlKDB4MjJjNTVlLCAxKTtcbiAgICAgICAgZ3JhcGhpY3MubGluZVN0eWxlKDIsIDB4MjJjNTVlLCAxKTtcblxuICAgICAgICBjb25zdCB0b3RhbCA9IE1hdGgubWF4KDEsIGNvdW50IC0gMSk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkgKz0gMSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IHRvdGFsID09PSAwID8gc3RhcnRUIDogc3RhcnRUICsgKGVuZFQgLSBzdGFydFQpICogKGkgLyB0b3RhbCk7XG4gICAgICAgICAgICBjb25zdCBwb2ludCA9IGN1cnZlLmdldFBvaW50KHQpO1xuICAgICAgICAgICAgY29uc3QgY2xhbXBlZFggPSBQaGFzZXIuTWF0aC5DbGFtcChwb2ludC54LCAxNiwgd2lkdGggLSAxNik7XG4gICAgICAgICAgICBjb25zdCBjbGFtcGVkWSA9IFBoYXNlci5NYXRoLkNsYW1wKHBvaW50LnksIDE2LCBoZWlnaHQgLSAxNik7XG4gICAgICAgICAgICBpZiAoY2xhbXBlZFggIT09IHBvaW50LnggfHwgY2xhbXBlZFkgIT09IHBvaW50LnkpIHtcbiAgICAgICAgICAgICAgICBncmFwaGljcy5zdHJva2VMaW5lU2hhcGUobmV3IFBoYXNlci5HZW9tLkxpbmUocG9pbnQueCwgcG9pbnQueSwgY2xhbXBlZFgsIGNsYW1wZWRZKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGdyYXBoaWNzLmZpbGxDaXJjbGUoY2xhbXBlZFgsIGNsYW1wZWRZLCA4KTtcbiAgICAgICAgICAgIGNvbnN0IGxhYmVsVGV4dCA9IGAke2kgKyAxfSAoJHtNYXRoLnJvdW5kKHBvaW50LngpfSwgJHtNYXRoLnJvdW5kKHBvaW50LnkpfSlgO1xuICAgICAgICAgICAgY29uc3QgbGFiZWwgPSB0aGlzLmFkZC50ZXh0KGNsYW1wZWRYICsgMTAsIGNsYW1wZWRZIC0gMTAsIGxhYmVsVGV4dCwge1xuICAgICAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCBCbGFjaycsXG4gICAgICAgICAgICAgICAgZm9udFNpemU6ICcxOHB4JyxcbiAgICAgICAgICAgICAgICBjb2xvcjogJyMyMmM1NWUnLFxuICAgICAgICAgICAgICAgIHN0cm9rZTogJyMwZjE3MmEnLFxuICAgICAgICAgICAgICAgIHN0cm9rZVRoaWNrbmVzczogM1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBsYWJlbC5zZXREZXB0aCgxMDAyKTtcbiAgICAgICAgICAgIHRoaXMuZGVidWdNYXJrZXJMYWJlbHMucHVzaChsYWJlbCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kZWJ1Z01hcmtlckdyYXBoaWNzID0gZ3JhcGhpY3M7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRWaXNpYmxlVFJhbmdlIChjdXJ2ZTogUGhhc2VyLkN1cnZlcy5TcGxpbmUpXG4gICAge1xuICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMuc2NhbGU7XG4gICAgICAgIGNvbnN0IG1hcmdpbiA9IDg7XG4gICAgICAgIGNvbnN0IHNhbXBsZXMgPSA0MDA7XG4gICAgICAgIGxldCBzdGFydFQgPSAwO1xuICAgICAgICBsZXQgZW5kVCA9IDE7XG4gICAgICAgIGxldCBmb3VuZFN0YXJ0ID0gZmFsc2U7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gc2FtcGxlczsgaSArPSAxKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gaSAvIHNhbXBsZXM7XG4gICAgICAgICAgICBjb25zdCBwID0gY3VydmUuZ2V0UG9pbnQodCk7XG4gICAgICAgICAgICBjb25zdCBpbnNpZGUgPSBwLnggPj0gbWFyZ2luICYmIHAueCA8PSB3aWR0aCAtIG1hcmdpbiAmJiBwLnkgPj0gbWFyZ2luICYmIHAueSA8PSBoZWlnaHQgLSBtYXJnaW47XG4gICAgICAgICAgICBpZiAoaW5zaWRlICYmICFmb3VuZFN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgc3RhcnRUID0gdDtcbiAgICAgICAgICAgICAgICBmb3VuZFN0YXJ0ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpbnNpZGUpIHtcbiAgICAgICAgICAgICAgICBlbmRUID0gdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHN0YXJ0RXh0ZW5kID0gMC4wO1xuICAgICAgICBjb25zdCBlbmRFeHRlbmQgPSAwLjA7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdGFydFQ6IE1hdGgubWF4KDAsIHN0YXJ0VCAtIHN0YXJ0RXh0ZW5kKSxcbiAgICAgICAgICAgIGVuZFQ6IE1hdGgubWluKDEsIGVuZFQgKyBlbmRFeHRlbmQpXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRUcmFja0FuZ2xlIChwb2ludHM6IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfVtdLCBpbmRleDogbnVtYmVyKVxuICAgIHtcbiAgICAgICAgY29uc3QgY3VyciA9IHBvaW50c1tpbmRleF07XG4gICAgICAgIGNvbnN0IG5leHQgPSBwb2ludHNbaW5kZXggKyAxXSA/PyBwb2ludHNbaW5kZXggLSAxXSA/PyBjdXJyO1xuICAgICAgICBjb25zdCBhbmdsZSA9IE1hdGguYXRhbjIobmV4dC55IC0gY3Vyci55LCBuZXh0LnggLSBjdXJyLngpO1xuICAgICAgICByZXR1cm4gYW5nbGU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBidWlsZFJhaWxQYXRoIChzcGxpbmU6IFBoYXNlci5DdXJ2ZXMuU3BsaW5lKVxuICAgIHtcbiAgICAgICAgY29uc3QgbGVuZ3RoID0gc3BsaW5lLmdldExlbmd0aCgpO1xuICAgICAgICBjb25zdCBzYW1wbGVFdmVyeVB4ID0gMjA7XG4gICAgICAgIGNvbnN0IHNhbXBsZXMgPSBNYXRoLm1heCg2MCwgTWF0aC5yb3VuZChsZW5ndGggLyBzYW1wbGVFdmVyeVB4KSk7XG4gICAgICAgIGNvbnN0IHBvaW50czogUGhhc2VyLk1hdGguVmVjdG9yMltdID0gW107XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gc2FtcGxlczsgaSArPSAxKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gaSAvIHNhbXBsZXM7XG4gICAgICAgICAgICBjb25zdCBwID0gc3BsaW5lLmdldFBvaW50QXQodCk7XG4gICAgICAgICAgICBwb2ludHMucHVzaChuZXcgUGhhc2VyLk1hdGguVmVjdG9yMihwLngsIHAueSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHBvaW50cy5sZW5ndGggPCAyKSB7XG4gICAgICAgICAgICB0aGlzLnJhaWxQYXRoUG9pbnRzID0gcG9pbnRzO1xuICAgICAgICAgICAgdGhpcy5yYWlsU2VnbWVudExlbmd0aHMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMucmFpbFRvdGFsTGVuZ3RoID0gMDtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHNlZ21lbnRzOiBudW1iZXJbXSA9IFtdO1xuICAgICAgICBsZXQgdG90YWwgPSAwO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9pbnRzLmxlbmd0aCAtIDE7IGkgKz0gMSkge1xuICAgICAgICAgICAgY29uc3QgY3VyciA9IHBvaW50c1tpXTtcbiAgICAgICAgICAgIGNvbnN0IG5leHQgPSBwb2ludHNbaSArIDFdO1xuICAgICAgICAgICAgY29uc3Qgc2VnTGVuID0gUGhhc2VyLk1hdGguRGlzdGFuY2UuQmV0d2VlbihjdXJyLngsIGN1cnIueSwgbmV4dC54LCBuZXh0LnkpO1xuICAgICAgICAgICAgc2VnbWVudHMucHVzaChzZWdMZW4pO1xuICAgICAgICAgICAgdG90YWwgKz0gc2VnTGVuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5yYWlsUGF0aFBvaW50cyA9IHBvaW50cztcbiAgICAgICAgdGhpcy5yYWlsU2VnbWVudExlbmd0aHMgPSBzZWdtZW50cztcbiAgICAgICAgdGhpcy5yYWlsVG90YWxMZW5ndGggPSB0b3RhbDtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNhbXBsZVJhaWxCeURpc3RhbmNlTm9XcmFwIChkaXN0YW5jZVB4OiBudW1iZXIpXG4gICAge1xuICAgICAgICBpZiAodGhpcy5yYWlsUGF0aFBvaW50cy5sZW5ndGggPCAyIHx8IHRoaXMucmFpbFRvdGFsTGVuZ3RoIDw9IDApIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IG5ldyBQaGFzZXIuTWF0aC5WZWN0b3IyKDAsIDApLFxuICAgICAgICAgICAgICAgIGFuZ2xlOiAwXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdG90YWwgPSB0aGlzLnJhaWxUb3RhbExlbmd0aDtcbiAgICAgICAgaWYgKGRpc3RhbmNlUHggPD0gMCkge1xuICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSB0aGlzLnJhaWxQYXRoUG9pbnRzWzBdO1xuICAgICAgICAgICAgY29uc3QgbmV4dCA9IHRoaXMucmFpbFBhdGhQb2ludHNbMV07XG4gICAgICAgICAgICBjb25zdCBhbmdsZSA9IE1hdGguYXRhbjIobmV4dC55IC0gc3RhcnQueSwgbmV4dC54IC0gc3RhcnQueCk7XG4gICAgICAgICAgICBjb25zdCBkaXIgPSBuZXcgUGhhc2VyLk1hdGguVmVjdG9yMihNYXRoLmNvcyhhbmdsZSksIE1hdGguc2luKGFuZ2xlKSk7XG4gICAgICAgICAgICBjb25zdCBwb3MgPSBuZXcgUGhhc2VyLk1hdGguVmVjdG9yMihzdGFydC54LCBzdGFydC55KS5hZGQoZGlyLnNjYWxlKGRpc3RhbmNlUHgpKTtcbiAgICAgICAgICAgIHJldHVybiB7IHBvc2l0aW9uOiBwb3MsIGFuZ2xlIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRpc3RhbmNlUHggPj0gdG90YWwpIHtcbiAgICAgICAgICAgIGNvbnN0IGVuZCA9IHRoaXMucmFpbFBhdGhQb2ludHNbdGhpcy5yYWlsUGF0aFBvaW50cy5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIGNvbnN0IHByZXYgPSB0aGlzLnJhaWxQYXRoUG9pbnRzW3RoaXMucmFpbFBhdGhQb2ludHMubGVuZ3RoIC0gMl07XG4gICAgICAgICAgICBjb25zdCBhbmdsZSA9IE1hdGguYXRhbjIoZW5kLnkgLSBwcmV2LnksIGVuZC54IC0gcHJldi54KTtcbiAgICAgICAgICAgIGNvbnN0IGRpciA9IG5ldyBQaGFzZXIuTWF0aC5WZWN0b3IyKE1hdGguY29zKGFuZ2xlKSwgTWF0aC5zaW4oYW5nbGUpKTtcbiAgICAgICAgICAgIGNvbnN0IHBvcyA9IG5ldyBQaGFzZXIuTWF0aC5WZWN0b3IyKGVuZC54LCBlbmQueSkuYWRkKGRpci5zY2FsZShkaXN0YW5jZVB4IC0gdG90YWwpKTtcbiAgICAgICAgICAgIHJldHVybiB7IHBvc2l0aW9uOiBwb3MsIGFuZ2xlIH07XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVtYWluaW5nID0gZGlzdGFuY2VQeDtcbiAgICAgICAgbGV0IHNlZ0luZGV4ID0gMDtcblxuICAgICAgICB3aGlsZSAoc2VnSW5kZXggPCB0aGlzLnJhaWxTZWdtZW50TGVuZ3Rocy5sZW5ndGggJiYgcmVtYWluaW5nID4gdGhpcy5yYWlsU2VnbWVudExlbmd0aHNbc2VnSW5kZXhdKSB7XG4gICAgICAgICAgICByZW1haW5pbmcgLT0gdGhpcy5yYWlsU2VnbWVudExlbmd0aHNbc2VnSW5kZXhdO1xuICAgICAgICAgICAgc2VnSW5kZXggKz0gMTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHNhZmVJbmRleCA9IE1hdGgubWluKHNlZ0luZGV4LCB0aGlzLnJhaWxQYXRoUG9pbnRzLmxlbmd0aCAtIDIpO1xuICAgICAgICBjb25zdCBjdXJyID0gdGhpcy5yYWlsUGF0aFBvaW50c1tzYWZlSW5kZXhdO1xuICAgICAgICBjb25zdCBuZXh0ID0gdGhpcy5yYWlsUGF0aFBvaW50c1tzYWZlSW5kZXggKyAxXTtcbiAgICAgICAgY29uc3Qgc2VnTGVuID0gdGhpcy5yYWlsU2VnbWVudExlbmd0aHNbc2FmZUluZGV4XSB8fCAxO1xuICAgICAgICBjb25zdCByYXRpbyA9IFBoYXNlci5NYXRoLkNsYW1wKHJlbWFpbmluZyAvIHNlZ0xlbiwgMCwgMSk7XG5cbiAgICAgICAgY29uc3QgeCA9IFBoYXNlci5NYXRoLkxpbmVhcihjdXJyLngsIG5leHQueCwgcmF0aW8pO1xuICAgICAgICBjb25zdCB5ID0gUGhhc2VyLk1hdGguTGluZWFyKGN1cnIueSwgbmV4dC55LCByYXRpbyk7XG4gICAgICAgIGNvbnN0IGFuZ2xlID0gTWF0aC5hdGFuMihuZXh0LnkgLSBjdXJyLnksIG5leHQueCAtIGN1cnIueCk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgUGhhc2VyLk1hdGguVmVjdG9yMih4LCB5KSxcbiAgICAgICAgICAgIGFuZ2xlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVSYWlsd2F5ICgpXG4gICAge1xuICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMuc2NhbGU7XG4gICAgICAgIGNvbnN0IHNwbGluZSA9IHRoaXMuY3JlYXRlVHJhY2tDdXJ2ZSh3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgdGhpcy50cmFja1NwbGluZSA9IHNwbGluZTtcbiAgICAgICAgdGhpcy50cmFja0xlbmd0aCA9IHNwbGluZS5nZXRMZW5ndGgoKTtcbiAgICAgICAgdGhpcy5idWlsZFJhaWxQYXRoKHNwbGluZSk7XG5cbiAgICAgICAgY29uc3QgYmFzZVNjYWxlID0gTWF0aC5taW4od2lkdGggLyA3NTAsIGhlaWdodCAvIDEzMzQpO1xuICAgICAgICBjb25zdCByYWlsT2Zmc2V0ID0gMTggKiBiYXNlU2NhbGU7XG4gICAgICAgIGNvbnN0IHNsZWVwZXJXaWR0aCA9IHJhaWxPZmZzZXQgKiAxLjg7XG4gICAgICAgIGNvbnN0IHNsZWVwZXJIZWlnaHQgPSA3ICogYmFzZVNjYWxlO1xuXG4gICAgICAgIGNvbnN0IHJhaWx3YXlDb250YWluZXIgPSB0aGlzLmFkZC5jb250YWluZXIoMCwgMCk7XG4gICAgICAgIHRoaXMucmFpbHdheUNvbnRhaW5lciA9IHJhaWx3YXlDb250YWluZXI7XG5cbiAgICAgICAgY29uc3QgcmFpbExlZnQ6IFBoYXNlci5NYXRoLlZlY3RvcjJbXSA9IFtdO1xuICAgICAgICBjb25zdCByYWlsUmlnaHQ6IFBoYXNlci5NYXRoLlZlY3RvcjJbXSA9IFtdO1xuXG4gICAgICAgIGNvbnN0IHNhbXBsZXMgPSAxNDA7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IHNhbXBsZXM7IGkgKz0gMSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IGkgLyBzYW1wbGVzO1xuICAgICAgICAgICAgY29uc3QgcG9pbnQgPSBzcGxpbmUuZ2V0UG9pbnQodCk7XG4gICAgICAgICAgICBjb25zdCB0YW5nZW50ID0gc3BsaW5lLmdldFRhbmdlbnQodCkubm9ybWFsaXplKCk7XG4gICAgICAgICAgICBjb25zdCBub3JtYWwgPSBuZXcgUGhhc2VyLk1hdGguVmVjdG9yMigtdGFuZ2VudC55LCB0YW5nZW50LngpLm5vcm1hbGl6ZSgpO1xuICAgICAgICAgICAgcmFpbExlZnQucHVzaChuZXcgUGhhc2VyLk1hdGguVmVjdG9yMihcbiAgICAgICAgICAgICAgICBwb2ludC54ICsgbm9ybWFsLnggKiByYWlsT2Zmc2V0LFxuICAgICAgICAgICAgICAgIHBvaW50LnkgKyBub3JtYWwueSAqIHJhaWxPZmZzZXRcbiAgICAgICAgICAgICkpO1xuICAgICAgICAgICAgcmFpbFJpZ2h0LnB1c2gobmV3IFBoYXNlci5NYXRoLlZlY3RvcjIoXG4gICAgICAgICAgICAgICAgcG9pbnQueCAtIG5vcm1hbC54ICogcmFpbE9mZnNldCxcbiAgICAgICAgICAgICAgICBwb2ludC55IC0gbm9ybWFsLnkgKiByYWlsT2Zmc2V0XG4gICAgICAgICAgICApKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJhaWxzID0gdGhpcy5hZGQuZ3JhcGhpY3MoKTtcbiAgICAgICAgcmFpbHMubGluZVN0eWxlKDggKiBiYXNlU2NhbGUsIDB4ZjhmYWZjLCAxKTtcbiAgICAgICAgcmFpbHMuYmVnaW5QYXRoKCk7XG4gICAgICAgIHJhaWxzLm1vdmVUbyhyYWlsTGVmdFswXS54LCByYWlsTGVmdFswXS55KTtcbiAgICAgICAgcmFpbExlZnQuZm9yRWFjaCgocCkgPT4gcmFpbHMubGluZVRvKHAueCwgcC55KSk7XG4gICAgICAgIHJhaWxzLnN0cm9rZVBhdGgoKTtcblxuICAgICAgICByYWlscy5iZWdpblBhdGgoKTtcbiAgICAgICAgcmFpbHMubW92ZVRvKHJhaWxSaWdodFswXS54LCByYWlsUmlnaHRbMF0ueSk7XG4gICAgICAgIHJhaWxSaWdodC5mb3JFYWNoKChwKSA9PiByYWlscy5saW5lVG8ocC54LCBwLnkpKTtcbiAgICAgICAgcmFpbHMuc3Ryb2tlUGF0aCgpO1xuICAgICAgICByYWlscy5zZXREZXB0aCg1KTtcbiAgICAgICAgcmFpbHdheUNvbnRhaW5lci5hZGQocmFpbHMpO1xuXG4gICAgICAgIGNvbnN0IHNsZWVwZXJDb3VudCA9IDI4O1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBzbGVlcGVyQ291bnQ7IGkgKz0gMSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IGkgLyBzbGVlcGVyQ291bnQ7XG4gICAgICAgICAgICBjb25zdCBwb2ludCA9IHNwbGluZS5nZXRQb2ludCh0KTtcbiAgICAgICAgICAgIGNvbnN0IHRhbmdlbnQgPSBzcGxpbmUuZ2V0VGFuZ2VudCh0KS5ub3JtYWxpemUoKTtcbiAgICAgICAgICAgIGNvbnN0IGFuZ2xlID0gTWF0aC5hdGFuMih0YW5nZW50LnksIHRhbmdlbnQueCkgKyBNYXRoLlBJIC8gMjtcbiAgICAgICAgICAgIGNvbnN0IHNsZWVwZXIgPSB0aGlzLmFkZC5yZWN0YW5nbGUocG9pbnQueCwgcG9pbnQueSwgc2xlZXBlcldpZHRoLCBzbGVlcGVySGVpZ2h0LCAweGI0NTMwOSwgMC45NSk7XG4gICAgICAgICAgICBzbGVlcGVyLnNldFJvdGF0aW9uKGFuZ2xlKTtcbiAgICAgICAgICAgIHNsZWVwZXIuc2V0RGVwdGgoNCk7XG4gICAgICAgICAgICByYWlsd2F5Q29udGFpbmVyLmFkZChzbGVlcGVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmRlYnVnVHJhY2spIHtcbiAgICAgICAgICAgIHRoaXMuZHJhd1RyYWNrQ3VydmUoc3BsaW5lKTtcbiAgICAgICAgICAgIHRoaXMuZHJhd0N1cnZlTWFya2VycyhzcGxpbmUsIDExKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2V0UmFpbHdheVZpc2libGUodGhpcy5zaG93UmFpbE92ZXJsYXkpO1xuICAgICAgICB0aGlzLnNldERlYnVnVHJhY2tWaXNpYmxlKHRoaXMuZGVidWdUcmFjayk7XG5cbiAgICAgICAgdGhpcy50cmFpbkRpc3RhbmNlUHggPSAwO1xuICAgICAgICBpZiAodGhpcy50cmFpblN0ZXBQeCA8PSAwKSB7XG4gICAgICAgICAgICB0aGlzLnRyYWluU3RlcFB4ID0gdGhpcy5yYWlsVG90YWxMZW5ndGggPiAxID8gKHRoaXMucmFpbFRvdGFsTGVuZ3RoIC0gMSkgLyB0aGlzLm1heENhcnMgOiAwO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVmcmVzaExvY2tzKCk7XG4gICAgICAgIHRoaXMudXBkYXRlVHJhaW5DYXJzKHRydWUpO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlQmFycmllckdhdGUgKClcbiAgICB7XG4gICAgICAgIGlmICghdGhpcy50ZXh0dXJlcy5leGlzdHMoJ3RyYWluLWJhcnJpZXInKSkgcmV0dXJuO1xuICAgICAgICBjb25zdCBnYXRlID0gdGhpcy5hZGQuaW1hZ2UoMCwgMCwgJ3RyYWluLWJhcnJpZXInKTtcbiAgICAgICAgZ2F0ZS5zZXREZXB0aCg2KTtcbiAgICAgICAgZ2F0ZS5zZXRPcmlnaW4oMC4wOCwgMC41KTtcbiAgICAgICAgdGhpcy5iYXJyaWVyR2F0ZSA9IGdhdGU7XG4gICAgICAgIHRoaXMudXBkYXRlQmFycmllclBvc2l0aW9uKCk7XG4gICAgICAgIHRoaXMuc2V0QmFycmllck9wZW4oZmFsc2UsIHRydWUpO1xuICAgIH1cblxuICAgIHByaXZhdGUgdXBkYXRlQmFycmllclBvc2l0aW9uICgpXG4gICAge1xuICAgICAgICBpZiAoIXRoaXMuYmFycmllckdhdGUpIHJldHVybjtcbiAgICAgICAgY29uc3QgYmFzZVdpZHRoID0gNzUwO1xuICAgICAgICBjb25zdCBiYXNlSGVpZ2h0ID0gMTMzNDtcbiAgICAgICAgY29uc3Qgc2NhbGVYID0gdGhpcy5zY2FsZS53aWR0aCAvIGJhc2VXaWR0aDtcbiAgICAgICAgY29uc3Qgc2NhbGVZID0gdGhpcy5zY2FsZS5oZWlnaHQgLyBiYXNlSGVpZ2h0O1xuICAgICAgICBjb25zdCBiYXNlWCA9IDM1NTtcbiAgICAgICAgY29uc3QgYmFzZVkgPSAyMzA7XG4gICAgICAgIHRoaXMuYmFycmllckdhdGUuc2V0UG9zaXRpb24oYmFzZVggKiBzY2FsZVgsIGJhc2VZICogc2NhbGVZKTtcbiAgICAgICAgY29uc3Qgc2NhbGUgPSBNYXRoLm1pbihzY2FsZVgsIHNjYWxlWSkgKiAwLjM1O1xuICAgICAgICB0aGlzLmJhcnJpZXJHYXRlLnNldFNjYWxlKHNjYWxlKTtcbiAgICAgICAgdGhpcy5iYXJyaWVyQmFzZUFuZ2xlID0gMDtcbiAgICAgICAgY29uc3QgdGFyZ2V0QW5nbGUgPSB0aGlzLmJhcnJpZXJJc09wZW4gPyB0aGlzLmJhcnJpZXJCYXNlQW5nbGUgLSBQaGFzZXIuTWF0aC5EZWdUb1JhZCg0NSkgOiB0aGlzLmJhcnJpZXJCYXNlQW5nbGU7XG4gICAgICAgIHRoaXMuYmFycmllckdhdGUuc2V0Um90YXRpb24odGFyZ2V0QW5nbGUpO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2V0QmFycmllck9wZW4gKG9wZW46IGJvb2xlYW4sIGltbWVkaWF0ZTogYm9vbGVhbiA9IGZhbHNlKVxuICAgIHtcbiAgICAgICAgaWYgKCF0aGlzLmJhcnJpZXJHYXRlKSByZXR1cm47XG4gICAgICAgIHRoaXMuYmFycmllcklzT3BlbiA9IG9wZW47XG4gICAgICAgIGNvbnN0IHRhcmdldEFuZ2xlID0gb3BlblxuICAgICAgICAgICAgPyB0aGlzLmJhcnJpZXJCYXNlQW5nbGUgLSBQaGFzZXIuTWF0aC5EZWdUb1JhZCg0NSlcbiAgICAgICAgICAgIDogdGhpcy5iYXJyaWVyQmFzZUFuZ2xlO1xuICAgICAgICBpZiAoaW1tZWRpYXRlKSB7XG4gICAgICAgICAgICB0aGlzLmJhcnJpZXJHYXRlLnNldFJvdGF0aW9uKHRhcmdldEFuZ2xlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnR3ZWVucy5hZGQoe1xuICAgICAgICAgICAgdGFyZ2V0czogdGhpcy5iYXJyaWVyR2F0ZSxcbiAgICAgICAgICAgIHJvdGF0aW9uOiB0YXJnZXRBbmdsZSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAyMjAsXG4gICAgICAgICAgICBlYXNlOiAnU2luZS5lYXNlSW5PdXQnXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgdXBkYXRlVHJhaW5DYXJzIChmb3JjZTogYm9vbGVhbiA9IGZhbHNlKVxuICAgIHtcbiAgICAgICAgaWYgKCF0aGlzLnNob3dDYXJzKSByZXR1cm47XG4gICAgICAgIGlmICghZm9yY2UgJiYgIXRoaXMudHJhaW5Nb3ZpbmcpIHJldHVybjtcbiAgICAgICAgaWYgKHRoaXMucmFpbFRvdGFsTGVuZ3RoIDw9IDApIHJldHVybjtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY2FyU2xvdHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IHNsb3QgPSB0aGlzLmNhclNsb3RzW2ldO1xuICAgICAgICAgICAgY29uc3QgZGlzdGFuY2VGcm9tQm90dG9tID0gdGhpcy50cmFpbkRpc3RhbmNlUHggLSBpICogdGhpcy50cmFpbkdhcFB4O1xuICAgICAgICAgICAgY29uc3QgbWFwcGVkRGlzdGFuY2UgPSBNYXRoLm1heCgwLCB0aGlzLnJhaWxUb3RhbExlbmd0aCAtIDEpIC0gZGlzdGFuY2VGcm9tQm90dG9tO1xuICAgICAgICAgICAgY29uc3Qgc2FtcGxlID0gdGhpcy5zYW1wbGVSYWlsQnlEaXN0YW5jZU5vV3JhcChtYXBwZWREaXN0YW5jZSk7XG4gICAgICAgICAgICBzbG90LmNhci5zZXRQb3NpdGlvbihzYW1wbGUucG9zaXRpb24ueCwgc2FtcGxlLnBvc2l0aW9uLnkpO1xuICAgICAgICAgICAgc2xvdC5jYXIuc2V0Um90YXRpb24oc2FtcGxlLmFuZ2xlICsgdGhpcy50cmFpblJvdGF0aW9uT2Zmc2V0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGxlYWRDYXIgPSB0aGlzLmNhclNsb3RzWzBdPy5jYXI7XG4gICAgICAgIGlmIChsZWFkQ2FyICYmIHRoaXMubGVhZENhckJhZGdlICYmIHRoaXMubGVhZENhckJhZGdlLnNjZW5lKSB7XG4gICAgICAgICAgICBjb25zdCBvZmZzZXRYID0gLWxlYWRDYXIuZGlzcGxheVdpZHRoICogMC4zNDtcbiAgICAgICAgICAgIGNvbnN0IG9mZnNldFkgPSAtbGVhZENhci5kaXNwbGF5SGVpZ2h0ICogMC4wODtcbiAgICAgICAgICAgIGNvbnN0IHJvdGF0aW9uID0gbGVhZENhci5yb3RhdGlvbjtcbiAgICAgICAgICAgIGNvbnN0IHdvcmxkWCA9IGxlYWRDYXIueCArIE1hdGguY29zKHJvdGF0aW9uKSAqIG9mZnNldFggLSBNYXRoLnNpbihyb3RhdGlvbikgKiBvZmZzZXRZO1xuICAgICAgICAgICAgY29uc3Qgd29ybGRZID0gbGVhZENhci55ICsgTWF0aC5zaW4ocm90YXRpb24pICogb2Zmc2V0WCArIE1hdGguY29zKHJvdGF0aW9uKSAqIG9mZnNldFk7XG4gICAgICAgICAgICB0aGlzLmxlYWRDYXJCYWRnZS5zZXRQb3NpdGlvbih3b3JsZFgsIHdvcmxkWSk7XG4gICAgICAgICAgICB0aGlzLmxlYWRDYXJCYWRnZS5zZXRSb3RhdGlvbihyb3RhdGlvbik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHNldFNob3dDYXJzICh2YWx1ZTogYm9vbGVhbilcbiAgICB7XG4gICAgICAgIHRoaXMuc2hvd0NhcnMgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5jYXJTbG90cy5mb3JFYWNoKChzbG90KSA9PiB7XG4gICAgICAgICAgICBzbG90LmNhci5zZXRWaXNpYmxlKHZhbHVlKTtcbiAgICAgICAgICAgIHNsb3QubG9jay5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh0aGlzLmxlYWRDYXJCYWRnZSkge1xuICAgICAgICAgICAgdGhpcy5sZWFkQ2FyQmFkZ2Uuc2V0VmlzaWJsZSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hMb2NrcygpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVUcmFpbkNhcnModHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHNldFJhaWx3YXlWaXNpYmxlICh2YWx1ZTogYm9vbGVhbilcbiAgICB7XG4gICAgICAgIGlmICh0aGlzLnJhaWx3YXlDb250YWluZXIpIHtcbiAgICAgICAgICAgIHRoaXMucmFpbHdheUNvbnRhaW5lci5zZXRWaXNpYmxlKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5kZWJ1Z0N1cnZlR3JhcGhpY3MpIHtcbiAgICAgICAgICAgIHRoaXMuZGVidWdDdXJ2ZUdyYXBoaWNzLnNldFZpc2libGUodmFsdWUgJiYgdGhpcy5kZWJ1Z1RyYWNrKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5kZWJ1Z01hcmtlckdyYXBoaWNzKSB7XG4gICAgICAgICAgICB0aGlzLmRlYnVnTWFya2VyR3JhcGhpY3Muc2V0VmlzaWJsZSh2YWx1ZSAmJiB0aGlzLmRlYnVnVHJhY2spO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGVidWdNYXJrZXJMYWJlbHMuZm9yRWFjaCgobGFiZWwpID0+IGxhYmVsLnNldFZpc2libGUodmFsdWUgJiYgdGhpcy5kZWJ1Z1RyYWNrKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc1JhaWx3YXlWaXNpYmxlICgpXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5yYWlsd2F5Q29udGFpbmVyPy52aXNpYmxlID8/IHRydWU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZXREZWJ1Z1RyYWNrVmlzaWJsZSAodmFsdWU6IGJvb2xlYW4pXG4gICAge1xuICAgICAgICB0aGlzLmRlYnVnVHJhY2sgPSB2YWx1ZTtcbiAgICAgICAgaWYgKHRoaXMuZGVidWdDdXJ2ZUdyYXBoaWNzKSB7XG4gICAgICAgICAgICB0aGlzLmRlYnVnQ3VydmVHcmFwaGljcy5zZXRWaXNpYmxlKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5kZWJ1Z01hcmtlckdyYXBoaWNzKSB7XG4gICAgICAgICAgICB0aGlzLmRlYnVnTWFya2VyR3JhcGhpY3Muc2V0VmlzaWJsZSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kZWJ1Z01hcmtlckxhYmVscy5mb3JFYWNoKChsYWJlbCkgPT4gbGFiZWwuc2V0VmlzaWJsZSh2YWx1ZSkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2V0VHJhaW5Nb3ZpbmcgKHZhbHVlOiBib29sZWFuKVxuICAgIHtcbiAgICAgICAgdGhpcy50cmFpbk1vdmluZyA9IHZhbHVlO1xuICAgICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVRyYWluQ2Fycyh0cnVlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgZW5kR2FtZSAocmVhc29uOiBzdHJpbmcsIHJlc3VsdDogJ3dpbicgfCAnbG9zZScpXG4gICAge1xuICAgICAgICBpZiAodGhpcy5nYW1lT3ZlcikgcmV0dXJuO1xuICAgICAgICB0aGlzLmdhbWVPdmVyID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5xdWl6T3BlbiA9IGZhbHNlO1xuICAgICAgICB0aGlzLnF1aXpMb2NrZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5oYXNTdGFydGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuY2xvc2VRdWl6KCk7XG4gICAgICAgIHRoaXMuc3VibWl0U2Vzc2lvblJlc3VsdCgpO1xuXG4gICAgICAgIGlmIChyZXN1bHQgPT09ICdsb3NlJykge1xuICAgICAgICAgICAgdGhpcy5vcGVuVGltZVVwTW9kYWwoJ091dCBvZiB0aW1lISBUcnkgYWdhaW4uJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vcGVuVGltZVVwTW9kYWwocmVhc29uIHx8ICdHcmVhdCBqb2IhIFlvdSB3b24hJyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBmb3JtYXRUaW1lIChzZWNvbmRzOiBudW1iZXIpXG4gICAge1xuICAgICAgICBjb25zdCBtaW5zID0gTWF0aC5mbG9vcihzZWNvbmRzIC8gNjApO1xuICAgICAgICBjb25zdCBzZWNzID0gc2Vjb25kcyAlIDYwO1xuICAgICAgICByZXR1cm4gYCR7bWluc31tICR7c2Vjcy50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9c2A7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIlNjZW5lIiwiRXZlbnRCdXMiLCJnZXRHYW1lQ29uZmlnIiwicmVzb2x2ZUdhbWVDb2RlIiwiUXVpelBhbmVsIiwiRkFMTEJBQ0tfUVVFU1RJT05TIiwicXVlc3Rpb24iLCJjb250ZW50Iiwib3B0aW9ucyIsInRleHQiLCJpc19jb3JyZWN0IiwiVHJhaW5HYW1lIiwiZGVidWdUcmFjayIsInNob3dSYWlsT3ZlcmxheSIsInNob3dDYXJzIiwidHJhaW5Nb3ZpbmciLCJ0cmFmZmljTGlnaHRTdGF0ZSIsInRyYWluRGlzdGFuY2VQeCIsInRyYWluU3BlZWRQeFBlclNlYyIsInRyYWluR2FwUHgiLCJ0cmFja0xlbmd0aCIsInRyYWluQ2FyR2FwRmFjdG9yIiwidHJhaW5DYXJTY2FsZUZhY3RvciIsInJhaWxQYXRoUG9pbnRzIiwicmFpbFNlZ21lbnRMZW5ndGhzIiwicmFpbFRvdGFsTGVuZ3RoIiwidHJhaW5Sb3RhdGlvbk9mZnNldCIsIlBoYXNlciIsIk1hdGgiLCJEZWdUb1JhZCIsImxlYWRDYXJTdGF0ZSIsImxlYWRDYXJCYXNlU2l6ZSIsImRlYnVnTWFya2VyTGFiZWxzIiwic2hvd0hvdmVyQ29vcmRzIiwiYmFycmllckJhc2VBbmdsZSIsImJhcnJpZXJJc09wZW4iLCJjYXJTbG90cyIsInN0YXJ0TW9kYWxPcGVuIiwiaGFzU3RhcnRlZCIsImdhbWVDb2RlIiwic2Vzc2lvbklkIiwic2Vzc2lvbkdhbWVJZCIsInNlc3Npb25RdWVzdGlvbnMiLCJzZXNzaW9uVGltZUxpbWl0IiwibWF4Q2FycyIsImN1cnJlbnRJbmRleCIsInNjb3JlIiwidG90YWxUaW1lTXMiLCJyZW1haW5pbmdNcyIsImxhc3RTZWNvbmRTaG93biIsInF1aXpPcGVuIiwicXVpekxvY2tlZCIsImdhbWVPdmVyIiwicXVlc3Rpb25zIiwiY3VycmVudENvcnJlY3RJbmRleCIsImN1cnJlbnRTZXNzaW9uUXVlc3Rpb25JZCIsImN1cnJlbnRPcHRpb25JZHMiLCJ0cmFpblN0ZXBQeCIsImluaXQiLCJkYXRhIiwicmVnaXN0cnkiLCJnZXQiLCJzZXQiLCJnYW1lSWQiLCJ0aW1lTGltaXQiLCJjcmVhdGUiLCJ3aWR0aCIsImhlaWdodCIsInNjYWxlIiwiZ2FtZUNvbmZpZyIsImxlYWRDYXJCYWRnZSIsInVuZGVmaW5lZCIsImNhbWVyYSIsImNhbWVyYXMiLCJtYWluIiwic2V0QmFja2dyb3VuZENvbG9yIiwiYmFja2dyb3VuZENvbG9yIiwiYmFja2dyb3VuZCIsImFkZCIsImltYWdlIiwic2V0RGlzcGxheVNpemUiLCJzZXRPcmlnaW4iLCJzZXR1cFF1ZXN0aW9ucyIsInNldHVwVGltZXIiLCJjcmVhdGVIdWQiLCJjcmVhdGVSYWlsd2F5IiwibGF5b3V0VHJhaW4iLCJ1cGRhdGVUcmFpbkNhcnMiLCJjcmVhdGVCYXJyaWVyR2F0ZSIsImNyZWF0ZVF1aXpNb2RhbCIsImNyZWF0ZVN0YXJ0TW9kYWwiLCJjcmVhdGVUaW1lVXBNb2RhbCIsIm9wZW5TdGFydE1vZGFsIiwib24iLCJuZXdXaWR0aCIsIm5ld0hlaWdodCIsInNldFBvc2l0aW9uIiwibGF5b3V0SHVkIiwibGF5b3V0UXVpeiIsInVwZGF0ZUJhcnJpZXJQb3NpdGlvbiIsImxheW91dFN0YXJ0TW9kYWwiLCJsYXlvdXRUaW1lVXBNb2RhbCIsImVtaXQiLCJ1cGRhdGUiLCJfdGltZSIsImRlbHRhIiwibWF4Iiwic2Vjb25kcyIsImNlaWwiLCJ0aW1lclRleHQiLCJzZXRUZXh0IiwiZm9ybWF0VGltZSIsImVuZEdhbWUiLCJzb3VyY2UiLCJsZW5ndGgiLCJzbGljZSIsInVpUm9vdCIsImNvbnRhaW5lciIsInNldERlcHRoIiwiaHVkQmFja0J1dHRvbiIsImJhY2tCZyIsImdyYXBoaWNzIiwiZmlsbFN0eWxlIiwiZmlsbFJvdW5kZWRSZWN0IiwibGluZVN0eWxlIiwic3Ryb2tlUm91bmRlZFJlY3QiLCJiYWNrSWNvbiIsImZvbnRGYW1pbHkiLCJmb250U2l6ZSIsImNvbG9yIiwiYmFja0hpdCIsInpvbmUiLCJzZXRJbnRlcmFjdGl2ZSIsInVzZUhhbmRDdXJzb3IiLCJoYW5kbGVCYWNrVG9HYW1lTGlzdCIsInNldFNpemUiLCJodWRQb2ludHNQaWxsIiwicG9pbnRzQmciLCJwb2ludHNXIiwicG9pbnRzSCIsInN0YXIiLCJzZXRTY2FsZSIsInNldFRpbnQiLCJzY29yZVRleHQiLCJodWRUaW1lclBpbGwiLCJ0aW1lckJnIiwidGltZXJXIiwidGltZXJIIiwiY3JlYXRlVHJhZmZpY0xpZ2h0IiwidG9wSW5zZXQiLCJyb3VuZCIsInNpZGVJbnNldCIsInJpZ2h0RWRnZSIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsImxpZ2h0SGVpZ2h0Iiwic291cmNlSGVpZ2h0Iiwic291cmNlV2lkdGgiLCJsaWdodFdpZHRoIiwiYmFzZVgiLCJiYXNlWSIsImFuY2hvclkiLCJtYWtlVmFyaWFudCIsImtleSIsInNldEFscGhhIiwib2Zmc2V0cyIsInJlZCIsIngiLCJ5IiwieWVsbG93IiwiZ3JlZW4iLCJ0ZXh0dXJlcyIsImV4aXN0cyIsInJlY3RhbmdsZSIsIm5vcm1hbGl6ZSIsIm9iaiIsInRyYWZmaWNMaWdodFZhcmlhbnRzIiwidHJhZmZpY0xpZ2h0IiwiY3ljbGUiLCJjeWNsZUluZGV4Iiwic2V0VHJhZmZpY0xpZ2h0Q29sb3IiLCJ0aW1lIiwiYWRkRXZlbnQiLCJkZWxheSIsImxvb3AiLCJjYWxsYmFjayIsInNldFZpc2libGUiLCJzY2FsZVgiLCJkaXNwbGF5V2lkdGgiLCJzY2FsZVkiLCJkaXNwbGF5SGVpZ2h0IiwibWluIiwidHJhY2tDdXJ2ZSIsImNyZWF0ZVRyYWNrQ3VydmUiLCJ0cmFja1BvaW50cyIsInNhbXBsZVRyYWNrIiwiaSIsImNhcktleSIsInBvaW50IiwiYW5nbGUiLCJnZXRUcmFja0FuZ2xlIiwiY2FyIiwic2V0Um90YXRpb24iLCJsb2NrIiwiY3JlYXRlTG9ja092ZXJsYXkiLCJkaXNhYmxlSW50ZXJhY3RpdmUiLCJwdXNoIiwiaW5kZXgiLCJyZWZlcmVuY2VDYXIiLCJjYXJMZW5ndGgiLCJzZXRUZXh0dXJlIiwic2V0TGVhZENhclN0YXRlIiwicmVmcmVzaExvY2tzIiwiZ2V0TGVhZENhclRleHR1cmVLZXkiLCJzdGF0ZSIsImxlYWRDYXIiLCJzY2VuZSIsInRleHR1cmUiLCJ0ZXh0dXJlS2V5IiwiZGVwdGgiLCJwYW5lbFciLCJwYW5lbEgiLCJiZyIsInNldFN0cm9rZVN0eWxlIiwiaGl0QXJlYSIsIkdlb20iLCJSZWN0YW5nbGUiLCJDb250YWlucyIsInNldERhdGEiLCJzZXRGaWxsU3R5bGUiLCJpbnB1dCIsInNldERlZmF1bHRDdXJzb3IiLCJvcGVuUXVlc3Rpb24iLCJmb3JFYWNoIiwic2xvdCIsInBvaW50cyIsInRvU3RyaW5nIiwicGFkU3RhcnQiLCJxdWl6UGFuZWwiLCJvcHRpb25Db3VudCIsInBhcmVudCIsInNob3dJbmRleCIsInF1aXpNb2RhbCIsIm9uT3B0aW9uU2VsZWN0ZWQiLCJoYW5kbGVBbnN3ZXIiLCJvdmVybGF5IiwicGFuZWwiLCJwYW5lbFdpZHRoIiwicGFuZWxIZWlnaHQiLCJwYW5lbFNoYWRvdyIsInBhbmVsQmciLCJ0aXRsZSIsImFsaWduIiwibGluZVNwYWNpbmciLCJidXR0b24iLCJjcmVhdGVTdGFydEJ1dHRvbiIsInN0YXJ0TW9kYWwiLCJzdGFydE1vZGFsUGFuZWwiLCJ0aW1lVXBUaXRsZVRleHQiLCJjcmVhdGVUaW1lb3V0QnV0dG9uIiwidGltZVVwTW9kYWwiLCJ0aW1lVXBNb2RhbFBhbmVsIiwibGlzdCIsInJhZGl1cyIsInNoYWRvdyIsImRyYXciLCJmaWxsIiwic3Ryb2tlIiwiY2xlYXIiLCJoaXQiLCJ0d2VlbnMiLCJ0YXJnZXRzIiwiZHVyYXRpb24iLCJlYXNlIiwic3RhcnRHYW1lRmxvdyIsInlveW8iLCJyZXBlYXQiLCJnZXREYXRhIiwiZGVsYXllZENhbGwiLCJzeXMiLCJpc0FjdGl2ZSIsInJlc3RhcnRUcmFpblJ1biIsImFscGhhIiwiY2xvc2VTdGFydE1vZGFsIiwib3BlblRpbWVVcE1vZGFsIiwibWVzc2FnZSIsInN1Ym1pdFNlc3Npb25SZXN1bHQiLCJ0aGVuIiwiZW5kR2FtZVNlc3Npb24iLCJjYXRjaCIsImVycm9yIiwiY29uc29sZSIsImNsb3NlUXVpeiIsInJlc3RhcnQiLCJsYXlvdXQiLCJnZXRRdWVzdGlvbkZvckluZGV4IiwibWFwIiwib3B0IiwiaWQiLCJzZXNzaW9uX3F1ZXN0aW9uX2lkIiwiY29ycmVjdEluZGV4IiwiZmluZEluZGV4Iiwic2V0RmVlZGJhY2siLCJzZXRRdWVzdGlvbiIsInRvdGFsIiwic2V0QmFycmllck9wZW4iLCJzZWxlY3RlZEluZGV4IiwiaXNDb3JyZWN0Iiwic2VsZWN0ZWRPcHRpb25JZCIsInN1Ym1pdEFuc3dlciIsInJlcyIsInNldE9wdGlvblN0YXRlIiwiYXBwbHlDb3JyZWN0IiwiYXBwbHlXcm9uZyIsIm1vdmVUcmFpblRvRW5kIiwibW92ZVRyYWluVG9JbmRleCIsInRhcmdldEluZGV4Iiwib25Db21wbGV0ZSIsInZpc3VhbEluZGV4IiwiQ2xhbXAiLCJtYXhEaXN0YW5jZSIsInRhcmdldERpc3RhbmNlIiwiYWJzIiwidHdlZW5TdGF0ZSIsInZhbHVlIiwib25VcGRhdGUiLCJ0cmFpbkxlbmd0aCIsImJhc2VXaWR0aCIsImJhc2VIZWlnaHQiLCJwIiwiVmVjdG9yMiIsIkN1cnZlcyIsIlNwbGluZSIsImN1cnZlIiwiY291bnQiLCJ0IiwiZ2V0UG9pbnRBdCIsImRyYXdUcmFja0N1cnZlIiwic3RhcnRUIiwiZW5kVCIsImdldFZpc2libGVUUmFuZ2UiLCJzdGVwcyIsImZpcnN0IiwiZ2V0UG9pbnQiLCJiZWdpblBhdGgiLCJtb3ZlVG8iLCJsaW5lVG8iLCJzdHJva2VQYXRoIiwiZGVidWdDdXJ2ZUdyYXBoaWNzIiwiZHJhd0N1cnZlTWFya2VycyIsImNsYW1wZWRYIiwiY2xhbXBlZFkiLCJzdHJva2VMaW5lU2hhcGUiLCJMaW5lIiwiZmlsbENpcmNsZSIsImxhYmVsVGV4dCIsImxhYmVsIiwic3Ryb2tlVGhpY2tuZXNzIiwiZGVidWdNYXJrZXJHcmFwaGljcyIsIm1hcmdpbiIsInNhbXBsZXMiLCJmb3VuZFN0YXJ0IiwiaW5zaWRlIiwic3RhcnRFeHRlbmQiLCJlbmRFeHRlbmQiLCJjdXJyIiwibmV4dCIsImF0YW4yIiwiYnVpbGRSYWlsUGF0aCIsInNwbGluZSIsImdldExlbmd0aCIsInNhbXBsZUV2ZXJ5UHgiLCJzZWdtZW50cyIsInNlZ0xlbiIsIkRpc3RhbmNlIiwiQmV0d2VlbiIsInNhbXBsZVJhaWxCeURpc3RhbmNlTm9XcmFwIiwiZGlzdGFuY2VQeCIsInBvc2l0aW9uIiwic3RhcnQiLCJkaXIiLCJjb3MiLCJzaW4iLCJwb3MiLCJlbmQiLCJwcmV2IiwicmVtYWluaW5nIiwic2VnSW5kZXgiLCJzYWZlSW5kZXgiLCJyYXRpbyIsIkxpbmVhciIsInRyYWNrU3BsaW5lIiwiYmFzZVNjYWxlIiwicmFpbE9mZnNldCIsInNsZWVwZXJXaWR0aCIsInNsZWVwZXJIZWlnaHQiLCJyYWlsd2F5Q29udGFpbmVyIiwicmFpbExlZnQiLCJyYWlsUmlnaHQiLCJ0YW5nZW50IiwiZ2V0VGFuZ2VudCIsIm5vcm1hbCIsInJhaWxzIiwic2xlZXBlckNvdW50IiwiUEkiLCJzbGVlcGVyIiwic2V0UmFpbHdheVZpc2libGUiLCJzZXREZWJ1Z1RyYWNrVmlzaWJsZSIsImdhdGUiLCJiYXJyaWVyR2F0ZSIsInRhcmdldEFuZ2xlIiwib3BlbiIsImltbWVkaWF0ZSIsInJvdGF0aW9uIiwiZm9yY2UiLCJkaXN0YW5jZUZyb21Cb3R0b20iLCJtYXBwZWREaXN0YW5jZSIsInNhbXBsZSIsIm9mZnNldFgiLCJvZmZzZXRZIiwid29ybGRYIiwid29ybGRZIiwic2V0U2hvd0NhcnMiLCJpc1JhaWx3YXlWaXNpYmxlIiwidmlzaWJsZSIsInNldFRyYWluTW92aW5nIiwicmVhc29uIiwicmVzdWx0IiwibWlucyIsImZsb29yIiwic2VjcyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/game/scenes/TrainGame.ts\n");

/***/ }),

/***/ "(pages-dir-node)/./src/game/ui/QuizPanel.ts":
/*!**********************************!*\
  !*** ./src/game/ui/QuizPanel.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   QuizPanel: () => (/* binding */ QuizPanel)\n/* harmony export */ });\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_0__);\n\nclass QuizPanel {\n    constructor(scene, config = {}){\n        this.optionButtons = [];\n        this.scene = scene;\n        this.optionCount = config.optionCount ?? 4;\n        this.showIndex = config.showIndex ?? true;\n        this.container = this.scene.add.container(0, 0).setDepth(config.depth ?? 200);\n        this.container.setScrollFactor(0);\n        this.container.setVisible(false);\n        this.panelContainer = this.scene.add.container(0, 0);\n        this.panelShadow = this.scene.add.graphics();\n        this.panelBg = this.scene.add.graphics();\n        this.panelGlow = this.scene.add.graphics();\n        this.indexText = this.scene.add.text(0, 0, 'Question 1/4', {\n            fontFamily: 'Arial Black',\n            fontSize: '14px',\n            color: '#38bdf8'\n        }).setOrigin(0.5, 0);\n        this.feedbackTitleText = this.scene.add.text(0, 0, 'Correct!', {\n            fontFamily: 'Arial Black',\n            fontSize: '22px',\n            color: '#22c55e',\n            align: 'center',\n            wordWrap: {\n                width: 600,\n                useAdvancedWrap: true\n            }\n        }).setOrigin(0.5, 0);\n        this.feedbackSubtitleText = this.scene.add.text(0, 0, 'You earned 1 point!', {\n            fontFamily: 'Arial Black',\n            fontSize: '18px',\n            color: '#16a34a',\n            align: 'center',\n            wordWrap: {\n                width: 600,\n                useAdvancedWrap: true\n            }\n        }).setOrigin(0.5, 0);\n        this.questionText = this.scene.add.text(0, 0, '...', {\n            fontFamily: 'Arial Black',\n            fontSize: '28px',\n            color: '#0f172a',\n            align: 'center',\n            wordWrap: {\n                width: 600,\n                useAdvancedWrap: true\n            }\n        }).setOrigin(0.5, 0);\n        this.panelContainer.add([\n            this.panelShadow,\n            this.panelBg,\n            this.panelGlow,\n            this.indexText,\n            this.feedbackTitleText,\n            this.feedbackSubtitleText,\n            this.questionText\n        ]);\n        for(let i = 0; i < this.optionCount; i += 1){\n            const option = this.createOptionButton(0, 0);\n            this.optionButtons.push(option);\n            this.panelContainer.add(option);\n        }\n        this.container.add(this.panelContainer);\n        if (config.parent) {\n            config.parent.add(this.container);\n        }\n    }\n    setVisible(value) {\n        this.container.setVisible(value);\n    }\n    setAlpha(value) {\n        this.container.setAlpha(value);\n    }\n    setInteractive(enabled) {\n        this.optionButtons.forEach((btn)=>{\n            const hit = btn.getData('hit');\n            if (!hit) return;\n            if (enabled) {\n                hit.setInteractive();\n            } else {\n                hit.disableInteractive();\n            }\n        });\n    }\n    onOptionSelected(callback) {\n        this.optionButtons.forEach((btn, index)=>{\n            const hit = btn.getData('hit');\n            if (!hit) return;\n            hit.removeAllListeners('pointerdown');\n            hit.on('pointerdown', ()=>callback(index));\n        });\n    }\n    setQuestion(data) {\n        if (this.showIndex && data.index && data.total) {\n            this.indexText.setText(`Question ${data.index}/${data.total}`);\n            this.indexText.setAlpha(1);\n        } else {\n            this.indexText.setAlpha(0);\n        }\n        const maxQuestionChars = 55;\n        const question = data.question.length > maxQuestionChars ? `${data.question.slice(0, maxQuestionChars - 1)}…` : data.question;\n        this.questionText.setText(question);\n        this.optionButtons.forEach((btn, i)=>{\n            const redraw = btn.getData('redraw');\n            const text = btn.getData('text');\n            redraw('normal');\n            text.setFontSize(20);\n            text.setText(`${data.options[i] ?? ''}`);\n            if (text.width > 520) text.setFontSize(18);\n            if (text.width > 560) text.setFontSize(17);\n        });\n    }\n    setFeedback(state) {\n        if (state === 'correct') {\n            this.feedbackTitleText.setText('Correct!');\n            this.feedbackTitleText.setColor('#22c55e');\n            this.feedbackSubtitleText.setText('You earned 1 point!');\n            this.feedbackSubtitleText.setColor('#16a34a');\n            this.feedbackTitleText.setAlpha(1);\n            this.feedbackSubtitleText.setAlpha(1);\n        } else if (state === 'wrong') {\n            this.feedbackTitleText.setText('Sorry!');\n            this.feedbackTitleText.setColor('#ef4444');\n            this.feedbackSubtitleText.setText('You have to start over.');\n            this.feedbackSubtitleText.setColor('#0f172a');\n            this.feedbackTitleText.setAlpha(1);\n            this.feedbackSubtitleText.setAlpha(1);\n        } else {\n            this.feedbackTitleText.setAlpha(0);\n            this.feedbackSubtitleText.setAlpha(0);\n        }\n    }\n    setOptionState(index, state) {\n        const btn = this.optionButtons[index];\n        if (!btn) return;\n        const redraw = btn.getData('redraw');\n        redraw(state);\n    }\n    layout(width, height) {\n        const uiScale = phaser__WEBPACK_IMPORTED_MODULE_0___default().Math.Clamp(width / 900, 0.9, 1.05);\n        const panelWidth = Math.floor(width * 0.9);\n        const maxPanelHeight = Math.floor(height * 0.62 / uiScale);\n        const questionWrap = Math.floor(panelWidth * 0.8);\n        this.questionText.setWordWrapWidth(questionWrap, true);\n        this.feedbackTitleText.setWordWrapWidth(questionWrap, true);\n        this.feedbackSubtitleText.setWordWrapWidth(questionWrap, true);\n        let fontSize = 28;\n        const minFont = 20;\n        let panelHeight = 0;\n        while(fontSize >= minFont){\n            this.questionText.setFontSize(fontSize);\n            const qBounds = this.questionText.getBounds();\n            const headerH = this.indexText.getBounds().height;\n            const feedbackTitleH = 22;\n            const feedbackSubtitleH = 18;\n            const feedbackGap = 4;\n            const feedbackTopGap = 8;\n            const feedbackBottomGap = 8;\n            const paddingTop = 10;\n            const paddingBottom = 14;\n            const questionGap = 6;\n            const optionsTopGap = 14;\n            const buttonHeight = 62;\n            const buttonGap = 14;\n            panelHeight = paddingTop + headerH + feedbackTopGap + feedbackTitleH + feedbackGap + feedbackSubtitleH + feedbackBottomGap + qBounds.height + optionsTopGap + buttonHeight * this.optionCount + buttonGap * (this.optionCount - 1) + paddingBottom;\n            if (panelHeight <= maxPanelHeight) break;\n            fontSize -= 2;\n        }\n        const qBounds = this.questionText.getBounds();\n        const headerH = this.indexText.getBounds().height;\n        let paddingTop = 12;\n        let paddingBottom = 16;\n        let optionsTopGap = 14;\n        let buttonHeight = 62;\n        let buttonGap = 14;\n        let feedbackTopGap = 8;\n        let feedbackBottomGap = 8;\n        const feedbackTitleH = 22;\n        const feedbackSubtitleH = 18;\n        const feedbackGap = 4;\n        if (panelHeight > maxPanelHeight) {\n            paddingTop = 10;\n            paddingBottom = 12;\n            optionsTopGap = 12;\n            feedbackTopGap = 6;\n            feedbackBottomGap = 6;\n        }\n        const minButtonHeight = 52;\n        const minButtonGap = 8;\n        const fixedHeight = paddingTop + headerH + feedbackTopGap + feedbackTitleH + feedbackGap + feedbackSubtitleH + feedbackBottomGap + qBounds.height + optionsTopGap + paddingBottom;\n        const maxButtonsSpace = Math.max(0, maxPanelHeight - fixedHeight);\n        const desiredButtonsSpace = buttonHeight * this.optionCount + buttonGap * (this.optionCount - 1);\n        if (desiredButtonsSpace > maxButtonsSpace) {\n            const perButton = Math.floor((maxButtonsSpace - buttonGap * (this.optionCount - 1)) / this.optionCount);\n            buttonHeight = phaser__WEBPACK_IMPORTED_MODULE_0___default().Math.Clamp(perButton, minButtonHeight, buttonHeight);\n            const remaining = maxButtonsSpace - buttonHeight * this.optionCount;\n            const perGap = Math.floor(remaining / (this.optionCount - 1));\n            buttonGap = phaser__WEBPACK_IMPORTED_MODULE_0___default().Math.Clamp(perGap, minButtonGap, buttonGap);\n        }\n        panelHeight = paddingTop + headerH + feedbackTopGap + feedbackTitleH + feedbackGap + feedbackSubtitleH + feedbackBottomGap + qBounds.height + optionsTopGap + buttonHeight * this.optionCount + buttonGap * (this.optionCount - 1) + paddingBottom;\n        const panelX = width / 2;\n        const panelY = height / 2;\n        this.panelContainer.setScale(uiScale);\n        this.panelContainer.setPosition(panelX, panelY);\n        this.panelShadow.clear();\n        this.panelShadow.fillStyle(0x000000, 0.18);\n        this.panelShadow.fillRoundedRect(-panelWidth / 2 + 8, -panelHeight / 2 + 14, panelWidth, panelHeight, 28);\n        this.panelBg.clear();\n        this.panelBg.fillStyle(0xf8fbff, 0.92);\n        this.panelBg.fillRoundedRect(-panelWidth / 2, -panelHeight / 2, panelWidth, panelHeight, 28);\n        this.panelBg.lineStyle(2, 0x93c5fd, 0.6);\n        this.panelBg.strokeRoundedRect(-panelWidth / 2, -panelHeight / 2, panelWidth, panelHeight, 28);\n        this.panelGlow.clear();\n        this.panelGlow.fillStyle(0xe0f2fe, 0.5);\n        this.panelGlow.fillRoundedRect(-panelWidth / 2 + 10, -panelHeight / 2 + 10, panelWidth - 20, panelHeight - 20, 20);\n        const headerY = -panelHeight / 2 + paddingTop;\n        this.indexText.setPosition(0, headerY);\n        const feedbackY = headerY + headerH + feedbackTopGap;\n        this.feedbackTitleText.setPosition(0, feedbackY);\n        this.feedbackSubtitleText.setPosition(0, feedbackY + feedbackTitleH + feedbackGap);\n        const questionY = feedbackY + feedbackTitleH + feedbackGap + feedbackSubtitleH + feedbackBottomGap;\n        this.questionText.setPosition(0, questionY);\n        const answersStartY = questionY + qBounds.height + optionsTopGap + buttonHeight / 2;\n        this.optionButtons.forEach((btn, i)=>{\n            const y = answersStartY + i * (buttonHeight + buttonGap);\n            btn.setPosition(0, y);\n            btn.setData('layout', {\n                x: -panelWidth / 2 + 32,\n                w: panelWidth - 64,\n                h: buttonHeight,\n                radius: 22\n            });\n            const redraw = btn.getData('redraw');\n            redraw('normal');\n            const text = btn.getData('text');\n            const hit = btn.getData('hit');\n            const layout = btn.getData('layout');\n            text.setPosition(layout.x + layout.w / 2, 0);\n            hit.setSize(layout.w, layout.h);\n            hit.setPosition(layout.x + layout.w / 2, 0);\n            btn.setSize(layout.w, layout.h);\n        });\n        const halfPanel = panelHeight * uiScale / 2;\n        if (this.panelContainer.y - halfPanel < 60) {\n            this.panelContainer.y = 60 + halfPanel;\n        }\n        if (this.panelContainer.y + halfPanel > height - 40) {\n            this.panelContainer.y = height - 40 - halfPanel;\n        }\n        return {\n            uiScale,\n            panelHeight,\n            panelWidth\n        };\n    }\n    createOptionButton(x, y) {\n        const container = this.scene.add.container(x, y);\n        const width = 640;\n        const height = 54;\n        const radius = 22;\n        const baseColor = 0x38bdf8;\n        const shadow = this.scene.add.graphics();\n        const bg = this.scene.add.graphics();\n        const text = this.scene.add.text(0, 0, '...', {\n            fontFamily: 'Arial Black',\n            fontSize: '20px',\n            color: '#ffffff'\n        }).setOrigin(0.5);\n        const hit = this.scene.add.rectangle(0, 0, width, height, 0xffffff, 0.001);\n        hit.setInteractive();\n        const redraw = (state)=>{\n            const layout = container.getData('layout');\n            const drawX = layout?.x ?? -width / 2;\n            const drawW = layout?.w ?? width;\n            const drawH = layout?.h ?? height;\n            const drawR = layout?.radius ?? radius;\n            let fill = baseColor;\n            let stroke = 0x7dd3fc;\n            if (state === 'correct') {\n                fill = 0x22c55e;\n                stroke = 0x86efac;\n            } else if (state === 'wrong') {\n                fill = 0xef4444;\n                stroke = 0xfca5a5;\n            }\n            shadow.clear();\n            shadow.fillStyle(0x000000, 0.18);\n            shadow.fillRoundedRect(drawX + 2, -drawH / 2 + 4, drawW, drawH, drawR);\n            bg.clear();\n            bg.fillStyle(fill, 1);\n            bg.fillRoundedRect(drawX, -drawH / 2, drawW, drawH, drawR);\n            bg.lineStyle(2, stroke, 0.9);\n            bg.strokeRoundedRect(drawX, -drawH / 2, drawW, drawH, drawR);\n        };\n        redraw('normal');\n        container.add([\n            shadow,\n            bg,\n            text,\n            hit\n        ]);\n        container.setSize(width, height);\n        container.setData('redraw', redraw);\n        container.setData('text', text);\n        container.setData('hit', hit);\n        return container;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9nYW1lL3VpL1F1aXpQYW5lbC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBNEI7QUFTckIsTUFBTUM7SUFnQlQsWUFBWUMsS0FBbUIsRUFBRUMsU0FBMEIsQ0FBQyxDQUFDLENBQUU7YUFMdERDLGdCQUFnRCxFQUFFO1FBTXZELElBQUksQ0FBQ0YsS0FBSyxHQUFHQTtRQUNiLElBQUksQ0FBQ0csV0FBVyxHQUFHRixPQUFPRSxXQUFXLElBQUk7UUFDekMsSUFBSSxDQUFDQyxTQUFTLEdBQUdILE9BQU9HLFNBQVMsSUFBSTtRQUVyQyxJQUFJLENBQUNDLFNBQVMsR0FBRyxJQUFJLENBQUNMLEtBQUssQ0FBQ00sR0FBRyxDQUFDRCxTQUFTLENBQUMsR0FBRyxHQUFHRSxRQUFRLENBQUNOLE9BQU9PLEtBQUssSUFBSTtRQUN6RSxJQUFJLENBQUNILFNBQVMsQ0FBQ0ksZUFBZSxDQUFDO1FBQy9CLElBQUksQ0FBQ0osU0FBUyxDQUFDSyxVQUFVLENBQUM7UUFFMUIsSUFBSSxDQUFDQyxjQUFjLEdBQUcsSUFBSSxDQUFDWCxLQUFLLENBQUNNLEdBQUcsQ0FBQ0QsU0FBUyxDQUFDLEdBQUc7UUFDbEQsSUFBSSxDQUFDTyxXQUFXLEdBQUcsSUFBSSxDQUFDWixLQUFLLENBQUNNLEdBQUcsQ0FBQ08sUUFBUTtRQUMxQyxJQUFJLENBQUNDLE9BQU8sR0FBRyxJQUFJLENBQUNkLEtBQUssQ0FBQ00sR0FBRyxDQUFDTyxRQUFRO1FBQ3RDLElBQUksQ0FBQ0UsU0FBUyxHQUFHLElBQUksQ0FBQ2YsS0FBSyxDQUFDTSxHQUFHLENBQUNPLFFBQVE7UUFFeEMsSUFBSSxDQUFDRyxTQUFTLEdBQUcsSUFBSSxDQUFDaEIsS0FBSyxDQUFDTSxHQUFHLENBQUNXLElBQUksQ0FBQyxHQUFHLEdBQUcsZ0JBQWdCO1lBQ3ZEQyxZQUFZO1lBQ1pDLFVBQVU7WUFDVkMsT0FBTztRQUNYLEdBQUdDLFNBQVMsQ0FBQyxLQUFLO1FBRWxCLElBQUksQ0FBQ0Ms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QU9uQztJQUNYO0FBQ0oiLCJzb3VyY2VzIjpbIi9Vc2Vycy9uYjIzMDYwMS9Eb2N1bWVudHMvcGhhc2VyLWdhbWVkZXYvc3JjL2dhbWUvdWkvUXVpelBhbmVsLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQaGFzZXIgZnJvbSAncGhhc2VyJztcblxudHlwZSBRdWl6UGFuZWxDb25maWcgPSB7XG4gICAgb3B0aW9uQ291bnQ/OiBudW1iZXI7XG4gICAgZGVwdGg/OiBudW1iZXI7XG4gICAgcGFyZW50PzogUGhhc2VyLkdhbWVPYmplY3RzLkNvbnRhaW5lcjtcbiAgICBzaG93SW5kZXg/OiBib29sZWFuO1xufTtcblxuZXhwb3J0IGNsYXNzIFF1aXpQYW5lbCB7XG4gICAgcmVhZG9ubHkgc2NlbmU6IFBoYXNlci5TY2VuZTtcbiAgICByZWFkb25seSBjb250YWluZXI6IFBoYXNlci5HYW1lT2JqZWN0cy5Db250YWluZXI7XG4gICAgcmVhZG9ubHkgcGFuZWxDb250YWluZXI6IFBoYXNlci5HYW1lT2JqZWN0cy5Db250YWluZXI7XG4gICAgcmVhZG9ubHkgcGFuZWxTaGFkb3c6IFBoYXNlci5HYW1lT2JqZWN0cy5HcmFwaGljcztcbiAgICByZWFkb25seSBwYW5lbEJnOiBQaGFzZXIuR2FtZU9iamVjdHMuR3JhcGhpY3M7XG4gICAgcmVhZG9ubHkgcGFuZWxHbG93OiBQaGFzZXIuR2FtZU9iamVjdHMuR3JhcGhpY3M7XG4gICAgcmVhZG9ubHkgaW5kZXhUZXh0OiBQaGFzZXIuR2FtZU9iamVjdHMuVGV4dDtcbiAgICByZWFkb25seSBmZWVkYmFja1RpdGxlVGV4dDogUGhhc2VyLkdhbWVPYmplY3RzLlRleHQ7XG4gICAgcmVhZG9ubHkgZmVlZGJhY2tTdWJ0aXRsZVRleHQ6IFBoYXNlci5HYW1lT2JqZWN0cy5UZXh0O1xuICAgIHJlYWRvbmx5IHF1ZXN0aW9uVGV4dDogUGhhc2VyLkdhbWVPYmplY3RzLlRleHQ7XG4gICAgcmVhZG9ubHkgb3B0aW9uQnV0dG9uczogUGhhc2VyLkdhbWVPYmplY3RzLkNvbnRhaW5lcltdID0gW107XG5cbiAgICBwcml2YXRlIHJlYWRvbmx5IG9wdGlvbkNvdW50OiBudW1iZXI7XG4gICAgcHJpdmF0ZSByZWFkb25seSBzaG93SW5kZXg6IGJvb2xlYW47XG5cbiAgICBjb25zdHJ1Y3RvcihzY2VuZTogUGhhc2VyLlNjZW5lLCBjb25maWc6IFF1aXpQYW5lbENvbmZpZyA9IHt9KSB7XG4gICAgICAgIHRoaXMuc2NlbmUgPSBzY2VuZTtcbiAgICAgICAgdGhpcy5vcHRpb25Db3VudCA9IGNvbmZpZy5vcHRpb25Db3VudCA/PyA0O1xuICAgICAgICB0aGlzLnNob3dJbmRleCA9IGNvbmZpZy5zaG93SW5kZXggPz8gdHJ1ZTtcblxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IHRoaXMuc2NlbmUuYWRkLmNvbnRhaW5lcigwLCAwKS5zZXREZXB0aChjb25maWcuZGVwdGggPz8gMjAwKTtcbiAgICAgICAgdGhpcy5jb250YWluZXIuc2V0U2Nyb2xsRmFjdG9yKDApO1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5zZXRWaXNpYmxlKGZhbHNlKTtcblxuICAgICAgICB0aGlzLnBhbmVsQ29udGFpbmVyID0gdGhpcy5zY2VuZS5hZGQuY29udGFpbmVyKDAsIDApO1xuICAgICAgICB0aGlzLnBhbmVsU2hhZG93ID0gdGhpcy5zY2VuZS5hZGQuZ3JhcGhpY3MoKTtcbiAgICAgICAgdGhpcy5wYW5lbEJnID0gdGhpcy5zY2VuZS5hZGQuZ3JhcGhpY3MoKTtcbiAgICAgICAgdGhpcy5wYW5lbEdsb3cgPSB0aGlzLnNjZW5lLmFkZC5ncmFwaGljcygpO1xuXG4gICAgICAgIHRoaXMuaW5kZXhUZXh0ID0gdGhpcy5zY2VuZS5hZGQudGV4dCgwLCAwLCAnUXVlc3Rpb24gMS80Jywge1xuICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsIEJsYWNrJyxcbiAgICAgICAgICAgIGZvbnRTaXplOiAnMTRweCcsXG4gICAgICAgICAgICBjb2xvcjogJyMzOGJkZjgnXG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUsIDApO1xuXG4gICAgICAgIHRoaXMuZmVlZGJhY2tUaXRsZVRleHQgPSB0aGlzLnNjZW5lLmFkZC50ZXh0KDAsIDAsICdDb3JyZWN0IScsIHtcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCBCbGFjaycsXG4gICAgICAgICAgICBmb250U2l6ZTogJzIycHgnLFxuICAgICAgICAgICAgY29sb3I6ICcjMjJjNTVlJyxcbiAgICAgICAgICAgIGFsaWduOiAnY2VudGVyJyxcbiAgICAgICAgICAgIHdvcmRXcmFwOiB7IHdpZHRoOiA2MDAsIHVzZUFkdmFuY2VkV3JhcDogdHJ1ZSB9XG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUsIDApO1xuXG4gICAgICAgIHRoaXMuZmVlZGJhY2tTdWJ0aXRsZVRleHQgPSB0aGlzLnNjZW5lLmFkZC50ZXh0KDAsIDAsICdZb3UgZWFybmVkIDEgcG9pbnQhJywge1xuICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsIEJsYWNrJyxcbiAgICAgICAgICAgIGZvbnRTaXplOiAnMThweCcsXG4gICAgICAgICAgICBjb2xvcjogJyMxNmEzNGEnLFxuICAgICAgICAgICAgYWxpZ246ICdjZW50ZXInLFxuICAgICAgICAgICAgd29yZFdyYXA6IHsgd2lkdGg6IDYwMCwgdXNlQWR2YW5jZWRXcmFwOiB0cnVlIH1cbiAgICAgICAgfSkuc2V0T3JpZ2luKDAuNSwgMCk7XG5cbiAgICAgICAgdGhpcy5xdWVzdGlvblRleHQgPSB0aGlzLnNjZW5lLmFkZC50ZXh0KDAsIDAsICcuLi4nLCB7XG4gICAgICAgICAgICBmb250RmFtaWx5OiAnQXJpYWwgQmxhY2snLFxuICAgICAgICAgICAgZm9udFNpemU6ICcyOHB4JyxcbiAgICAgICAgICAgIGNvbG9yOiAnIzBmMTcyYScsXG4gICAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsXG4gICAgICAgICAgICB3b3JkV3JhcDogeyB3aWR0aDogNjAwLCB1c2VBZHZhbmNlZFdyYXA6IHRydWUgfVxuICAgICAgICB9KS5zZXRPcmlnaW4oMC41LCAwKTtcblxuICAgICAgICB0aGlzLnBhbmVsQ29udGFpbmVyLmFkZChbXG4gICAgICAgICAgICB0aGlzLnBhbmVsU2hhZG93LFxuICAgICAgICAgICAgdGhpcy5wYW5lbEJnLFxuICAgICAgICAgICAgdGhpcy5wYW5lbEdsb3csXG4gICAgICAgICAgICB0aGlzLmluZGV4VGV4dCxcbiAgICAgICAgICAgIHRoaXMuZmVlZGJhY2tUaXRsZVRleHQsXG4gICAgICAgICAgICB0aGlzLmZlZWRiYWNrU3VidGl0bGVUZXh0LFxuICAgICAgICAgICAgdGhpcy5xdWVzdGlvblRleHRcbiAgICAgICAgXSk7XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm9wdGlvbkNvdW50OyBpICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbiA9IHRoaXMuY3JlYXRlT3B0aW9uQnV0dG9uKDAsIDApO1xuICAgICAgICAgICAgdGhpcy5vcHRpb25CdXR0b25zLnB1c2gob3B0aW9uKTtcbiAgICAgICAgICAgIHRoaXMucGFuZWxDb250YWluZXIuYWRkKG9wdGlvbik7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNvbnRhaW5lci5hZGQodGhpcy5wYW5lbENvbnRhaW5lcik7XG5cbiAgICAgICAgaWYgKGNvbmZpZy5wYXJlbnQpIHtcbiAgICAgICAgICAgIGNvbmZpZy5wYXJlbnQuYWRkKHRoaXMuY29udGFpbmVyKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldFZpc2libGUodmFsdWU6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5jb250YWluZXIuc2V0VmlzaWJsZSh2YWx1ZSk7XG4gICAgfVxuXG4gICAgc2V0QWxwaGEodmFsdWU6IG51bWJlcik6IHZvaWQge1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5zZXRBbHBoYSh2YWx1ZSk7XG4gICAgfVxuXG4gICAgc2V0SW50ZXJhY3RpdmUoZW5hYmxlZDogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICB0aGlzLm9wdGlvbkJ1dHRvbnMuZm9yRWFjaCgoYnRuKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBoaXQgPSBidG4uZ2V0RGF0YSgnaGl0JykgYXMgUGhhc2VyLkdhbWVPYmplY3RzLlJlY3RhbmdsZSB8IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGlmICghaGl0KSByZXR1cm47XG4gICAgICAgICAgICBpZiAoZW5hYmxlZCkge1xuICAgICAgICAgICAgICAgIGhpdC5zZXRJbnRlcmFjdGl2ZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBoaXQuZGlzYWJsZUludGVyYWN0aXZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIG9uT3B0aW9uU2VsZWN0ZWQoY2FsbGJhY2s6IChpbmRleDogbnVtYmVyKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgICAgIHRoaXMub3B0aW9uQnV0dG9ucy5mb3JFYWNoKChidG4sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBoaXQgPSBidG4uZ2V0RGF0YSgnaGl0JykgYXMgUGhhc2VyLkdhbWVPYmplY3RzLlJlY3RhbmdsZSB8IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGlmICghaGl0KSByZXR1cm47XG4gICAgICAgICAgICBoaXQucmVtb3ZlQWxsTGlzdGVuZXJzKCdwb2ludGVyZG93bicpO1xuICAgICAgICAgICAgaGl0Lm9uKCdwb2ludGVyZG93bicsICgpID0+IGNhbGxiYWNrKGluZGV4KSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHNldFF1ZXN0aW9uKGRhdGE6IHsgaW5kZXg/OiBudW1iZXI7IHRvdGFsPzogbnVtYmVyOyBxdWVzdGlvbjogc3RyaW5nOyBvcHRpb25zOiBzdHJpbmdbXSB9KTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLnNob3dJbmRleCAmJiBkYXRhLmluZGV4ICYmIGRhdGEudG90YWwpIHtcbiAgICAgICAgICAgIHRoaXMuaW5kZXhUZXh0LnNldFRleHQoYFF1ZXN0aW9uICR7ZGF0YS5pbmRleH0vJHtkYXRhLnRvdGFsfWApO1xuICAgICAgICAgICAgdGhpcy5pbmRleFRleHQuc2V0QWxwaGEoMSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmluZGV4VGV4dC5zZXRBbHBoYSgwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG1heFF1ZXN0aW9uQ2hhcnMgPSA1NTtcbiAgICAgICAgY29uc3QgcXVlc3Rpb24gPVxuICAgICAgICAgICAgZGF0YS5xdWVzdGlvbi5sZW5ndGggPiBtYXhRdWVzdGlvbkNoYXJzXG4gICAgICAgICAgICAgICAgPyBgJHtkYXRhLnF1ZXN0aW9uLnNsaWNlKDAsIG1heFF1ZXN0aW9uQ2hhcnMgLSAxKX3igKZgXG4gICAgICAgICAgICAgICAgOiBkYXRhLnF1ZXN0aW9uO1xuICAgICAgICB0aGlzLnF1ZXN0aW9uVGV4dC5zZXRUZXh0KHF1ZXN0aW9uKTtcblxuICAgICAgICB0aGlzLm9wdGlvbkJ1dHRvbnMuZm9yRWFjaCgoYnRuLCBpKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZWRyYXcgPSBidG4uZ2V0RGF0YSgncmVkcmF3JykgYXMgKHN0YXRlOiAnbm9ybWFsJyB8ICdjb3JyZWN0JyB8ICd3cm9uZycpID0+IHZvaWQ7XG4gICAgICAgICAgICBjb25zdCB0ZXh0ID0gYnRuLmdldERhdGEoJ3RleHQnKSBhcyBQaGFzZXIuR2FtZU9iamVjdHMuVGV4dDtcblxuICAgICAgICAgICAgcmVkcmF3KCdub3JtYWwnKTtcbiAgICAgICAgICAgIHRleHQuc2V0Rm9udFNpemUoMjApO1xuICAgICAgICAgICAgdGV4dC5zZXRUZXh0KGAke2RhdGEub3B0aW9uc1tpXSA/PyAnJ31gKTtcblxuICAgICAgICAgICAgaWYgKHRleHQud2lkdGggPiA1MjApIHRleHQuc2V0Rm9udFNpemUoMTgpO1xuICAgICAgICAgICAgaWYgKHRleHQud2lkdGggPiA1NjApIHRleHQuc2V0Rm9udFNpemUoMTcpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzZXRGZWVkYmFjayhzdGF0ZTogJ2lkbGUnIHwgJ2NvcnJlY3QnIHwgJ3dyb25nJyk6IHZvaWQge1xuICAgICAgICBpZiAoc3RhdGUgPT09ICdjb3JyZWN0Jykge1xuICAgICAgICAgICAgdGhpcy5mZWVkYmFja1RpdGxlVGV4dC5zZXRUZXh0KCdDb3JyZWN0IScpO1xuICAgICAgICAgICAgdGhpcy5mZWVkYmFja1RpdGxlVGV4dC5zZXRDb2xvcignIzIyYzU1ZScpO1xuICAgICAgICAgICAgdGhpcy5mZWVkYmFja1N1YnRpdGxlVGV4dC5zZXRUZXh0KCdZb3UgZWFybmVkIDEgcG9pbnQhJyk7XG4gICAgICAgICAgICB0aGlzLmZlZWRiYWNrU3VidGl0bGVUZXh0LnNldENvbG9yKCcjMTZhMzRhJyk7XG4gICAgICAgICAgICB0aGlzLmZlZWRiYWNrVGl0bGVUZXh0LnNldEFscGhhKDEpO1xuICAgICAgICAgICAgdGhpcy5mZWVkYmFja1N1YnRpdGxlVGV4dC5zZXRBbHBoYSgxKTtcbiAgICAgICAgfSBlbHNlIGlmIChzdGF0ZSA9PT0gJ3dyb25nJykge1xuICAgICAgICAgICAgdGhpcy5mZWVkYmFja1RpdGxlVGV4dC5zZXRUZXh0KCdTb3JyeSEnKTtcbiAgICAgICAgICAgIHRoaXMuZmVlZGJhY2tUaXRsZVRleHQuc2V0Q29sb3IoJyNlZjQ0NDQnKTtcbiAgICAgICAgICAgIHRoaXMuZmVlZGJhY2tTdWJ0aXRsZVRleHQuc2V0VGV4dCgnWW91IGhhdmUgdG8gc3RhcnQgb3Zlci4nKTtcbiAgICAgICAgICAgIHRoaXMuZmVlZGJhY2tTdWJ0aXRsZVRleHQuc2V0Q29sb3IoJyMwZjE3MmEnKTtcbiAgICAgICAgICAgIHRoaXMuZmVlZGJhY2tUaXRsZVRleHQuc2V0QWxwaGEoMSk7XG4gICAgICAgICAgICB0aGlzLmZlZWRiYWNrU3VidGl0bGVUZXh0LnNldEFscGhhKDEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5mZWVkYmFja1RpdGxlVGV4dC5zZXRBbHBoYSgwKTtcbiAgICAgICAgICAgIHRoaXMuZmVlZGJhY2tTdWJ0aXRsZVRleHQuc2V0QWxwaGEoMCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRPcHRpb25TdGF0ZShpbmRleDogbnVtYmVyLCBzdGF0ZTogJ25vcm1hbCcgfCAnY29ycmVjdCcgfCAnd3JvbmcnKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGJ0biA9IHRoaXMub3B0aW9uQnV0dG9uc1tpbmRleF07XG4gICAgICAgIGlmICghYnRuKSByZXR1cm47XG4gICAgICAgIGNvbnN0IHJlZHJhdyA9IGJ0bi5nZXREYXRhKCdyZWRyYXcnKSBhcyAodmFsdWU6ICdub3JtYWwnIHwgJ2NvcnJlY3QnIHwgJ3dyb25nJykgPT4gdm9pZDtcbiAgICAgICAgcmVkcmF3KHN0YXRlKTtcbiAgICB9XG5cbiAgICBsYXlvdXQod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpOiB7IHVpU2NhbGU6IG51bWJlcjsgcGFuZWxIZWlnaHQ6IG51bWJlcjsgcGFuZWxXaWR0aDogbnVtYmVyIH0ge1xuICAgICAgICBjb25zdCB1aVNjYWxlID0gUGhhc2VyLk1hdGguQ2xhbXAod2lkdGggLyA5MDAsIDAuOSwgMS4wNSk7XG4gICAgICAgIGNvbnN0IHBhbmVsV2lkdGggPSBNYXRoLmZsb29yKHdpZHRoICogMC45KTtcbiAgICAgICAgY29uc3QgbWF4UGFuZWxIZWlnaHQgPSBNYXRoLmZsb29yKGhlaWdodCAqIDAuNjIgLyB1aVNjYWxlKTtcblxuICAgICAgICBjb25zdCBxdWVzdGlvbldyYXAgPSBNYXRoLmZsb29yKHBhbmVsV2lkdGggKiAwLjgpO1xuICAgICAgICB0aGlzLnF1ZXN0aW9uVGV4dC5zZXRXb3JkV3JhcFdpZHRoKHF1ZXN0aW9uV3JhcCwgdHJ1ZSk7XG4gICAgICAgIHRoaXMuZmVlZGJhY2tUaXRsZVRleHQuc2V0V29yZFdyYXBXaWR0aChxdWVzdGlvbldyYXAsIHRydWUpO1xuICAgICAgICB0aGlzLmZlZWRiYWNrU3VidGl0bGVUZXh0LnNldFdvcmRXcmFwV2lkdGgocXVlc3Rpb25XcmFwLCB0cnVlKTtcblxuICAgICAgICBsZXQgZm9udFNpemUgPSAyODtcbiAgICAgICAgY29uc3QgbWluRm9udCA9IDIwO1xuICAgICAgICBsZXQgcGFuZWxIZWlnaHQgPSAwO1xuXG4gICAgICAgIHdoaWxlIChmb250U2l6ZSA+PSBtaW5Gb250KSB7XG4gICAgICAgICAgICB0aGlzLnF1ZXN0aW9uVGV4dC5zZXRGb250U2l6ZShmb250U2l6ZSk7XG4gICAgICAgICAgICBjb25zdCBxQm91bmRzID0gdGhpcy5xdWVzdGlvblRleHQuZ2V0Qm91bmRzKCk7XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJIID0gdGhpcy5pbmRleFRleHQuZ2V0Qm91bmRzKCkuaGVpZ2h0O1xuICAgICAgICAgICAgY29uc3QgZmVlZGJhY2tUaXRsZUggPSAyMjtcbiAgICAgICAgICAgIGNvbnN0IGZlZWRiYWNrU3VidGl0bGVIID0gMTg7XG4gICAgICAgICAgICBjb25zdCBmZWVkYmFja0dhcCA9IDQ7XG4gICAgICAgICAgICBjb25zdCBmZWVkYmFja1RvcEdhcCA9IDg7XG4gICAgICAgICAgICBjb25zdCBmZWVkYmFja0JvdHRvbUdhcCA9IDg7XG4gICAgICAgICAgICBjb25zdCBwYWRkaW5nVG9wID0gMTA7XG4gICAgICAgICAgICBjb25zdCBwYWRkaW5nQm90dG9tID0gMTQ7XG4gICAgICAgICAgICBjb25zdCBxdWVzdGlvbkdhcCA9IDY7XG4gICAgICAgICAgICBjb25zdCBvcHRpb25zVG9wR2FwID0gMTQ7XG4gICAgICAgICAgICBjb25zdCBidXR0b25IZWlnaHQgPSA2MjtcbiAgICAgICAgICAgIGNvbnN0IGJ1dHRvbkdhcCA9IDE0O1xuXG4gICAgICAgICAgICBwYW5lbEhlaWdodCA9XG4gICAgICAgICAgICAgICAgcGFkZGluZ1RvcCArXG4gICAgICAgICAgICAgICAgaGVhZGVySCArXG4gICAgICAgICAgICAgICAgZmVlZGJhY2tUb3BHYXAgK1xuICAgICAgICAgICAgICAgIGZlZWRiYWNrVGl0bGVIICtcbiAgICAgICAgICAgICAgICBmZWVkYmFja0dhcCArXG4gICAgICAgICAgICAgICAgZmVlZGJhY2tTdWJ0aXRsZUggK1xuICAgICAgICAgICAgICAgIGZlZWRiYWNrQm90dG9tR2FwICtcbiAgICAgICAgICAgICAgICBxQm91bmRzLmhlaWdodCArXG4gICAgICAgICAgICAgICAgb3B0aW9uc1RvcEdhcCArXG4gICAgICAgICAgICAgICAgKGJ1dHRvbkhlaWdodCAqIHRoaXMub3B0aW9uQ291bnQpICtcbiAgICAgICAgICAgICAgICAoYnV0dG9uR2FwICogKHRoaXMub3B0aW9uQ291bnQgLSAxKSkgK1xuICAgICAgICAgICAgICAgIHBhZGRpbmdCb3R0b207XG5cbiAgICAgICAgICAgIGlmIChwYW5lbEhlaWdodCA8PSBtYXhQYW5lbEhlaWdodCkgYnJlYWs7XG4gICAgICAgICAgICBmb250U2l6ZSAtPSAyO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcUJvdW5kcyA9IHRoaXMucXVlc3Rpb25UZXh0LmdldEJvdW5kcygpO1xuICAgICAgICBjb25zdCBoZWFkZXJIID0gdGhpcy5pbmRleFRleHQuZ2V0Qm91bmRzKCkuaGVpZ2h0O1xuICAgICAgICBsZXQgcGFkZGluZ1RvcCA9IDEyO1xuICAgICAgICBsZXQgcGFkZGluZ0JvdHRvbSA9IDE2O1xuICAgICAgICBsZXQgb3B0aW9uc1RvcEdhcCA9IDE0O1xuICAgICAgICBsZXQgYnV0dG9uSGVpZ2h0ID0gNjI7XG4gICAgICAgIGxldCBidXR0b25HYXAgPSAxNDtcbiAgICAgICAgbGV0IGZlZWRiYWNrVG9wR2FwID0gODtcbiAgICAgICAgbGV0IGZlZWRiYWNrQm90dG9tR2FwID0gODtcbiAgICAgICAgY29uc3QgZmVlZGJhY2tUaXRsZUggPSAyMjtcbiAgICAgICAgY29uc3QgZmVlZGJhY2tTdWJ0aXRsZUggPSAxODtcbiAgICAgICAgY29uc3QgZmVlZGJhY2tHYXAgPSA0O1xuICAgICAgICBpZiAocGFuZWxIZWlnaHQgPiBtYXhQYW5lbEhlaWdodCkge1xuICAgICAgICAgICAgcGFkZGluZ1RvcCA9IDEwO1xuICAgICAgICAgICAgcGFkZGluZ0JvdHRvbSA9IDEyO1xuICAgICAgICAgICAgb3B0aW9uc1RvcEdhcCA9IDEyO1xuICAgICAgICAgICAgZmVlZGJhY2tUb3BHYXAgPSA2O1xuICAgICAgICAgICAgZmVlZGJhY2tCb3R0b21HYXAgPSA2O1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbWluQnV0dG9uSGVpZ2h0ID0gNTI7XG4gICAgICAgIGNvbnN0IG1pbkJ1dHRvbkdhcCA9IDg7XG4gICAgICAgIGNvbnN0IGZpeGVkSGVpZ2h0ID1cbiAgICAgICAgICAgIHBhZGRpbmdUb3AgK1xuICAgICAgICAgICAgaGVhZGVySCArXG4gICAgICAgICAgICBmZWVkYmFja1RvcEdhcCArXG4gICAgICAgICAgICBmZWVkYmFja1RpdGxlSCArXG4gICAgICAgICAgICBmZWVkYmFja0dhcCArXG4gICAgICAgICAgICBmZWVkYmFja1N1YnRpdGxlSCArXG4gICAgICAgICAgICBmZWVkYmFja0JvdHRvbUdhcCArXG4gICAgICAgICAgICBxQm91bmRzLmhlaWdodCArXG4gICAgICAgICAgICBvcHRpb25zVG9wR2FwICtcbiAgICAgICAgICAgIHBhZGRpbmdCb3R0b207XG4gICAgICAgIGNvbnN0IG1heEJ1dHRvbnNTcGFjZSA9IE1hdGgubWF4KDAsIG1heFBhbmVsSGVpZ2h0IC0gZml4ZWRIZWlnaHQpO1xuICAgICAgICBjb25zdCBkZXNpcmVkQnV0dG9uc1NwYWNlID0gKGJ1dHRvbkhlaWdodCAqIHRoaXMub3B0aW9uQ291bnQpICsgKGJ1dHRvbkdhcCAqICh0aGlzLm9wdGlvbkNvdW50IC0gMSkpO1xuICAgICAgICBpZiAoZGVzaXJlZEJ1dHRvbnNTcGFjZSA+IG1heEJ1dHRvbnNTcGFjZSkge1xuICAgICAgICAgICAgY29uc3QgcGVyQnV0dG9uID0gTWF0aC5mbG9vcigobWF4QnV0dG9uc1NwYWNlIC0gKGJ1dHRvbkdhcCAqICh0aGlzLm9wdGlvbkNvdW50IC0gMSkpKSAvIHRoaXMub3B0aW9uQ291bnQpO1xuICAgICAgICAgICAgYnV0dG9uSGVpZ2h0ID0gUGhhc2VyLk1hdGguQ2xhbXAocGVyQnV0dG9uLCBtaW5CdXR0b25IZWlnaHQsIGJ1dHRvbkhlaWdodCk7XG4gICAgICAgICAgICBjb25zdCByZW1haW5pbmcgPSBtYXhCdXR0b25zU3BhY2UgLSAoYnV0dG9uSGVpZ2h0ICogdGhpcy5vcHRpb25Db3VudCk7XG4gICAgICAgICAgICBjb25zdCBwZXJHYXAgPSBNYXRoLmZsb29yKHJlbWFpbmluZyAvICh0aGlzLm9wdGlvbkNvdW50IC0gMSkpO1xuICAgICAgICAgICAgYnV0dG9uR2FwID0gUGhhc2VyLk1hdGguQ2xhbXAocGVyR2FwLCBtaW5CdXR0b25HYXAsIGJ1dHRvbkdhcCk7XG4gICAgICAgIH1cblxuICAgICAgICBwYW5lbEhlaWdodCA9XG4gICAgICAgICAgICBwYWRkaW5nVG9wICtcbiAgICAgICAgICAgIGhlYWRlckggK1xuICAgICAgICAgICAgZmVlZGJhY2tUb3BHYXAgK1xuICAgICAgICAgICAgZmVlZGJhY2tUaXRsZUggK1xuICAgICAgICAgICAgZmVlZGJhY2tHYXAgK1xuICAgICAgICAgICAgZmVlZGJhY2tTdWJ0aXRsZUggK1xuICAgICAgICAgICAgZmVlZGJhY2tCb3R0b21HYXAgK1xuICAgICAgICAgICAgcUJvdW5kcy5oZWlnaHQgK1xuICAgICAgICAgICAgb3B0aW9uc1RvcEdhcCArXG4gICAgICAgICAgICAoYnV0dG9uSGVpZ2h0ICogdGhpcy5vcHRpb25Db3VudCkgK1xuICAgICAgICAgICAgKGJ1dHRvbkdhcCAqICh0aGlzLm9wdGlvbkNvdW50IC0gMSkpICtcbiAgICAgICAgICAgIHBhZGRpbmdCb3R0b207XG5cbiAgICAgICAgY29uc3QgcGFuZWxYID0gd2lkdGggLyAyO1xuICAgICAgICBjb25zdCBwYW5lbFkgPSBoZWlnaHQgLyAyO1xuICAgICAgICB0aGlzLnBhbmVsQ29udGFpbmVyLnNldFNjYWxlKHVpU2NhbGUpO1xuICAgICAgICB0aGlzLnBhbmVsQ29udGFpbmVyLnNldFBvc2l0aW9uKHBhbmVsWCwgcGFuZWxZKTtcblxuICAgICAgICB0aGlzLnBhbmVsU2hhZG93LmNsZWFyKCk7XG4gICAgICAgIHRoaXMucGFuZWxTaGFkb3cuZmlsbFN0eWxlKDB4MDAwMDAwLCAwLjE4KTtcbiAgICAgICAgdGhpcy5wYW5lbFNoYWRvdy5maWxsUm91bmRlZFJlY3QoLXBhbmVsV2lkdGggLyAyICsgOCwgLXBhbmVsSGVpZ2h0IC8gMiArIDE0LCBwYW5lbFdpZHRoLCBwYW5lbEhlaWdodCwgMjgpO1xuXG4gICAgICAgIHRoaXMucGFuZWxCZy5jbGVhcigpO1xuICAgICAgICB0aGlzLnBhbmVsQmcuZmlsbFN0eWxlKDB4ZjhmYmZmLCAwLjkyKTtcbiAgICAgICAgdGhpcy5wYW5lbEJnLmZpbGxSb3VuZGVkUmVjdCgtcGFuZWxXaWR0aCAvIDIsIC1wYW5lbEhlaWdodCAvIDIsIHBhbmVsV2lkdGgsIHBhbmVsSGVpZ2h0LCAyOCk7XG4gICAgICAgIHRoaXMucGFuZWxCZy5saW5lU3R5bGUoMiwgMHg5M2M1ZmQsIDAuNik7XG4gICAgICAgIHRoaXMucGFuZWxCZy5zdHJva2VSb3VuZGVkUmVjdCgtcGFuZWxXaWR0aCAvIDIsIC1wYW5lbEhlaWdodCAvIDIsIHBhbmVsV2lkdGgsIHBhbmVsSGVpZ2h0LCAyOCk7XG5cbiAgICAgICAgdGhpcy5wYW5lbEdsb3cuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5wYW5lbEdsb3cuZmlsbFN0eWxlKDB4ZTBmMmZlLCAwLjUpO1xuICAgICAgICB0aGlzLnBhbmVsR2xvdy5maWxsUm91bmRlZFJlY3QoLXBhbmVsV2lkdGggLyAyICsgMTAsIC1wYW5lbEhlaWdodCAvIDIgKyAxMCwgcGFuZWxXaWR0aCAtIDIwLCBwYW5lbEhlaWdodCAtIDIwLCAyMCk7XG5cbiAgICAgICAgY29uc3QgaGVhZGVyWSA9IC1wYW5lbEhlaWdodCAvIDIgKyBwYWRkaW5nVG9wO1xuICAgICAgICB0aGlzLmluZGV4VGV4dC5zZXRQb3NpdGlvbigwLCBoZWFkZXJZKTtcbiAgICAgICAgY29uc3QgZmVlZGJhY2tZID0gaGVhZGVyWSArIGhlYWRlckggKyBmZWVkYmFja1RvcEdhcDtcbiAgICAgICAgdGhpcy5mZWVkYmFja1RpdGxlVGV4dC5zZXRQb3NpdGlvbigwLCBmZWVkYmFja1kpO1xuICAgICAgICB0aGlzLmZlZWRiYWNrU3VidGl0bGVUZXh0LnNldFBvc2l0aW9uKDAsIGZlZWRiYWNrWSArIGZlZWRiYWNrVGl0bGVIICsgZmVlZGJhY2tHYXApO1xuICAgICAgICBjb25zdCBxdWVzdGlvblkgPSBmZWVkYmFja1kgKyBmZWVkYmFja1RpdGxlSCArIGZlZWRiYWNrR2FwICsgZmVlZGJhY2tTdWJ0aXRsZUggKyBmZWVkYmFja0JvdHRvbUdhcDtcbiAgICAgICAgdGhpcy5xdWVzdGlvblRleHQuc2V0UG9zaXRpb24oMCwgcXVlc3Rpb25ZKTtcblxuICAgICAgICBjb25zdCBhbnN3ZXJzU3RhcnRZID0gcXVlc3Rpb25ZICsgcUJvdW5kcy5oZWlnaHQgKyBvcHRpb25zVG9wR2FwICsgKGJ1dHRvbkhlaWdodCAvIDIpO1xuICAgICAgICB0aGlzLm9wdGlvbkJ1dHRvbnMuZm9yRWFjaCgoYnRuLCBpKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB5ID0gYW5zd2Vyc1N0YXJ0WSArIGkgKiAoYnV0dG9uSGVpZ2h0ICsgYnV0dG9uR2FwKTtcbiAgICAgICAgICAgIGJ0bi5zZXRQb3NpdGlvbigwLCB5KTtcbiAgICAgICAgICAgIGJ0bi5zZXREYXRhKCdsYXlvdXQnLCB7IHg6IC1wYW5lbFdpZHRoIC8gMiArIDMyLCB3OiBwYW5lbFdpZHRoIC0gNjQsIGg6IGJ1dHRvbkhlaWdodCwgcmFkaXVzOiAyMiB9KTtcbiAgICAgICAgICAgIGNvbnN0IHJlZHJhdyA9IGJ0bi5nZXREYXRhKCdyZWRyYXcnKSBhcyAoc3RhdGU6ICdub3JtYWwnIHwgJ2NvcnJlY3QnIHwgJ3dyb25nJykgPT4gdm9pZDtcbiAgICAgICAgICAgIHJlZHJhdygnbm9ybWFsJyk7XG4gICAgICAgICAgICBjb25zdCB0ZXh0ID0gYnRuLmdldERhdGEoJ3RleHQnKSBhcyBQaGFzZXIuR2FtZU9iamVjdHMuVGV4dDtcbiAgICAgICAgICAgIGNvbnN0IGhpdCA9IGJ0bi5nZXREYXRhKCdoaXQnKSBhcyBQaGFzZXIuR2FtZU9iamVjdHMuUmVjdGFuZ2xlO1xuICAgICAgICAgICAgY29uc3QgbGF5b3V0ID0gYnRuLmdldERhdGEoJ2xheW91dCcpIGFzIHsgeDogbnVtYmVyOyB3OiBudW1iZXI7IGg6IG51bWJlcjsgcmFkaXVzOiBudW1iZXIgfTtcbiAgICAgICAgICAgIHRleHQuc2V0UG9zaXRpb24obGF5b3V0LnggKyBsYXlvdXQudyAvIDIsIDApO1xuICAgICAgICAgICAgaGl0LnNldFNpemUobGF5b3V0LncsIGxheW91dC5oKTtcbiAgICAgICAgICAgIGhpdC5zZXRQb3NpdGlvbihsYXlvdXQueCArIGxheW91dC53IC8gMiwgMCk7XG4gICAgICAgICAgICBidG4uc2V0U2l6ZShsYXlvdXQudywgbGF5b3V0LmgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBoYWxmUGFuZWwgPSAocGFuZWxIZWlnaHQgKiB1aVNjYWxlKSAvIDI7XG4gICAgICAgIGlmICh0aGlzLnBhbmVsQ29udGFpbmVyLnkgLSBoYWxmUGFuZWwgPCA2MCkge1xuICAgICAgICAgICAgdGhpcy5wYW5lbENvbnRhaW5lci55ID0gNjAgKyBoYWxmUGFuZWw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucGFuZWxDb250YWluZXIueSArIGhhbGZQYW5lbCA+IGhlaWdodCAtIDQwKSB7XG4gICAgICAgICAgICB0aGlzLnBhbmVsQ29udGFpbmVyLnkgPSBoZWlnaHQgLSA0MCAtIGhhbGZQYW5lbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7IHVpU2NhbGUsIHBhbmVsSGVpZ2h0LCBwYW5lbFdpZHRoIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVPcHRpb25CdXR0b24oeDogbnVtYmVyLCB5OiBudW1iZXIpOiBQaGFzZXIuR2FtZU9iamVjdHMuQ29udGFpbmVyIHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5zY2VuZS5hZGQuY29udGFpbmVyKHgsIHkpO1xuXG4gICAgICAgIGNvbnN0IHdpZHRoID0gNjQwO1xuICAgICAgICBjb25zdCBoZWlnaHQgPSA1NDtcbiAgICAgICAgY29uc3QgcmFkaXVzID0gMjI7XG4gICAgICAgIGNvbnN0IGJhc2VDb2xvciA9IDB4MzhiZGY4O1xuXG4gICAgICAgIGNvbnN0IHNoYWRvdyA9IHRoaXMuc2NlbmUuYWRkLmdyYXBoaWNzKCk7XG4gICAgICAgIGNvbnN0IGJnID0gdGhpcy5zY2VuZS5hZGQuZ3JhcGhpY3MoKTtcblxuICAgICAgICBjb25zdCB0ZXh0ID0gdGhpcy5zY2VuZS5hZGQudGV4dCgwLCAwLCAnLi4uJywge1xuICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsIEJsYWNrJyxcbiAgICAgICAgICAgIGZvbnRTaXplOiAnMjBweCcsXG4gICAgICAgICAgICBjb2xvcjogJyNmZmZmZmYnXG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUpO1xuXG4gICAgICAgIGNvbnN0IGhpdCA9IHRoaXMuc2NlbmUuYWRkLnJlY3RhbmdsZSgwLCAwLCB3aWR0aCwgaGVpZ2h0LCAweGZmZmZmZiwgMC4wMDEpO1xuICAgICAgICBoaXQuc2V0SW50ZXJhY3RpdmUoKTtcblxuICAgICAgICBjb25zdCByZWRyYXcgPSAoc3RhdGU6ICdub3JtYWwnIHwgJ2NvcnJlY3QnIHwgJ3dyb25nJykgPT4ge1xuICAgICAgICAgICAgY29uc3QgbGF5b3V0ID0gY29udGFpbmVyLmdldERhdGEoJ2xheW91dCcpIGFzIHsgeDogbnVtYmVyOyB3OiBudW1iZXI7IGg6IG51bWJlcjsgcmFkaXVzOiBudW1iZXIgfSB8IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGNvbnN0IGRyYXdYID0gbGF5b3V0Py54ID8/IC13aWR0aCAvIDI7XG4gICAgICAgICAgICBjb25zdCBkcmF3VyA9IGxheW91dD8udyA/PyB3aWR0aDtcbiAgICAgICAgICAgIGNvbnN0IGRyYXdIID0gbGF5b3V0Py5oID8/IGhlaWdodDtcbiAgICAgICAgICAgIGNvbnN0IGRyYXdSID0gbGF5b3V0Py5yYWRpdXMgPz8gcmFkaXVzO1xuXG4gICAgICAgICAgICBsZXQgZmlsbCA9IGJhc2VDb2xvcjtcbiAgICAgICAgICAgIGxldCBzdHJva2UgPSAweDdkZDNmYztcblxuICAgICAgICAgICAgaWYgKHN0YXRlID09PSAnY29ycmVjdCcpIHtcbiAgICAgICAgICAgICAgICBmaWxsID0gMHgyMmM1NWU7XG4gICAgICAgICAgICAgICAgc3Ryb2tlID0gMHg4NmVmYWM7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHN0YXRlID09PSAnd3JvbmcnKSB7XG4gICAgICAgICAgICAgICAgZmlsbCA9IDB4ZWY0NDQ0O1xuICAgICAgICAgICAgICAgIHN0cm9rZSA9IDB4ZmNhNWE1O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzaGFkb3cuY2xlYXIoKTtcbiAgICAgICAgICAgIHNoYWRvdy5maWxsU3R5bGUoMHgwMDAwMDAsIDAuMTgpO1xuICAgICAgICAgICAgc2hhZG93LmZpbGxSb3VuZGVkUmVjdChkcmF3WCArIDIsIC1kcmF3SCAvIDIgKyA0LCBkcmF3VywgZHJhd0gsIGRyYXdSKTtcblxuICAgICAgICAgICAgYmcuY2xlYXIoKTtcbiAgICAgICAgICAgIGJnLmZpbGxTdHlsZShmaWxsLCAxKTtcbiAgICAgICAgICAgIGJnLmZpbGxSb3VuZGVkUmVjdChkcmF3WCwgLWRyYXdIIC8gMiwgZHJhd1csIGRyYXdILCBkcmF3Uik7XG4gICAgICAgICAgICBiZy5saW5lU3R5bGUoMiwgc3Ryb2tlLCAwLjkpO1xuICAgICAgICAgICAgYmcuc3Ryb2tlUm91bmRlZFJlY3QoZHJhd1gsIC1kcmF3SCAvIDIsIGRyYXdXLCBkcmF3SCwgZHJhd1IpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJlZHJhdygnbm9ybWFsJyk7XG5cbiAgICAgICAgY29udGFpbmVyLmFkZChbc2hhZG93LCBiZywgdGV4dCwgaGl0XSk7XG4gICAgICAgIGNvbnRhaW5lci5zZXRTaXplKHdpZHRoLCBoZWlnaHQpO1xuXG4gICAgICAgIGNvbnRhaW5lci5zZXREYXRhKCdyZWRyYXcnLCByZWRyYXcpO1xuICAgICAgICBjb250YWluZXIuc2V0RGF0YSgndGV4dCcsIHRleHQpO1xuICAgICAgICBjb250YWluZXIuc2V0RGF0YSgnaGl0JywgaGl0KTtcblxuICAgICAgICByZXR1cm4gY29udGFpbmVyO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJQaGFzZXIiLCJRdWl6UGFuZWwiLCJzY2VuZSIsImNvbmZpZyIsIm9wdGlvbkJ1dHRvbnMiLCJvcHRpb25Db3VudCIsInNob3dJbmRleCIsImNvbnRhaW5lciIsImFkZCIsInNldERlcHRoIiwiZGVwdGgiLCJzZXRTY3JvbGxGYWN0b3IiLCJzZXRWaXNpYmxlIiwicGFuZWxDb250YWluZXIiLCJwYW5lbFNoYWRvdyIsImdyYXBoaWNzIiwicGFuZWxCZyIsInBhbmVsR2xvdyIsImluZGV4VGV4dCIsInRleHQiLCJmb250RmFtaWx5IiwiZm9udFNpemUiLCJjb2xvciIsInNldE9yaWdpbiIsImZlZWRiYWNrVGl0bGVUZXh0IiwiYWxpZ24iLCJ3b3JkV3JhcCIsIndpZHRoIiwidXNlQWR2YW5jZWRXcmFwIiwiZmVlZGJhY2tTdWJ0aXRsZVRleHQiLCJxdWVzdGlvblRleHQiLCJpIiwib3B0aW9uIiwiY3JlYXRlT3B0aW9uQnV0dG9uIiwicHVzaCIsInBhcmVudCIsInZhbHVlIiwic2V0QWxwaGEiLCJzZXRJbnRlcmFjdGl2ZSIsImVuYWJsZWQiLCJmb3JFYWNoIiwiYnRuIiwiaGl0IiwiZ2V0RGF0YSIsImRpc2FibGVJbnRlcmFjdGl2ZSIsIm9uT3B0aW9uU2VsZWN0ZWQiLCJjYWxsYmFjayIsImluZGV4IiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwib24iLCJzZXRRdWVzdGlvbiIsImRhdGEiLCJ0b3RhbCIsInNldFRleHQiLCJtYXhRdWVzdGlvbkNoYXJzIiwicXVlc3Rpb24iLCJsZW5ndGgiLCJzbGljZSIsInJlZHJhdyIsInNldEZvbnRTaXplIiwib3B0aW9ucyIsInNldEZlZWRiYWNrIiwic3RhdGUiLCJzZXRDb2xvciIsInNldE9wdGlvblN0YXRlIiwibGF5b3V0IiwiaGVpZ2h0IiwidWlTY2FsZSIsIk1hdGgiLCJDbGFtcCIsInBhbmVsV2lkdGgiLCJmbG9vciIsIm1heFBhbmVsSGVpZ2h0IiwicXVlc3Rpb25XcmFwIiwic2V0V29yZFdyYXBXaWR0aCIsIm1pbkZvbnQiLCJwYW5lbEhlaWdodCIsInFCb3VuZHMiLCJnZXRCb3VuZHMiLCJoZWFkZXJIIiwiZmVlZGJhY2tUaXRsZUgiLCJmZWVkYmFja1N1YnRpdGxlSCIsImZlZWRiYWNrR2FwIiwiZmVlZGJhY2tUb3BHYXAiLCJmZWVkYmFja0JvdHRvbUdhcCIsInBhZGRpbmdUb3AiLCJwYWRkaW5nQm90dG9tIiwicXVlc3Rpb25HYXAiLCJvcHRpb25zVG9wR2FwIiwiYnV0dG9uSGVpZ2h0IiwiYnV0dG9uR2FwIiwibWluQnV0dG9uSGVpZ2h0IiwibWluQnV0dG9uR2FwIiwiZml4ZWRIZWlnaHQiLCJtYXhCdXR0b25zU3BhY2UiLCJtYXgiLCJkZXNpcmVkQnV0dG9uc1NwYWNlIiwicGVyQnV0dG9uIiwicmVtYWluaW5nIiwicGVyR2FwIiwicGFuZWxYIiwicGFuZWxZIiwic2V0U2NhbGUiLCJzZXRQb3NpdGlvbiIsImNsZWFyIiwiZmlsbFN0eWxlIiwiZmlsbFJvdW5kZWRSZWN0IiwibGluZVN0eWxlIiwic3Ryb2tlUm91bmRlZFJlY3QiLCJoZWFkZXJZIiwiZmVlZGJhY2tZIiwicXVlc3Rpb25ZIiwiYW5zd2Vyc1N0YXJ0WSIsInkiLCJzZXREYXRhIiwieCIsInciLCJoIiwicmFkaXVzIiwic2V0U2l6ZSIsImhhbGZQYW5lbCIsImJhc2VDb2xvciIsInNoYWRvdyIsImJnIiwicmVjdGFuZ2xlIiwiZHJhd1giLCJkcmF3VyIsImRyYXdIIiwiZHJhd1IiLCJmaWxsIiwic3Ryb2tlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/game/ui/QuizPanel.ts\n");

/***/ }),

/***/ "(pages-dir-node)/./src/services/api.ts":
/*!*****************************!*\
  !*** ./src/services/api.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   endGameSession: () => (/* binding */ endGameSession),\n/* harmony export */   fetchGameList: () => (/* binding */ fetchGameList),\n/* harmony export */   startGameSession: () => (/* binding */ startGameSession),\n/* harmony export */   submitAnswer: () => (/* binding */ submitAnswer)\n/* harmony export */ });\nconst API_BASE_URL = (\"https://dev-api.apex-academy.kyanon.dev\" ?? 0 ?? 0).replace(/\\/$/, '');\nconst STATIC_DEBUG_TOKEN = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjMyMDI4N2Y1LWU3NTktNGNlNy1hODZmLWI5NTRkOTU5ZmViMSIsImVtYWlsIjoidGhhbmguZGFvQGt5YW5vbi5kaWdpdGFsIiwiaWF0IjoxNzY3Njg5ODIyLCJleHAiOjE3NzAyODE4MjIsImlzcyI6IkRldkFwZXhBY2FkIn0.bSjUGFkIT87qkij2jobMVw-ZyRYRAUppRdoLTUZsl_o\" ?? 0;\nconst mockGameSession = {\n    id: 'session_mock_001',\n    game_id: 'game_mock_001',\n    game_session_questions: [\n        {\n            id: 'q_1',\n            order: 1,\n            is_answered: false,\n            question_id: 'question_1'\n        },\n        {\n            id: 'q_2',\n            order: 2,\n            is_answered: false,\n            question_id: 'question_2'\n        },\n        {\n            id: 'q_3',\n            order: 3,\n            is_answered: false,\n            question_id: 'question_3'\n        }\n    ],\n    game: {\n        code: 'vocab_race',\n        time_limit: 180\n    }\n};\nconst mockQuestions = [\n    {\n        session_question_id: 'q_1',\n        question: {\n            content: 'Thủ đô của Việt Nam là gì?',\n            options: [\n                {\n                    id: 'q_1_o_1',\n                    text: 'Hà Nội',\n                    is_correct: true\n                },\n                {\n                    id: 'q_1_o_2',\n                    text: 'Đà Nẵng',\n                    is_correct: false\n                },\n                {\n                    id: 'q_1_o_3',\n                    text: 'Hải Phòng',\n                    is_correct: false\n                },\n                {\n                    id: 'q_1_o_4',\n                    text: 'Cần Thơ',\n                    is_correct: false\n                }\n            ]\n        }\n    },\n    {\n        session_question_id: 'q_2',\n        question: {\n            content: 'Phaser sử dụng ngôn ngữ nào?',\n            options: [\n                {\n                    id: 'q_2_o_1',\n                    text: 'TypeScript/JavaScript',\n                    is_correct: true\n                },\n                {\n                    id: 'q_2_o_2',\n                    text: 'C#',\n                    is_correct: false\n                },\n                {\n                    id: 'q_2_o_3',\n                    text: 'Python',\n                    is_correct: false\n                },\n                {\n                    id: 'q_2_o_4',\n                    text: 'Go',\n                    is_correct: false\n                }\n            ]\n        }\n    },\n    {\n        session_question_id: 'q_3',\n        question: {\n            content: 'Chọn từ trái nghĩa của “fast”.',\n            options: [\n                {\n                    id: 'q_3_o_1',\n                    text: 'slow',\n                    is_correct: true\n                },\n                {\n                    id: 'q_3_o_2',\n                    text: 'far',\n                    is_correct: false\n                },\n                {\n                    id: 'q_3_o_3',\n                    text: 'high',\n                    is_correct: false\n                },\n                {\n                    id: 'q_3_o_4',\n                    text: 'small',\n                    is_correct: false\n                }\n            ]\n        }\n    }\n];\nconst delay = (ms)=>new Promise((resolve)=>setTimeout(resolve, ms));\nconst ALWAYS_USE_MOCK_API = true;\nfunction shouldUseMock(options) {\n    if (ALWAYS_USE_MOCK_API) return true;\n    if (options?.forceReal) return false;\n    return true;\n}\nfunction toApiGameCode(gameCode) {\n    if (gameCode === 'train_game' || gameCode === 'train') return 'trains_cars';\n    if (gameCode === 'tower') return 'vocab_race';\n    if (gameCode === 'town') return 'vocab_race';\n    return gameCode;\n}\nfunction ensureApiBaseUrl() {\n    if (!API_BASE_URL) {\n        throw new Error('Missing NEXT_PUBLIC_API_URL (or VITE_API_URL)');\n    }\n    return API_BASE_URL;\n}\nfunction getAuthHeader() {\n    return {\n        Authorization: `Bearer ${STATIC_DEBUG_TOKEN}`\n    };\n}\nasync function requestJson(path, init) {\n    const baseUrl = ensureApiBaseUrl();\n    const authHeader = getAuthHeader();\n    console.log('[API][HTTP] request', {\n        url: `${baseUrl}${path}`,\n        method: init?.method ?? 'GET',\n        hasAuthToken: Boolean(authHeader.Authorization),\n        authSource:  true ? 'env_debug_token' : 0\n    });\n    console.error('[API][HTTP] request-visible', `${init?.method ?? 'GET'} ${baseUrl}${path}`);\n    const response = await fetch(`${baseUrl}${path}`, {\n        method: init?.method ?? 'GET',\n        headers: {\n            'Content-Type': 'application/json',\n            ...authHeader,\n            ...init?.headers ?? {}\n        },\n        ...init\n    });\n    if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    const payload = await response.json();\n    if (!payload?.success) {\n        throw new Error(payload?.message ?? 'API response was not successful');\n    }\n    return payload;\n}\nasync function fetchQuestionDetail(sessionId, sessionQuestionId) {\n    try {\n        const res = await requestJson(`/api/v1/game/${sessionId}/question/${sessionQuestionId}`);\n        return {\n            session_question_id: res.data.id,\n            question: {\n                content: res.data.question.content,\n                options: res.data.question.options.map((opt)=>({\n                        id: opt.id,\n                        text: opt.text,\n                        is_correct: opt.is_correct\n                    }))\n            }\n        };\n    } catch (error) {\n        console.error('fetchQuestionDetail failed', error);\n        return null;\n    }\n}\nasync function fetchSessionQuestionWithFallback(sessionId, item) {\n    const bySessionQuestionId = await fetchQuestionDetail(sessionId, item.id);\n    if (bySessionQuestionId) return bySessionQuestionId;\n    if (item.question_id && item.question_id !== item.id) {\n        const byQuestionId = await fetchQuestionDetail(sessionId, item.question_id);\n        if (byQuestionId) return byQuestionId;\n    }\n    console.error('[API][REAL] Cannot resolve question detail from both ids', {\n        sessionId,\n        sessionQuestionId: item.id,\n        questionId: item.question_id\n    });\n    return null;\n}\nasync function startGameSession(gameCode, options) {\n    console.log('[API] startGameSession invoked', {\n        gameCode,\n        forceReal: Boolean(options?.forceReal),\n        mockMode: shouldUseMock(options)\n    });\n    if (shouldUseMock(options)) {\n        await delay(200);\n        console.log('[API][MOCK] startGameSession', {\n            gameCode,\n            sessionId: mockGameSession.id,\n            gameId: mockGameSession.game_id,\n            questionCount: mockQuestions.length\n        });\n        return {\n            success: true,\n            message: `Mock start for ${gameCode}`,\n            data: {\n                ...mockGameSession,\n                questions: mockQuestions\n            }\n        };\n    }\n    const apiGameCode = toApiGameCode(gameCode);\n    const sessionRes = await requestJson('/api/v1/game/start-game', {\n        method: 'POST',\n        body: JSON.stringify({\n            game_code: apiGameCode\n        })\n    });\n    const sessionId = sessionRes.data.id;\n    const sessionQuestions = sessionRes.data.game_session_questions ?? [];\n    const details = await Promise.all(sessionQuestions.sort((a, b)=>a.order - b.order).map((item)=>fetchSessionQuestionWithFallback(sessionId, item)));\n    const questions = details.filter((item)=>item !== null);\n    if (questions.length === 0) {\n        throw new Error('No question details resolved from real API');\n    }\n    return {\n        ...sessionRes,\n        data: {\n            ...sessionRes.data,\n            questions\n        }\n    };\n}\nasync function fetchGameList(options) {\n    if (shouldUseMock(options)) {\n        await delay(120);\n        return {\n            success: true,\n            message: 'Mock game list',\n            data: [\n                {\n                    id: 'mock_town',\n                    code: 'vocab_race',\n                    name: 'Town',\n                    is_accessible: true\n                },\n                {\n                    id: 'mock_train',\n                    code: 'trains_cars',\n                    name: 'Train',\n                    is_accessible: true\n                }\n            ]\n        };\n    }\n    return requestJson('/api/v1/game/list-game');\n}\nasync function submitAnswer(sessionId, sessionQuestionId, answerId, options) {\n    if (shouldUseMock(options)) {\n        await delay(120);\n        console.log('[API][MOCK] submitAnswer', {\n            sessionId,\n            sessionQuestionId,\n            answerId\n        });\n        return {\n            success: true,\n            message: 'Mock answer submitted',\n            data: {\n                remain_sec: 0,\n                is_end_game: false,\n                is_win: false,\n                is_lose: false,\n                is_correct: true,\n                is_answered: true,\n                session: {\n                    id: sessionId,\n                    score: 0,\n                    current_question: 0\n                }\n            }\n        };\n    }\n    return requestJson('/api/v1/game/answer', {\n        method: 'POST',\n        body: JSON.stringify({\n            session_id: sessionId,\n            question_id: sessionQuestionId,\n            answer_id: answerId\n        })\n    });\n}\nasync function endGameSession(gameId, score, options) {\n    if (shouldUseMock(options)) {\n        await delay(150);\n        console.log('[API][MOCK] endGameSession', {\n            gameId,\n            score\n        });\n        return {\n            success: true,\n            message: `Mock end for ${gameId} with score ${score}`,\n            data: {\n                ok: true\n            }\n        };\n    }\n    return requestJson('/api/v1/game/answer-batching', {\n        method: 'POST',\n        body: JSON.stringify({\n            game_id: gameId,\n            score\n        })\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cGhhc2VyLWdhbWVkZXYvc3JjL3NlcnZpY2VzL2FwaS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgdHlwZSBHYW1lT3B0aW9uID0ge1xuICAgIGlkPzogc3RyaW5nO1xuICAgIHRleHQ6IHN0cmluZztcbiAgICBpc19jb3JyZWN0OiBib29sZWFuO1xufTtcblxuZXhwb3J0IHR5cGUgR2FtZVF1ZXN0aW9uID0ge1xuICAgIHNlc3Npb25fcXVlc3Rpb25faWQ/OiBzdHJpbmc7XG4gICAgcXVlc3Rpb246IHtcbiAgICAgICAgY29udGVudDogc3RyaW5nO1xuICAgICAgICBvcHRpb25zOiBHYW1lT3B0aW9uW107XG4gICAgfTtcbn07XG5cbnR5cGUgUmF3U2Vzc2lvblF1ZXN0aW9uID0ge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgb3JkZXI6IG51bWJlcjtcbiAgICBpc19hbnN3ZXJlZDogYm9vbGVhbjtcbiAgICBxdWVzdGlvbl9pZDogc3RyaW5nO1xufTtcblxuZXhwb3J0IHR5cGUgU3RhcnRHYW1lU2Vzc2lvbkRhdGEgPSB7XG4gICAgaWQ6IHN0cmluZztcbiAgICBnYW1lX2lkOiBzdHJpbmc7XG4gICAgZ2FtZV9zZXNzaW9uX3F1ZXN0aW9uczogUmF3U2Vzc2lvblF1ZXN0aW9uW107XG4gICAgZ2FtZToge1xuICAgICAgICBjb2RlPzogc3RyaW5nO1xuICAgICAgICB0aW1lX2xpbWl0OiBudW1iZXI7XG4gICAgfTtcbn07XG5cbmV4cG9ydCB0eXBlIEdhbWVMaXN0SXRlbSA9IHtcbiAgICBpZDogc3RyaW5nO1xuICAgIGNvZGU6IHN0cmluZztcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgaXNfYWNjZXNzaWJsZTogYm9vbGVhbjtcbn07XG5cbmV4cG9ydCB0eXBlIEFuc3dlclN1Ym1pdFJlc3BvbnNlID0ge1xuICAgIHJlbWFpbl9zZWM6IG51bWJlcjtcbiAgICBpc19lbmRfZ2FtZTogYm9vbGVhbjtcbiAgICBpc193aW46IGJvb2xlYW47XG4gICAgaXNfbG9zZTogYm9vbGVhbjtcbiAgICBpc19jb3JyZWN0OiBib29sZWFuO1xuICAgIGlzX2Fuc3dlcmVkOiBib29sZWFuO1xuICAgIHNlc3Npb246IHtcbiAgICAgICAgaWQ6IHN0cmluZztcbiAgICAgICAgc2NvcmU6IG51bWJlcjtcbiAgICAgICAgY3VycmVudF9xdWVzdGlvbjogbnVtYmVyO1xuICAgIH07XG59O1xuXG50eXBlIEFwaVJlc3BvbnNlPFQ+ID0ge1xuICAgIHN1Y2Nlc3M6IGJvb2xlYW47XG4gICAgbWVzc2FnZT86IHN0cmluZztcbiAgICBkYXRhOiBUO1xufTtcblxudHlwZSBBcGlDYWxsT3B0aW9ucyA9IHtcbiAgICBmb3JjZVJlYWw/OiBib29sZWFuO1xufTtcblxuY29uc3QgQVBJX0JBU0VfVVJMID0gKHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FQSV9VUkwgPz8gcHJvY2Vzcy5lbnYuVklURV9BUElfVVJMID8/ICcnKS5yZXBsYWNlKC9cXC8kLywgJycpO1xuY29uc3QgU1RBVElDX0RFQlVHX1RPS0VOID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfREVCVUdfQkVBUkVSX1RPS0VOID8/ICdkZWJ1Zy1zdGF0aWMtdG9rZW4nO1xuXG5jb25zdCBtb2NrR2FtZVNlc3Npb246IFN0YXJ0R2FtZVNlc3Npb25EYXRhID0ge1xuICAgIGlkOiAnc2Vzc2lvbl9tb2NrXzAwMScsXG4gICAgZ2FtZV9pZDogJ2dhbWVfbW9ja18wMDEnLFxuICAgIGdhbWVfc2Vzc2lvbl9xdWVzdGlvbnM6IFtcbiAgICAgICAgeyBpZDogJ3FfMScsIG9yZGVyOiAxLCBpc19hbnN3ZXJlZDogZmFsc2UsIHF1ZXN0aW9uX2lkOiAncXVlc3Rpb25fMScgfSxcbiAgICAgICAgeyBpZDogJ3FfMicsIG9yZGVyOiAyLCBpc19hbnN3ZXJlZDogZmFsc2UsIHF1ZXN0aW9uX2lkOiAncXVlc3Rpb25fMicgfSxcbiAgICAgICAgeyBpZDogJ3FfMycsIG9yZGVyOiAzLCBpc19hbnN3ZXJlZDogZmFsc2UsIHF1ZXN0aW9uX2lkOiAncXVlc3Rpb25fMycgfVxuICAgIF0sXG4gICAgZ2FtZToge1xuICAgICAgICBjb2RlOiAndm9jYWJfcmFjZScsXG4gICAgICAgIHRpbWVfbGltaXQ6IDE4MFxuICAgIH1cbn07XG5cbmNvbnN0IG1vY2tRdWVzdGlvbnM6IEdhbWVRdWVzdGlvbltdID0gW1xuICAgIHtcbiAgICAgICAgc2Vzc2lvbl9xdWVzdGlvbl9pZDogJ3FfMScsXG4gICAgICAgIHF1ZXN0aW9uOiB7XG4gICAgICAgICAgICBjb250ZW50OiAnVGjhu6cgxJHDtCBj4bunYSBWaeG7h3QgTmFtIGzDoCBnw6w/JyxcbiAgICAgICAgICAgIG9wdGlvbnM6IFtcbiAgICAgICAgICAgICAgICB7IGlkOiAncV8xX29fMScsIHRleHQ6ICdIw6AgTuG7mWknLCBpc19jb3JyZWN0OiB0cnVlIH0sXG4gICAgICAgICAgICAgICAgeyBpZDogJ3FfMV9vXzInLCB0ZXh0OiAnxJDDoCBO4bq1bmcnLCBpc19jb3JyZWN0OiBmYWxzZSB9LFxuICAgICAgICAgICAgICAgIHsgaWQ6ICdxXzFfb18zJywgdGV4dDogJ0jhuqNpIFBow7JuZycsIGlzX2NvcnJlY3Q6IGZhbHNlIH0sXG4gICAgICAgICAgICAgICAgeyBpZDogJ3FfMV9vXzQnLCB0ZXh0OiAnQ+G6p24gVGjGoScsIGlzX2NvcnJlY3Q6IGZhbHNlIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgICBzZXNzaW9uX3F1ZXN0aW9uX2lkOiAncV8yJyxcbiAgICAgICAgcXVlc3Rpb246IHtcbiAgICAgICAgICAgIGNvbnRlbnQ6ICdQaGFzZXIgc+G7rSBk4bulbmcgbmfDtG4gbmfhu68gbsOgbz8nLFxuICAgICAgICAgICAgb3B0aW9uczogW1xuICAgICAgICAgICAgICAgIHsgaWQ6ICdxXzJfb18xJywgdGV4dDogJ1R5cGVTY3JpcHQvSmF2YVNjcmlwdCcsIGlzX2NvcnJlY3Q6IHRydWUgfSxcbiAgICAgICAgICAgICAgICB7IGlkOiAncV8yX29fMicsIHRleHQ6ICdDIycsIGlzX2NvcnJlY3Q6IGZhbHNlIH0sXG4gICAgICAgICAgICAgICAgeyBpZDogJ3FfMl9vXzMnLCB0ZXh0OiAnUHl0aG9uJywgaXNfY29ycmVjdDogZmFsc2UgfSxcbiAgICAgICAgICAgICAgICB7IGlkOiAncV8yX29fNCcsIHRleHQ6ICdHbycsIGlzX2NvcnJlY3Q6IGZhbHNlIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgICBzZXNzaW9uX3F1ZXN0aW9uX2lkOiAncV8zJyxcbiAgICAgICAgcXVlc3Rpb246IHtcbiAgICAgICAgICAgIGNvbnRlbnQ6ICdDaOG7jW4gdOG7qyB0csOhaSBuZ2jEqWEgY+G7p2Eg4oCcZmFzdOKAnS4nLFxuICAgICAgICAgICAgb3B0aW9uczogW1xuICAgICAgICAgICAgICAgIHsgaWQ6ICdxXzNfb18xJywgdGV4dDogJ3Nsb3cnLCBpc19jb3JyZWN0OiB0cnVlIH0sXG4gICAgICAgICAgICAgICAgeyBpZDogJ3FfM19vXzInLCB0ZXh0OiAnZmFyJywgaXNfY29ycmVjdDogZmFsc2UgfSxcbiAgICAgICAgICAgICAgICB7IGlkOiAncV8zX29fMycsIHRleHQ6ICdoaWdoJywgaXNfY29ycmVjdDogZmFsc2UgfSxcbiAgICAgICAgICAgICAgICB7IGlkOiAncV8zX29fNCcsIHRleHQ6ICdzbWFsbCcsIGlzX2NvcnJlY3Q6IGZhbHNlIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgfVxuICAgIH1cbl07XG5cbmNvbnN0IGRlbGF5ID0gKG1zOiBudW1iZXIpID0+IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7XG5jb25zdCBBTFdBWVNfVVNFX01PQ0tfQVBJID0gdHJ1ZTtcblxuZnVuY3Rpb24gc2hvdWxkVXNlTW9jayhvcHRpb25zPzogQXBpQ2FsbE9wdGlvbnMpOiBib29sZWFuIHtcbiAgICBpZiAoQUxXQVlTX1VTRV9NT0NLX0FQSSkgcmV0dXJuIHRydWU7XG4gICAgaWYgKG9wdGlvbnM/LmZvcmNlUmVhbCkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiB0b0FwaUdhbWVDb2RlKGdhbWVDb2RlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmIChnYW1lQ29kZSA9PT0gJ3RyYWluX2dhbWUnIHx8IGdhbWVDb2RlID09PSAndHJhaW4nKSByZXR1cm4gJ3RyYWluc19jYXJzJztcbiAgICBpZiAoZ2FtZUNvZGUgPT09ICd0b3dlcicpIHJldHVybiAndm9jYWJfcmFjZSc7XG4gICAgaWYgKGdhbWVDb2RlID09PSAndG93bicpIHJldHVybiAndm9jYWJfcmFjZSc7XG4gICAgcmV0dXJuIGdhbWVDb2RlO1xufVxuXG5mdW5jdGlvbiBlbnN1cmVBcGlCYXNlVXJsKCk6IHN0cmluZyB7XG4gICAgaWYgKCFBUElfQkFTRV9VUkwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIE5FWFRfUFVCTElDX0FQSV9VUkwgKG9yIFZJVEVfQVBJX1VSTCknKTtcbiAgICB9XG5cbiAgICByZXR1cm4gQVBJX0JBU0VfVVJMO1xufVxuXG5mdW5jdGlvbiBnZXRBdXRoSGVhZGVyKCk6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4ge1xuICAgIHJldHVybiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtTVEFUSUNfREVCVUdfVE9LRU59YFxuICAgIH07XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHJlcXVlc3RKc29uPFQ+KHBhdGg6IHN0cmluZywgaW5pdD86IFJlcXVlc3RJbml0KTogUHJvbWlzZTxBcGlSZXNwb25zZTxUPj4ge1xuICAgIGNvbnN0IGJhc2VVcmwgPSBlbnN1cmVBcGlCYXNlVXJsKCk7XG4gICAgY29uc3QgYXV0aEhlYWRlciA9IGdldEF1dGhIZWFkZXIoKTtcbiAgICBjb25zb2xlLmxvZygnW0FQSV1bSFRUUF0gcmVxdWVzdCcsIHtcbiAgICAgICAgdXJsOiBgJHtiYXNlVXJsfSR7cGF0aH1gLFxuICAgICAgICBtZXRob2Q6IGluaXQ/Lm1ldGhvZCA/PyAnR0VUJyxcbiAgICAgICAgaGFzQXV0aFRva2VuOiBCb29sZWFuKGF1dGhIZWFkZXIuQXV0aG9yaXphdGlvbiksXG4gICAgICAgIGF1dGhTb3VyY2U6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0RFQlVHX0JFQVJFUl9UT0tFTiA/ICdlbnZfZGVidWdfdG9rZW4nIDogJ2hhcmRjb2RlZF9kZWJ1Z190b2tlbidcbiAgICB9KTtcbiAgICBjb25zb2xlLmVycm9yKCdbQVBJXVtIVFRQXSByZXF1ZXN0LXZpc2libGUnLCBgJHtpbml0Py5tZXRob2QgPz8gJ0dFVCd9ICR7YmFzZVVybH0ke3BhdGh9YCk7XG5cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke2Jhc2VVcmx9JHtwYXRofWAsIHtcbiAgICAgICAgbWV0aG9kOiBpbml0Py5tZXRob2QgPz8gJ0dFVCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAuLi5hdXRoSGVhZGVyLFxuICAgICAgICAgICAgLi4uKGluaXQ/LmhlYWRlcnMgPz8ge30pXG4gICAgICAgIH0sXG4gICAgICAgIC4uLmluaXRcbiAgICB9KTtcblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIVFRQIGVycm9yISBzdGF0dXM6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xuICAgIH1cblxuICAgIGNvbnN0IHBheWxvYWQgPSAoYXdhaXQgcmVzcG9uc2UuanNvbigpKSBhcyBBcGlSZXNwb25zZTxUPjtcbiAgICBpZiAoIXBheWxvYWQ/LnN1Y2Nlc3MpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHBheWxvYWQ/Lm1lc3NhZ2UgPz8gJ0FQSSByZXNwb25zZSB3YXMgbm90IHN1Y2Nlc3NmdWwnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcGF5bG9hZDtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZmV0Y2hRdWVzdGlvbkRldGFpbChzZXNzaW9uSWQ6IHN0cmluZywgc2Vzc2lvblF1ZXN0aW9uSWQ6IHN0cmluZyk6IFByb21pc2U8R2FtZVF1ZXN0aW9uIHwgbnVsbD4ge1xuICAgIHR5cGUgUXVlc3Rpb25EZXRhaWxSZXNwb25zZSA9IHtcbiAgICAgICAgaWQ6IHN0cmluZztcbiAgICAgICAgcXVlc3Rpb246IHtcbiAgICAgICAgICAgIGNvbnRlbnQ6IHN0cmluZztcbiAgICAgICAgICAgIG9wdGlvbnM6IEFycmF5PHtcbiAgICAgICAgICAgICAgICBpZDogc3RyaW5nO1xuICAgICAgICAgICAgICAgIHRleHQ6IHN0cmluZztcbiAgICAgICAgICAgICAgICBpc19jb3JyZWN0OiBib29sZWFuO1xuICAgICAgICAgICAgfT47XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJlcXVlc3RKc29uPFF1ZXN0aW9uRGV0YWlsUmVzcG9uc2U+KFxuICAgICAgICAgICAgYC9hcGkvdjEvZ2FtZS8ke3Nlc3Npb25JZH0vcXVlc3Rpb24vJHtzZXNzaW9uUXVlc3Rpb25JZH1gXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNlc3Npb25fcXVlc3Rpb25faWQ6IHJlcy5kYXRhLmlkLFxuICAgICAgICAgICAgcXVlc3Rpb246IHtcbiAgICAgICAgICAgICAgICBjb250ZW50OiByZXMuZGF0YS5xdWVzdGlvbi5jb250ZW50LFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IHJlcy5kYXRhLnF1ZXN0aW9uLm9wdGlvbnMubWFwKChvcHQpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBvcHQuaWQsXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IG9wdC50ZXh0LFxuICAgICAgICAgICAgICAgICAgICBpc19jb3JyZWN0OiBvcHQuaXNfY29ycmVjdFxuICAgICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ2ZldGNoUXVlc3Rpb25EZXRhaWwgZmFpbGVkJywgZXJyb3IpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGZldGNoU2Vzc2lvblF1ZXN0aW9uV2l0aEZhbGxiYWNrKFxuICAgIHNlc3Npb25JZDogc3RyaW5nLFxuICAgIGl0ZW06IFJhd1Nlc3Npb25RdWVzdGlvblxuKTogUHJvbWlzZTxHYW1lUXVlc3Rpb24gfCBudWxsPiB7XG4gICAgY29uc3QgYnlTZXNzaW9uUXVlc3Rpb25JZCA9IGF3YWl0IGZldGNoUXVlc3Rpb25EZXRhaWwoc2Vzc2lvbklkLCBpdGVtLmlkKTtcbiAgICBpZiAoYnlTZXNzaW9uUXVlc3Rpb25JZCkgcmV0dXJuIGJ5U2Vzc2lvblF1ZXN0aW9uSWQ7XG5cbiAgICBpZiAoaXRlbS5xdWVzdGlvbl9pZCAmJiBpdGVtLnF1ZXN0aW9uX2lkICE9PSBpdGVtLmlkKSB7XG4gICAgICAgIGNvbnN0IGJ5UXVlc3Rpb25JZCA9IGF3YWl0IGZldGNoUXVlc3Rpb25EZXRhaWwoc2Vzc2lvbklkLCBpdGVtLnF1ZXN0aW9uX2lkKTtcbiAgICAgICAgaWYgKGJ5UXVlc3Rpb25JZCkgcmV0dXJuIGJ5UXVlc3Rpb25JZDtcbiAgICB9XG5cbiAgICBjb25zb2xlLmVycm9yKCdbQVBJXVtSRUFMXSBDYW5ub3QgcmVzb2x2ZSBxdWVzdGlvbiBkZXRhaWwgZnJvbSBib3RoIGlkcycsIHtcbiAgICAgICAgc2Vzc2lvbklkLFxuICAgICAgICBzZXNzaW9uUXVlc3Rpb25JZDogaXRlbS5pZCxcbiAgICAgICAgcXVlc3Rpb25JZDogaXRlbS5xdWVzdGlvbl9pZFxuICAgIH0pO1xuICAgIHJldHVybiBudWxsO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc3RhcnRHYW1lU2Vzc2lvbihcbiAgICBnYW1lQ29kZTogc3RyaW5nLFxuICAgIG9wdGlvbnM/OiBBcGlDYWxsT3B0aW9uc1xuKTogUHJvbWlzZTxBcGlSZXNwb25zZTxTdGFydEdhbWVTZXNzaW9uRGF0YSAmIHsgcXVlc3Rpb25zOiBHYW1lUXVlc3Rpb25bXSB9Pj4ge1xuICAgIGNvbnNvbGUubG9nKCdbQVBJXSBzdGFydEdhbWVTZXNzaW9uIGludm9rZWQnLCB7XG4gICAgICAgIGdhbWVDb2RlLFxuICAgICAgICBmb3JjZVJlYWw6IEJvb2xlYW4ob3B0aW9ucz8uZm9yY2VSZWFsKSxcbiAgICAgICAgbW9ja01vZGU6IHNob3VsZFVzZU1vY2sob3B0aW9ucylcbiAgICB9KTtcblxuICAgIGlmIChzaG91bGRVc2VNb2NrKG9wdGlvbnMpKSB7XG4gICAgICAgIGF3YWl0IGRlbGF5KDIwMCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbQVBJXVtNT0NLXSBzdGFydEdhbWVTZXNzaW9uJywge1xuICAgICAgICAgICAgZ2FtZUNvZGUsXG4gICAgICAgICAgICBzZXNzaW9uSWQ6IG1vY2tHYW1lU2Vzc2lvbi5pZCxcbiAgICAgICAgICAgIGdhbWVJZDogbW9ja0dhbWVTZXNzaW9uLmdhbWVfaWQsXG4gICAgICAgICAgICBxdWVzdGlvbkNvdW50OiBtb2NrUXVlc3Rpb25zLmxlbmd0aFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBgTW9jayBzdGFydCBmb3IgJHtnYW1lQ29kZX1gLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIC4uLm1vY2tHYW1lU2Vzc2lvbixcbiAgICAgICAgICAgICAgICBxdWVzdGlvbnM6IG1vY2tRdWVzdGlvbnNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBjb25zdCBhcGlHYW1lQ29kZSA9IHRvQXBpR2FtZUNvZGUoZ2FtZUNvZGUpO1xuICAgIGNvbnN0IHNlc3Npb25SZXMgPSBhd2FpdCByZXF1ZXN0SnNvbjxTdGFydEdhbWVTZXNzaW9uRGF0YT4oJy9hcGkvdjEvZ2FtZS9zdGFydC1nYW1lJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBnYW1lX2NvZGU6IGFwaUdhbWVDb2RlIH0pXG4gICAgfSk7XG5cbiAgICBjb25zdCBzZXNzaW9uSWQgPSBzZXNzaW9uUmVzLmRhdGEuaWQ7XG4gICAgY29uc3Qgc2Vzc2lvblF1ZXN0aW9ucyA9IHNlc3Npb25SZXMuZGF0YS5nYW1lX3Nlc3Npb25fcXVlc3Rpb25zID8/IFtdO1xuXG4gICAgY29uc3QgZGV0YWlscyA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICBzZXNzaW9uUXVlc3Rpb25zXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gYS5vcmRlciAtIGIub3JkZXIpXG4gICAgICAgICAgICAubWFwKChpdGVtKSA9PiBmZXRjaFNlc3Npb25RdWVzdGlvbldpdGhGYWxsYmFjayhzZXNzaW9uSWQsIGl0ZW0pKVxuICAgICk7XG5cbiAgICBjb25zdCBxdWVzdGlvbnMgPSBkZXRhaWxzLmZpbHRlcigoaXRlbSk6IGl0ZW0gaXMgR2FtZVF1ZXN0aW9uID0+IGl0ZW0gIT09IG51bGwpO1xuICAgIGlmIChxdWVzdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gcXVlc3Rpb24gZGV0YWlscyByZXNvbHZlZCBmcm9tIHJlYWwgQVBJJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc2Vzc2lvblJlcyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgLi4uc2Vzc2lvblJlcy5kYXRhLFxuICAgICAgICAgICAgcXVlc3Rpb25zXG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hHYW1lTGlzdChvcHRpb25zPzogQXBpQ2FsbE9wdGlvbnMpOiBQcm9taXNlPEFwaVJlc3BvbnNlPEdhbWVMaXN0SXRlbVtdPj4ge1xuICAgIGlmIChzaG91bGRVc2VNb2NrKG9wdGlvbnMpKSB7XG4gICAgICAgIGF3YWl0IGRlbGF5KDEyMCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgbWVzc2FnZTogJ01vY2sgZ2FtZSBsaXN0JyxcbiAgICAgICAgICAgIGRhdGE6IFtcbiAgICAgICAgICAgICAgICB7IGlkOiAnbW9ja190b3duJywgY29kZTogJ3ZvY2FiX3JhY2UnLCBuYW1lOiAnVG93bicsIGlzX2FjY2Vzc2libGU6IHRydWUgfSxcbiAgICAgICAgICAgICAgICB7IGlkOiAnbW9ja190cmFpbicsIGNvZGU6ICd0cmFpbnNfY2FycycsIG5hbWU6ICdUcmFpbicsIGlzX2FjY2Vzc2libGU6IHRydWUgfVxuICAgICAgICAgICAgXVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiByZXF1ZXN0SnNvbjxHYW1lTGlzdEl0ZW1bXT4oJy9hcGkvdjEvZ2FtZS9saXN0LWdhbWUnKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHN1Ym1pdEFuc3dlcihcbiAgICBzZXNzaW9uSWQ6IHN0cmluZyxcbiAgICBzZXNzaW9uUXVlc3Rpb25JZDogc3RyaW5nLFxuICAgIGFuc3dlcklkOiBzdHJpbmcsXG4gICAgb3B0aW9ucz86IEFwaUNhbGxPcHRpb25zXG4pOiBQcm9taXNlPEFwaVJlc3BvbnNlPEFuc3dlclN1Ym1pdFJlc3BvbnNlPj4ge1xuICAgIGlmIChzaG91bGRVc2VNb2NrKG9wdGlvbnMpKSB7XG4gICAgICAgIGF3YWl0IGRlbGF5KDEyMCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbQVBJXVtNT0NLXSBzdWJtaXRBbnN3ZXInLCB7XG4gICAgICAgICAgICBzZXNzaW9uSWQsXG4gICAgICAgICAgICBzZXNzaW9uUXVlc3Rpb25JZCxcbiAgICAgICAgICAgIGFuc3dlcklkXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdNb2NrIGFuc3dlciBzdWJtaXR0ZWQnLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIHJlbWFpbl9zZWM6IDAsXG4gICAgICAgICAgICAgICAgaXNfZW5kX2dhbWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGlzX3dpbjogZmFsc2UsXG4gICAgICAgICAgICAgICAgaXNfbG9zZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgaXNfY29ycmVjdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBpc19hbnN3ZXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzZXNzaW9uOiB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBzZXNzaW9uSWQsXG4gICAgICAgICAgICAgICAgICAgIHNjb3JlOiAwLFxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50X3F1ZXN0aW9uOiAwXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiByZXF1ZXN0SnNvbjxBbnN3ZXJTdWJtaXRSZXNwb25zZT4oJy9hcGkvdjEvZ2FtZS9hbnN3ZXInLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICBzZXNzaW9uX2lkOiBzZXNzaW9uSWQsXG4gICAgICAgICAgICBxdWVzdGlvbl9pZDogc2Vzc2lvblF1ZXN0aW9uSWQsXG4gICAgICAgICAgICBhbnN3ZXJfaWQ6IGFuc3dlcklkXG4gICAgICAgIH0pXG4gICAgfSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBlbmRHYW1lU2Vzc2lvbihcbiAgICBnYW1lSWQ6IHN0cmluZyxcbiAgICBzY29yZTogbnVtYmVyLFxuICAgIG9wdGlvbnM/OiBBcGlDYWxsT3B0aW9uc1xuKTogUHJvbWlzZTxBcGlSZXNwb25zZTxSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4+IHtcbiAgICBpZiAoc2hvdWxkVXNlTW9jayhvcHRpb25zKSkge1xuICAgICAgICBhd2FpdCBkZWxheSgxNTApO1xuICAgICAgICBjb25zb2xlLmxvZygnW0FQSV1bTU9DS10gZW5kR2FtZVNlc3Npb24nLCB7IGdhbWVJZCwgc2NvcmUgfSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgbWVzc2FnZTogYE1vY2sgZW5kIGZvciAke2dhbWVJZH0gd2l0aCBzY29yZSAke3Njb3JlfWAsXG4gICAgICAgICAgICBkYXRhOiB7IG9rOiB0cnVlIH1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVxdWVzdEpzb248UmVjb3JkPHN0cmluZywgdW5rbm93bj4+KCcvYXBpL3YxL2dhbWUvYW5zd2VyLWJhdGNoaW5nJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBnYW1lX2lkOiBnYW1lSWQsIHNjb3JlIH0pXG4gICAgfSk7XG59XG4iXSwibmFtZXMiOlsiQVBJX0JBU0VfVVJMIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX0FQSV9VUkwiLCJWSVRFX0FQSV9VUkwiLCJyZXBsYWNlIiwiU1RBVElDX0RFQlVHX1RPS0VOIiwiTkVYVF9QVUJMSUNfREVCVUdfQkVBUkVSX1RPS0VOIiwibW9ja0dhbWVTZXNzaW9uIiwiaWQiLCJnYW1lX2lkIiwiZ2FtZV9zZXNzaW9uX3F1ZXN0aW9ucyIsIm9yZGVyIiwiaXNfYW5zd2VyZWQiLCJxdWVzdGlvbl9pZCIsImdhbWUiLCJjb2RlIiwidGltZV9saW1pdCIsIm1vY2tRdWVzdGlvbnMiLCJzZXNzaW9uX3F1ZXN0aW9uX2lkIiwicXVlc3Rpb24iLCJjb250ZW50Iiwib3B0aW9ucyIsInRleHQiLCJpc19jb3JyZWN0IiwiZGVsYXkiLCJtcyIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsIkFMV0FZU19VU0VfTU9DS19BUEkiLCJzaG91bGRVc2VNb2NrIiwiZm9yY2VSZWFsIiwidG9BcGlHYW1lQ29kZSIsImdhbWVDb2RlIiwiZW5zdXJlQXBpQmFzZVVybCIsIkVycm9yIiwiZ2V0QXV0aEhlYWRlciIsIkF1dGhvcml6YXRpb24iLCJyZXF1ZXN0SnNvbiIsInBhdGgiLCJpbml0IiwiYmFzZVVybCIsImF1dGhIZWFkZXIiLCJjb25zb2xlIiwibG9nIiwidXJsIiwibWV0aG9kIiwiaGFzQXV0aFRva2VuIiwiQm9vbGVhbiIsImF1dGhTb3VyY2UiLCJlcnJvciIsInJlc3BvbnNlIiwiZmV0Y2giLCJoZWFkZXJzIiwib2siLCJzdGF0dXMiLCJwYXlsb2FkIiwianNvbiIsInN1Y2Nlc3MiLCJtZXNzYWdlIiwiZmV0Y2hRdWVzdGlvbkRldGFpbCIsInNlc3Npb25JZCIsInNlc3Npb25RdWVzdGlvbklkIiwicmVzIiwiZGF0YSIsIm1hcCIsIm9wdCIsImZldGNoU2Vzc2lvblF1ZXN0aW9uV2l0aEZhbGxiYWNrIiwiaXRlbSIsImJ5U2Vzc2lvblF1ZXN0aW9uSWQiLCJieVF1ZXN0aW9uSWQiLCJxdWVzdGlvbklkIiwic3RhcnRHYW1lU2Vzc2lvbiIsIm1vY2tNb2RlIiwiZ2FtZUlkIiwicXVlc3Rpb25Db3VudCIsImxlbmd0aCIsInF1ZXN0aW9ucyIsImFwaUdhbWVDb2RlIiwic2Vzc2lvblJlcyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiZ2FtZV9jb2RlIiwic2Vzc2lvblF1ZXN0aW9ucyIsImRldGFpbHMiLCJhbGwiLCJzb3J0IiwiYSIsImIiLCJmaWx0ZXIiLCJmZXRjaEdhbWVMaXN0IiwibmFtZSIsImlzX2FjY2Vzc2libGUiLCJzdWJtaXRBbnN3ZXIiLCJhbnN3ZXJJZCIsInJlbWFpbl9zZWMiLCJpc19lbmRfZ2FtZSIsImlzX3dpbiIsImlzX2xvc2UiLCJzZXNzaW9uIiwic2NvcmUiLCJjdXJyZW50X3F1ZXN0aW9uIiwic2Vzc2lvbl9pZCIsImFuc3dlcl9pZCIsImVuZEdhbWVTZXNzaW9uIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/services/api.ts\n");

/***/ }),

/***/ "(pages-dir-node)/./src/services/apiMode.ts":
/*!*********************************!*\
  !*** ./src/services/apiMode.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getApiMode: () => (/* binding */ getApiMode),\n/* harmony export */   getDefaultApiMode: () => (/* binding */ getDefaultApiMode),\n/* harmony export */   isMockApiMode: () => (/* binding */ isMockApiMode),\n/* harmony export */   setApiMode: () => (/* binding */ setApiMode)\n/* harmony export */ });\nconst API_MODE_STORAGE_KEY = 'debug_api_mode';\nconst ENV_DEFAULT_MODE =  false ? 0 : 'real';\nfunction getApiMode() {\n    if (true) return ENV_DEFAULT_MODE;\n    const value = window.localStorage.getItem(API_MODE_STORAGE_KEY);\n    if (value === 'mock' || value === 'real') {\n        return value;\n    }\n    return ENV_DEFAULT_MODE;\n}\nfunction setApiMode(mode) {\n    if (true) return;\n    window.localStorage.setItem(API_MODE_STORAGE_KEY, mode);\n}\nfunction getDefaultApiMode() {\n    return ENV_DEFAULT_MODE;\n}\nfunction isMockApiMode() {\n    return getApiMode() === 'mock';\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9zZXJ2aWNlcy9hcGlNb2RlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFFQSxNQUFNQSx1QkFBdUI7QUFDN0IsTUFBTUMsbUJBQTRCQyxNQUErQyxHQUFHLENBQU0sR0FBRztBQUV0RixTQUFTRztJQUNaLElBQUksSUFBNkIsRUFBRSxPQUFPSjtJQUUxQyxNQUFNSyxRQUFRQyxPQUFPQyxZQUFZLENBQUNDLE9BQU8sQ0FBQ1Q7SUFDMUMsSUFBSU0sVUFBVSxVQUFVQSxVQUFVLFFBQVE7UUFDdEMsT0FBT0E7SUFDWDtJQUVBLE9BQU9MO0FBQ1g7QUFFTyxTQUFTUyxXQUFXQyxJQUFhO0lBQ3BDLElBQUksSUFBNkIsRUFBRTtJQUNuQ0osT0FBT0MsWUFBWSxDQUFDSSxPQUFPLENBQUNaLHNCQUFzQlc7QUFDdEQ7QUFFTyxTQUFTRTtJQUNaLE9BQU9aO0FBQ1g7QUFFTyxTQUFTYTtJQUNaLE9BQU9ULGlCQUFpQjtBQUM1QiIsInNvdXJjZXMiOlsiL1VzZXJzL25iMjMwNjAxL0RvY3VtZW50cy9waGFzZXItZ2FtZWRldi9zcmMvc2VydmljZXMvYXBpTW9kZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgdHlwZSBBcGlNb2RlID0gJ3JlYWwnIHwgJ21vY2snO1xuXG5jb25zdCBBUElfTU9ERV9TVE9SQUdFX0tFWSA9ICdkZWJ1Z19hcGlfbW9kZSc7XG5jb25zdCBFTlZfREVGQVVMVF9NT0RFOiBBcGlNb2RlID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfVVNFX01PQ0tfQVBJID09PSAndHJ1ZScgPyAnbW9jaycgOiAncmVhbCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRBcGlNb2RlKCk6IEFwaU1vZGUge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykgcmV0dXJuIEVOVl9ERUZBVUxUX01PREU7XG5cbiAgICBjb25zdCB2YWx1ZSA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShBUElfTU9ERV9TVE9SQUdFX0tFWSk7XG4gICAgaWYgKHZhbHVlID09PSAnbW9jaycgfHwgdmFsdWUgPT09ICdyZWFsJykge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIEVOVl9ERUZBVUxUX01PREU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRBcGlNb2RlKG1vZGU6IEFwaU1vZGUpOiB2b2lkIHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybjtcbiAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oQVBJX01PREVfU1RPUkFHRV9LRVksIG1vZGUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVmYXVsdEFwaU1vZGUoKTogQXBpTW9kZSB7XG4gICAgcmV0dXJuIEVOVl9ERUZBVUxUX01PREU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc01vY2tBcGlNb2RlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBnZXRBcGlNb2RlKCkgPT09ICdtb2NrJztcbn1cbiJdLCJuYW1lcyI6WyJBUElfTU9ERV9TVE9SQUdFX0tFWSIsIkVOVl9ERUZBVUxUX01PREUiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfVVNFX01PQ0tfQVBJIiwiZ2V0QXBpTW9kZSIsInZhbHVlIiwid2luZG93IiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInNldEFwaU1vZGUiLCJtb2RlIiwic2V0SXRlbSIsImdldERlZmF1bHRBcGlNb2RlIiwiaXNNb2NrQXBpTW9kZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/services/apiMode.ts\n");

/***/ })

};
;