"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_pages-dir-node_src_App_tsx";
exports.ids = ["_pages-dir-node_src_App_tsx"];
exports.modules = {

/***/ "(pages-dir-node)/./src/App.tsx":
/*!*********************!*\
  !*** ./src/App.tsx ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _PhaserGame__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./PhaserGame */ \"(pages-dir-node)/./src/PhaserGame.tsx\");\n\n\nfunction App({ gameCode }) {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        id: \"app\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_PhaserGame__WEBPACK_IMPORTED_MODULE_1__.PhaserGame, {\n            gameCode: gameCode\n        }, void 0, false, {\n            fileName: \"/Users/nb230601/Documents/phaser-gamedev/src/App.tsx\",\n            lineNumber: 11,\n            columnNumber: 13\n        }, this)\n    }, void 0, false, {\n        fileName: \"/Users/nb230601/Documents/phaser-gamedev/src/App.tsx\",\n        lineNumber: 10,\n        columnNumber: 9\n    }, this);\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (App);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9BcHAudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQTBDO0FBTTFDLFNBQVNDLElBQUksRUFBRUMsUUFBUSxFQUFZO0lBRS9CLHFCQUNJLDhEQUFDQztRQUFJQyxJQUFHO2tCQUNKLDRFQUFDSixtREFBVUE7WUFBQ0UsVUFBVUE7Ozs7Ozs7Ozs7O0FBR2xDO0FBRUEsaUVBQWVELEdBQUdBLEVBQUEiLCJzb3VyY2VzIjpbIi9Vc2Vycy9uYjIzMDYwMS9Eb2N1bWVudHMvcGhhc2VyLWdhbWVkZXYvc3JjL0FwcC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGhhc2VyR2FtZSB9IGZyb20gJy4vUGhhc2VyR2FtZSc7XG5cbnR5cGUgQXBwUHJvcHMgPSB7XG4gICAgZ2FtZUNvZGU/OiBzdHJpbmc7XG59O1xuXG5mdW5jdGlvbiBBcHAoeyBnYW1lQ29kZSB9OiBBcHBQcm9wcylcbntcbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGlkPVwiYXBwXCI+XG4gICAgICAgICAgICA8UGhhc2VyR2FtZSBnYW1lQ29kZT17Z2FtZUNvZGV9IC8+XG4gICAgICAgIDwvZGl2PlxuICAgIClcbn1cblxuZXhwb3J0IGRlZmF1bHQgQXBwXG4iXSwibmFtZXMiOlsiUGhhc2VyR2FtZSIsIkFwcCIsImdhbWVDb2RlIiwiZGl2IiwiaWQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/App.tsx\n");

/***/ }),

/***/ "(pages-dir-node)/./src/PhaserGame.tsx":
/*!****************************!*\
  !*** ./src/PhaserGame.tsx ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PhaserGame: () => (/* binding */ PhaserGame)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _game_main__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./game/main */ \"(pages-dir-node)/./src/game/main.ts\");\n/* harmony import */ var _game_EventBus__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./game/EventBus */ \"(pages-dir-node)/./src/game/EventBus.ts\");\n\n\n\n\nconst PhaserGame = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.forwardRef)(function PhaserGame({ currentActiveScene, gameCode }, ref) {\n    const game = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect)({\n        \"PhaserGame.PhaserGame.useLayoutEffect\": ()=>{\n            if (game.current === null) {\n                game.current = (0,_game_main__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(\"game-container\", {\n                    gameCode\n                });\n                if (typeof ref === 'function') {\n                    ref({\n                        game: game.current,\n                        scene: null\n                    });\n                } else if (ref) {\n                    ref.current = {\n                        game: game.current,\n                        scene: null\n                    };\n                }\n            }\n            return ({\n                \"PhaserGame.PhaserGame.useLayoutEffect\": ()=>{\n                    if (game.current) {\n                        game.current.destroy(true);\n                        if (game.current !== null) {\n                            game.current = null;\n                        }\n                    }\n                }\n            })[\"PhaserGame.PhaserGame.useLayoutEffect\"];\n        }\n    }[\"PhaserGame.PhaserGame.useLayoutEffect\"], [\n        ref\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"PhaserGame.PhaserGame.useEffect\": ()=>{\n            _game_EventBus__WEBPACK_IMPORTED_MODULE_3__.EventBus.on('current-scene-ready', {\n                \"PhaserGame.PhaserGame.useEffect\": (scene_instance)=>{\n                    if (currentActiveScene && typeof currentActiveScene === 'function') {\n                        currentActiveScene(scene_instance);\n                    }\n                    if (typeof ref === 'function') {\n                        ref({\n                            game: game.current,\n                            scene: scene_instance\n                        });\n                    } else if (ref) {\n                        ref.current = {\n                            game: game.current,\n                            scene: scene_instance\n                        };\n                    }\n                }\n            }[\"PhaserGame.PhaserGame.useEffect\"]);\n            return ({\n                \"PhaserGame.PhaserGame.useEffect\": ()=>{\n                    _game_EventBus__WEBPACK_IMPORTED_MODULE_3__.EventBus.removeListener('current-scene-ready');\n                }\n            })[\"PhaserGame.PhaserGame.useEffect\"];\n        }\n    }[\"PhaserGame.PhaserGame.useEffect\"], [\n        currentActiveScene,\n        ref\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        id: \"game-container\"\n    }, void 0, false, {\n        fileName: \"/Users/nb230601/Documents/phaser-gamedev/src/PhaserGame.tsx\",\n        lineNumber: 84,\n        columnNumber: 9\n    }, this);\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9QaGFzZXJHYW1lLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUF1RTtBQUNuQztBQUNPO0FBY3BDLE1BQU1NLDJCQUFhTixpREFBVUEsQ0FBeUIsU0FBU00sV0FBVyxFQUFFQyxrQkFBa0IsRUFBRUMsUUFBUSxFQUFFLEVBQUVDLEdBQUc7SUFFbEgsTUFBTUMsT0FBT1AsNkNBQU1BLENBQXFCO0lBRXhDRCxzREFBZUE7aURBQUM7WUFFWixJQUFJUSxLQUFLQyxPQUFPLEtBQUssTUFDckI7Z0JBRUlELEtBQUtDLE9BQU8sR0FBR1Asc0RBQVNBLENBQUMsa0JBQWtCO29CQUFFSTtnQkFBUztnQkFFdEQsSUFBSSxPQUFPQyxRQUFRLFlBQ25CO29CQUNJQSxJQUFJO3dCQUFFQyxNQUFNQSxLQUFLQyxPQUFPO3dCQUFFQyxPQUFPO29CQUFLO2dCQUMxQyxPQUFPLElBQUlILEtBQ1g7b0JBQ0lBLElBQUlFLE9BQU8sR0FBRzt3QkFBRUQsTUFBTUEsS0FBS0MsT0FBTzt3QkFBRUMsT0FBTztvQkFBSztnQkFDcEQ7WUFFSjtZQUVBO3lEQUFPO29CQUVILElBQUlGLEtBQUtDLE9BQU8sRUFDaEI7d0JBQ0lELEtBQUtDLE9BQU8sQ0FBQ0UsT0FBTyxDQUFDO3dCQUNyQixJQUFJSCxLQUFLQyxPQUFPLEtBQUssTUFDckI7NEJBQ0lELEtBQUtDLE9BQU8sR0FBRzt3QkFDbkI7b0JBQ0o7Z0JBQ0o7O1FBQ0o7Z0RBQUc7UUFBQ0Y7S0FBSTtJQUVSUixnREFBU0E7MkNBQUM7WUFFTkksb0RBQVFBLENBQUNTLEVBQUUsQ0FBQzttREFBdUIsQ0FBQ0M7b0JBRWhDLElBQUlSLHNCQUFzQixPQUFPQSx1QkFBdUIsWUFDeEQ7d0JBRUlBLG1CQUFtQlE7b0JBRXZCO29CQUVBLElBQUksT0FBT04sUUFBUSxZQUNuQjt3QkFFSUEsSUFBSTs0QkFBRUMsTUFBTUEsS0FBS0MsT0FBTzs0QkFBRUMsT0FBT0c7d0JBQWU7b0JBRXBELE9BQU8sSUFBSU4sS0FDWDt3QkFFSUEsSUFBSUUsT0FBTyxHQUFHOzRCQUFFRCxNQUFNQSxLQUFLQyxPQUFPOzRCQUFFQyxPQUFPRzt3QkFBZTtvQkFFOUQ7Z0JBRUo7O1lBQ0E7bURBQU87b0JBR0hWLG9EQUFRQSxDQUFDVyxjQUFjLENBQUM7Z0JBRTVCOztRQUNKOzBDQUFHO1FBQUNUO1FBQW9CRTtLQUFJO0lBRTVCLHFCQUNJLDhEQUFDUTtRQUFJQyxJQUFHOzs7Ozs7QUFHaEIsR0FBRyIsInNvdXJjZXMiOlsiL1VzZXJzL25iMjMwNjAxL0RvY3VtZW50cy9waGFzZXItZ2FtZWRldi9zcmMvUGhhc2VyR2FtZS50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZm9yd2FyZFJlZiwgdXNlRWZmZWN0LCB1c2VMYXlvdXRFZmZlY3QsIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IFN0YXJ0R2FtZSBmcm9tICcuL2dhbWUvbWFpbic7XHJcbmltcG9ydCB7IEV2ZW50QnVzIH0gZnJvbSAnLi9nYW1lL0V2ZW50QnVzJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVJlZlBoYXNlckdhbWVcclxue1xyXG4gICAgZ2FtZTogUGhhc2VyLkdhbWUgfCBudWxsO1xyXG4gICAgc2NlbmU6IFBoYXNlci5TY2VuZSB8IG51bGw7XHJcbn1cclxuXHJcbmludGVyZmFjZSBJUHJvcHNcbntcbiAgICBjdXJyZW50QWN0aXZlU2NlbmU/OiAoc2NlbmVfaW5zdGFuY2U6IFBoYXNlci5TY2VuZSkgPT4gdm9pZFxuICAgIGdhbWVDb2RlPzogc3RyaW5nXG59XG5cbmV4cG9ydCBjb25zdCBQaGFzZXJHYW1lID0gZm9yd2FyZFJlZjxJUmVmUGhhc2VyR2FtZSwgSVByb3BzPihmdW5jdGlvbiBQaGFzZXJHYW1lKHsgY3VycmVudEFjdGl2ZVNjZW5lLCBnYW1lQ29kZSB9LCByZWYpXG57XG4gICAgY29uc3QgZ2FtZSA9IHVzZVJlZjxQaGFzZXIuR2FtZSB8IG51bGw+KG51bGwhKTtcblxuICAgIHVzZUxheW91dEVmZmVjdCgoKSA9PlxuICAgIHtcbiAgICAgICAgaWYgKGdhbWUuY3VycmVudCA9PT0gbnVsbClcclxuICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICBnYW1lLmN1cnJlbnQgPSBTdGFydEdhbWUoXCJnYW1lLWNvbnRhaW5lclwiLCB7IGdhbWVDb2RlIH0pO1xuXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcmVmID09PSAnZnVuY3Rpb24nKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZWYoeyBnYW1lOiBnYW1lLmN1cnJlbnQsIHNjZW5lOiBudWxsIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlZilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmVmLmN1cnJlbnQgPSB7IGdhbWU6IGdhbWUuY3VycmVudCwgc2NlbmU6IG51bGwgfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiAoKSA9PlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGdhbWUuY3VycmVudClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZ2FtZS5jdXJyZW50LmRlc3Ryb3kodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZ2FtZS5jdXJyZW50ICE9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGdhbWUuY3VycmVudCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LCBbcmVmXSk7XHJcblxyXG4gICAgdXNlRWZmZWN0KCgpID0+XHJcbiAgICB7XHJcbiAgICAgICAgRXZlbnRCdXMub24oJ2N1cnJlbnQtc2NlbmUtcmVhZHknLCAoc2NlbmVfaW5zdGFuY2U6IFBoYXNlci5TY2VuZSkgPT5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50QWN0aXZlU2NlbmUgJiYgdHlwZW9mIGN1cnJlbnRBY3RpdmVTY2VuZSA9PT0gJ2Z1bmN0aW9uJylcclxuICAgICAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgICAgIGN1cnJlbnRBY3RpdmVTY2VuZShzY2VuZV9pbnN0YW5jZSk7XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHJlZiA9PT0gJ2Z1bmN0aW9uJylcclxuICAgICAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgICAgIHJlZih7IGdhbWU6IGdhbWUuY3VycmVudCwgc2NlbmU6IHNjZW5lX2luc3RhbmNlIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChyZWYpXHJcbiAgICAgICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgICAgICByZWYuY3VycmVudCA9IHsgZ2FtZTogZ2FtZS5jdXJyZW50LCBzY2VuZTogc2NlbmVfaW5zdGFuY2UgfTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuICgpID0+XHJcbiAgICAgICAge1xyXG5cclxuICAgICAgICAgICAgRXZlbnRCdXMucmVtb3ZlTGlzdGVuZXIoJ2N1cnJlbnQtc2NlbmUtcmVhZHknKTtcclxuICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICB9LCBbY3VycmVudEFjdGl2ZVNjZW5lLCByZWZdKTtcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICAgIDxkaXYgaWQ9XCJnYW1lLWNvbnRhaW5lclwiPjwvZGl2PlxyXG4gICAgKTtcclxuXHJcbn0pO1xyXG4iXSwibmFtZXMiOlsiZm9yd2FyZFJlZiIsInVzZUVmZmVjdCIsInVzZUxheW91dEVmZmVjdCIsInVzZVJlZiIsIlN0YXJ0R2FtZSIsIkV2ZW50QnVzIiwiUGhhc2VyR2FtZSIsImN1cnJlbnRBY3RpdmVTY2VuZSIsImdhbWVDb2RlIiwicmVmIiwiZ2FtZSIsImN1cnJlbnQiLCJzY2VuZSIsImRlc3Ryb3kiLCJvbiIsInNjZW5lX2luc3RhbmNlIiwicmVtb3ZlTGlzdGVuZXIiLCJkaXYiLCJpZCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/PhaserGame.tsx\n");

/***/ }),

/***/ "(pages-dir-node)/./src/game/EventBus.ts":
/*!******************************!*\
  !*** ./src/game/EventBus.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EventBus: () => (/* binding */ EventBus)\n/* harmony export */ });\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_0__);\n\n// Used to emit events between components, HTML and Phaser scenes\nconst EventBus = new phaser__WEBPACK_IMPORTED_MODULE_0__.Events.EventEmitter();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9nYW1lL0V2ZW50QnVzLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFnQztBQUVoQyxpRUFBaUU7QUFDMUQsTUFBTUMsV0FBVyxJQUFJRCwwQ0FBTUEsQ0FBQ0UsWUFBWSxHQUFHIiwic291cmNlcyI6WyIvVXNlcnMvbmIyMzA2MDEvRG9jdW1lbnRzL3BoYXNlci1nYW1lZGV2L3NyYy9nYW1lL0V2ZW50QnVzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEV2ZW50cyB9IGZyb20gJ3BoYXNlcic7XHJcblxyXG4vLyBVc2VkIHRvIGVtaXQgZXZlbnRzIGJldHdlZW4gY29tcG9uZW50cywgSFRNTCBhbmQgUGhhc2VyIHNjZW5lc1xyXG5leHBvcnQgY29uc3QgRXZlbnRCdXMgPSBuZXcgRXZlbnRzLkV2ZW50RW1pdHRlcigpOyJdLCJuYW1lcyI6WyJFdmVudHMiLCJFdmVudEJ1cyIsIkV2ZW50RW1pdHRlciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/game/EventBus.ts\n");

/***/ }),

/***/ "(pages-dir-node)/./src/game/gameConfig.ts":
/*!********************************!*\
  !*** ./src/game/gameConfig.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_GAME_CODE: () => (/* binding */ DEFAULT_GAME_CODE),\n/* harmony export */   getGameConfig: () => (/* binding */ getGameConfig),\n/* harmony export */   resolveGameCode: () => (/* binding */ resolveGameCode)\n/* harmony export */ });\nconst gameConfigs = {\n    vocab_race: {\n        code: 'vocab_race',\n        label: 'Tower',\n        mapKey: 'bg-tower',\n        mapPath: 'maps/bg 2.png',\n        assetRoot: 'games/tower',\n        backgroundColor: 0x3fb3e8,\n        useTexturePath: true\n    },\n    train_game: {\n        code: 'train_game',\n        label: 'Nối Đuôi Xe Lửa',\n        mapKey: 'bg-train',\n        mapPath: 'background copy 2.png',\n        assetRoot: 'games/train',\n        backgroundColor: 0xf59e0b,\n        useTexturePath: false\n    }\n};\nconst DEFAULT_GAME_CODE = 'vocab_race';\nfunction resolveGameCode(raw) {\n    if (!raw) return DEFAULT_GAME_CODE;\n    if (raw === 'tower') return 'vocab_race';\n    if (raw === 'train') return 'train_game';\n    return raw in gameConfigs ? raw : DEFAULT_GAME_CODE;\n}\nfunction getGameConfig(raw) {\n    const code = resolveGameCode(raw);\n    return gameConfigs[code];\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9nYW1lL2dhbWVDb25maWcudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBWUEsTUFBTUEsY0FBNEM7SUFDOUNDLFlBQVk7UUFDUkMsTUFBTTtRQUNOQyxPQUFPO1FBQ1BDLFFBQVE7UUFDUkMsU0FBUztRQUNUQyxXQUFXO1FBQ1hDLGlCQUFpQjtRQUNqQkMsZ0JBQWdCO0lBQ3BCO0lBQ0FDLFlBQVk7UUFDUlAsTUFBTTtRQUNOQyxPQUFPO1FBQ1BDLFFBQVE7UUFDUkMsU0FBUztRQUNUQyxXQUFXO1FBQ1hDLGlCQUFpQjtRQUNqQkMsZ0JBQWdCO0lBQ3BCO0FBQ0o7QUFFTyxNQUFNRSxvQkFBOEIsYUFBYTtBQUVqRCxTQUFTQyxnQkFBZ0JDLEdBQW1CO0lBQy9DLElBQUksQ0FBQ0EsS0FBSyxPQUFPRjtJQUVqQixJQUFJRSxRQUFRLFNBQVMsT0FBTztJQUM1QixJQUFJQSxRQUFRLFNBQVMsT0FBTztJQUU1QixPQUFRQSxPQUFPWixjQUFjWSxNQUFNRjtBQUN2QztBQUVPLFNBQVNHLGNBQWNELEdBQW1CO0lBQzdDLE1BQU1WLE9BQU9TLGdCQUFnQkM7SUFDN0IsT0FBT1osV0FBVyxDQUFDRSxLQUFLO0FBQzVCIiwic291cmNlcyI6WyIvVXNlcnMvbmIyMzA2MDEvRG9jdW1lbnRzL3BoYXNlci1nYW1lZGV2L3NyYy9nYW1lL2dhbWVDb25maWcudHMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHR5cGUgR2FtZUNvZGUgPSAndm9jYWJfcmFjZScgfCAndHJhaW5fZ2FtZSc7XG5cbmV4cG9ydCB0eXBlIEdhbWVDb25maWcgPSB7XG4gICAgY29kZTogR2FtZUNvZGU7XG4gICAgbGFiZWw6IHN0cmluZztcbiAgICBtYXBLZXk6IHN0cmluZztcbiAgICBtYXBQYXRoOiBzdHJpbmc7XG4gICAgYXNzZXRSb290OiBzdHJpbmc7XG4gICAgYmFja2dyb3VuZENvbG9yOiBudW1iZXI7XG4gICAgdXNlVGV4dHVyZVBhdGg6IGJvb2xlYW47XG59O1xuXG5jb25zdCBnYW1lQ29uZmlnczogUmVjb3JkPEdhbWVDb2RlLCBHYW1lQ29uZmlnPiA9IHtcbiAgICB2b2NhYl9yYWNlOiB7XG4gICAgICAgIGNvZGU6ICd2b2NhYl9yYWNlJyxcbiAgICAgICAgbGFiZWw6ICdUb3dlcicsXG4gICAgICAgIG1hcEtleTogJ2JnLXRvd2VyJyxcbiAgICAgICAgbWFwUGF0aDogJ21hcHMvYmcgMi5wbmcnLFxuICAgICAgICBhc3NldFJvb3Q6ICdnYW1lcy90b3dlcicsXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogMHgzZmIzZTgsXG4gICAgICAgIHVzZVRleHR1cmVQYXRoOiB0cnVlXG4gICAgfSxcbiAgICB0cmFpbl9nYW1lOiB7XG4gICAgICAgIGNvZGU6ICd0cmFpbl9nYW1lJyxcbiAgICAgICAgbGFiZWw6ICdO4buRaSDEkHXDtGkgWGUgTOG7rWEnLFxuICAgICAgICBtYXBLZXk6ICdiZy10cmFpbicsXG4gICAgICAgIG1hcFBhdGg6ICdiYWNrZ3JvdW5kIGNvcHkgMi5wbmcnLFxuICAgICAgICBhc3NldFJvb3Q6ICdnYW1lcy90cmFpbicsXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogMHhmNTllMGIsXG4gICAgICAgIHVzZVRleHR1cmVQYXRoOiBmYWxzZVxuICAgIH1cbn07XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX0dBTUVfQ09ERTogR2FtZUNvZGUgPSAndm9jYWJfcmFjZSc7XG5cbmV4cG9ydCBmdW5jdGlvbiByZXNvbHZlR2FtZUNvZGUocmF3Pzogc3RyaW5nIHwgbnVsbCk6IEdhbWVDb2RlIHtcbiAgICBpZiAoIXJhdykgcmV0dXJuIERFRkFVTFRfR0FNRV9DT0RFO1xuXG4gICAgaWYgKHJhdyA9PT0gJ3Rvd2VyJykgcmV0dXJuICd2b2NhYl9yYWNlJztcbiAgICBpZiAocmF3ID09PSAndHJhaW4nKSByZXR1cm4gJ3RyYWluX2dhbWUnO1xuXG4gICAgcmV0dXJuIChyYXcgaW4gZ2FtZUNvbmZpZ3MgPyByYXcgOiBERUZBVUxUX0dBTUVfQ09ERSkgYXMgR2FtZUNvZGU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRHYW1lQ29uZmlnKHJhdz86IHN0cmluZyB8IG51bGwpOiBHYW1lQ29uZmlnIHtcbiAgICBjb25zdCBjb2RlID0gcmVzb2x2ZUdhbWVDb2RlKHJhdyk7XG4gICAgcmV0dXJuIGdhbWVDb25maWdzW2NvZGVdO1xufVxuIl0sIm5hbWVzIjpbImdhbWVDb25maWdzIiwidm9jYWJfcmFjZSIsImNvZGUiLCJsYWJlbCIsIm1hcEtleSIsIm1hcFBhdGgiLCJhc3NldFJvb3QiLCJiYWNrZ3JvdW5kQ29sb3IiLCJ1c2VUZXh0dXJlUGF0aCIsInRyYWluX2dhbWUiLCJERUZBVUxUX0dBTUVfQ09ERSIsInJlc29sdmVHYW1lQ29kZSIsInJhdyIsImdldEdhbWVDb25maWciXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/game/gameConfig.ts\n");

/***/ }),

/***/ "(pages-dir-node)/./src/game/main.ts":
/*!**************************!*\
  !*** ./src/game/main.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _scenes_Boot__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./scenes/Boot */ \"(pages-dir-node)/./src/game/scenes/Boot.ts\");\n/* harmony import */ var _scenes_GameOver__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./scenes/GameOver */ \"(pages-dir-node)/./src/game/scenes/GameOver.ts\");\n/* harmony import */ var _scenes_Game__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./scenes/Game */ \"(pages-dir-node)/./src/game/scenes/Game.ts\");\n/* harmony import */ var _scenes_TrainGame__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./scenes/TrainGame */ \"(pages-dir-node)/./src/game/scenes/TrainGame.ts\");\n/* harmony import */ var _scenes_MainMenu__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./scenes/MainMenu */ \"(pages-dir-node)/./src/game/scenes/MainMenu.ts\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _scenes_Preloader__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./scenes/Preloader */ \"(pages-dir-node)/./src/game/scenes/Preloader.ts\");\n/* harmony import */ var _gameConfig__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./gameConfig */ \"(pages-dir-node)/./src/game/gameConfig.ts\");\n\n\n\n\n\n\n\n\n//  Find out more information about the Game Config at:\n//  https://newdocs.phaser.io/docs/3.70.0/Phaser.Types.Core.GameConfig\nconst config = {\n    type: phaser__WEBPACK_IMPORTED_MODULE_5__.AUTO,\n    parent: 'game-container',\n    backgroundColor: '#3fb3e8',\n    scale: {\n        mode: (phaser__WEBPACK_IMPORTED_MODULE_5___default().Scale).FIT,\n        autoCenter: (phaser__WEBPACK_IMPORTED_MODULE_5___default().Scale).CENTER_BOTH,\n        width: 720,\n        height: 1280\n    },\n    scene: [\n        _scenes_Boot__WEBPACK_IMPORTED_MODULE_0__.Boot,\n        _scenes_Preloader__WEBPACK_IMPORTED_MODULE_6__.Preloader,\n        _scenes_MainMenu__WEBPACK_IMPORTED_MODULE_4__.MainMenu,\n        _scenes_Game__WEBPACK_IMPORTED_MODULE_2__.Game,\n        _scenes_TrainGame__WEBPACK_IMPORTED_MODULE_3__.TrainGame,\n        _scenes_GameOver__WEBPACK_IMPORTED_MODULE_1__.GameOver\n    ]\n};\nconst StartGame = (parent, options)=>{\n    const gameCode = (0,_gameConfig__WEBPACK_IMPORTED_MODULE_7__.resolveGameCode)(options?.gameCode ?? _gameConfig__WEBPACK_IMPORTED_MODULE_7__.DEFAULT_GAME_CODE);\n    return new phaser__WEBPACK_IMPORTED_MODULE_5__.Game({\n        ...config,\n        parent,\n        callbacks: {\n            preBoot: (game)=>{\n                game.registry.set('gameCode', gameCode);\n            }\n        }\n    });\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (StartGame);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9nYW1lL21haW4udHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFxQztBQUNRO0FBQ0k7QUFDRjtBQUNGO0FBQ0Q7QUFDRztBQUNtQjtBQUVsRSx1REFBdUQ7QUFDdkQsc0VBQXNFO0FBQ3RFLE1BQU1XLFNBQXVDO0lBQ3pDQyxNQUFNTCx3Q0FBSUE7SUFDVk0sUUFBUTtJQUNSQyxpQkFBaUI7SUFDakJDLE9BQU87UUFDSEMsTUFBTVYscURBQVksQ0FBQ1ksR0FBRztRQUN0QkMsWUFBWWIscURBQVksQ0FBQ2MsV0FBVztRQUNwQ0MsT0FBTztRQUNQQyxRQUFRO0lBQ1o7SUFDQUMsT0FBTztRQUNIdkIsOENBQUlBO1FBQ0pRLHdEQUFTQTtRQUNUSCxzREFBUUE7UUFDUkYsOENBQVFBO1FBQ1JDLHdEQUFTQTtRQUNUSCxzREFBUUE7S0FDWDtBQUNMO0FBTUEsTUFBTXVCLFlBQVksQ0FBQ1gsUUFBZ0JZO0lBQy9CLE1BQU1DLFdBQVdoQiw0REFBZUEsQ0FBQ2UsU0FBU0MsWUFBWWpCLDBEQUFpQkE7SUFFdkUsT0FBTyxJQUFJUCx3Q0FBSUEsQ0FBQztRQUNaLEdBQUdTLE1BQU07UUFDVEU7UUFDQWMsV0FBVztZQUNQQyxTQUFTLENBQUNDO2dCQUNOQSxLQUFLQyxRQUFRLENBQUNDLEdBQUcsQ0FBQyxZQUFZTDtZQUNsQztRQUNKO0lBQ0o7QUFFSjtBQUVBLGlFQUFlRixTQUFTQSxFQUFDIiwic291cmNlcyI6WyIvVXNlcnMvbmIyMzA2MDEvRG9jdW1lbnRzL3BoYXNlci1nYW1lZGV2L3NyYy9nYW1lL21haW4udHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQm9vdCB9IGZyb20gJy4vc2NlbmVzL0Jvb3QnO1xuaW1wb3J0IHsgR2FtZU92ZXIgfSBmcm9tICcuL3NjZW5lcy9HYW1lT3Zlcic7XG5pbXBvcnQgeyBHYW1lIGFzIE1haW5HYW1lIH0gZnJvbSAnLi9zY2VuZXMvR2FtZSc7XG5pbXBvcnQgeyBUcmFpbkdhbWUgfSBmcm9tICcuL3NjZW5lcy9UcmFpbkdhbWUnO1xuaW1wb3J0IHsgTWFpbk1lbnUgfSBmcm9tICcuL3NjZW5lcy9NYWluTWVudSc7XG5pbXBvcnQgUGhhc2VyLCB7IEFVVE8sIEdhbWUgfSBmcm9tICdwaGFzZXInO1xuaW1wb3J0IHsgUHJlbG9hZGVyIH0gZnJvbSAnLi9zY2VuZXMvUHJlbG9hZGVyJztcbmltcG9ydCB7IERFRkFVTFRfR0FNRV9DT0RFLCByZXNvbHZlR2FtZUNvZGUgfSBmcm9tICcuL2dhbWVDb25maWcnO1xuXG4vLyAgRmluZCBvdXQgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgR2FtZSBDb25maWcgYXQ6XG4vLyAgaHR0cHM6Ly9uZXdkb2NzLnBoYXNlci5pby9kb2NzLzMuNzAuMC9QaGFzZXIuVHlwZXMuQ29yZS5HYW1lQ29uZmlnXG5jb25zdCBjb25maWc6IFBoYXNlci5UeXBlcy5Db3JlLkdhbWVDb25maWcgPSB7XG4gICAgdHlwZTogQVVUTyxcbiAgICBwYXJlbnQ6ICdnYW1lLWNvbnRhaW5lcicsXG4gICAgYmFja2dyb3VuZENvbG9yOiAnIzNmYjNlOCcsXG4gICAgc2NhbGU6IHtcbiAgICAgICAgbW9kZTogUGhhc2VyLlNjYWxlLkZJVCxcbiAgICAgICAgYXV0b0NlbnRlcjogUGhhc2VyLlNjYWxlLkNFTlRFUl9CT1RILFxuICAgICAgICB3aWR0aDogNzIwLFxuICAgICAgICBoZWlnaHQ6IDEyODBcbiAgICB9LFxuICAgIHNjZW5lOiBbXG4gICAgICAgIEJvb3QsXG4gICAgICAgIFByZWxvYWRlcixcbiAgICAgICAgTWFpbk1lbnUsXG4gICAgICAgIE1haW5HYW1lLFxuICAgICAgICBUcmFpbkdhbWUsXG4gICAgICAgIEdhbWVPdmVyXG4gICAgXVxufTtcblxudHlwZSBTdGFydEdhbWVPcHRpb25zID0ge1xuICAgIGdhbWVDb2RlPzogc3RyaW5nIHwgbnVsbDtcbn07XG5cbmNvbnN0IFN0YXJ0R2FtZSA9IChwYXJlbnQ6IHN0cmluZywgb3B0aW9ucz86IFN0YXJ0R2FtZU9wdGlvbnMpID0+IHtcbiAgICBjb25zdCBnYW1lQ29kZSA9IHJlc29sdmVHYW1lQ29kZShvcHRpb25zPy5nYW1lQ29kZSA/PyBERUZBVUxUX0dBTUVfQ09ERSk7XG5cbiAgICByZXR1cm4gbmV3IEdhbWUoe1xuICAgICAgICAuLi5jb25maWcsXG4gICAgICAgIHBhcmVudCxcbiAgICAgICAgY2FsbGJhY2tzOiB7XG4gICAgICAgICAgICBwcmVCb290OiAoZ2FtZSkgPT4ge1xuICAgICAgICAgICAgICAgIGdhbWUucmVnaXN0cnkuc2V0KCdnYW1lQ29kZScsIGdhbWVDb2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuXG59XG5cbmV4cG9ydCBkZWZhdWx0IFN0YXJ0R2FtZTtcbiJdLCJuYW1lcyI6WyJCb290IiwiR2FtZU92ZXIiLCJHYW1lIiwiTWFpbkdhbWUiLCJUcmFpbkdhbWUiLCJNYWluTWVudSIsIlBoYXNlciIsIkFVVE8iLCJQcmVsb2FkZXIiLCJERUZBVUxUX0dBTUVfQ09ERSIsInJlc29sdmVHYW1lQ29kZSIsImNvbmZpZyIsInR5cGUiLCJwYXJlbnQiLCJiYWNrZ3JvdW5kQ29sb3IiLCJzY2FsZSIsIm1vZGUiLCJTY2FsZSIsIkZJVCIsImF1dG9DZW50ZXIiLCJDRU5URVJfQk9USCIsIndpZHRoIiwiaGVpZ2h0Iiwic2NlbmUiLCJTdGFydEdhbWUiLCJvcHRpb25zIiwiZ2FtZUNvZGUiLCJjYWxsYmFja3MiLCJwcmVCb290IiwiZ2FtZSIsInJlZ2lzdHJ5Iiwic2V0Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/game/main.ts\n");

/***/ }),

/***/ "(pages-dir-node)/./src/game/objects/EmoteCharacter.ts":
/*!********************************************!*\
  !*** ./src/game/objects/EmoteCharacter.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EmoteCharacter: () => (/* binding */ EmoteCharacter)\n/* harmony export */ });\n/**\n * EmoteCharacter - Nhân vật robot từ emotes spritesheet\n *\n * 3 trạng thái:\n * - idle: Robot bình thường (frame 0)\n * - correct: Robot vui mừng (frame 1)\n * - incorrect: Robot tức giận (frame 2)\n *\n * File: emotes/emo.png - chứa 3 nhân vật theo chiều ngang\n */ class EmoteCharacter {\n    constructor(scene, x, y){\n        // State\n        this.currentState = 'idle';\n        this.isFlipped = false;\n        // Config\n        this.spriteScale = 0.16;\n        this.shadowAlpha = 0.3;\n        this.jumpScale = 0.36;\n        this.scene = scene;\n        // Create container\n        this.container = scene.add.container(x, y);\n        // Shadow (rendered first = behind)\n        this.shadowSprite = scene.add.ellipse(0, 60, 120, 30, 0x000000, this.shadowAlpha);\n        this.container.add(this.shadowSprite);\n        // Character image - dùng 1 trong 3 file riêng biệt\n        // Mặc định load idle\n        this.characterSprite = scene.add.sprite(0, 0, 'emote-tran-idle');\n        this.characterSprite.setScale(this.spriteScale);\n        this.container.add(this.characterSprite);\n    }\n    /**\n     * Get container for positioning\n     */ getContainer() {\n        return this.container;\n    }\n    /**\n     * Get x position\n     */ get x() {\n        return this.container.x;\n    }\n    /**\n     * Get y position\n     */ get y() {\n        return this.container.y;\n    }\n    /**\n     * Set position\n     */ setPosition(x, y) {\n        this.container.setPosition(x, y);\n    }\n    /**\n     * Set trạng thái nhân vật\n     */ setState(state) {\n        this.currentState = state;\n        // Đổi texture theo state\n        const idleTexture = this.isFlipped ? 'emote-tran-idle-flipped' : 'emote-tran-idle';\n        const correctTexture = this.isFlipped ? 'emote-tran-correct-flipped' : 'emote-tran-correct';\n        const incorrectTexture = this.isFlipped ? 'emote-tran-incorrect-flipped' : 'emote-tran-incorrect';\n        const textureMap = {\n            'idle': idleTexture,\n            'correct': correctTexture,\n            'incorrect': incorrectTexture\n        };\n        this.characterSprite.anims?.stop();\n        this.characterSprite.setScale(this.spriteScale);\n        this.characterSprite.setTexture(textureMap[state]);\n        this.characterSprite.setFlipX(false);\n    }\n    /**\n     * Get current state\n     */ getState() {\n        return this.currentState;\n    }\n    /**\n     * Flip character direction\n     */ flip(faceRight) {\n        this.isFlipped = !faceRight;\n        if (this.currentState === 'idle') {\n            this.setState('idle');\n            return;\n        }\n        this.setState(this.currentState);\n    }\n    /**\n     * Jump to a target position with animation\n     */ jumpTo(targetX, targetY, duration = 600) {\n        return new Promise((resolve)=>{\n            if (this.stateResetTimer) {\n                this.stateResetTimer.remove(false);\n                this.stateResetTimer = undefined;\n            }\n            this.scene.tweens.killTweensOf(this.characterSprite);\n            // Determine direction\n            const movingRight = targetX > this.container.x;\n            const shouldFlipX = !movingRight;\n            if (shouldFlipX !== this.isFlipped) {\n                this.flip(movingRight);\n            }\n            // Switch to jump spritesheet animation\n            this.characterSprite.anims?.stop();\n            this.characterSprite.setTexture('character');\n            this.characterSprite.setScale(this.jumpScale);\n            this.characterSprite.setFlipX(this.isFlipped);\n            this.characterSprite.y = 0;\n            this.characterSprite.play('tran-jump', true);\n            // Hide shadow during jump\n            this.scene.tweens.add({\n                targets: this.shadowSprite,\n                alpha: 0,\n                scaleX: 0.5,\n                scaleY: 0.5,\n                duration: duration * 0.3\n            });\n            // Main jump movement (parabolic arc)\n            const startX = this.container.x;\n            const startY = this.container.y;\n            const distance = Phaser.Math.Distance.Between(startX, startY, targetX, targetY);\n            const jumpHeight = Phaser.Math.Clamp(distance * 0.35, 80, 180);\n            this.scene.tweens.add({\n                targets: this.container,\n                x: targetX,\n                duration: duration,\n                ease: 'Sine.easeInOut',\n                onUpdate: (tween)=>{\n                    const t = tween.progress;\n                    const baseY = Phaser.Math.Linear(startY, targetY, t);\n                    const arcY = Math.sin(Math.PI * t) * jumpHeight;\n                    this.container.y = baseY - arcY;\n                },\n                onComplete: ()=>{\n                    this.scene.tweens.killTweensOf(this.characterSprite);\n                    this.characterSprite.setScale(this.spriteScale);\n                    this.characterSprite.anims?.stop();\n                    this.setState('idle');\n                    resolve();\n                }\n            });\n            // Squash/stretch + vertical arc for jump feel\n            this.scene.tweens.add({\n                targets: this.characterSprite,\n                scaleX: this.jumpScale * 0.95,\n                scaleY: this.jumpScale * 1.08,\n                duration: duration * 0.5,\n                yoyo: true,\n                ease: 'Sine.easeInOut'\n            });\n            this.characterSprite.y = 0;\n            // Shadow reappears at end\n            this.scene.tweens.add({\n                targets: this.shadowSprite,\n                alpha: this.shadowAlpha,\n                scaleX: 1,\n                scaleY: 1,\n                duration: duration * 0.3,\n                delay: duration * 0.7\n            });\n        });\n    }\n    /**\n     * Idle animation (subtle breathing effect)\n     */ playIdle() {\n        this.scene.tweens.add({\n            targets: this.characterSprite,\n            y: -10,\n            duration: 800,\n            yoyo: true,\n            repeat: -1,\n            ease: 'Sine.easeInOut'\n        });\n    }\n    /**\n     * Stop idle animation\n     */ stopIdle() {\n        this.scene.tweens.killTweensOf(this.characterSprite);\n        this.characterSprite.y = 0;\n    }\n    /**\n     * Show \"correct\" state temporarily then return to idle\n     */ showCorrect(duration = 1000) {\n        if (this.stateResetTimer) {\n            this.stateResetTimer.remove(false);\n            this.stateResetTimer = undefined;\n        }\n        this.setState('correct');\n        // Pop effect\n        this.scene.tweens.add({\n            targets: this.characterSprite,\n            scale: this.spriteScale * 1.2,\n            duration: 200,\n            yoyo: true\n        });\n        // Return to idle after delay\n        this.stateResetTimer = this.scene.time.delayedCall(duration, ()=>{\n            this.setState('idle');\n            this.stateResetTimer = undefined;\n        });\n    }\n    /**\n     * Show \"incorrect\" state temporarily then return to idle\n     */ showIncorrect(duration = 1000) {\n        if (this.stateResetTimer) {\n            this.stateResetTimer.remove(false);\n            this.stateResetTimer = undefined;\n        }\n        this.setState('incorrect');\n        // Shake effect\n        this.scene.tweens.add({\n            targets: this.container,\n            x: this.container.x + 5,\n            duration: 50,\n            yoyo: true,\n            repeat: 5\n        });\n        // Return to idle after delay\n        this.stateResetTimer = this.scene.time.delayedCall(duration, ()=>{\n            this.setState('idle');\n            this.stateResetTimer = undefined;\n        });\n    }\n    /**\n     * Check if currently jumping (based on active tweens)\n     */ isJumping() {\n        return this.scene.tweens.getTweensOf(this.container).length > 0;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9nYW1lL29iamVjdHMvRW1vdGVDaGFyYWN0ZXIudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUVBOzs7Ozs7Ozs7Q0FTQyxHQUNNLE1BQU1BO0lBaUJUQyxZQUFZQyxLQUFZLEVBQUVDLENBQVMsRUFBRUMsQ0FBUyxDQUM5QztRQVZBLFFBQVE7YUFDQUMsZUFBaUQ7YUFDakRDLFlBQXFCO1FBRTdCLFNBQVM7YUFDUUMsY0FBYzthQUNkQyxjQUFjO2FBQ2RDLFlBQVk7UUFJekIsSUFBSSxDQUFDUCxLQUFLLEdBQUdBO1FBRWIsbUJBQW1CO1FBQ25CLElBQUksQ0FBQ1EsU0FBUyxHQUFHUixNQUFNUyxHQUFHLENBQUNELFNBQVMsQ0FBQ1AsR0FBR0M7UUFFeEMsbUNBQW1DO1FBQ25DLElBQUksQ0FBQ1EsWUFBWSxHQUFHVixNQUFNUyxHQUFHLENBQUNFLE9BQU8sQ0FBQyxHQUFHLElBQUksS0FBSyxJQUFJLFVBQVUsSUFBSSxDQUFDTCxXQUFXO1FBQ2hGLElBQUksQ0FBQ0UsU0FBUyxDQUFDQyxHQUFHLENBQUMsSUFBSSxDQUFDQyxZQUFZO1FBRXBDLG1EQUFtRDtRQUNuRCxxQkFBcUI7UUFDckIsSUFBSSxDQUFDRSxlQUFlLEdBQUdaLE1BQU1TLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsR0FBRztRQUM5QyxJQUFJLENBQUNELGVBQWUsQ0FBQ0UsUUFBUSxDQUFDLElBQUksQ0FBQ1QsV0FBVztRQUM5QyxJQUFJLENBQUNHLFNBQVMsQ0FBQ0MsR0FBRyxDQUFDLElBQUksQ0FBQ0csZUFBZTtJQUMzQztJQUVBOztLQUVDLEdBQ0RHLGVBQ0E7UUFDSSxPQUFPLElBQUksQ0FBQ1AsU0FBUztJQUN6QjtJQUVBOztLQUVDLEdBQ0QsSUFBSVAsSUFDSjtRQUNJLE9BQU8sSUFBSSxDQUFDTyxTQUFTLENBQUNQLENBQUM7SUFDM0I7SUFFQTs7S0FFQyxHQUNELElBQUlDLElBQ0o7UUFDSSxPQUFPLElBQUksQ0FBQ00sU0FBUyxDQUFDTixD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VjtRQUVBLDZCQUE2QjtRQUM3QixJQUFJLENBQUNoQyxlQUFlLEdBQUcsSUFBSSxDQUFDcEMsS0FBSyxDQUFDMkUsSUFBSSxDQUFDQyxXQUFXLENBQUMzQyxVQUFVO1lBQ3pELElBQUksQ0FBQ2hCLFFBQVEsQ0FBQztZQUNkLElBQUksQ0FBQ21CLGVBQWUsR0FBR0U7UUFDM0I7SUFDSjtJQUVBOztLQUVDLEdBQ0R1QyxjQUFjNUMsV0FBbUIsSUFBSSxFQUNyQztRQUNJLElBQUksSUFBSSxDQUFDRyxlQUFlLEVBQUU7WUFDdEIsSUFBSSxDQUFDQSxlQUFlLENBQUNDLE1BQU0sQ0FBQztZQUM1QixJQUFJLENBQUNELGVBQWUsR0FBR0U7UUFDM0I7UUFDQSxJQUFJLENBQUNyQixRQUFRLENBQUM7UUFFZCxlQUFlO1FBQ2YsSUFBSSxDQUFDakIsS0FBSyxDQUFDdUMsTUFBTSxDQUFDOUIsR0FBRyxDQUFDO1lBQ2xCbUMsU0FBUyxJQUFJLENBQUNwQyxTQUFTO1lBQ3ZCUCxHQUFHLElBQUksQ0FBQ08sU0FBUyxDQUFDUCxDQUFDLEdBQUc7WUFDdEJnQyxVQUFVO1lBQ1ZtQyxNQUFNO1lBQ05HLFFBQVE7UUFDWjtRQUVBLDZCQUE2QjtRQUM3QixJQUFJLENBQUNuQyxlQUFlLEdBQUcsSUFBSSxDQUFDcEMsS0FBSyxDQUFDMkUsSUFBSSxDQUFDQyxXQUFXLENBQUMzQyxVQUFVO1lBQ3pELElBQUksQ0FBQ2hCLFFBQVEsQ0FBQztZQUNkLElBQUksQ0FBQ21CLGVBQWUsR0FBR0U7UUFDM0I7SUFDSjtJQUVBOztLQUVDLEdBQ0R3QyxZQUNBO1FBQ0ksT0FBTyxJQUFJLENBQUM5RSxLQUFLLENBQUN1QyxNQUFNLENBQUN3QyxXQUFXLENBQUMsSUFBSSxDQUFDdkUsU0FBUyxFQUFFd0UsTUFBTSxHQUFHO0lBQ2xFO0FBQ0oiLCJzb3VyY2VzIjpbIi9Vc2Vycy9uYjIzMDYwMS9Eb2N1bWVudHMvcGhhc2VyLWdhbWVkZXYvc3JjL2dhbWUvb2JqZWN0cy9FbW90ZUNoYXJhY3Rlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHYW1lT2JqZWN0cywgU2NlbmUgfSBmcm9tICdwaGFzZXInO1xuXG4vKipcbiAqIEVtb3RlQ2hhcmFjdGVyIC0gTmjDom4gduG6rXQgcm9ib3QgdOG7qyBlbW90ZXMgc3ByaXRlc2hlZXRcbiAqXG4gKiAzIHRy4bqhbmcgdGjDoWk6XG4gKiAtIGlkbGU6IFJvYm90IGLDrG5oIHRoxrDhu51uZyAoZnJhbWUgMClcbiAqIC0gY29ycmVjdDogUm9ib3QgdnVpIG3hu6tuZyAoZnJhbWUgMSlcbiAqIC0gaW5jb3JyZWN0OiBSb2JvdCB04bupYyBnaeG6rW4gKGZyYW1lIDIpXG4gKlxuICogRmlsZTogZW1vdGVzL2Vtby5wbmcgLSBjaOG7qWEgMyBuaMOibiB24bqtdCB0aGVvIGNoaeG7gXUgbmdhbmdcbiAqL1xuZXhwb3J0IGNsYXNzIEVtb3RlQ2hhcmFjdGVyXG57XG4gICAgcHJpdmF0ZSBzY2VuZTogU2NlbmU7XG4gICAgcHJpdmF0ZSBjb250YWluZXI6IEdhbWVPYmplY3RzLkNvbnRhaW5lcjtcbiAgICBwcml2YXRlIGNoYXJhY3RlclNwcml0ZTogR2FtZU9iamVjdHMuU3ByaXRlO1xuICAgIHByaXZhdGUgc2hhZG93U3ByaXRlOiBHYW1lT2JqZWN0cy5FbGxpcHNlO1xuICAgIHByaXZhdGUgc3RhdGVSZXNldFRpbWVyPzogUGhhc2VyLlRpbWUuVGltZXJFdmVudDtcblxuICAgIC8vIFN0YXRlXG4gICAgcHJpdmF0ZSBjdXJyZW50U3RhdGU6ICdpZGxlJyB8ICdjb3JyZWN0JyB8ICdpbmNvcnJlY3QnID0gJ2lkbGUnO1xuICAgIHByaXZhdGUgaXNGbGlwcGVkOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICAvLyBDb25maWdcbiAgICBwcml2YXRlIHJlYWRvbmx5IHNwcml0ZVNjYWxlID0gMC4xNjtcbiAgICBwcml2YXRlIHJlYWRvbmx5IHNoYWRvd0FscGhhID0gMC4zO1xuICAgIHByaXZhdGUgcmVhZG9ubHkganVtcFNjYWxlID0gMC4zNjtcblxuICAgIGNvbnN0cnVjdG9yKHNjZW5lOiBTY2VuZSwgeDogbnVtYmVyLCB5OiBudW1iZXIpXG4gICAge1xuICAgICAgICB0aGlzLnNjZW5lID0gc2NlbmU7XG5cbiAgICAgICAgLy8gQ3JlYXRlIGNvbnRhaW5lclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IHNjZW5lLmFkZC5jb250YWluZXIoeCwgeSk7XG5cbiAgICAgICAgLy8gU2hhZG93IChyZW5kZXJlZCBmaXJzdCA9IGJlaGluZClcbiAgICAgICAgdGhpcy5zaGFkb3dTcHJpdGUgPSBzY2VuZS5hZGQuZWxsaXBzZSgwLCA2MCwgMTIwLCAzMCwgMHgwMDAwMDAsIHRoaXMuc2hhZG93QWxwaGEpO1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5hZGQodGhpcy5zaGFkb3dTcHJpdGUpO1xuXG4gICAgICAgIC8vIENoYXJhY3RlciBpbWFnZSAtIGTDuW5nIDEgdHJvbmcgMyBmaWxlIHJpw6puZyBiaeG7h3RcbiAgICAgICAgLy8gTeG6t2MgxJHhu4tuaCBsb2FkIGlkbGVcbiAgICAgICAgdGhpcy5jaGFyYWN0ZXJTcHJpdGUgPSBzY2VuZS5hZGQuc3ByaXRlKDAsIDAsICdlbW90ZS10cmFuLWlkbGUnKTtcbiAgICAgICAgdGhpcy5jaGFyYWN0ZXJTcHJpdGUuc2V0U2NhbGUodGhpcy5zcHJpdGVTY2FsZSk7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFkZCh0aGlzLmNoYXJhY3RlclNwcml0ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGNvbnRhaW5lciBmb3IgcG9zaXRpb25pbmdcbiAgICAgKi9cbiAgICBnZXRDb250YWluZXIoKTogR2FtZU9iamVjdHMuQ29udGFpbmVyXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250YWluZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHggcG9zaXRpb25cbiAgICAgKi9cbiAgICBnZXQgeCgpOiBudW1iZXJcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRhaW5lci54O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB5IHBvc2l0aW9uXG4gICAgICovXG4gICAgZ2V0IHkoKTogbnVtYmVyXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250YWluZXIueTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgcG9zaXRpb25cbiAgICAgKi9cbiAgICBzZXRQb3NpdGlvbih4OiBudW1iZXIsIHk6IG51bWJlcik6IHZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLnNldFBvc2l0aW9uKHgsIHkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB0cuG6oW5nIHRow6FpIG5ow6JuIHbhuq10XG4gICAgICovXG4gICAgc2V0U3RhdGUoc3RhdGU6ICdpZGxlJyB8ICdjb3JyZWN0JyB8ICdpbmNvcnJlY3QnKTogdm9pZFxuICAgIHtcbiAgICAgICAgdGhpcy5jdXJyZW50U3RhdGUgPSBzdGF0ZTtcblxuICAgICAgICAvLyDEkOG7lWkgdGV4dHVyZSB0aGVvIHN0YXRlXG4gICAgICAgIGNvbnN0IGlkbGVUZXh0dXJlID0gdGhpcy5pc0ZsaXBwZWQgPyAnZW1vdGUtdHJhbi1pZGxlLWZsaXBwZWQnIDogJ2Vtb3RlLXRyYW4taWRsZSc7XG4gICAgICAgIGNvbnN0IGNvcnJlY3RUZXh0dXJlID0gdGhpcy5pc0ZsaXBwZWQgPyAnZW1vdGUtdHJhbi1jb3JyZWN0LWZsaXBwZWQnIDogJ2Vtb3RlLXRyYW4tY29ycmVjdCc7XG4gICAgICAgIGNvbnN0IGluY29ycmVjdFRleHR1cmUgPSB0aGlzLmlzRmxpcHBlZCA/ICdlbW90ZS10cmFuLWluY29ycmVjdC1mbGlwcGVkJyA6ICdlbW90ZS10cmFuLWluY29ycmVjdCc7XG4gICAgICAgIGNvbnN0IHRleHR1cmVNYXAgPSB7XG4gICAgICAgICAgICAnaWRsZSc6IGlkbGVUZXh0dXJlLFxuICAgICAgICAgICAgJ2NvcnJlY3QnOiBjb3JyZWN0VGV4dHVyZSxcbiAgICAgICAgICAgICdpbmNvcnJlY3QnOiBpbmNvcnJlY3RUZXh0dXJlXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY2hhcmFjdGVyU3ByaXRlLmFuaW1zPy5zdG9wKCk7XG4gICAgICAgIHRoaXMuY2hhcmFjdGVyU3ByaXRlLnNldFNjYWxlKHRoaXMuc3ByaXRlU2NhbGUpO1xuICAgICAgICB0aGlzLmNoYXJhY3RlclNwcml0ZS5zZXRUZXh0dXJlKHRleHR1cmVNYXBbc3RhdGVdKTtcbiAgICAgICAgdGhpcy5jaGFyYWN0ZXJTcHJpdGUuc2V0RmxpcFgoZmFsc2UpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBjdXJyZW50IHN0YXRlXG4gICAgICovXG4gICAgZ2V0U3RhdGUoKTogJ2lkbGUnIHwgJ2NvcnJlY3QnIHwgJ2luY29ycmVjdCdcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRTdGF0ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGbGlwIGNoYXJhY3RlciBkaXJlY3Rpb25cbiAgICAgKi9cbiAgICBmbGlwKGZhY2VSaWdodDogYm9vbGVhbik6IHZvaWRcbiAgICB7XG4gICAgICAgIHRoaXMuaXNGbGlwcGVkID0gIWZhY2VSaWdodDtcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFN0YXRlID09PSAnaWRsZScpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoJ2lkbGUnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldFN0YXRlKHRoaXMuY3VycmVudFN0YXRlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBKdW1wIHRvIGEgdGFyZ2V0IHBvc2l0aW9uIHdpdGggYW5pbWF0aW9uXG4gICAgICovXG4gICAganVtcFRvKHRhcmdldFg6IG51bWJlciwgdGFyZ2V0WTogbnVtYmVyLCBkdXJhdGlvbjogbnVtYmVyID0gNjAwKTogUHJvbWlzZTx2b2lkPlxuICAgIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZVJlc2V0VGltZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlUmVzZXRUaW1lci5yZW1vdmUoZmFsc2UpO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVSZXNldFRpbWVyID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zY2VuZS50d2VlbnMua2lsbFR3ZWVuc09mKHRoaXMuY2hhcmFjdGVyU3ByaXRlKTtcbiAgICAgICAgICAgIC8vIERldGVybWluZSBkaXJlY3Rpb25cbiAgICAgICAgICAgIGNvbnN0IG1vdmluZ1JpZ2h0ID0gdGFyZ2V0WCA+IHRoaXMuY29udGFpbmVyLng7XG4gICAgICAgICAgICBjb25zdCBzaG91bGRGbGlwWCA9ICFtb3ZpbmdSaWdodDtcbiAgICAgICAgICAgIGlmIChzaG91bGRGbGlwWCAhPT0gdGhpcy5pc0ZsaXBwZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZsaXAobW92aW5nUmlnaHQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBTd2l0Y2ggdG8ganVtcCBzcHJpdGVzaGVldCBhbmltYXRpb25cbiAgICAgICAgICAgIHRoaXMuY2hhcmFjdGVyU3ByaXRlLmFuaW1zPy5zdG9wKCk7XG4gICAgICAgICAgICB0aGlzLmNoYXJhY3RlclNwcml0ZS5zZXRUZXh0dXJlKCdjaGFyYWN0ZXInKTtcbiAgICAgICAgICAgIHRoaXMuY2hhcmFjdGVyU3ByaXRlLnNldFNjYWxlKHRoaXMuanVtcFNjYWxlKTtcbiAgICAgICAgICAgIHRoaXMuY2hhcmFjdGVyU3ByaXRlLnNldEZsaXBYKHRoaXMuaXNGbGlwcGVkKTtcbiAgICAgICAgICAgIHRoaXMuY2hhcmFjdGVyU3ByaXRlLnkgPSAwO1xuICAgICAgICAgICAgdGhpcy5jaGFyYWN0ZXJTcHJpdGUucGxheSgndHJhbi1qdW1wJywgdHJ1ZSk7XG5cbiAgICAgICAgICAgIC8vIEhpZGUgc2hhZG93IGR1cmluZyBqdW1wXG4gICAgICAgICAgICB0aGlzLnNjZW5lLnR3ZWVucy5hZGQoe1xuICAgICAgICAgICAgICAgIHRhcmdldHM6IHRoaXMuc2hhZG93U3ByaXRlLFxuICAgICAgICAgICAgICAgIGFscGhhOiAwLFxuICAgICAgICAgICAgICAgIHNjYWxlWDogMC41LFxuICAgICAgICAgICAgICAgIHNjYWxlWTogMC41LFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBkdXJhdGlvbiAqIDAuM1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIE1haW4ganVtcCBtb3ZlbWVudCAocGFyYWJvbGljIGFyYylcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0WCA9IHRoaXMuY29udGFpbmVyLng7XG4gICAgICAgICAgICBjb25zdCBzdGFydFkgPSB0aGlzLmNvbnRhaW5lci55O1xuICAgICAgICAgICAgY29uc3QgZGlzdGFuY2UgPSBQaGFzZXIuTWF0aC5EaXN0YW5jZS5CZXR3ZWVuKHN0YXJ0WCwgc3RhcnRZLCB0YXJnZXRYLCB0YXJnZXRZKTtcbiAgICAgICAgICAgIGNvbnN0IGp1bXBIZWlnaHQgPSBQaGFzZXIuTWF0aC5DbGFtcChkaXN0YW5jZSAqIDAuMzUsIDgwLCAxODApO1xuXG4gICAgICAgICAgICB0aGlzLnNjZW5lLnR3ZWVucy5hZGQoe1xuICAgICAgICAgICAgICAgIHRhcmdldHM6IHRoaXMuY29udGFpbmVyLFxuICAgICAgICAgICAgICAgIHg6IHRhcmdldFgsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IGR1cmF0aW9uLFxuICAgICAgICAgICAgICAgIGVhc2U6ICdTaW5lLmVhc2VJbk91dCcsXG4gICAgICAgICAgICAgICAgb25VcGRhdGU6ICh0d2VlbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gdHdlZW4ucHJvZ3Jlc3M7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJhc2VZID0gUGhhc2VyLk1hdGguTGluZWFyKHN0YXJ0WSwgdGFyZ2V0WSwgdCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFyY1kgPSBNYXRoLnNpbihNYXRoLlBJICogdCkgKiBqdW1wSGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lci55ID0gYmFzZVkgLSBhcmNZO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25Db21wbGV0ZTogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLnR3ZWVucy5raWxsVHdlZW5zT2YodGhpcy5jaGFyYWN0ZXJTcHJpdGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYXJhY3RlclNwcml0ZS5zZXRTY2FsZSh0aGlzLnNwcml0ZVNjYWxlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFyYWN0ZXJTcHJpdGUuYW5pbXM/LnN0b3AoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSgnaWRsZScpO1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIFNxdWFzaC9zdHJldGNoICsgdmVydGljYWwgYXJjIGZvciBqdW1wIGZlZWxcbiAgICAgICAgICAgIHRoaXMuc2NlbmUudHdlZW5zLmFkZCh7XG4gICAgICAgICAgICAgICAgdGFyZ2V0czogdGhpcy5jaGFyYWN0ZXJTcHJpdGUsXG4gICAgICAgICAgICAgICAgc2NhbGVYOiB0aGlzLmp1bXBTY2FsZSAqIDAuOTUsXG4gICAgICAgICAgICAgICAgc2NhbGVZOiB0aGlzLmp1bXBTY2FsZSAqIDEuMDgsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IGR1cmF0aW9uICogMC41LFxuICAgICAgICAgICAgICAgIHlveW86IHRydWUsXG4gICAgICAgICAgICAgICAgZWFzZTogJ1NpbmUuZWFzZUluT3V0J1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuY2hhcmFjdGVyU3ByaXRlLnkgPSAwO1xuXG5cbiAgICAgICAgICAgIC8vIFNoYWRvdyByZWFwcGVhcnMgYXQgZW5kXG4gICAgICAgICAgICB0aGlzLnNjZW5lLnR3ZWVucy5hZGQoe1xuICAgICAgICAgICAgICAgIHRhcmdldHM6IHRoaXMuc2hhZG93U3ByaXRlLFxuICAgICAgICAgICAgICAgIGFscGhhOiB0aGlzLnNoYWRvd0FscGhhLFxuICAgICAgICAgICAgICAgIHNjYWxlWDogMSxcbiAgICAgICAgICAgICAgICBzY2FsZVk6IDEsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IGR1cmF0aW9uICogMC4zLFxuICAgICAgICAgICAgICAgIGRlbGF5OiBkdXJhdGlvbiAqIDAuN1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIElkbGUgYW5pbWF0aW9uIChzdWJ0bGUgYnJlYXRoaW5nIGVmZmVjdClcbiAgICAgKi9cbiAgICBwbGF5SWRsZSgpOiB2b2lkXG4gICAge1xuICAgICAgICB0aGlzLnNjZW5lLnR3ZWVucy5hZGQoe1xuICAgICAgICAgICAgdGFyZ2V0czogdGhpcy5jaGFyYWN0ZXJTcHJpdGUsXG4gICAgICAgICAgICB5OiAtMTAsXG4gICAgICAgICAgICBkdXJhdGlvbjogODAwLFxuICAgICAgICAgICAgeW95bzogdHJ1ZSxcbiAgICAgICAgICAgIHJlcGVhdDogLTEsXG4gICAgICAgICAgICBlYXNlOiAnU2luZS5lYXNlSW5PdXQnXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFN0b3AgaWRsZSBhbmltYXRpb25cbiAgICAgKi9cbiAgICBzdG9wSWRsZSgpOiB2b2lkXG4gICAge1xuICAgICAgICB0aGlzLnNjZW5lLnR3ZWVucy5raWxsVHdlZW5zT2YodGhpcy5jaGFyYWN0ZXJTcHJpdGUpO1xuICAgICAgICB0aGlzLmNoYXJhY3RlclNwcml0ZS55ID0gMDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTaG93IFwiY29ycmVjdFwiIHN0YXRlIHRlbXBvcmFyaWx5IHRoZW4gcmV0dXJuIHRvIGlkbGVcbiAgICAgKi9cbiAgICBzaG93Q29ycmVjdChkdXJhdGlvbjogbnVtYmVyID0gMTAwMCk6IHZvaWRcbiAgICB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlUmVzZXRUaW1lcikge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZVJlc2V0VGltZXIucmVtb3ZlKGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGVSZXNldFRpbWVyID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoJ2NvcnJlY3QnKTtcblxuICAgICAgICAvLyBQb3AgZWZmZWN0XG4gICAgICAgIHRoaXMuc2NlbmUudHdlZW5zLmFkZCh7XG4gICAgICAgICAgICB0YXJnZXRzOiB0aGlzLmNoYXJhY3RlclNwcml0ZSxcbiAgICAgICAgICAgIHNjYWxlOiB0aGlzLnNwcml0ZVNjYWxlICogMS4yLFxuICAgICAgICAgICAgZHVyYXRpb246IDIwMCxcbiAgICAgICAgICAgIHlveW86IHRydWVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gUmV0dXJuIHRvIGlkbGUgYWZ0ZXIgZGVsYXlcbiAgICAgICAgdGhpcy5zdGF0ZVJlc2V0VGltZXIgPSB0aGlzLnNjZW5lLnRpbWUuZGVsYXllZENhbGwoZHVyYXRpb24sICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoJ2lkbGUnKTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGVSZXNldFRpbWVyID0gdW5kZWZpbmVkO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTaG93IFwiaW5jb3JyZWN0XCIgc3RhdGUgdGVtcG9yYXJpbHkgdGhlbiByZXR1cm4gdG8gaWRsZVxuICAgICAqL1xuICAgIHNob3dJbmNvcnJlY3QoZHVyYXRpb246IG51bWJlciA9IDEwMDApOiB2b2lkXG4gICAge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZVJlc2V0VGltZXIpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGVSZXNldFRpbWVyLnJlbW92ZShmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLnN0YXRlUmVzZXRUaW1lciA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldFN0YXRlKCdpbmNvcnJlY3QnKTtcblxuICAgICAgICAvLyBTaGFrZSBlZmZlY3RcbiAgICAgICAgdGhpcy5zY2VuZS50d2VlbnMuYWRkKHtcbiAgICAgICAgICAgIHRhcmdldHM6IHRoaXMuY29udGFpbmVyLFxuICAgICAgICAgICAgeDogdGhpcy5jb250YWluZXIueCArIDUsXG4gICAgICAgICAgICBkdXJhdGlvbjogNTAsXG4gICAgICAgICAgICB5b3lvOiB0cnVlLFxuICAgICAgICAgICAgcmVwZWF0OiA1XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFJldHVybiB0byBpZGxlIGFmdGVyIGRlbGF5XG4gICAgICAgIHRoaXMuc3RhdGVSZXNldFRpbWVyID0gdGhpcy5zY2VuZS50aW1lLmRlbGF5ZWRDYWxsKGR1cmF0aW9uLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKCdpZGxlJyk7XG4gICAgICAgICAgICB0aGlzLnN0YXRlUmVzZXRUaW1lciA9IHVuZGVmaW5lZDtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgY3VycmVudGx5IGp1bXBpbmcgKGJhc2VkIG9uIGFjdGl2ZSB0d2VlbnMpXG4gICAgICovXG4gICAgaXNKdW1waW5nKCk6IGJvb2xlYW5cbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjZW5lLnR3ZWVucy5nZXRUd2VlbnNPZih0aGlzLmNvbnRhaW5lcikubGVuZ3RoID4gMDtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiRW1vdGVDaGFyYWN0ZXIiLCJjb25zdHJ1Y3RvciIsInNjZW5lIiwieCIsInkiLCJjdXJyZW50U3RhdGUiLCJpc0ZsaXBwZWQiLCJzcHJpdGVTY2FsZSIsInNoYWRvd0FscGhhIiwianVtcFNjYWxlIiwiY29udGFpbmVyIiwiYWRkIiwic2hhZG93U3ByaXRlIiwiZWxsaXBzZSIsImNoYXJhY3RlclNwcml0ZSIsInNwcml0ZSIsInNldFNjYWxlIiwiZ2V0Q29udGFpbmVyIiwic2V0UG9zaXRpb24iLCJzZXRTdGF0ZSIsInN0YXRlIiwiaWRsZVRleHR1cmUiLCJjb3JyZWN0VGV4dHVyZSIsImluY29ycmVjdFRleHR1cmUiLCJ0ZXh0dXJlTWFwIiwiYW5pbXMiLCJzdG9wIiwic2V0VGV4dHVyZSIsInNldEZsaXBYIiwiZ2V0U3RhdGUiLCJmbGlwIiwiZmFjZVJpZ2h0IiwianVtcFRvIiwidGFyZ2V0WCIsInRhcmdldFkiLCJkdXJhdGlvbiIsIlByb21pc2UiLCJyZXNvbHZlIiwic3RhdGVSZXNldFRpbWVyIiwicmVtb3ZlIiwidW5kZWZpbmVkIiwidHdlZW5zIiwia2lsbFR3ZWVuc09mIiwibW92aW5nUmlnaHQiLCJzaG91bGRGbGlwWCIsInBsYXkiLCJ0YXJnZXRzIiwiYWxwaGEiLCJzY2FsZVgiLCJzY2FsZVkiLCJzdGFydFgiLCJzdGFydFkiLCJkaXN0YW5jZSIsIlBoYXNlciIsIk1hdGgiLCJEaXN0YW5jZSIsIkJldHdlZW4iLCJqdW1wSGVpZ2h0IiwiQ2xhbXAiLCJlYXNlIiwib25VcGRhdGUiLCJ0d2VlbiIsInQiLCJwcm9ncmVzcyIsImJhc2VZIiwiTGluZWFyIiwiYXJjWSIsInNpbiIsIlBJIiwib25Db21wbGV0ZSIsInlveW8iLCJkZWxheSIsInBsYXlJZGxlIiwicmVwZWF0Iiwic3RvcElkbGUiLCJzaG93Q29ycmVjdCIsInNjYWxlIiwidGltZSIsImRlbGF5ZWRDYWxsIiwic2hvd0luY29ycmVjdCIsImlzSnVtcGluZyIsImdldFR3ZWVuc09mIiwibGVuZ3RoIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/game/objects/EmoteCharacter.ts\n");

/***/ }),

/***/ "(pages-dir-node)/./src/game/scenes/Boot.ts":
/*!*********************************!*\
  !*** ./src/game/scenes/Boot.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Boot: () => (/* binding */ Boot)\n/* harmony export */ });\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _gameConfig__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../gameConfig */ \"(pages-dir-node)/./src/game/gameConfig.ts\");\n\n\n/**\n * Boot Scene - Stage 1: Load minimal assets for Preloader UI\n *\n * Strategy: Two-stage loading\n * - Stage 1 (Boot): Load only assets needed for loading screen\n * - Stage 2 (Preloader): Load all game assets with progress bar\n *\n * Benefits:\n * - Fast initial feedback\n * - Visual progress indication\n * - Better perceived performance\n */ class Boot extends phaser__WEBPACK_IMPORTED_MODULE_0__.Scene {\n    constructor(){\n        super('Boot');\n    }\n    preload() {\n        const gameCode = this.registry.get('gameCode');\n        const gameConfig = (0,_gameConfig__WEBPACK_IMPORTED_MODULE_1__.getGameConfig)(gameCode);\n        const assetRoot = gameConfig.assetRoot;\n        // Ensure assets resolve from site root even on /game/* routes\n        this.load.setPath('/assets');\n        // Load only minimal assets needed for Preloader UI\n        // These should be small file sizes as there's no progress bar yet\n        if (gameConfig.code === 'train_game') {\n            // Train assets don't include layered backgrounds; reuse the same image.\n            const loaderBg = `${assetRoot}/background.png`;\n            this.load.image('bg-1', loaderBg);\n            this.load.image('bg-2', loaderBg);\n            this.load.image('bg-3', loaderBg);\n            this.load.image('bg-4', loaderBg);\n            this.load.image('bg-5', loaderBg);\n            this.load.image('bg-6', loaderBg);\n            // Logo for branding during load\n            this.load.image('logo', `${assetRoot}/background.png`);\n        } else {\n            // Parallax background layers for loader\n            this.load.image('bg-1', `${assetRoot}/backgrounds/1.png`);\n            this.load.image('bg-2', `${assetRoot}/backgrounds/2.png`);\n            this.load.image('bg-3', `${assetRoot}/backgrounds/3.png`);\n            this.load.image('bg-4', `${assetRoot}/backgrounds/4.png`);\n            this.load.image('bg-5', `${assetRoot}/backgrounds/5.png`);\n            this.load.image('bg-6', `${assetRoot}/backgrounds/6.png`);\n            // Logo for branding during load\n            this.load.image('logo', `${assetRoot}/ui/logo.png`);\n        }\n    }\n    create() {\n        // Transition to Preloader to load main game assets\n        this.scene.start('Preloader');\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9nYW1lL3NjZW5lcy9Cb290LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBK0I7QUFDZTtBQUU5Qzs7Ozs7Ozs7Ozs7Q0FXQyxHQUNNLE1BQU1FLGFBQWFGLHlDQUFLQTtJQUUzQkcsYUFDQTtRQUNJLEtBQUssQ0FBQztJQUNWO0lBRUFDLFVBQ0E7UUFDSSxNQUFNQyxXQUFXLElBQUksQ0FBQ0MsUUFBUSxDQUFDQyxHQUFHLENBQUM7UUFDbkMsTUFBTUMsYUFBYVAsMERBQWFBLENBQUNJO1FBQ2pDLE1BQU1JLFlBQVlELFdBQVdDLFNBQVM7UUFFdEMsOERBQThEO1FBQzlELElBQUksQ0FBQ0MsSUFBSSxDQUFDQyxPQUFPLENBQUM7UUFFbEIsbURBQW1EO1FBQ25ELGtFQUFrRTtRQUVsRSxJQUFJSCxXQUFXSSxJQUFJLEtBQUssY0FBYztZQUNsQyx3RUFBd0U7WUFDeEUsTUFBTUMsV0FBVyxHQUFHSixVQUFVLGVBQWUsQ0FBQztZQUM5QyxJQUFJLENBQUNDLElBQUksQ0FBQ0ksS0FBSyxDQUFDLFFBQVFEO1lBQ3hCLElBQUksQ0FBQ0gsSUFBSSxDQUFDSSxLQUFLLENBQUMsUUFBUUQ7WUFDeEIsSUFBSSxDQUFDSCxJQUFJLENBQUNJLEtBQUssQ0FBQyxRQUFRRDtZQUN4QixJQUFJLENBQUNILElBQUksQ0FBQ0ksS0FBSyxDQUFDLFFBQVFEO1lBQ3hCLElBQUksQ0FBQ0gsSUFBSSxDQUFDSSxLQUFLLENBQUMsUUFBUUQ7WUFDeEIsSUFBSSxDQUFDSCxJQUFJLENBQUNJLEtBQUssQ0FBQyxRQUFRRDtZQUV4QixnQ0FBZ0M7WUFDaEMsSUFBSSxDQUFDSCxJQUFJLENBQUNJLEtBQUssQ0FBQyxRQUFRLEdBQUdMLFVBQVUsZUFBZSxDQUFDO1FBQ3pELE9BQU87WUFDSCx3Q0FBd0M7WUFDeEMsSUFBSSxDQUFDQyxJQUFJLENBQUNJLEtBQUssQ0FBQyxRQUFRLEdBQUdMLFVBQVUsa0JBQWtCLENBQUM7WUFDeEQsSUFBSSxDQUFDQyxJQUFJLENBQUNJLEtBQUssQ0FBQyxRQUFRLEdBQUdMLFVBQVUsa0JBQWtCLENBQUM7WUFDeEQsSUFBSSxDQUFDQyxJQUFJLENBQUNJLEtBQUssQ0FBQyxRQUFRLEdBQUdMLFVBQVUsa0JBQWtCLENBQUM7WUFDeEQsSUFBSSxDQUFDQyxJQUFJLENBQUNJLEtBQUssQ0FBQyxRQUFRLEdBQUdMLFVBQVUsa0JBQWtCLENBQUM7WUFDeEQsSUFBSSxDQUFDQyxJQUFJLENBQUNJLEtBQUssQ0FBQyxRQUFRLEdBQUdMLFVBQVUsa0JBQWtCLENBQUM7WUFDeEQsSUFBSSxDQUFDQyxJQUFJLENBQUNJLEtBQUssQ0FBQyxRQUFRLEdBQUdMLFVBQVUsa0JBQWtCLENBQUM7WUFFeEQsZ0NBQWdDO1lBQ2hDLElBQUksQ0FBQ0MsSUFBSSxDQUFDSSxLQUFLLENBQUMsUUFBUSxHQUFHTCxVQUFVLFlBQVksQ0FBQztRQUN0RDtJQUNKO0lBRUFNLFNBQ0E7UUFDSSxtREFBbUQ7UUFDbkQsSUFBSSxDQUFDQyxLQUFLLENBQUNDLEtBQUssQ0FBQztJQUNyQjtBQUNKIiwic291cmNlcyI6WyIvVXNlcnMvbmIyMzA2MDEvRG9jdW1lbnRzL3BoYXNlci1nYW1lZGV2L3NyYy9nYW1lL3NjZW5lcy9Cb290LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNjZW5lIH0gZnJvbSAncGhhc2VyJztcbmltcG9ydCB7IGdldEdhbWVDb25maWcgfSBmcm9tICcuLi9nYW1lQ29uZmlnJztcblxuLyoqXG4gKiBCb290IFNjZW5lIC0gU3RhZ2UgMTogTG9hZCBtaW5pbWFsIGFzc2V0cyBmb3IgUHJlbG9hZGVyIFVJXG4gKlxuICogU3RyYXRlZ3k6IFR3by1zdGFnZSBsb2FkaW5nXG4gKiAtIFN0YWdlIDEgKEJvb3QpOiBMb2FkIG9ubHkgYXNzZXRzIG5lZWRlZCBmb3IgbG9hZGluZyBzY3JlZW5cbiAqIC0gU3RhZ2UgMiAoUHJlbG9hZGVyKTogTG9hZCBhbGwgZ2FtZSBhc3NldHMgd2l0aCBwcm9ncmVzcyBiYXJcbiAqXG4gKiBCZW5lZml0czpcbiAqIC0gRmFzdCBpbml0aWFsIGZlZWRiYWNrXG4gKiAtIFZpc3VhbCBwcm9ncmVzcyBpbmRpY2F0aW9uXG4gKiAtIEJldHRlciBwZXJjZWl2ZWQgcGVyZm9ybWFuY2VcbiAqL1xuZXhwb3J0IGNsYXNzIEJvb3QgZXh0ZW5kcyBTY2VuZVxue1xuICAgIGNvbnN0cnVjdG9yICgpXG4gICAge1xuICAgICAgICBzdXBlcignQm9vdCcpO1xuICAgIH1cblxuICAgIHByZWxvYWQgKClcbiAgICB7XG4gICAgICAgIGNvbnN0IGdhbWVDb2RlID0gdGhpcy5yZWdpc3RyeS5nZXQoJ2dhbWVDb2RlJykgYXMgc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBnYW1lQ29uZmlnID0gZ2V0R2FtZUNvbmZpZyhnYW1lQ29kZSk7XG4gICAgICAgIGNvbnN0IGFzc2V0Um9vdCA9IGdhbWVDb25maWcuYXNzZXRSb290O1xuXG4gICAgICAgIC8vIEVuc3VyZSBhc3NldHMgcmVzb2x2ZSBmcm9tIHNpdGUgcm9vdCBldmVuIG9uIC9nYW1lLyogcm91dGVzXG4gICAgICAgIHRoaXMubG9hZC5zZXRQYXRoKCcvYXNzZXRzJyk7XG5cbiAgICAgICAgLy8gTG9hZCBvbmx5IG1pbmltYWwgYXNzZXRzIG5lZWRlZCBmb3IgUHJlbG9hZGVyIFVJXG4gICAgICAgIC8vIFRoZXNlIHNob3VsZCBiZSBzbWFsbCBmaWxlIHNpemVzIGFzIHRoZXJlJ3Mgbm8gcHJvZ3Jlc3MgYmFyIHlldFxuXG4gICAgICAgIGlmIChnYW1lQ29uZmlnLmNvZGUgPT09ICd0cmFpbl9nYW1lJykge1xuICAgICAgICAgICAgLy8gVHJhaW4gYXNzZXRzIGRvbid0IGluY2x1ZGUgbGF5ZXJlZCBiYWNrZ3JvdW5kczsgcmV1c2UgdGhlIHNhbWUgaW1hZ2UuXG4gICAgICAgICAgICBjb25zdCBsb2FkZXJCZyA9IGAke2Fzc2V0Um9vdH0vYmFja2dyb3VuZC5wbmdgO1xuICAgICAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdiZy0xJywgbG9hZGVyQmcpO1xuICAgICAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdiZy0yJywgbG9hZGVyQmcpO1xuICAgICAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdiZy0zJywgbG9hZGVyQmcpO1xuICAgICAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdiZy00JywgbG9hZGVyQmcpO1xuICAgICAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdiZy01JywgbG9hZGVyQmcpO1xuICAgICAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdiZy02JywgbG9hZGVyQmcpO1xuXG4gICAgICAgICAgICAvLyBMb2dvIGZvciBicmFuZGluZyBkdXJpbmcgbG9hZFxuICAgICAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdsb2dvJywgYCR7YXNzZXRSb290fS9iYWNrZ3JvdW5kLnBuZ2ApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gUGFyYWxsYXggYmFja2dyb3VuZCBsYXllcnMgZm9yIGxvYWRlclxuICAgICAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdiZy0xJywgYCR7YXNzZXRSb290fS9iYWNrZ3JvdW5kcy8xLnBuZ2ApO1xuICAgICAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdiZy0yJywgYCR7YXNzZXRSb290fS9iYWNrZ3JvdW5kcy8yLnBuZ2ApO1xuICAgICAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdiZy0zJywgYCR7YXNzZXRSb290fS9iYWNrZ3JvdW5kcy8zLnBuZ2ApO1xuICAgICAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdiZy00JywgYCR7YXNzZXRSb290fS9iYWNrZ3JvdW5kcy80LnBuZ2ApO1xuICAgICAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdiZy01JywgYCR7YXNzZXRSb290fS9iYWNrZ3JvdW5kcy81LnBuZ2ApO1xuICAgICAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdiZy02JywgYCR7YXNzZXRSb290fS9iYWNrZ3JvdW5kcy82LnBuZ2ApO1xuXG4gICAgICAgICAgICAvLyBMb2dvIGZvciBicmFuZGluZyBkdXJpbmcgbG9hZFxuICAgICAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdsb2dvJywgYCR7YXNzZXRSb290fS91aS9sb2dvLnBuZ2ApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY3JlYXRlICgpXG4gICAge1xuICAgICAgICAvLyBUcmFuc2l0aW9uIHRvIFByZWxvYWRlciB0byBsb2FkIG1haW4gZ2FtZSBhc3NldHNcbiAgICAgICAgdGhpcy5zY2VuZS5zdGFydCgnUHJlbG9hZGVyJyk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIlNjZW5lIiwiZ2V0R2FtZUNvbmZpZyIsIkJvb3QiLCJjb25zdHJ1Y3RvciIsInByZWxvYWQiLCJnYW1lQ29kZSIsInJlZ2lzdHJ5IiwiZ2V0IiwiZ2FtZUNvbmZpZyIsImFzc2V0Um9vdCIsImxvYWQiLCJzZXRQYXRoIiwiY29kZSIsImxvYWRlckJnIiwiaW1hZ2UiLCJjcmVhdGUiLCJzY2VuZSIsInN0YXJ0Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/game/scenes/Boot.ts\n");

/***/ }),

/***/ "(pages-dir-node)/./src/game/scenes/Game.ts":
/*!*********************************!*\
  !*** ./src/game/scenes/Game.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Game: () => (/* binding */ Game)\n/* harmony export */ });\n/* harmony import */ var _EventBus__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../EventBus */ \"(pages-dir-node)/./src/game/EventBus.ts\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _objects_EmoteCharacter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../objects/EmoteCharacter */ \"(pages-dir-node)/./src/game/objects/EmoteCharacter.ts\");\n/* harmony import */ var _gameConfig__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../gameConfig */ \"(pages-dir-node)/./src/game/gameConfig.ts\");\n/* harmony import */ var _ui_QuizPanel__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../ui/QuizPanel */ \"(pages-dir-node)/./src/game/ui/QuizPanel.ts\");\n\n\n\n\n\nclass Game extends phaser__WEBPACK_IMPORTED_MODULE_1__.Scene {\n    constructor(){\n        super('Game'), this.quizPanelWidth = 0, this.quizPanelHeight = 0, this.uiScale = 1, this.safeInsetBottom = 16, this.quizFeedbackState = 'idle', this.quizOptionButtons = [], this.quizOpen = false, this.quizLocked = false, this.quizCurrentIndex = 0, this.startModalOpen = false, this.gameCompleted = false, this.gameOver = false, this.totalTimeMs = 180000, this.jumpDurationMs = 900, // Game State\n        this.score = 0, this.currentLeafIndex = 0, this.sessionId = null, this.sessionGameId = null, this.sessionQuestions = null, this.sessionTimeLimit = null, this.questionSourceLogged = false, this.gameCode = 'vocab_race', this.gameConfig = (0,_gameConfig__WEBPACK_IMPORTED_MODULE_3__.getGameConfig)('vocab_race'), // Leaf path (detected from track texture)\n        this.leafPath = [], // Fallback zig-zag config\n        this.leafStartY = 940, this.leafStepY = 140, this.leafSideOffset = 180;\n    }\n    init(data) {\n        this.gameCode = (0,_gameConfig__WEBPACK_IMPORTED_MODULE_3__.resolveGameCode)(data?.gameCode ?? this.registry.get('gameCode'));\n        this.registry.set('gameCode', this.gameCode);\n        this.gameConfig = (0,_gameConfig__WEBPACK_IMPORTED_MODULE_3__.getGameConfig)(this.gameCode);\n        this.sessionId = data?.sessionId ?? null;\n        this.sessionGameId = data?.gameId ?? null;\n        this.sessionQuestions = data?.questions ?? null;\n        this.sessionTimeLimit = data?.timeLimit ?? null;\n    }\n    create() {\n        const { width, height } = this.scale;\n        this.camera = this.cameras.main;\n        // Parallax background\n        this.createParallaxBackground();\n        // Track (Leaves) - Use bg-main as the scrolling map\n        this.trackImage = this.add.image(width / 2, height, this.gameConfig.mapKey).setOrigin(0.5, 1);\n        const trackScale = width / this.trackImage.width;\n        this.trackImage.setScale(trackScale);\n        const mapTop = this.trackImage.y - this.trackImage.displayHeight;\n        this.camera.setBounds(0, mapTop, width, this.trackImage.displayHeight);\n        // Build leaf path based on the map texture\n        this.leafPath = this.gameConfig.useTexturePath ? this.buildLeafPath(this.gameConfig.mapKey) : [];\n        // Player Setup - Using EmoteCharacter (idle/correct/incorrect states)\n        const startPos = this.getLeafPosition(0);\n        this.player = new _objects_EmoteCharacter__WEBPACK_IMPORTED_MODULE_2__.EmoteCharacter(this, startPos.x, startPos.y);\n        this.currentLeafIndex = 0;\n        const nextPos = this.getLeafPosition(this.currentLeafIndex + 1);\n        this.player.flip(nextPos.x > startPos.x);\n        // Start idle animation\n        this.player.playIdle();\n        // Initial Camera Position\n        this.camera.scrollY = startPos.y - 900;\n        // UI camera (fixed screen-space)\n        this.uiCamera = this.cameras.add(0, 0, width, height);\n        this.uiCamera.setScroll(0, 0);\n        this.uiCamera.ignore(this.children.list);\n        // UI\n        this.createUI();\n        if (this.sessionTimeLimit && this.sessionTimeLimit > 0) {\n            this.totalTimeMs = this.sessionTimeLimit * 1000;\n        }\n        _EventBus__WEBPACK_IMPORTED_MODULE_0__.EventBus.emit('current-scene-ready', this);\n    }\n    createParallaxBackground() {\n        this.cameras.main.setBackgroundColor(this.gameConfig.backgroundColor);\n        this.parallaxLayers = [];\n    }\n    update() {\n        if (!this.parallaxLayers?.length) return;\n        const scrollY = this.camera.scrollY;\n        this.parallaxLayers.forEach((layer)=>{\n            const factor = layer.getData('scrollFactor');\n            const baseY = layer.getData('baseY');\n            layer.y = baseY + scrollY * factor;\n        });\n    }\n    createUI() {\n        const { width, height } = this.scale;\n        // Fixed UI Container\n        this.uiRoot = this.add.container(0, 0).setScrollFactor(0).setDepth(100);\n        // Timer + Score HUD\n        this.timerOverlay = this.add.container(0, 0).setScrollFactor(0).setDepth(2000);\n        // Back button\n        this.hudBackButton = this.add.container(0, 0);\n        const backBg = this.add.graphics();\n        backBg.fillStyle(0xffffff, 0.95);\n        backBg.fillRoundedRect(-24, -24, 48, 48, 14);\n        backBg.lineStyle(2, 0x0ea5e9, 0.2);\n        backBg.strokeRoundedRect(-24, -24, 48, 48, 14);\n        const backIcon = this.add.text(0, 1, '<', {\n            fontFamily: 'Arial Black',\n            fontSize: '28px',\n            color: '#0f172a'\n        }).setOrigin(0.5);\n        const backHit = this.add.zone(0, 0, 48, 48).setOrigin(0.5).setInteractive({\n            useHandCursor: true\n        });\n        backHit.on('pointerup', ()=>this.handleBackToGameList());\n        this.hudBackButton.add([\n            backBg,\n            backIcon\n        ]);\n        this.hudBackButton.setSize(48, 48);\n        this.hudBackButton.add(backHit);\n        // Points pill\n        this.hudPointsPill = this.add.container(0, 0);\n        const pointsBg = this.add.graphics();\n        const pointsW = 170;\n        const pointsH = 44;\n        pointsBg.fillStyle(0xe0f2fe, 0.98);\n        pointsBg.fillRoundedRect(-pointsW / 2, -pointsH / 2, pointsW, pointsH, 22);\n        pointsBg.lineStyle(2, 0x93c5fd, 0.7);\n        pointsBg.strokeRoundedRect(-pointsW / 2, -pointsH / 2, pointsW, pointsH, 22);\n        const star = this.add.image(-pointsW / 2 + 24, 0, 'star').setScale(0.32).setTint(0xfbbf24);\n        this.scoreText = this.add.text(-pointsW / 2 + 46, 0, 'POINTS: 00', {\n            fontFamily: 'Arial Black',\n            fontSize: '18px',\n            color: '#0f172a'\n        }).setOrigin(0, 0.5);\n        this.hudPointsPill.add([\n            pointsBg,\n            star,\n            this.scoreText\n        ]);\n        // Timer pill\n        this.hudTimerPill = this.add.container(0, 0);\n        const timerBg = this.add.graphics();\n        const timerW = 100;\n        const timerH = 40;\n        timerBg.fillStyle(0xdbeafe, 0.98);\n        timerBg.fillRoundedRect(-timerW / 2, -timerH / 2, timerW, timerH, 20);\n        timerBg.lineStyle(2, 0x60a5fa, 0.6);\n        timerBg.strokeRoundedRect(-timerW / 2, -timerH / 2, timerW, timerH, 20);\n        this.timerText = this.add.text(0, 0, '03:00', {\n            fontFamily: 'Arial Black',\n            fontSize: '18px',\n            color: '#0f172a'\n        }).setOrigin(0.5);\n        this.hudTimerPill.add([\n            timerBg,\n            this.timerText\n        ]);\n        // Hearts pill\n        this.hudHeartsPill = this.add.container(0, 0);\n        const heartsBg = this.add.graphics();\n        const heartsW = 92;\n        const heartsH = 36;\n        heartsBg.fillStyle(0xffffff, 0.98);\n        heartsBg.fillRoundedRect(-heartsW / 2, -heartsH / 2, heartsW, heartsH, 18);\n        heartsBg.lineStyle(2, 0x93c5fd, 0.35);\n        heartsBg.strokeRoundedRect(-heartsW / 2, -heartsH / 2, heartsW, heartsH, 18);\n        const heartsText = this.add.text(0, 0, '❤ ❤ ❤', {\n            fontFamily: 'Arial Black',\n            fontSize: '16px',\n            color: '#ef4444'\n        }).setOrigin(0.5);\n        this.hudHeartsPill.add([\n            heartsBg,\n            heartsText\n        ]);\n        this.timerOverlay.add([\n            this.hudBackButton,\n            this.hudPointsPill,\n            this.hudTimerPill,\n            this.hudHeartsPill\n        ]);\n        this.uiRoot.add(this.timerOverlay);\n        this.layoutHud();\n        // Jump Button\n        this.jumpButton = this.createJumpButton(width / 2, height - 150);\n        this.jumpButton.setScrollFactor(0);\n        this.uiRoot.add(this.jumpButton);\n        this.jumpButton.setVisible(false);\n        this.jumpButton.setActive(false);\n        this.setupJumpInput();\n        // Quiz Modal (UI overlay)\n        this.createQuizModal();\n        this.scale.on('resize', ()=>{\n            if (this.quizModal) this.layoutQuiz();\n            this.layoutHud();\n        });\n        // Start Modal (first screen)\n        this.createStartModal();\n        this.openStartModal();\n        // Ensure only UI camera renders UI\n        this.cameras.main.ignore([\n            this.uiRoot,\n            this.timerOverlay\n        ]);\n        // End Modal\n        this.createEndModal();\n        // Time Up Modal\n        this.createTimeUpModal();\n    }\n    layoutHud() {\n        if (!this.hudBackButton || !this.hudPointsPill || !this.hudTimerPill || !this.hudHeartsPill) return;\n        const { width, height } = this.scale;\n        const topInset = Math.max(20, Math.round(height * 0.03));\n        const sideInset = Math.max(16, Math.round(width * 0.045));\n        const gap = 10;\n        const heartsW = 92;\n        const timerW = 100;\n        this.hudBackButton.setPosition(sideInset + 24, topInset + 24);\n        this.hudPointsPill.setPosition(width / 2, topInset + 24);\n        const rightEdge = width - sideInset;\n        this.hudHeartsPill.setPosition(rightEdge - heartsW / 2, topInset + 24);\n        this.hudTimerPill.setPosition(rightEdge - heartsW - gap - timerW / 2, topInset + 24);\n    }\n    handleBackToGameList() {\n        window.location.href = '/';\n    }\n    createJumpButton(x, y) {\n        const container = this.add.container(x, y);\n        const width = 300;\n        const height = 100;\n        const bg = this.add.rectangle(0, 0, width, height, 0xfbbf24).setStrokeStyle(4, 0xffffff).setFillStyle(0x22c55e);\n        const text = this.add.text(0, 0, 'NEXT JUMP!', {\n            fontFamily: 'Arial Black',\n            fontSize: '32px',\n            color: '#ffffff'\n        }).setOrigin(0.5);\n        container.add([\n            bg,\n            text\n        ]);\n        container.setSize(width, height);\n        this.jumpButtonBg = bg;\n        const onPress = ()=>{\n            if (this.quizOpen || this.startModalOpen) return;\n            bg.setFillStyle(0x16a34a);\n            this.openQuizModal();\n        };\n        const onRelease = ()=>{\n            bg.setFillStyle(0x22c55e);\n        };\n        container.setInteractive(new Phaser.Geom.Rectangle(-width / 2, -height / 2, width, height), Phaser.Geom.Rectangle.Contains);\n        container.on('pointerdown', onPress);\n        container.on('pointerup', onRelease);\n        container.on('pointerout', onRelease);\n        // Add simple pulse tween\n        this.tweens.add({\n            targets: container,\n            scale: 1.05,\n            duration: 800,\n            yoyo: true,\n            repeat: -1\n        });\n        return container;\n    }\n    setupJumpInput() {\n        this.input.enabled = true;\n        if (this.input.mouse) this.input.mouse.enabled = true;\n        this.input.on('pointerdown', (pointer)=>{\n            if (this.quizOpen || this.startModalOpen) return;\n            const bounds = this.jumpButton.getBounds();\n            if (bounds.contains(pointer.x, pointer.y)) {\n                this.jumpButtonBg.setFillStyle(0x16a34a);\n                this.openQuizModal();\n            }\n        });\n        this.input.on('pointerup', ()=>{\n            this.jumpButtonBg.setFillStyle(0x22c55e);\n        });\n    }\n    createQuizModal() {\n        this.quizPanel = new _ui_QuizPanel__WEBPACK_IMPORTED_MODULE_4__.QuizPanel(this, {\n            optionCount: 4,\n            depth: 200,\n            parent: this.uiRoot,\n            showIndex: true\n        });\n        this.quizModal = this.quizPanel.container;\n        this.quizPanelContainer = this.quizPanel.panelContainer;\n        this.quizPanelShadow = this.quizPanel.panelShadow;\n        this.quizPanelBg = this.quizPanel.panelBg;\n        this.quizPanelGlow = this.quizPanel.panelGlow;\n        this.quizIndexText = this.quizPanel.indexText;\n        this.quizFeedbackTitleText = this.quizPanel.feedbackTitleText;\n        this.quizFeedbackSubtitleText = this.quizPanel.feedbackSubtitleText;\n        this.quizQuestionText = this.quizPanel.questionText;\n        this.quizOptionButtons = this.quizPanel.optionButtons;\n        this.quizPanel.onOptionSelected((index)=>{\n            if (!this.quizOpen || this.quizLocked) return;\n            this.handleQuizAnswer(index);\n        });\n        this.layoutQuiz();\n    }\n    createStartModal() {\n        const { width, height } = this.scale;\n        const container = this.add.container(0, 0).setScrollFactor(0).setDepth(220);\n        const overlay = this.add.rectangle(0, 0, width, height, 0x000000, 0.12).setOrigin(0, 0);\n        const panelWidth = Math.min(520, width - 80);\n        const panelHeight = 160;\n        const panelContainer = this.add.container(width / 2, Math.round(height * 0.58)).setScrollFactor(0);\n        const panelShadow = this.add.graphics();\n        panelShadow.fillStyle(0x000000, 0.15);\n        panelShadow.fillRoundedRect(-panelWidth / 2 + 6, -panelHeight / 2 + 10, panelWidth, panelHeight, 26);\n        const panelBg = this.add.graphics();\n        panelBg.fillStyle(0xffffff, 0.85);\n        panelBg.fillRoundedRect(-panelWidth / 2, -panelHeight / 2, panelWidth, panelHeight, 24);\n        panelBg.lineStyle(2, 0x93c5fd, 0.45);\n        panelBg.strokeRoundedRect(-panelWidth / 2, -panelHeight / 2, panelWidth, panelHeight, 24);\n        const title = this.add.text(0, -26, 'Help the robot cross the river.', {\n            fontFamily: 'Arial Black',\n            fontSize: '22px',\n            color: '#0f172a',\n            align: 'center',\n            wordWrap: {\n                width: panelWidth - 60,\n                useAdvancedWrap: true\n            }\n        }).setOrigin(0.5);\n        const button = this.createStartButton(0, 42);\n        panelContainer.add([\n            panelShadow,\n            panelBg,\n            title,\n            button\n        ]);\n        container.add([\n            overlay,\n            panelContainer\n        ]);\n        container.setVisible(false);\n        this.startModal = container;\n        if (this.uiRoot) this.uiRoot.add(container);\n    }\n    createEndModal() {\n        const { width, height } = this.scale;\n        const container = this.add.container(0, 0).setScrollFactor(0).setDepth(230);\n        const overlay = this.add.rectangle(0, 0, width, height, 0x000000, 0.6).setOrigin(0, 0);\n        const panelWidth = Math.min(520, width - 80);\n        const panelHeight = 220;\n        const panelContainer = this.add.container(width / 2, Math.round(height * 0.56)).setScrollFactor(0);\n        overlay.setDepth(0);\n        panelContainer.setDepth(1);\n        const blocker = this.add.zone(0, 0, width, height).setOrigin(0, 0);\n        blocker.setInteractive(new Phaser.Geom.Rectangle(0, 0, width, height), (shape, x, y)=>{\n            const panelBounds = panelContainer.getBounds();\n            if (Phaser.Geom.Rectangle.Contains(panelBounds, x, y)) return false;\n            return Phaser.Geom.Rectangle.Contains(shape, x, y);\n        });\n        blocker.on('pointerdown', ()=>{});\n        const panelShadow = this.add.graphics();\n        panelShadow.fillStyle(0x000000, 0.15);\n        panelShadow.fillRoundedRect(-panelWidth / 2 + 6, -panelHeight / 2 + 10, panelWidth, panelHeight, 26);\n        const panelBg = this.add.graphics();\n        panelBg.fillStyle(0xffffff, 0.85);\n        panelBg.fillRoundedRect(-panelWidth / 2, -panelHeight / 2, panelWidth, panelHeight, 24);\n        panelBg.lineStyle(2, 0x93c5fd, 0.45);\n        panelBg.strokeRoundedRect(-panelWidth / 2, -panelHeight / 2, panelWidth, panelHeight, 24);\n        const title = this.add.text(0, -64, 'Congratulations!', {\n            fontFamily: 'Arial Black',\n            fontSize: '22px',\n            color: '#0f172a'\n        }).setOrigin(0.5);\n        const subtitle = this.add.text(0, -36, 'You completed the run.', {\n            fontFamily: 'Arial',\n            fontSize: '18px',\n            color: '#0f172a',\n            align: 'center',\n            wordWrap: {\n                width: panelWidth - 60,\n                useAdvancedWrap: true\n            }\n        }).setOrigin(0.5);\n        const statsGap = 16;\n        const cardWidth = Math.min(200, Math.floor((panelWidth - 120) / 2));\n        const cardHeight = 46;\n        const statsY = 62;\n        const scoreCard = this.add.graphics();\n        scoreCard.fillStyle(0x93c5fd, 0.18);\n        scoreCard.fillRoundedRect(-cardWidth / 2, -cardHeight / 2, cardWidth, cardHeight, 16);\n        scoreCard.lineStyle(2, 0x93c5fd, 0.45);\n        scoreCard.strokeRoundedRect(-cardWidth / 2, -cardHeight / 2, cardWidth, cardHeight, 16);\n        const timeCard = this.add.graphics();\n        timeCard.fillStyle(0x93c5fd, 0.18);\n        timeCard.fillRoundedRect(-cardWidth / 2, -cardHeight / 2, cardWidth, cardHeight, 16);\n        timeCard.lineStyle(2, 0x93c5fd, 0.45);\n        timeCard.strokeRoundedRect(-cardWidth / 2, -cardHeight / 2, cardWidth, cardHeight, 16);\n        const scoreCardContainer = this.add.container(-cardWidth / 2 - statsGap / 2, statsY, [\n            scoreCard\n        ]);\n        const timeCardContainer = this.add.container(cardWidth / 2 + statsGap / 2, statsY, [\n            timeCard\n        ]);\n        const scoreLabel = this.add.text(scoreCardContainer.x, statsY - 16, 'SCORE', {\n            fontFamily: 'Arial Black',\n            fontSize: '12px',\n            color: '#1e3a8a'\n        }).setOrigin(0.5);\n        const timeLabel = this.add.text(timeCardContainer.x, statsY - 16, 'TIME', {\n            fontFamily: 'Arial Black',\n            fontSize: '12px',\n            color: '#1e3a8a'\n        }).setOrigin(0.5);\n        this.endModalScoreText = this.add.text(scoreCardContainer.x, statsY + 6, '0', {\n            fontFamily: 'Arial Black',\n            fontSize: '18px',\n            color: '#0f172a'\n        }).setOrigin(0.5);\n        this.endModalTimeText = this.add.text(timeCardContainer.x, statsY + 6, '00:00', {\n            fontFamily: 'Arial Black',\n            fontSize: '18px',\n            color: '#0f172a'\n        }).setOrigin(0.5);\n        const restartButton = this.createEndRestartButton(0, panelHeight / 2 + 56);\n        restartButton.setDepth(2);\n        panelContainer.add([\n            panelShadow,\n            panelBg,\n            title,\n            subtitle,\n            scoreCardContainer,\n            timeCardContainer,\n            scoreLabel,\n            timeLabel,\n            this.endModalScoreText,\n            this.endModalTimeText\n        ]);\n        panelContainer.add(restartButton);\n        container.add([\n            overlay,\n            blocker,\n            panelContainer\n        ]);\n        container.setVisible(false);\n        this.endModal = container;\n        this.endModal.setData('panel', panelContainer);\n        this.endModal.setData('overlay', overlay);\n        if (this.uiRoot) this.uiRoot.add(container);\n    }\n    createEndRestartButton(x, y) {\n        const container = this.add.container(x, y).setScrollFactor(0);\n        const width = 260;\n        const height = 52;\n        const radius = 20;\n        const shadow = this.add.graphics();\n        shadow.fillStyle(0x000000, 0.2);\n        shadow.fillRoundedRect(-width / 2 + 4, -height / 2 + 6, width, height, radius);\n        const bg = this.add.graphics();\n        const draw = (fill, stroke)=>{\n            bg.clear();\n            bg.fillStyle(fill, 1);\n            bg.fillRoundedRect(-width / 2, -height / 2, width, height, radius);\n            bg.lineStyle(2, stroke, 0.8);\n            bg.strokeRoundedRect(-width / 2, -height / 2, width, height, radius);\n        };\n        draw(0x3b82f6, 0x93c5fd);\n        const text = this.add.text(0, 0, 'Play Again', {\n            fontFamily: 'Arial Black',\n            fontSize: '20px',\n            color: '#ffffff'\n        }).setOrigin(0.5);\n        const hit = this.add.rectangle(0, 0, width, height, 0xffffff, 0.001);\n        hit.setInteractive();\n        container.add([\n            shadow,\n            bg,\n            text,\n            hit\n        ]);\n        container.setSize(width, height);\n        hit.on('pointerover', ()=>{\n            draw(0x2563eb, 0xbfdbfe);\n            this.tweens.add({\n                targets: container,\n                scale: 1.02,\n                duration: 120,\n                ease: 'Sine.easeOut'\n            });\n        });\n        hit.on('pointerout', ()=>{\n            draw(0x3b82f6, 0x93c5fd);\n            this.tweens.add({\n                targets: container,\n                scale: 1,\n                duration: 120,\n                ease: 'Sine.easeOut'\n            });\n        });\n        hit.on('pointerdown', ()=>{\n            draw(0x1d4ed8, 0xbfdbfe);\n            this.tweens.add({\n                targets: container,\n                scale: 0.98,\n                duration: 80,\n                ease: 'Sine.easeOut'\n            });\n            this.restartRun();\n        });\n        hit.on('pointerup', ()=>{\n            draw(0x2563eb, 0xbfdbfe);\n            this.tweens.add({\n                targets: container,\n                scale: 1.02,\n                duration: 80,\n                ease: 'Sine.easeOut'\n            });\n        });\n        return container;\n    }\n    createTimeUpModal() {\n        const { width, height } = this.scale;\n        const container = this.add.container(0, 0).setScrollFactor(0).setDepth(240);\n        const overlay = this.add.rectangle(0, 0, width, height, 0x000000, 0.12).setOrigin(0, 0);\n        const panelWidth = Math.min(520, width - 80);\n        const panelHeight = 160;\n        const panelContainer = this.add.container(width / 2, Math.round(height * 0.56)).setScrollFactor(0);\n        const panelShadow = this.add.graphics();\n        panelShadow.fillStyle(0x000000, 0.15);\n        panelShadow.fillRoundedRect(-panelWidth / 2 + 6, -panelHeight / 2 + 10, panelWidth, panelHeight, 26);\n        const panelBg = this.add.graphics();\n        panelBg.fillStyle(0xffffff, 0.85);\n        panelBg.fillRoundedRect(-panelWidth / 2, -panelHeight / 2, panelWidth, panelHeight, 24);\n        panelBg.lineStyle(2, 0x93c5fd, 0.45);\n        panelBg.strokeRoundedRect(-panelWidth / 2, -panelHeight / 2, panelWidth, panelHeight, 24);\n        const title = this.add.text(0, -26, 'Out of time! Failed', {\n            fontFamily: 'Arial Black',\n            fontSize: '22px',\n            color: '#0f172a'\n        }).setOrigin(0.5);\n        const restartButton = this.createRestartButton(0, 42);\n        panelContainer.add([\n            panelShadow,\n            panelBg,\n            title,\n            restartButton\n        ]);\n        container.add([\n            overlay,\n            panelContainer\n        ]);\n        container.setVisible(false);\n        this.timeUpModal = container;\n        this.timeUpModal.setData('panel', panelContainer);\n        if (this.uiRoot) this.uiRoot.add(container);\n    }\n    createRestartButton(x, y) {\n        const container = this.add.container(x, y).setScrollFactor(0);\n        const width = 260;\n        const height = 52;\n        const radius = 20;\n        const shadow = this.add.graphics();\n        shadow.fillStyle(0x000000, 0.2);\n        shadow.fillRoundedRect(-width / 2 + 4, -height / 2 + 6, width, height, radius);\n        const bg = this.add.graphics();\n        const draw = (fill, stroke)=>{\n            bg.clear();\n            bg.fillStyle(fill, 1);\n            bg.fillRoundedRect(-width / 2, -height / 2, width, height, radius);\n            bg.lineStyle(2, stroke, 0.8);\n            bg.strokeRoundedRect(-width / 2, -height / 2, width, height, radius);\n        };\n        draw(0x3b82f6, 0x93c5fd);\n        const text = this.add.text(0, 0, 'Continue', {\n            fontFamily: 'Arial Black',\n            fontSize: '20px',\n            color: '#ffffff'\n        }).setOrigin(0.5);\n        const hit = this.add.rectangle(0, 0, width, height, 0xffffff, 0.001);\n        hit.setInteractive();\n        container.add([\n            shadow,\n            bg,\n            text,\n            hit\n        ]);\n        container.setSize(width, height);\n        hit.on('pointerover', ()=>{\n            draw(0x2563eb, 0xbfdbfe);\n            this.tweens.add({\n                targets: container,\n                scale: 1.02,\n                duration: 120,\n                ease: 'Sine.easeOut'\n            });\n        });\n        hit.on('pointerout', ()=>{\n            draw(0x3b82f6, 0x93c5fd);\n            this.tweens.add({\n                targets: container,\n                scale: 1,\n                duration: 120,\n                ease: 'Sine.easeOut'\n            });\n        });\n        hit.on('pointerdown', ()=>{\n            draw(0x1d4ed8, 0xbfdbfe);\n            this.tweens.add({\n                targets: container,\n                scale: 0.98,\n                duration: 80,\n                ease: 'Sine.easeOut'\n            });\n            this.restartRun();\n        });\n        hit.on('pointerup', ()=>{\n            draw(0x2563eb, 0xbfdbfe);\n            this.tweens.add({\n                targets: container,\n                scale: 1.02,\n                duration: 80,\n                ease: 'Sine.easeOut'\n            });\n        });\n        return container;\n    }\n    createStartButton(x, y) {\n        const container = this.add.container(x, y).setScrollFactor(0);\n        const width = 260;\n        const height = 52;\n        const radius = 20;\n        const shadow = this.add.graphics();\n        shadow.fillStyle(0x000000, 0.2);\n        shadow.fillRoundedRect(-width / 2 + 4, -height / 2 + 6, width, height, radius);\n        const bg = this.add.graphics();\n        const draw = (fill, stroke)=>{\n            bg.clear();\n            bg.fillStyle(fill, 1);\n            bg.fillRoundedRect(-width / 2, -height / 2, width, height, radius);\n            bg.lineStyle(2, stroke, 0.8);\n            bg.strokeRoundedRect(-width / 2, -height / 2, width, height, radius);\n        };\n        draw(0x3b82f6, 0x93c5fd);\n        const text = this.add.text(0, 0, 'Start Game', {\n            fontFamily: 'Arial Black',\n            fontSize: '20px',\n            color: '#ffffff'\n        }).setOrigin(0.5);\n        const hitPad = 16;\n        const hitW = width + hitPad * 2;\n        const hitH = height + hitPad * 2;\n        const hit = this.add.rectangle(0, 0, hitW, hitH, 0xffffff, 0.001);\n        hit.setInteractive();\n        container.add([\n            shadow,\n            bg,\n            text,\n            hit\n        ]);\n        container.setSize(width, height);\n        const onPress = ()=>{\n            if (!this.startModalOpen) return;\n            draw(0x1d4ed8, 0xbfdbfe);\n            this.closeStartModal();\n            this.openQuizModal();\n        };\n        const onRelease = ()=>{\n            draw(0x3b82f6, 0x93c5fd);\n        };\n        hit.on('pointerdown', onPress);\n        hit.on('pointerup', onRelease);\n        hit.on('pointerout', onRelease);\n        this.tweens.add({\n            targets: container,\n            scale: 1.05,\n            duration: 800,\n            yoyo: true,\n            repeat: -1\n        });\n        return container;\n    }\n    openStartModal() {\n        this.startModalOpen = true;\n        this.jumpButton.setAlpha(0.4);\n        this.stopTimer();\n        this.startModal.setVisible(true);\n        this.startModal.setAlpha(0);\n        this.tweens.add({\n            targets: this.startModal,\n            alpha: 1,\n            duration: 180\n        });\n    }\n    closeStartModal() {\n        this.startModalOpen = false;\n        this.jumpButton.setAlpha(1);\n        this.startTimer();\n        this.startModal.setVisible(false);\n    }\n    setQuestion(data) {\n        this.quizPanel.setFeedback('idle');\n        this.quizPanel.setQuestion(data);\n        this.layoutQuiz();\n    }\n    layoutQuiz() {\n        if (!this.quizPanel) return;\n        const { width, height } = this.scale;\n        const result = this.quizPanel.layout(width, height);\n        this.uiScale = result.uiScale;\n        this.quizPanelHeight = result.panelHeight;\n        this.quizPanelWidth = result.panelWidth;\n    }\n    openQuizModal() {\n        if (this.gameOver) return;\n        if (this.gameCompleted) return;\n        if (this.player.isJumping()) return;\n        this.quizOpen = true;\n        this.quizLocked = false;\n        this.jumpButton.setAlpha(0.6);\n        const questionPool = this.getQuestionPool();\n        const question = questionPool[this.quizCurrentIndex % questionPool.length];\n        this.setQuestion({\n            index: this.quizCurrentIndex + 1,\n            total: questionPool.length,\n            question: question.question,\n            options: question.options\n        });\n        this.quizModal.setVisible(true);\n        this.quizModal.setAlpha(0);\n        const panel = this.quizPanel.panelContainer;\n        panel.setScale(0.96);\n        panel.y += 18;\n        this.tweens.add({\n            targets: this.quizModal,\n            alpha: 1,\n            duration: 180\n        });\n        this.tweens.add({\n            targets: panel,\n            scale: 1,\n            y: panel.y - 18,\n            duration: 220,\n            ease: 'Back.easeOut'\n        });\n    }\n    closeQuizModal() {\n        this.quizOpen = false;\n        this.quizLocked = false;\n        this.jumpButton.setAlpha(1);\n        this.quizModal.setVisible(false);\n    }\n    async handleQuizAnswer(index) {\n        const questionPool = this.getQuestionPool();\n        const question = questionPool[this.quizCurrentIndex % questionPool.length];\n        let isCorrect = index === question.correctIndex;\n        const selectedOptionId = question.optionIds[index];\n        if (this.sessionId && question.sessionQuestionId && selectedOptionId) {\n            try {\n                const { submitAnswer } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../../services/api */ \"(pages-dir-node)/./src/services/api.ts\"));\n                const res = await submitAnswer(this.sessionId, question.sessionQuestionId, selectedOptionId);\n                isCorrect = res.data.is_correct;\n            } catch (error) {\n                console.error('submitAnswer failed, fallback to local check', error);\n            }\n        }\n        const btn = this.quizOptionButtons[index];\n        const redraw = btn.getData('redraw');\n        if (isCorrect) {\n            this.quizLocked = true;\n            redraw('correct');\n            this.setQuizFeedback('correct');\n            this.updateScore(1);\n            this.speedUpJump();\n            await this.delay(400);\n            this.closeQuizModal();\n            await this.handleJump();\n            this.quizCurrentIndex += 1;\n            this.time.delayedCall(250, ()=>{\n                this.openQuizModal();\n            });\n        } else {\n            this.quizLocked = true;\n            redraw('wrong');\n            this.setQuizFeedback('wrong');\n            this.updateScore(-1);\n            this.showPlayerState('incorrect');\n            const panel = this.quizPanel.panelContainer;\n            const startX = panel.x;\n            this.tweens.add({\n                targets: panel,\n                x: startX + 10,\n                duration: 60,\n                yoyo: true,\n                repeat: 3,\n                ease: 'Sine.easeInOut',\n                onComplete: ()=>{\n                    panel.x = startX;\n                    this.quizLocked = false;\n                    redraw('normal');\n                }\n            });\n        }\n    }\n    getQuestionPool() {\n        const apiQuestions = this.sessionQuestions;\n        if (apiQuestions?.length) {\n            if (!this.questionSourceLogged) {\n                this.questionSourceLogged = true;\n                console.log('[GAME][TOWN] Using session questions', {\n                    gameCode: this.gameCode,\n                    count: apiQuestions.length,\n                    sample: apiQuestions[0]?.question?.content ?? null\n                });\n            }\n            return apiQuestions.map((item)=>{\n                const options = item.question.options.map((opt)=>opt.text);\n                const optionIds = item.question.options.map((opt)=>opt.id ?? '');\n                let correctIndex = item.question.options.findIndex((opt)=>opt.is_correct);\n                if (correctIndex < 0) correctIndex = 0;\n                return {\n                    sessionQuestionId: item.session_question_id ?? null,\n                    question: item.question.content,\n                    options,\n                    optionIds,\n                    correctIndex\n                };\n            });\n        }\n        if (!this.questionSourceLogged) {\n            this.questionSourceLogged = true;\n            console.warn('[GAME][TOWN] Using fallback local questions', {\n                gameCode: this.gameCode\n            });\n        }\n        return [\n            {\n                sessionQuestionId: null,\n                question: 'What is the capital of Vietnam?',\n                options: [\n                    'Hanoi',\n                    'Da Nang',\n                    'Hai Phong',\n                    'Can Tho'\n                ],\n                optionIds: [\n                    '',\n                    '',\n                    '',\n                    ''\n                ],\n                correctIndex: 0\n            },\n            {\n                sessionQuestionId: null,\n                question: 'Which language does Phaser use?',\n                options: [\n                    'TypeScript/JavaScript',\n                    'C#',\n                    'Python',\n                    'Go'\n                ],\n                optionIds: [\n                    '',\n                    '',\n                    '',\n                    ''\n                ],\n                correctIndex: 0\n            },\n            {\n                sessionQuestionId: null,\n                question: 'What color are the leaves in the game?',\n                options: [\n                    'Green',\n                    'Red',\n                    'Purple',\n                    'Yellow'\n                ],\n                optionIds: [\n                    '',\n                    '',\n                    '',\n                    ''\n                ],\n                correctIndex: 0\n            }\n        ];\n    }\n    async handleJump() {\n        if (this.player.isJumping()) return;\n        if (this.gameOver) return;\n        const nextIndex = this.currentLeafIndex + 1;\n        const maxIndex = this.leafPath.length > 0 ? this.leafPath.length - 1 : Number.POSITIVE_INFINITY;\n        if (this.leafPath.length > 0 && nextIndex > maxIndex) {\n            return;\n        }\n        const targetPos = this.getLeafPosition(nextIndex);\n        // Stop idle animation during jump\n        this.player.stopIdle();\n        // Scroll Camera\n        this.tweens.add({\n            targets: this.camera,\n            scrollY: targetPos.y - 800,\n            duration: 600,\n            ease: 'Sine.easeInOut'\n        });\n        // Perform jump using EmoteCharacter\n        await this.player.jumpTo(targetPos.x, targetPos.y, this.jumpDurationMs);\n        // Update state after jump completes\n        this.currentLeafIndex = nextIndex;\n        const nextPos = this.getLeafPosition(this.currentLeafIndex + 1);\n        this.player.flip(nextPos.x > targetPos.x);\n        // Show correct state on new leaf, then resume idle\n        this.player.showCorrect(800);\n        this.time.delayedCall(800, ()=>{\n            this.player.playIdle();\n        });\n        if (this.leafPath.length > 0 && this.currentLeafIndex >= maxIndex) {\n            this.gameCompleted = true;\n            this.jumpButton.setAlpha(0.4);\n            this.quizOpen = false;\n            this.quizLocked = false;\n            this.stopTimer();\n            this.timerOverlay.setVisible(false);\n            if (this.totalTimeMs > 0) {\n                this.updateScore(3);\n            }\n            this.updateEndTimeText();\n            this.time.delayedCall(400, ()=>{\n                this.openEndModal();\n            });\n        }\n    }\n    startTimer() {\n        if (this.timerEvent) {\n            this.timerEvent.remove(false);\n        }\n        this.totalTimeMs = this.sessionTimeLimit && this.sessionTimeLimit > 0 ? this.sessionTimeLimit * 1000 : 180000;\n        this.updateTimerText(this.totalTimeMs);\n        this.timerEvent = this.time.addEvent({\n            delay: 1000,\n            loop: true,\n            callback: ()=>{\n                if (this.gameCompleted || this.gameOver) return;\n                this.totalTimeMs -= 1000;\n                this.updateTimerText(this.totalTimeMs);\n                if (this.totalTimeMs <= 0) {\n                    this.totalTimeMs = 0;\n                    this.updateTimerText(this.totalTimeMs);\n                    this.handleTimeUp();\n                }\n            }\n        });\n    }\n    stopTimer() {\n        if (this.timerEvent) {\n            this.timerEvent.remove(false);\n        }\n    }\n    updateTimerText(ms) {\n        const totalSeconds = Math.max(0, Math.floor(ms / 1000));\n        const minutes = Math.floor(totalSeconds / 60);\n        const seconds = totalSeconds % 60;\n        const pad = (n)=>n < 10 ? `0${n}` : `${n}`;\n        const text = `${minutes}m ${pad(seconds)}s`;\n        this.timerText.setText(text);\n    }\n    handleTimeUp() {\n        if (this.gameOver || this.gameCompleted) return;\n        this.gameOver = true;\n        this.quizOpen = false;\n        this.quizLocked = false;\n        this.jumpButton.setAlpha(0.4);\n        this.closeQuizModal();\n        this.openTimeUpModal();\n    }\n    openEndModal() {\n        if (!this.endModal) return;\n        const panel = this.endModal.getData('panel');\n        const overlay = this.endModal.getData('overlay');\n        panel.setScale(0.9);\n        if (overlay) overlay.setAlpha(0);\n        this.endModal.setVisible(true);\n        this.endModal.setAlpha(1);\n        this.launchConfetti();\n        this.submitSessionResult();\n        this.tweens.add({\n            targets: overlay,\n            alpha: 0.6,\n            duration: 200\n        });\n        this.tweens.add({\n            targets: panel,\n            scale: 1,\n            duration: 260,\n            ease: 'Back.easeOut'\n        });\n    }\n    launchConfetti() {\n        if (this.confettiEmitter) {\n            this.confettiEmitter.destroy();\n        }\n        if (this.confettiBurstEvent) {\n            this.confettiBurstEvent.remove(false);\n            this.confettiBurstEvent = undefined;\n        }\n        const { width, height } = this.scale;\n        this.confettiEmitter = this.add.particles(0, 0, 'tile-flower', {\n            speed: {\n                min: 90,\n                max: 170\n            },\n            angle: {\n                min: 0,\n                max: 360\n            },\n            rotate: {\n                min: -220,\n                max: 220\n            },\n            scale: {\n                start: 0.32,\n                end: 0.1\n            },\n            lifespan: {\n                min: 1400,\n                max: 2200\n            },\n            quantity: 0,\n            frequency: -1,\n            gravityY: 160\n        });\n        this.confettiEmitter.setScrollFactor(0);\n        this.confettiEmitter.setDepth(2100);\n        this.uiRoot.add(this.confettiEmitter);\n        this.confettiBurstEvent = this.time.addEvent({\n            delay: 900,\n            repeat: 0,\n            callback: ()=>{\n                if (!this.confettiEmitter) return;\n                this.confettiEmitter.explode(18, width / 2, height / 2);\n            }\n        });\n        this.time.delayedCall(3500, ()=>{\n            this.confettiEmitter?.destroy();\n            this.confettiEmitter = undefined;\n            this.confettiBurstEvent?.remove(false);\n            this.confettiBurstEvent = undefined;\n        });\n    }\n    openTimeUpModal() {\n        if (!this.timeUpModal) return;\n        const panel = this.timeUpModal.getData('panel');\n        panel.setScale(0.96);\n        this.timeUpModal.setVisible(true);\n        this.timeUpModal.setAlpha(0);\n        this.tweens.add({\n            targets: this.timeUpModal,\n            alpha: 1,\n            duration: 200\n        });\n        this.tweens.add({\n            targets: panel,\n            scale: 1,\n            duration: 240,\n            ease: 'Back.easeOut'\n        });\n    }\n    closeTimeUpModal() {\n        if (!this.timeUpModal) return;\n        this.timeUpModal.setVisible(false);\n    }\n    closeEndModal() {\n        if (!this.endModal) return;\n        this.endModal.setVisible(false);\n        this.endModal.setAlpha(0);\n        const overlay = this.endModal.getData('overlay');\n        if (overlay) overlay.setAlpha(0);\n        if (this.confettiEmitter) {\n            this.confettiEmitter.destroy();\n            this.confettiEmitter = undefined;\n        }\n        if (this.confettiBurstEvent) {\n            this.confettiBurstEvent.remove(false);\n            this.confettiBurstEvent = undefined;\n        }\n    }\n    submitSessionResult() {\n        if (!this.sessionGameId) return;\n        Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../../services/api */ \"(pages-dir-node)/./src/services/api.ts\")).then(({ endGameSession })=>endGameSession(this.sessionGameId, this.score)).catch((err)=>{\n            console.error('endGameSession failed', err);\n        });\n    }\n    restartRun() {\n        this.gameOver = false;\n        this.gameCompleted = false;\n        this.quizOpen = false;\n        this.quizLocked = false;\n        this.quizCurrentIndex = 0;\n        this.startModalOpen = false;\n        this.score = 0;\n        this.scoreText.setText('POINTS: 00');\n        this.jumpDurationMs = 900;\n        this.closeTimeUpModal();\n        this.closeQuizModal();\n        this.closeEndModal();\n        if (this.startModal) this.startModal.setVisible(false);\n        const startPos = this.getLeafPosition(0);\n        this.player.setPosition(startPos.x, startPos.y);\n        this.player.playIdle();\n        this.currentLeafIndex = 0;\n        const nextPos = this.getLeafPosition(this.currentLeafIndex + 1);\n        this.player.flip(nextPos.x > startPos.x);\n        this.camera.scrollY = startPos.y - 900;\n        this.stopTimer();\n        this.timerOverlay.setVisible(true);\n        this.jumpButton.setAlpha(1);\n        this.startTimer();\n        this.openQuizModal();\n    }\n    updateScore(delta) {\n        this.score += delta;\n        const points = Math.max(0, this.score);\n        this.scoreText.setText(`POINTS: ${points.toString().padStart(2, '0')}`);\n        if (this.endModalScoreText) {\n            this.endModalScoreText.setText(`Score: ${this.score}`);\n        }\n    }\n    updateEndTimeText() {\n        if (!this.endModalTimeText) return;\n        const baseMs = this.sessionTimeLimit && this.sessionTimeLimit > 0 ? this.sessionTimeLimit * 1000 : 180000;\n        const elapsedMs = baseMs - this.totalTimeMs;\n        const totalSeconds = Math.max(0, Math.floor(elapsedMs / 1000));\n        const minutes = Math.floor(totalSeconds / 60);\n        const seconds = totalSeconds % 60;\n        const pad = (n)=>n < 10 ? `0${n}` : `${n}`;\n        this.endModalTimeText.setText(`Time: ${pad(minutes)}:${pad(seconds)}`);\n    }\n    speedUpJump() {\n        this.jumpDurationMs = Math.max(450, this.jumpDurationMs - 40);\n    }\n    getLeafPosition(index) {\n        if (this.leafPath.length > 0 && this.trackImage) {\n            const pathLength = this.leafPath.length;\n            const pathIndex = Math.min(index, pathLength - 1);\n            const leaf = this.leafPath[pathIndex];\n            const scale = this.trackImage.scaleX;\n            const mapLeft = this.trackImage.x - this.trackImage.displayWidth / 2;\n            const mapTop = this.trackImage.y - this.trackImage.displayHeight;\n            const x = mapLeft + leaf.x * scale;\n            const y = mapTop + leaf.y * scale;\n            return {\n                x,\n                y\n            };\n        }\n        const centerX = this.scale.width / 2;\n        const isLeft = index % 2 === 0;\n        // Adjacent leaf = alternate left/right with a small upward step\n        const y = this.leafStartY - index * this.leafStepY;\n        const x = isLeft ? centerX - this.leafSideOffset : centerX + this.leafSideOffset;\n        return {\n            x,\n            y\n        };\n    }\n    buildLeafPath(textureKey) {\n        const texture = this.textures.get(textureKey);\n        const source = texture?.getSourceImage();\n        if (!source || !source.width || !source.height) {\n            return [];\n        }\n        const canvas = this.sys.game.canvas.ownerDocument.createElement('canvas');\n        canvas.width = source.width;\n        canvas.height = source.height;\n        const ctx = canvas.getContext('2d');\n        if (!ctx) return [];\n        ctx.drawImage(source, 0, 0);\n        const imageData = ctx.getImageData(0, 0, source.width, source.height);\n        const data = imageData.data;\n        const width = source.width;\n        const height = source.height;\n        const visited = new Uint8Array(width * height);\n        const centers = [];\n        const isLeafPixel = (idx)=>{\n            const r = data[idx] / 255;\n            const g = data[idx + 1] / 255;\n            const b = data[idx + 2] / 255;\n            const max = Math.max(r, g, b);\n            const min = Math.min(r, g, b);\n            const delta = max - min;\n            if (delta === 0) return false;\n            let hue = 0;\n            if (max === r) {\n                hue = (g - b) / delta % 6;\n            } else if (max === g) {\n                hue = (b - r) / delta + 2;\n            } else {\n                hue = (r - g) / delta + 4;\n            }\n            hue = Math.round(hue * 60);\n            if (hue < 0) hue += 360;\n            const saturation = max === 0 ? 0 : delta / max;\n            const isGreenHue = hue >= 70 && hue <= 150;\n            const isSaturated = saturation >= 0.35;\n            return isGreenHue && isSaturated;\n        };\n        const minBlobSize = 4500;\n        const stack = [];\n        for(let y = 0; y < height; y++){\n            for(let x = 0; x < width; x++){\n                const index = y * width + x;\n                if (visited[index]) continue;\n                const dataIndex = index * 4;\n                if (!isLeafPixel(dataIndex)) {\n                    visited[index] = 1;\n                    continue;\n                }\n                let sumX = 0;\n                let sumY = 0;\n                let count = 0;\n                let minX = x;\n                let maxX = x;\n                let minY = y;\n                let maxY = y;\n                stack.push(index);\n                visited[index] = 1;\n                while(stack.length){\n                    const current = stack.pop();\n                    const cy = Math.floor(current / width);\n                    const cx = current - cy * width;\n                    const currentDataIndex = current * 4;\n                    if (!isLeafPixel(currentDataIndex)) {\n                        continue;\n                    }\n                    sumX += cx;\n                    sumY += cy;\n                    count += 1;\n                    if (cx < minX) minX = cx;\n                    if (cx > maxX) maxX = cx;\n                    if (cy < minY) minY = cy;\n                    if (cy > maxY) maxY = cy;\n                    if (cx > 0) {\n                        const left = current - 1;\n                        if (!visited[left]) {\n                            const leftIndex = left * 4;\n                            if (isLeafPixel(leftIndex)) {\n                                visited[left] = 1;\n                                stack.push(left);\n                            } else {\n                                visited[left] = 1;\n                            }\n                        }\n                    }\n                    if (cx < width - 1) {\n                        const right = current + 1;\n                        if (!visited[right]) {\n                            const rightIndex = right * 4;\n                            if (isLeafPixel(rightIndex)) {\n                                visited[right] = 1;\n                                stack.push(right);\n                            } else {\n                                visited[right] = 1;\n                            }\n                        }\n                    }\n                    if (cy > 0) {\n                        const up = current - width;\n                        if (!visited[up]) {\n                            const upIndex = up * 4;\n                            if (isLeafPixel(upIndex)) {\n                                visited[up] = 1;\n                                stack.push(up);\n                            } else {\n                                visited[up] = 1;\n                            }\n                        }\n                    }\n                    if (cy < height - 1) {\n                        const down = current + width;\n                        if (!visited[down]) {\n                            const downIndex = down * 4;\n                            if (isLeafPixel(downIndex)) {\n                                visited[down] = 1;\n                                stack.push(down);\n                            } else {\n                                visited[down] = 1;\n                            }\n                        }\n                    }\n                }\n                if (count >= minBlobSize) {\n                    const blobWidth = maxX - minX;\n                    const blobHeight = maxY - minY;\n                    const aspect = blobWidth / (blobHeight || 1);\n                    if (blobWidth >= 90 && blobHeight >= 90 && aspect > 0.6 && aspect < 1.7) {\n                        centers.push(new Phaser.Math.Vector2(sumX / count, sumY / count));\n                    }\n                }\n            }\n        }\n        centers.sort((a, b)=>{\n            const dy = b.y - a.y;\n            if (Math.abs(dy) > 2) return dy;\n            return a.x - b.x;\n        });\n        return centers;\n    }\n    /**\n     * Show player state - correct or incorrect\n     */ showPlayerState(state) {\n        if (state === 'correct') {\n            this.player.showCorrect(800);\n        } else {\n            this.player.showIncorrect(800);\n        }\n    }\n    setQuizFeedback(state) {\n        if (!this.quizPanel) return;\n        this.quizPanel.setFeedback(state);\n        this.quizFeedbackState = state;\n    }\n    delay(ms) {\n        return new Promise((resolve)=>{\n            this.time.delayedCall(ms, ()=>resolve());\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LElBQUksQ0FBQyxDQUFDQyxHQUFHakM7WUFDYixNQUFNa0MsS0FBS2xDLEVBQUVyVSxDQUFDLEdBQUdzVyxFQUFFdFcsQ0FBQztZQUNwQixJQUFJcUYsS0FBS21SLEdBQUcsQ0FBQ0QsTUFBTSxHQUFHLE9BQU9BO1lBQzdCLE9BQU9ELEVBQUU5VixDQUFDLEdBQUc2VCxFQUFFN1QsQ0FBQztRQUNwQjtRQUVBLE9BQU93VDtJQUNYO0lBRUE7O0tBRUMsR0FDRDlGLGdCQUFnQnVJLEtBQThCLEVBQUU7UUFDNUMsSUFBSUEsVUFBVSxXQUFXO1lBQ3JCLElBQUksQ0FBQ2xXLE1BQU0sQ0FBQ2lQLFdBQVcsQ0FBQztRQUM1QixPQUFPO1lBQ0gsSUFBSSxDQUFDalAsTUFBTSxDQUFDbVcsYUFBYSxDQUFDO1FBQzlCO0lBQ0o7SUFFUS9JLGdCQUFnQjhJLEtBQW1DLEVBQVE7UUFDL0QsSUFBSSxDQUFDLElBQUksQ0FBQ2xQLFNBQVMsRUFBRTtRQUNyQixJQUFJLENBQUNBLFNBQVMsQ0FBQzZFLFdBQVcsQ0FBQ3FLO1FBQzNCLElBQUksQ0FBQ3haLGlCQUFpQixHQUFHd1o7SUFDN0I7SUFFUTNJLE1BQU1vQyxFQUFVLEVBQWlCO1FBQ3JDLE9BQU8sSUFBSXlHLFFBQVEsQ0FBQ0M7WUFDaEIsSUFBSSxDQUFDNUksSUFBSSxDQUFDQyxXQUFXLENBQUNpQyxJQUFJLElBQU0wRztRQUNwQztJQUNKO0FBQ0oiLCJzb3VyY2VzIjpbIi9Vc2Vycy9uYjIzMDYwMS9Eb2N1bWVudHMvcGhhc2VyLWdhbWVkZXYvc3JjL2dhbWUvc2NlbmVzL0dhbWUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRXZlbnRCdXMgfSBmcm9tICcuLi9FdmVudEJ1cyc7XG5pbXBvcnQgeyBTY2VuZSB9IGZyb20gJ3BoYXNlcic7XG5pbXBvcnQgeyBFbW90ZUNoYXJhY3RlciB9IGZyb20gJy4uL29iamVjdHMvRW1vdGVDaGFyYWN0ZXInO1xuaW1wb3J0IHR5cGUgeyBHYW1lUXVlc3Rpb24gfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9hcGknO1xuaW1wb3J0IHsgZ2V0R2FtZUNvbmZpZywgcmVzb2x2ZUdhbWVDb2RlIH0gZnJvbSAnLi4vZ2FtZUNvbmZpZyc7XG5pbXBvcnQgeyBRdWl6UGFuZWwgfSBmcm9tICcuLi91aS9RdWl6UGFuZWwnO1xuXG5leHBvcnQgY2xhc3MgR2FtZSBleHRlbmRzIFNjZW5lXG57XG4gICAgY2FtZXJhOiBQaGFzZXIuQ2FtZXJhcy5TY2VuZTJELkNhbWVyYTtcbiAgICB0cmFja0ltYWdlITogUGhhc2VyLkdhbWVPYmplY3RzLkltYWdlO1xuICAgIHBsYXllciE6IEVtb3RlQ2hhcmFjdGVyO1xuICAgIHBhcmFsbGF4TGF5ZXJzOiBQaGFzZXIuR2FtZU9iamVjdHMuSW1hZ2VbXTtcbiAgICB1aVJvb3QhOiBQaGFzZXIuR2FtZU9iamVjdHMuQ29udGFpbmVyO1xuICAgIHVpQ2FtZXJhITogUGhhc2VyLkNhbWVyYXMuU2NlbmUyRC5DYW1lcmE7XG4gICAgdGltZXJPdmVybGF5ITogUGhhc2VyLkdhbWVPYmplY3RzLkNvbnRhaW5lcjtcbiAgICBodWRCYWNrQnV0dG9uITogUGhhc2VyLkdhbWVPYmplY3RzLkNvbnRhaW5lcjtcbiAgICBodWRQb2ludHNQaWxsITogUGhhc2VyLkdhbWVPYmplY3RzLkNvbnRhaW5lcjtcbiAgICBodWRUaW1lclBpbGwhOiBQaGFzZXIuR2FtZU9iamVjdHMuQ29udGFpbmVyO1xuICAgIGh1ZEhlYXJ0c1BpbGwhOiBQaGFzZXIuR2FtZU9iamVjdHMuQ29udGFpbmVyO1xuXG4gICAgLy8gVUlcbiAgICBqdW1wQnV0dG9uOiBQaGFzZXIuR2FtZU9iamVjdHMuQ29udGFpbmVyO1xuICAgIGp1bXBCdXR0b25CZyE6IFBoYXNlci5HYW1lT2JqZWN0cy5SZWN0YW5nbGU7XG4gICAgc2NvcmVUZXh0OiBQaGFzZXIuR2FtZU9iamVjdHMuVGV4dDtcbiAgICBxdWl6TW9kYWwhOiBQaGFzZXIuR2FtZU9iamVjdHMuQ29udGFpbmVyO1xuICAgIHF1aXpQYW5lbENvbnRhaW5lciE6IFBoYXNlci5HYW1lT2JqZWN0cy5Db250YWluZXI7XG4gICAgcXVpelBhbmVsU2hhZG93ITogUGhhc2VyLkdhbWVPYmplY3RzLkdyYXBoaWNzO1xuICAgIHF1aXpQYW5lbEJnITogUGhhc2VyLkdhbWVPYmplY3RzLkdyYXBoaWNzO1xuICAgIHF1aXpQYW5lbEdsb3chOiBQaGFzZXIuR2FtZU9iamVjdHMuR3JhcGhpY3M7XG4gICAgcXVpelBhbmVsV2lkdGg6IG51bWJlciA9IDA7XG4gICAgcXVpelBhbmVsSGVpZ2h0OiBudW1iZXIgPSAwO1xuICAgIHVpU2NhbGU6IG51bWJlciA9IDE7XG4gICAgc2FmZUluc2V0Qm90dG9tOiBudW1iZXIgPSAxNjtcbiAgICBxdWl6RmVlZGJhY2tUaXRsZVRleHQhOiBQaGFzZXIuR2FtZU9iamVjdHMuVGV4dDtcbiAgICBxdWl6RmVlZGJhY2tTdWJ0aXRsZVRleHQhOiBQaGFzZXIuR2FtZU9iamVjdHMuVGV4dDtcbiAgICBxdWl6RmVlZGJhY2tTdGF0ZTogJ2lkbGUnIHwgJ2NvcnJlY3QnIHwgJ3dyb25nJyA9ICdpZGxlJztcbiAgICBxdWl6UXVlc3Rpb25UZXh0ITogUGhhc2VyLkdhbWVPYmplY3RzLlRleHQ7XG4gICAgcXVpekluZGV4VGV4dCE6IFBoYXNlci5HYW1lT2JqZWN0cy5UZXh0O1xuICAgIHF1aXpPcHRpb25CdXR0b25zOiBQaGFzZXIuR2FtZU9iamVjdHMuQ29udGFpbmVyW10gPSBbXTtcbiAgICBxdWl6T3BlbjogYm9vbGVhbiA9IGZhbHNlO1xuICAgIHF1aXpMb2NrZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBxdWl6Q3VycmVudEluZGV4OiBudW1iZXIgPSAwO1xuICAgIHF1aXpQYW5lbCE6IFF1aXpQYW5lbDtcbiAgICBzdGFydE1vZGFsITogUGhhc2VyLkdhbWVPYmplY3RzLkNvbnRhaW5lcjtcbiAgICBzdGFydE1vZGFsT3BlbjogYm9vbGVhbiA9IGZhbHNlO1xuICAgIGVuZE1vZGFsITogUGhhc2VyLkdhbWVPYmplY3RzLkNvbnRhaW5lcjtcbiAgICBlbmRNb2RhbFNjb3JlVGV4dCE6IFBoYXNlci5HYW1lT2JqZWN0cy5UZXh0O1xuICAgIGVuZE1vZGFsVGltZVRleHQhOiBQaGFzZXIuR2FtZU9iamVjdHMuVGV4dDtcbiAgICBjb25mZXR0aUVtaXR0ZXI/OiBQaGFzZXIuR2FtZU9iamVjdHMuUGFydGljbGVzLlBhcnRpY2xlRW1pdHRlcjtcbiAgICBjb25mZXR0aUJ1cnN0RXZlbnQ/OiBQaGFzZXIuVGltZS5UaW1lckV2ZW50O1xuICAgIGdhbWVDb21wbGV0ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICB0aW1lVXBNb2RhbCE6IFBoYXNlci5HYW1lT2JqZWN0cy5Db250YWluZXI7XG4gICAgZ2FtZU92ZXI6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICB0aW1lclRleHQhOiBQaGFzZXIuR2FtZU9iamVjdHMuVGV4dDtcbiAgICB0aW1lckV2ZW50ITogUGhhc2VyLlRpbWUuVGltZXJFdmVudDtcbiAgICB0b3RhbFRpbWVNczogbnVtYmVyID0gMTgwMDAwO1xuICAgIGp1bXBEdXJhdGlvbk1zOiBudW1iZXIgPSA5MDA7XG5cbiAgICAvLyBHYW1lIFN0YXRlXG4gICAgc2NvcmU6IG51bWJlciA9IDA7XG4gICAgY3VycmVudExlYWZJbmRleDogbnVtYmVyID0gMDtcbiAgICBzZXNzaW9uSWQ6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICAgIHNlc3Npb25HYW1lSWQ6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICAgIHNlc3Npb25RdWVzdGlvbnM6IEdhbWVRdWVzdGlvbltdIHwgbnVsbCA9IG51bGw7XG4gICAgc2Vzc2lvblRpbWVMaW1pdDogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG4gICAgcXVlc3Rpb25Tb3VyY2VMb2dnZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBnYW1lQ29kZTogc3RyaW5nID0gJ3ZvY2FiX3JhY2UnO1xuICAgIGdhbWVDb25maWcgPSBnZXRHYW1lQ29uZmlnKCd2b2NhYl9yYWNlJyk7XG5cbiAgICAvLyBMZWFmIHBhdGggKGRldGVjdGVkIGZyb20gdHJhY2sgdGV4dHVyZSlcbiAgICBwcml2YXRlIGxlYWZQYXRoOiBQaGFzZXIuTWF0aC5WZWN0b3IyW10gPSBbXTtcblxuICAgIC8vIEZhbGxiYWNrIHppZy16YWcgY29uZmlnXG4gICAgcHJpdmF0ZSByZWFkb25seSBsZWFmU3RhcnRZID0gOTQwO1xuICAgIHByaXZhdGUgcmVhZG9ubHkgbGVhZlN0ZXBZID0gMTQwO1xuICAgIHByaXZhdGUgcmVhZG9ubHkgbGVhZlNpZGVPZmZzZXQgPSAxODA7XG5cbiAgICBcbiAgICBjb25zdHJ1Y3RvciAoKVxuICAgIHtcbiAgICAgICAgc3VwZXIoJ0dhbWUnKTtcbiAgICB9XG5cbiAgICBpbml0IChkYXRhOiB7IGdhbWVDb2RlPzogc3RyaW5nIHwgbnVsbDsgc2Vzc2lvbklkPzogc3RyaW5nIHwgbnVsbDsgZ2FtZUlkPzogc3RyaW5nIHwgbnVsbDsgcXVlc3Rpb25zPzogR2FtZVF1ZXN0aW9uW10gfCBudWxsOyB0aW1lTGltaXQ/OiBudW1iZXIgfCBudWxsIH0pXG4gICAge1xuICAgICAgICB0aGlzLmdhbWVDb2RlID0gcmVzb2x2ZUdhbWVDb2RlKGRhdGE/LmdhbWVDb2RlID8/ICh0aGlzLnJlZ2lzdHJ5LmdldCgnZ2FtZUNvZGUnKSBhcyBzdHJpbmcgfCB1bmRlZmluZWQpKTtcbiAgICAgICAgdGhpcy5yZWdpc3RyeS5zZXQoJ2dhbWVDb2RlJywgdGhpcy5nYW1lQ29kZSk7XG4gICAgICAgIHRoaXMuZ2FtZUNvbmZpZyA9IGdldEdhbWVDb25maWcodGhpcy5nYW1lQ29kZSk7XG4gICAgICAgIHRoaXMuc2Vzc2lvbklkID0gZGF0YT8uc2Vzc2lvbklkID8/IG51bGw7XG4gICAgICAgIHRoaXMuc2Vzc2lvbkdhbWVJZCA9IGRhdGE/LmdhbWVJZCA/PyBudWxsO1xuICAgICAgICB0aGlzLnNlc3Npb25RdWVzdGlvbnMgPSBkYXRhPy5xdWVzdGlvbnMgPz8gbnVsbDtcbiAgICAgICAgdGhpcy5zZXNzaW9uVGltZUxpbWl0ID0gZGF0YT8udGltZUxpbWl0ID8/IG51bGw7XG4gICAgfVxuXG4gICAgY3JlYXRlICgpXG4gICAge1xuICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMuc2NhbGU7XG4gICAgICAgIHRoaXMuY2FtZXJhID0gdGhpcy5jYW1lcmFzLm1haW47XG5cbiAgICAgICAgLy8gUGFyYWxsYXggYmFja2dyb3VuZFxuICAgICAgICB0aGlzLmNyZWF0ZVBhcmFsbGF4QmFja2dyb3VuZCgpO1xuXG4gICAgICAgIC8vIFRyYWNrIChMZWF2ZXMpIC0gVXNlIGJnLW1haW4gYXMgdGhlIHNjcm9sbGluZyBtYXBcbiAgICAgICAgdGhpcy50cmFja0ltYWdlID0gdGhpcy5hZGQuaW1hZ2Uod2lkdGggLyAyLCBoZWlnaHQsIHRoaXMuZ2FtZUNvbmZpZy5tYXBLZXkpLnNldE9yaWdpbigwLjUsIDEpO1xuICAgICAgICBjb25zdCB0cmFja1NjYWxlID0gd2lkdGggLyB0aGlzLnRyYWNrSW1hZ2Uud2lkdGg7XG4gICAgICAgIHRoaXMudHJhY2tJbWFnZS5zZXRTY2FsZSh0cmFja1NjYWxlKTtcblxuICAgICAgICBjb25zdCBtYXBUb3AgPSB0aGlzLnRyYWNrSW1hZ2UueSAtIHRoaXMudHJhY2tJbWFnZS5kaXNwbGF5SGVpZ2h0O1xuICAgICAgICB0aGlzLmNhbWVyYS5zZXRCb3VuZHMoMCwgbWFwVG9wLCB3aWR0aCwgdGhpcy50cmFja0ltYWdlLmRpc3BsYXlIZWlnaHQpO1xuXG4gICAgICAgIC8vIEJ1aWxkIGxlYWYgcGF0aCBiYXNlZCBvbiB0aGUgbWFwIHRleHR1cmVcbiAgICAgICAgdGhpcy5sZWFmUGF0aCA9IHRoaXMuZ2FtZUNvbmZpZy51c2VUZXh0dXJlUGF0aCA/IHRoaXMuYnVpbGRMZWFmUGF0aCh0aGlzLmdhbWVDb25maWcubWFwS2V5KSA6IFtdO1xuXG4gICAgICAgIC8vIFBsYXllciBTZXR1cCAtIFVzaW5nIEVtb3RlQ2hhcmFjdGVyIChpZGxlL2NvcnJlY3QvaW5jb3JyZWN0IHN0YXRlcylcbiAgICAgICAgY29uc3Qgc3RhcnRQb3MgPSB0aGlzLmdldExlYWZQb3NpdGlvbigwKTtcbiAgICAgICAgdGhpcy5wbGF5ZXIgPSBuZXcgRW1vdGVDaGFyYWN0ZXIodGhpcywgc3RhcnRQb3MueCwgc3RhcnRQb3MueSk7XG4gICAgICAgIHRoaXMuY3VycmVudExlYWZJbmRleCA9IDA7XG5cbiAgICAgICAgY29uc3QgbmV4dFBvcyA9IHRoaXMuZ2V0TGVhZlBvc2l0aW9uKHRoaXMuY3VycmVudExlYWZJbmRleCArIDEpO1xuICAgICAgICB0aGlzLnBsYXllci5mbGlwKG5leHRQb3MueCA+IHN0YXJ0UG9zLngpO1xuXG4gICAgICAgIC8vIFN0YXJ0IGlkbGUgYW5pbWF0aW9uXG4gICAgICAgIHRoaXMucGxheWVyLnBsYXlJZGxlKCk7XG5cbiAgICAgICAgLy8gSW5pdGlhbCBDYW1lcmEgUG9zaXRpb25cbiAgICAgICAgdGhpcy5jYW1lcmEuc2Nyb2xsWSA9IHN0YXJ0UG9zLnkgLSA5MDA7XG5cbiAgICAgICAgLy8gVUkgY2FtZXJhIChmaXhlZCBzY3JlZW4tc3BhY2UpXG4gICAgICAgIHRoaXMudWlDYW1lcmEgPSB0aGlzLmNhbWVyYXMuYWRkKDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICB0aGlzLnVpQ2FtZXJhLnNldFNjcm9sbCgwLCAwKTtcbiAgICAgICAgdGhpcy51aUNhbWVyYS5pZ25vcmUodGhpcy5jaGlsZHJlbi5saXN0KTtcblxuICAgICAgICAvLyBVSVxuICAgICAgICB0aGlzLmNyZWF0ZVVJKCk7XG5cbiAgICAgICAgaWYgKHRoaXMuc2Vzc2lvblRpbWVMaW1pdCAmJiB0aGlzLnNlc3Npb25UaW1lTGltaXQgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLnRvdGFsVGltZU1zID0gdGhpcy5zZXNzaW9uVGltZUxpbWl0ICogMTAwMDtcbiAgICAgICAgfVxuXG4gICAgICAgIEV2ZW50QnVzLmVtaXQoJ2N1cnJlbnQtc2NlbmUtcmVhZHknLCB0aGlzKTtcbiAgICB9XG5cbiAgICBjcmVhdGVQYXJhbGxheEJhY2tncm91bmQoKSB7XG4gICAgICAgIHRoaXMuY2FtZXJhcy5tYWluLnNldEJhY2tncm91bmRDb2xvcih0aGlzLmdhbWVDb25maWcuYmFja2dyb3VuZENvbG9yKTtcbiAgICAgICAgdGhpcy5wYXJhbGxheExheWVycyA9IFtdO1xuICAgIH1cblxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnBhcmFsbGF4TGF5ZXJzPy5sZW5ndGgpIHJldHVybjtcbiAgICAgICAgY29uc3Qgc2Nyb2xsWSA9IHRoaXMuY2FtZXJhLnNjcm9sbFk7XG5cbiAgICAgICAgdGhpcy5wYXJhbGxheExheWVycy5mb3JFYWNoKChsYXllcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgZmFjdG9yID0gbGF5ZXIuZ2V0RGF0YSgnc2Nyb2xsRmFjdG9yJykgYXMgbnVtYmVyO1xuICAgICAgICAgICAgY29uc3QgYmFzZVkgPSBsYXllci5nZXREYXRhKCdiYXNlWScpIGFzIG51bWJlcjtcbiAgICAgICAgICAgIGxheWVyLnkgPSBiYXNlWSArIHNjcm9sbFkgKiBmYWN0b3I7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGNyZWF0ZVVJKCkge1xuICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMuc2NhbGU7XG4gICAgICAgIFxuICAgICAgICAvLyBGaXhlZCBVSSBDb250YWluZXJcbiAgICAgICAgdGhpcy51aVJvb3QgPSB0aGlzLmFkZC5jb250YWluZXIoMCwgMCkuc2V0U2Nyb2xsRmFjdG9yKDApLnNldERlcHRoKDEwMCk7XG5cbiAgICAgICAgLy8gVGltZXIgKyBTY29yZSBIVURcbiAgICAgICAgdGhpcy50aW1lck92ZXJsYXkgPSB0aGlzLmFkZC5jb250YWluZXIoMCwgMCkuc2V0U2Nyb2xsRmFjdG9yKDApLnNldERlcHRoKDIwMDApO1xuXG4gICAgICAgIC8vIEJhY2sgYnV0dG9uXG4gICAgICAgIHRoaXMuaHVkQmFja0J1dHRvbiA9IHRoaXMuYWRkLmNvbnRhaW5lcigwLCAwKTtcbiAgICAgICAgY29uc3QgYmFja0JnID0gdGhpcy5hZGQuZ3JhcGhpY3MoKTtcbiAgICAgICAgYmFja0JnLmZpbGxTdHlsZSgweGZmZmZmZiwgMC45NSk7XG4gICAgICAgIGJhY2tCZy5maWxsUm91bmRlZFJlY3QoLTI0LCAtMjQsIDQ4LCA0OCwgMTQpO1xuICAgICAgICBiYWNrQmcubGluZVN0eWxlKDIsIDB4MGVhNWU5LCAwLjIpO1xuICAgICAgICBiYWNrQmcuc3Ryb2tlUm91bmRlZFJlY3QoLTI0LCAtMjQsIDQ4LCA0OCwgMTQpO1xuICAgICAgICBjb25zdCBiYWNrSWNvbiA9IHRoaXMuYWRkLnRleHQoMCwgMSwgJzwnLCB7XG4gICAgICAgICAgICBmb250RmFtaWx5OiAnQXJpYWwgQmxhY2snLFxuICAgICAgICAgICAgZm9udFNpemU6ICcyOHB4JyxcbiAgICAgICAgICAgIGNvbG9yOiAnIzBmMTcyYSdcbiAgICAgICAgfSkuc2V0T3JpZ2luKDAuNSk7XG4gICAgICAgIGNvbnN0IGJhY2tIaXQgPSB0aGlzLmFkZC56b25lKDAsIDAsIDQ4LCA0OClcbiAgICAgICAgICAgIC5zZXRPcmlnaW4oMC41KVxuICAgICAgICAgICAgLnNldEludGVyYWN0aXZlKHsgdXNlSGFuZEN1cnNvcjogdHJ1ZSB9KTtcbiAgICAgICAgYmFja0hpdC5vbigncG9pbnRlcnVwJywgKCkgPT4gdGhpcy5oYW5kbGVCYWNrVG9HYW1lTGlzdCgpKTtcbiAgICAgICAgdGhpcy5odWRCYWNrQnV0dG9uLmFkZChbYmFja0JnLCBiYWNrSWNvbl0pO1xuICAgICAgICB0aGlzLmh1ZEJhY2tCdXR0b24uc2V0U2l6ZSg0OCwgNDgpO1xuICAgICAgICB0aGlzLmh1ZEJhY2tCdXR0b24uYWRkKGJhY2tIaXQpO1xuXG4gICAgICAgIC8vIFBvaW50cyBwaWxsXG4gICAgICAgIHRoaXMuaHVkUG9pbnRzUGlsbCA9IHRoaXMuYWRkLmNvbnRhaW5lcigwLCAwKTtcbiAgICAgICAgY29uc3QgcG9pbnRzQmcgPSB0aGlzLmFkZC5ncmFwaGljcygpO1xuICAgICAgICBjb25zdCBwb2ludHNXID0gMTcwO1xuICAgICAgICBjb25zdCBwb2ludHNIID0gNDQ7XG4gICAgICAgIHBvaW50c0JnLmZpbGxTdHlsZSgweGUwZjJmZSwgMC45OCk7XG4gICAgICAgIHBvaW50c0JnLmZpbGxSb3VuZGVkUmVjdCgtcG9pbnRzVyAvIDIsIC1wb2ludHNIIC8gMiwgcG9pbnRzVywgcG9pbnRzSCwgMjIpO1xuICAgICAgICBwb2ludHNCZy5saW5lU3R5bGUoMiwgMHg5M2M1ZmQsIDAuNyk7XG4gICAgICAgIHBvaW50c0JnLnN0cm9rZVJvdW5kZWRSZWN0KC1wb2ludHNXIC8gMiwgLXBvaW50c0ggLyAyLCBwb2ludHNXLCBwb2ludHNILCAyMik7XG4gICAgICAgIGNvbnN0IHN0YXIgPSB0aGlzLmFkZC5pbWFnZSgtcG9pbnRzVyAvIDIgKyAyNCwgMCwgJ3N0YXInKS5zZXRTY2FsZSgwLjMyKS5zZXRUaW50KDB4ZmJiZjI0KTtcbiAgICAgICAgdGhpcy5zY29yZVRleHQgPSB0aGlzLmFkZC50ZXh0KC1wb2ludHNXIC8gMiArIDQ2LCAwLCAnUE9JTlRTOiAwMCcsIHtcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCBCbGFjaycsXG4gICAgICAgICAgICBmb250U2l6ZTogJzE4cHgnLFxuICAgICAgICAgICAgY29sb3I6ICcjMGYxNzJhJ1xuICAgICAgICB9KS5zZXRPcmlnaW4oMCwgMC41KTtcbiAgICAgICAgdGhpcy5odWRQb2ludHNQaWxsLmFkZChbcG9pbnRzQmcsIHN0YXIsIHRoaXMuc2NvcmVUZXh0XSk7XG5cbiAgICAgICAgLy8gVGltZXIgcGlsbFxuICAgICAgICB0aGlzLmh1ZFRpbWVyUGlsbCA9IHRoaXMuYWRkLmNvbnRhaW5lcigwLCAwKTtcbiAgICAgICAgY29uc3QgdGltZXJCZyA9IHRoaXMuYWRkLmdyYXBoaWNzKCk7XG4gICAgICAgIGNvbnN0IHRpbWVyVyA9IDEwMDtcbiAgICAgICAgY29uc3QgdGltZXJIID0gNDA7XG4gICAgICAgIHRpbWVyQmcuZmlsbFN0eWxlKDB4ZGJlYWZlLCAwLjk4KTtcbiAgICAgICAgdGltZXJCZy5maWxsUm91bmRlZFJlY3QoLXRpbWVyVyAvIDIsIC10aW1lckggLyAyLCB0aW1lclcsIHRpbWVySCwgMjApO1xuICAgICAgICB0aW1lckJnLmxpbmVTdHlsZSgyLCAweDYwYTVmYSwgMC42KTtcbiAgICAgICAgdGltZXJCZy5zdHJva2VSb3VuZGVkUmVjdCgtdGltZXJXIC8gMiwgLXRpbWVySCAvIDIsIHRpbWVyVywgdGltZXJILCAyMCk7XG4gICAgICAgIHRoaXMudGltZXJUZXh0ID0gdGhpcy5hZGQudGV4dCgwLCAwLCAnMDM6MDAnLCB7XG4gICAgICAgICAgICBmb250RmFtaWx5OiAnQXJpYWwgQmxhY2snLFxuICAgICAgICAgICAgZm9udFNpemU6ICcxOHB4JyxcbiAgICAgICAgICAgIGNvbG9yOiAnIzBmMTcyYSdcbiAgICAgICAgfSkuc2V0T3JpZ2luKDAuNSk7XG4gICAgICAgIHRoaXMuaHVkVGltZXJQaWxsLmFkZChbdGltZXJCZywgdGhpcy50aW1lclRleHRdKTtcblxuICAgICAgICAvLyBIZWFydHMgcGlsbFxuICAgICAgICB0aGlzLmh1ZEhlYXJ0c1BpbGwgPSB0aGlzLmFkZC5jb250YWluZXIoMCwgMCk7XG4gICAgICAgIGNvbnN0IGhlYXJ0c0JnID0gdGhpcy5hZGQuZ3JhcGhpY3MoKTtcbiAgICAgICAgY29uc3QgaGVhcnRzVyA9IDkyO1xuICAgICAgICBjb25zdCBoZWFydHNIID0gMzY7XG4gICAgICAgIGhlYXJ0c0JnLmZpbGxTdHlsZSgweGZmZmZmZiwgMC45OCk7XG4gICAgICAgIGhlYXJ0c0JnLmZpbGxSb3VuZGVkUmVjdCgtaGVhcnRzVyAvIDIsIC1oZWFydHNIIC8gMiwgaGVhcnRzVywgaGVhcnRzSCwgMTgpO1xuICAgICAgICBoZWFydHNCZy5saW5lU3R5bGUoMiwgMHg5M2M1ZmQsIDAuMzUpO1xuICAgICAgICBoZWFydHNCZy5zdHJva2VSb3VuZGVkUmVjdCgtaGVhcnRzVyAvIDIsIC1oZWFydHNIIC8gMiwgaGVhcnRzVywgaGVhcnRzSCwgMTgpO1xuICAgICAgICBjb25zdCBoZWFydHNUZXh0ID0gdGhpcy5hZGQudGV4dCgwLCAwLCAn4p2kIOKdpCDinaQnLCB7XG4gICAgICAgICAgICBmb250RmFtaWx5OiAnQXJpYWwgQmxhY2snLFxuICAgICAgICAgICAgZm9udFNpemU6ICcxNnB4JyxcbiAgICAgICAgICAgIGNvbG9yOiAnI2VmNDQ0NCdcbiAgICAgICAgfSkuc2V0T3JpZ2luKDAuNSk7XG4gICAgICAgIHRoaXMuaHVkSGVhcnRzUGlsbC5hZGQoW2hlYXJ0c0JnLCBoZWFydHNUZXh0XSk7XG5cbiAgICAgICAgdGhpcy50aW1lck92ZXJsYXkuYWRkKFt0aGlzLmh1ZEJhY2tCdXR0b24sIHRoaXMuaHVkUG9pbnRzUGlsbCwgdGhpcy5odWRUaW1lclBpbGwsIHRoaXMuaHVkSGVhcnRzUGlsbF0pO1xuICAgICAgICB0aGlzLnVpUm9vdC5hZGQodGhpcy50aW1lck92ZXJsYXkpO1xuICAgICAgICB0aGlzLmxheW91dEh1ZCgpO1xuXG4gICAgICAgIC8vIEp1bXAgQnV0dG9uXG4gICAgICAgIHRoaXMuanVtcEJ1dHRvbiA9IHRoaXMuY3JlYXRlSnVtcEJ1dHRvbih3aWR0aCAvIDIsIGhlaWdodCAtIDE1MCk7XG4gICAgICAgIHRoaXMuanVtcEJ1dHRvbi5zZXRTY3JvbGxGYWN0b3IoMCk7XG4gICAgICAgIHRoaXMudWlSb290LmFkZCh0aGlzLmp1bXBCdXR0b24pO1xuICAgICAgICB0aGlzLmp1bXBCdXR0b24uc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgIHRoaXMuanVtcEJ1dHRvbi5zZXRBY3RpdmUoZmFsc2UpO1xuXG4gICAgICAgIHRoaXMuc2V0dXBKdW1wSW5wdXQoKTtcblxuICAgICAgICAvLyBRdWl6IE1vZGFsIChVSSBvdmVybGF5KVxuICAgICAgICB0aGlzLmNyZWF0ZVF1aXpNb2RhbCgpO1xuICAgICAgICB0aGlzLnNjYWxlLm9uKCdyZXNpemUnLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5xdWl6TW9kYWwpIHRoaXMubGF5b3V0UXVpeigpO1xuICAgICAgICAgICAgdGhpcy5sYXlvdXRIdWQoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gU3RhcnQgTW9kYWwgKGZpcnN0IHNjcmVlbilcbiAgICAgICAgdGhpcy5jcmVhdGVTdGFydE1vZGFsKCk7XG4gICAgICAgIHRoaXMub3BlblN0YXJ0TW9kYWwoKTtcblxuICAgICAgICAvLyBFbnN1cmUgb25seSBVSSBjYW1lcmEgcmVuZGVycyBVSVxuICAgICAgICB0aGlzLmNhbWVyYXMubWFpbi5pZ25vcmUoW3RoaXMudWlSb290LCB0aGlzLnRpbWVyT3ZlcmxheV0pO1xuXG4gICAgICAgIC8vIEVuZCBNb2RhbFxuICAgICAgICB0aGlzLmNyZWF0ZUVuZE1vZGFsKCk7XG5cbiAgICAgICAgLy8gVGltZSBVcCBNb2RhbFxuICAgICAgICB0aGlzLmNyZWF0ZVRpbWVVcE1vZGFsKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBsYXlvdXRIdWQoKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5odWRCYWNrQnV0dG9uIHx8ICF0aGlzLmh1ZFBvaW50c1BpbGwgfHwgIXRoaXMuaHVkVGltZXJQaWxsIHx8ICF0aGlzLmh1ZEhlYXJ0c1BpbGwpIHJldHVybjtcbiAgICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSB0aGlzLnNjYWxlO1xuICAgICAgICBjb25zdCB0b3BJbnNldCA9IE1hdGgubWF4KDIwLCBNYXRoLnJvdW5kKGhlaWdodCAqIDAuMDMpKTtcbiAgICAgICAgY29uc3Qgc2lkZUluc2V0ID0gTWF0aC5tYXgoMTYsIE1hdGgucm91bmQod2lkdGggKiAwLjA0NSkpO1xuICAgICAgICBjb25zdCBnYXAgPSAxMDtcbiAgICAgICAgY29uc3QgaGVhcnRzVyA9IDkyO1xuICAgICAgICBjb25zdCB0aW1lclcgPSAxMDA7XG5cbiAgICAgICAgdGhpcy5odWRCYWNrQnV0dG9uLnNldFBvc2l0aW9uKHNpZGVJbnNldCArIDI0LCB0b3BJbnNldCArIDI0KTtcbiAgICAgICAgdGhpcy5odWRQb2ludHNQaWxsLnNldFBvc2l0aW9uKHdpZHRoIC8gMiwgdG9wSW5zZXQgKyAyNCk7XG5cbiAgICAgICAgY29uc3QgcmlnaHRFZGdlID0gd2lkdGggLSBzaWRlSW5zZXQ7XG4gICAgICAgIHRoaXMuaHVkSGVhcnRzUGlsbC5zZXRQb3NpdGlvbihyaWdodEVkZ2UgLSBoZWFydHNXIC8gMiwgdG9wSW5zZXQgKyAyNCk7XG4gICAgICAgIHRoaXMuaHVkVGltZXJQaWxsLnNldFBvc2l0aW9uKHJpZ2h0RWRnZSAtIGhlYXJ0c1cgLSBnYXAgLSB0aW1lclcgLyAyLCB0b3BJbnNldCArIDI0KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUJhY2tUb0dhbWVMaXN0KCk6IHZvaWQge1xuICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvJztcbiAgICB9XG5cbiAgICBjcmVhdGVKdW1wQnV0dG9uKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuYWRkLmNvbnRhaW5lcih4LCB5KTtcbiAgICAgICAgY29uc3Qgd2lkdGggPSAzMDA7XG4gICAgICAgIGNvbnN0IGhlaWdodCA9IDEwMDtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGJnID0gdGhpcy5hZGQucmVjdGFuZ2xlKDAsIDAsIHdpZHRoLCBoZWlnaHQsIDB4ZmJiZjI0KVxuICAgICAgICAgICAgLnNldFN0cm9rZVN0eWxlKDQsIDB4ZmZmZmZmKVxuICAgICAgICAgICAgLnNldEZpbGxTdHlsZSgweDIyYzU1ZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgY29uc3QgdGV4dCA9IHRoaXMuYWRkLnRleHQoMCwgMCwgJ05FWFQgSlVNUCEnLCB7XG4gICAgICAgICAgICBmb250RmFtaWx5OiAnQXJpYWwgQmxhY2snLCBmb250U2l6ZTogJzMycHgnLCBjb2xvcjogJyNmZmZmZmYnXG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUpO1xuXG4gICAgICAgIGNvbnRhaW5lci5hZGQoW2JnLCB0ZXh0XSk7XG4gICAgICAgIGNvbnRhaW5lci5zZXRTaXplKHdpZHRoLCBoZWlnaHQpO1xuXG4gICAgICAgIHRoaXMuanVtcEJ1dHRvbkJnID0gYmc7XG5cbiAgICAgICAgY29uc3Qgb25QcmVzcyA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnF1aXpPcGVuIHx8IHRoaXMuc3RhcnRNb2RhbE9wZW4pIHJldHVybjtcbiAgICAgICAgICAgIGJnLnNldEZpbGxTdHlsZSgweDE2YTM0YSk7XG4gICAgICAgICAgICB0aGlzLm9wZW5RdWl6TW9kYWwoKTtcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBvblJlbGVhc2UgPSAoKSA9PiB7XG4gICAgICAgICAgICBiZy5zZXRGaWxsU3R5bGUoMHgyMmM1NWUpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnRhaW5lci5zZXRJbnRlcmFjdGl2ZShuZXcgUGhhc2VyLkdlb20uUmVjdGFuZ2xlKC13aWR0aCAvIDIsIC1oZWlnaHQgLyAyLCB3aWR0aCwgaGVpZ2h0KSwgUGhhc2VyLkdlb20uUmVjdGFuZ2xlLkNvbnRhaW5zKTtcblxuICAgICAgICBjb250YWluZXIub24oJ3BvaW50ZXJkb3duJywgb25QcmVzcyk7XG5cbiAgICAgICAgY29udGFpbmVyLm9uKCdwb2ludGVydXAnLCBvblJlbGVhc2UpO1xuXG4gICAgICAgIGNvbnRhaW5lci5vbigncG9pbnRlcm91dCcsIG9uUmVsZWFzZSk7XG5cbiAgICAgICAgLy8gQWRkIHNpbXBsZSBwdWxzZSB0d2VlblxuICAgICAgICB0aGlzLnR3ZWVucy5hZGQoe1xuICAgICAgICAgICAgdGFyZ2V0czogY29udGFpbmVyLFxuICAgICAgICAgICAgc2NhbGU6IDEuMDUsXG4gICAgICAgICAgICBkdXJhdGlvbjogODAwLFxuICAgICAgICAgICAgeW95bzogdHJ1ZSxcbiAgICAgICAgICAgIHJlcGVhdDogLTFcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNldHVwSnVtcElucHV0KCk6IHZvaWQge1xuICAgICAgICB0aGlzLmlucHV0LmVuYWJsZWQgPSB0cnVlO1xuICAgICAgICBpZiAodGhpcy5pbnB1dC5tb3VzZSkgdGhpcy5pbnB1dC5tb3VzZS5lbmFibGVkID0gdHJ1ZTtcblxuICAgICAgICB0aGlzLmlucHV0Lm9uKCdwb2ludGVyZG93bicsIChwb2ludGVyOiBQaGFzZXIuSW5wdXQuUG9pbnRlcikgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMucXVpek9wZW4gfHwgdGhpcy5zdGFydE1vZGFsT3BlbikgcmV0dXJuO1xuICAgICAgICAgICAgY29uc3QgYm91bmRzID0gdGhpcy5qdW1wQnV0dG9uLmdldEJvdW5kcygpO1xuICAgICAgICAgICAgaWYgKGJvdW5kcy5jb250YWlucyhwb2ludGVyLngsIHBvaW50ZXIueSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmp1bXBCdXR0b25CZy5zZXRGaWxsU3R5bGUoMHgxNmEzNGEpO1xuICAgICAgICAgICAgICAgIHRoaXMub3BlblF1aXpNb2RhbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmlucHV0Lm9uKCdwb2ludGVydXAnLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmp1bXBCdXR0b25CZy5zZXRGaWxsU3R5bGUoMHgyMmM1NWUpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZVF1aXpNb2RhbCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5xdWl6UGFuZWwgPSBuZXcgUXVpelBhbmVsKHRoaXMsIHsgb3B0aW9uQ291bnQ6IDQsIGRlcHRoOiAyMDAsIHBhcmVudDogdGhpcy51aVJvb3QsIHNob3dJbmRleDogdHJ1ZSB9KTtcbiAgICAgICAgdGhpcy5xdWl6TW9kYWwgPSB0aGlzLnF1aXpQYW5lbC5jb250YWluZXI7XG4gICAgICAgIHRoaXMucXVpelBhbmVsQ29udGFpbmVyID0gdGhpcy5xdWl6UGFuZWwucGFuZWxDb250YWluZXI7XG4gICAgICAgIHRoaXMucXVpelBhbmVsU2hhZG93ID0gdGhpcy5xdWl6UGFuZWwucGFuZWxTaGFkb3c7XG4gICAgICAgIHRoaXMucXVpelBhbmVsQmcgPSB0aGlzLnF1aXpQYW5lbC5wYW5lbEJnO1xuICAgICAgICB0aGlzLnF1aXpQYW5lbEdsb3cgPSB0aGlzLnF1aXpQYW5lbC5wYW5lbEdsb3c7XG4gICAgICAgIHRoaXMucXVpekluZGV4VGV4dCA9IHRoaXMucXVpelBhbmVsLmluZGV4VGV4dDtcbiAgICAgICAgdGhpcy5xdWl6RmVlZGJhY2tUaXRsZVRleHQgPSB0aGlzLnF1aXpQYW5lbC5mZWVkYmFja1RpdGxlVGV4dDtcbiAgICAgICAgdGhpcy5xdWl6RmVlZGJhY2tTdWJ0aXRsZVRleHQgPSB0aGlzLnF1aXpQYW5lbC5mZWVkYmFja1N1YnRpdGxlVGV4dDtcbiAgICAgICAgdGhpcy5xdWl6UXVlc3Rpb25UZXh0ID0gdGhpcy5xdWl6UGFuZWwucXVlc3Rpb25UZXh0O1xuICAgICAgICB0aGlzLnF1aXpPcHRpb25CdXR0b25zID0gdGhpcy5xdWl6UGFuZWwub3B0aW9uQnV0dG9ucztcblxuICAgICAgICB0aGlzLnF1aXpQYW5lbC5vbk9wdGlvblNlbGVjdGVkKChpbmRleCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnF1aXpPcGVuIHx8IHRoaXMucXVpekxvY2tlZCkgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVRdWl6QW5zd2VyKGluZGV4KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5sYXlvdXRRdWl6KCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVTdGFydE1vZGFsKCk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMuc2NhbGU7XG5cbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5hZGQuY29udGFpbmVyKDAsIDApLnNldFNjcm9sbEZhY3RvcigwKS5zZXREZXB0aCgyMjApO1xuXG4gICAgICAgIGNvbnN0IG92ZXJsYXkgPSB0aGlzLmFkZC5yZWN0YW5nbGUoMCwgMCwgd2lkdGgsIGhlaWdodCwgMHgwMDAwMDAsIDAuMTIpXG4gICAgICAgICAgICAuc2V0T3JpZ2luKDAsIDApO1xuXG4gICAgICAgIGNvbnN0IHBhbmVsV2lkdGggPSBNYXRoLm1pbig1MjAsIHdpZHRoIC0gODApO1xuICAgICAgICBjb25zdCBwYW5lbEhlaWdodCA9IDE2MDtcbiAgICAgICAgY29uc3QgcGFuZWxDb250YWluZXIgPSB0aGlzLmFkZC5jb250YWluZXIod2lkdGggLyAyLCBNYXRoLnJvdW5kKGhlaWdodCAqIDAuNTgpKS5zZXRTY3JvbGxGYWN0b3IoMCk7XG5cbiAgICAgICAgY29uc3QgcGFuZWxTaGFkb3cgPSB0aGlzLmFkZC5ncmFwaGljcygpO1xuICAgICAgICBwYW5lbFNoYWRvdy5maWxsU3R5bGUoMHgwMDAwMDAsIDAuMTUpO1xuICAgICAgICBwYW5lbFNoYWRvdy5maWxsUm91bmRlZFJlY3QoLXBhbmVsV2lkdGggLyAyICsgNiwgLXBhbmVsSGVpZ2h0IC8gMiArIDEwLCBwYW5lbFdpZHRoLCBwYW5lbEhlaWdodCwgMjYpO1xuXG4gICAgICAgIGNvbnN0IHBhbmVsQmcgPSB0aGlzLmFkZC5ncmFwaGljcygpO1xuICAgICAgICBwYW5lbEJnLmZpbGxTdHlsZSgweGZmZmZmZiwgMC44NSk7XG4gICAgICAgIHBhbmVsQmcuZmlsbFJvdW5kZWRSZWN0KC1wYW5lbFdpZHRoIC8gMiwgLXBhbmVsSGVpZ2h0IC8gMiwgcGFuZWxXaWR0aCwgcGFuZWxIZWlnaHQsIDI0KTtcbiAgICAgICAgcGFuZWxCZy5saW5lU3R5bGUoMiwgMHg5M2M1ZmQsIDAuNDUpO1xuICAgICAgICBwYW5lbEJnLnN0cm9rZVJvdW5kZWRSZWN0KC1wYW5lbFdpZHRoIC8gMiwgLXBhbmVsSGVpZ2h0IC8gMiwgcGFuZWxXaWR0aCwgcGFuZWxIZWlnaHQsIDI0KTtcblxuICAgICAgICBjb25zdCB0aXRsZSA9IHRoaXMuYWRkLnRleHQoMCwgLTI2LCAnSGVscCB0aGUgcm9ib3QgY3Jvc3MgdGhlIHJpdmVyLicsIHtcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCBCbGFjaycsXG4gICAgICAgICAgICBmb250U2l6ZTogJzIycHgnLFxuICAgICAgICAgICAgY29sb3I6ICcjMGYxNzJhJyxcbiAgICAgICAgICAgIGFsaWduOiAnY2VudGVyJyxcbiAgICAgICAgICAgIHdvcmRXcmFwOiB7IHdpZHRoOiBwYW5lbFdpZHRoIC0gNjAsIHVzZUFkdmFuY2VkV3JhcDogdHJ1ZSB9XG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUpO1xuXG4gICAgICAgIGNvbnN0IGJ1dHRvbiA9IHRoaXMuY3JlYXRlU3RhcnRCdXR0b24oMCwgNDIpO1xuXG4gICAgICAgIHBhbmVsQ29udGFpbmVyLmFkZChbcGFuZWxTaGFkb3csIHBhbmVsQmcsIHRpdGxlLCBidXR0b25dKTtcbiAgICAgICAgY29udGFpbmVyLmFkZChbb3ZlcmxheSwgcGFuZWxDb250YWluZXJdKTtcbiAgICAgICAgY29udGFpbmVyLnNldFZpc2libGUoZmFsc2UpO1xuXG4gICAgICAgIHRoaXMuc3RhcnRNb2RhbCA9IGNvbnRhaW5lcjtcbiAgICAgICAgaWYgKHRoaXMudWlSb290KSB0aGlzLnVpUm9vdC5hZGQoY29udGFpbmVyKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZUVuZE1vZGFsKCk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMuc2NhbGU7XG5cbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5hZGQuY29udGFpbmVyKDAsIDApLnNldFNjcm9sbEZhY3RvcigwKS5zZXREZXB0aCgyMzApO1xuXG4gICAgICAgIGNvbnN0IG92ZXJsYXkgPSB0aGlzLmFkZC5yZWN0YW5nbGUoMCwgMCwgd2lkdGgsIGhlaWdodCwgMHgwMDAwMDAsIDAuNilcbiAgICAgICAgICAgIC5zZXRPcmlnaW4oMCwgMCk7XG5cbiAgICAgICAgY29uc3QgcGFuZWxXaWR0aCA9IE1hdGgubWluKDUyMCwgd2lkdGggLSA4MCk7XG4gICAgICAgIGNvbnN0IHBhbmVsSGVpZ2h0ID0gMjIwO1xuICAgICAgICBjb25zdCBwYW5lbENvbnRhaW5lciA9IHRoaXMuYWRkLmNvbnRhaW5lcih3aWR0aCAvIDIsIE1hdGgucm91bmQoaGVpZ2h0ICogMC41NikpLnNldFNjcm9sbEZhY3RvcigwKTtcbiAgICAgICAgb3ZlcmxheS5zZXREZXB0aCgwKTtcbiAgICAgICAgcGFuZWxDb250YWluZXIuc2V0RGVwdGgoMSk7XG5cbiAgICAgICAgY29uc3QgYmxvY2tlciA9IHRoaXMuYWRkLnpvbmUoMCwgMCwgd2lkdGgsIGhlaWdodCkuc2V0T3JpZ2luKDAsIDApO1xuICAgICAgICBibG9ja2VyLnNldEludGVyYWN0aXZlKG5ldyBQaGFzZXIuR2VvbS5SZWN0YW5nbGUoMCwgMCwgd2lkdGgsIGhlaWdodCksIChzaGFwZSwgeCwgeSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcGFuZWxCb3VuZHMgPSBwYW5lbENvbnRhaW5lci5nZXRCb3VuZHMoKTtcbiAgICAgICAgICAgIGlmIChQaGFzZXIuR2VvbS5SZWN0YW5nbGUuQ29udGFpbnMocGFuZWxCb3VuZHMsIHgsIHkpKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm4gUGhhc2VyLkdlb20uUmVjdGFuZ2xlLkNvbnRhaW5zKHNoYXBlIGFzIFBoYXNlci5HZW9tLlJlY3RhbmdsZSwgeCwgeSk7XG4gICAgICAgIH0pO1xuICAgICAgICBibG9ja2VyLm9uKCdwb2ludGVyZG93bicsICgpID0+IHt9KTtcblxuICAgICAgICBjb25zdCBwYW5lbFNoYWRvdyA9IHRoaXMuYWRkLmdyYXBoaWNzKCk7XG4gICAgICAgIHBhbmVsU2hhZG93LmZpbGxTdHlsZSgweDAwMDAwMCwgMC4xNSk7XG4gICAgICAgIHBhbmVsU2hhZG93LmZpbGxSb3VuZGVkUmVjdCgtcGFuZWxXaWR0aCAvIDIgKyA2LCAtcGFuZWxIZWlnaHQgLyAyICsgMTAsIHBhbmVsV2lkdGgsIHBhbmVsSGVpZ2h0LCAyNik7XG5cbiAgICAgICAgY29uc3QgcGFuZWxCZyA9IHRoaXMuYWRkLmdyYXBoaWNzKCk7XG4gICAgICAgIHBhbmVsQmcuZmlsbFN0eWxlKDB4ZmZmZmZmLCAwLjg1KTtcbiAgICAgICAgcGFuZWxCZy5maWxsUm91bmRlZFJlY3QoLXBhbmVsV2lkdGggLyAyLCAtcGFuZWxIZWlnaHQgLyAyLCBwYW5lbFdpZHRoLCBwYW5lbEhlaWdodCwgMjQpO1xuICAgICAgICBwYW5lbEJnLmxpbmVTdHlsZSgyLCAweDkzYzVmZCwgMC40NSk7XG4gICAgICAgIHBhbmVsQmcuc3Ryb2tlUm91bmRlZFJlY3QoLXBhbmVsV2lkdGggLyAyLCAtcGFuZWxIZWlnaHQgLyAyLCBwYW5lbFdpZHRoLCBwYW5lbEhlaWdodCwgMjQpO1xuXG4gICAgICAgIGNvbnN0IHRpdGxlID0gdGhpcy5hZGQudGV4dCgwLCAtNjQsICdDb25ncmF0dWxhdGlvbnMhJywge1xuICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsIEJsYWNrJyxcbiAgICAgICAgICAgIGZvbnRTaXplOiAnMjJweCcsXG4gICAgICAgICAgICBjb2xvcjogJyMwZjE3MmEnXG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUpO1xuXG4gICAgICAgIGNvbnN0IHN1YnRpdGxlID0gdGhpcy5hZGQudGV4dCgwLCAtMzYsICdZb3UgY29tcGxldGVkIHRoZSBydW4uJywge1xuICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsJyxcbiAgICAgICAgICAgIGZvbnRTaXplOiAnMThweCcsXG4gICAgICAgICAgICBjb2xvcjogJyMwZjE3MmEnLFxuICAgICAgICAgICAgYWxpZ246ICdjZW50ZXInLFxuICAgICAgICAgICAgd29yZFdyYXA6IHsgd2lkdGg6IHBhbmVsV2lkdGggLSA2MCwgdXNlQWR2YW5jZWRXcmFwOiB0cnVlIH1cbiAgICAgICAgfSkuc2V0T3JpZ2luKDAuNSk7XG5cbiAgICAgICAgY29uc3Qgc3RhdHNHYXAgPSAxNjtcbiAgICAgICAgY29uc3QgY2FyZFdpZHRoID0gTWF0aC5taW4oMjAwLCBNYXRoLmZsb29yKChwYW5lbFdpZHRoIC0gMTIwKSAvIDIpKTtcbiAgICAgICAgY29uc3QgY2FyZEhlaWdodCA9IDQ2O1xuICAgICAgICBjb25zdCBzdGF0c1kgPSA2MjtcblxuICAgICAgICBjb25zdCBzY29yZUNhcmQgPSB0aGlzLmFkZC5ncmFwaGljcygpO1xuICAgICAgICBzY29yZUNhcmQuZmlsbFN0eWxlKDB4OTNjNWZkLCAwLjE4KTtcbiAgICAgICAgc2NvcmVDYXJkLmZpbGxSb3VuZGVkUmVjdCgtY2FyZFdpZHRoIC8gMiwgLWNhcmRIZWlnaHQgLyAyLCBjYXJkV2lkdGgsIGNhcmRIZWlnaHQsIDE2KTtcbiAgICAgICAgc2NvcmVDYXJkLmxpbmVTdHlsZSgyLCAweDkzYzVmZCwgMC40NSk7XG4gICAgICAgIHNjb3JlQ2FyZC5zdHJva2VSb3VuZGVkUmVjdCgtY2FyZFdpZHRoIC8gMiwgLWNhcmRIZWlnaHQgLyAyLCBjYXJkV2lkdGgsIGNhcmRIZWlnaHQsIDE2KTtcblxuICAgICAgICBjb25zdCB0aW1lQ2FyZCA9IHRoaXMuYWRkLmdyYXBoaWNzKCk7XG4gICAgICAgIHRpbWVDYXJkLmZpbGxTdHlsZSgweDkzYzVmZCwgMC4xOCk7XG4gICAgICAgIHRpbWVDYXJkLmZpbGxSb3VuZGVkUmVjdCgtY2FyZFdpZHRoIC8gMiwgLWNhcmRIZWlnaHQgLyAyLCBjYXJkV2lkdGgsIGNhcmRIZWlnaHQsIDE2KTtcbiAgICAgICAgdGltZUNhcmQubGluZVN0eWxlKDIsIDB4OTNjNWZkLCAwLjQ1KTtcbiAgICAgICAgdGltZUNhcmQuc3Ryb2tlUm91bmRlZFJlY3QoLWNhcmRXaWR0aCAvIDIsIC1jYXJkSGVpZ2h0IC8gMiwgY2FyZFdpZHRoLCBjYXJkSGVpZ2h0LCAxNik7XG5cbiAgICAgICAgY29uc3Qgc2NvcmVDYXJkQ29udGFpbmVyID0gdGhpcy5hZGQuY29udGFpbmVyKC1jYXJkV2lkdGggLyAyIC0gc3RhdHNHYXAgLyAyLCBzdGF0c1ksIFtzY29yZUNhcmRdKTtcbiAgICAgICAgY29uc3QgdGltZUNhcmRDb250YWluZXIgPSB0aGlzLmFkZC5jb250YWluZXIoY2FyZFdpZHRoIC8gMiArIHN0YXRzR2FwIC8gMiwgc3RhdHNZLCBbdGltZUNhcmRdKTtcblxuICAgICAgICBjb25zdCBzY29yZUxhYmVsID0gdGhpcy5hZGQudGV4dChzY29yZUNhcmRDb250YWluZXIueCwgc3RhdHNZIC0gMTYsICdTQ09SRScsIHtcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCBCbGFjaycsXG4gICAgICAgICAgICBmb250U2l6ZTogJzEycHgnLFxuICAgICAgICAgICAgY29sb3I6ICcjMWUzYThhJ1xuICAgICAgICB9KS5zZXRPcmlnaW4oMC41KTtcblxuICAgICAgICBjb25zdCB0aW1lTGFiZWwgPSB0aGlzLmFkZC50ZXh0KHRpbWVDYXJkQ29udGFpbmVyLngsIHN0YXRzWSAtIDE2LCAnVElNRScsIHtcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCBCbGFjaycsXG4gICAgICAgICAgICBmb250U2l6ZTogJzEycHgnLFxuICAgICAgICAgICAgY29sb3I6ICcjMWUzYThhJ1xuICAgICAgICB9KS5zZXRPcmlnaW4oMC41KTtcblxuICAgICAgICB0aGlzLmVuZE1vZGFsU2NvcmVUZXh0ID0gdGhpcy5hZGQudGV4dChzY29yZUNhcmRDb250YWluZXIueCwgc3RhdHNZICsgNiwgJzAnLCB7XG4gICAgICAgICAgICBmb250RmFtaWx5OiAnQXJpYWwgQmxhY2snLFxuICAgICAgICAgICAgZm9udFNpemU6ICcxOHB4JyxcbiAgICAgICAgICAgIGNvbG9yOiAnIzBmMTcyYSdcbiAgICAgICAgfSkuc2V0T3JpZ2luKDAuNSk7XG5cbiAgICAgICAgdGhpcy5lbmRNb2RhbFRpbWVUZXh0ID0gdGhpcy5hZGQudGV4dCh0aW1lQ2FyZENvbnRhaW5lci54LCBzdGF0c1kgKyA2LCAnMDA6MDAnLCB7XG4gICAgICAgICAgICBmb250RmFtaWx5OiAnQXJpYWwgQmxhY2snLFxuICAgICAgICAgICAgZm9udFNpemU6ICcxOHB4JyxcbiAgICAgICAgICAgIGNvbG9yOiAnIzBmMTcyYSdcbiAgICAgICAgfSkuc2V0T3JpZ2luKDAuNSk7XG5cbiAgICAgICAgY29uc3QgcmVzdGFydEJ1dHRvbiA9IHRoaXMuY3JlYXRlRW5kUmVzdGFydEJ1dHRvbigwLCBwYW5lbEhlaWdodCAvIDIgKyA1Nik7XG4gICAgICAgIHJlc3RhcnRCdXR0b24uc2V0RGVwdGgoMik7XG5cbiAgICAgICAgcGFuZWxDb250YWluZXIuYWRkKFtcbiAgICAgICAgICAgIHBhbmVsU2hhZG93LFxuICAgICAgICAgICAgcGFuZWxCZyxcbiAgICAgICAgICAgIHRpdGxlLFxuICAgICAgICAgICAgc3VidGl0bGUsXG4gICAgICAgICAgICBzY29yZUNhcmRDb250YWluZXIsXG4gICAgICAgICAgICB0aW1lQ2FyZENvbnRhaW5lcixcbiAgICAgICAgICAgIHNjb3JlTGFiZWwsXG4gICAgICAgICAgICB0aW1lTGFiZWwsXG4gICAgICAgICAgICB0aGlzLmVuZE1vZGFsU2NvcmVUZXh0LFxuICAgICAgICAgICAgdGhpcy5lbmRNb2RhbFRpbWVUZXh0XG4gICAgICAgIF0pO1xuICAgICAgICBwYW5lbENvbnRhaW5lci5hZGQocmVzdGFydEJ1dHRvbik7XG5cbiAgICAgICAgY29udGFpbmVyLmFkZChbb3ZlcmxheSwgYmxvY2tlciwgcGFuZWxDb250YWluZXJdKTtcbiAgICAgICAgY29udGFpbmVyLnNldFZpc2libGUoZmFsc2UpO1xuXG4gICAgICAgIHRoaXMuZW5kTW9kYWwgPSBjb250YWluZXI7XG4gICAgICAgIHRoaXMuZW5kTW9kYWwuc2V0RGF0YSgncGFuZWwnLCBwYW5lbENvbnRhaW5lcik7XG4gICAgICAgIHRoaXMuZW5kTW9kYWwuc2V0RGF0YSgnb3ZlcmxheScsIG92ZXJsYXkpO1xuICAgICAgICBpZiAodGhpcy51aVJvb3QpIHRoaXMudWlSb290LmFkZChjb250YWluZXIpO1xuICAgIH1cbiAgICBcbiAgICBwcml2YXRlIGNyZWF0ZUVuZFJlc3RhcnRCdXR0b24oeDogbnVtYmVyLCB5OiBudW1iZXIpOiBQaGFzZXIuR2FtZU9iamVjdHMuQ29udGFpbmVyIHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5hZGQuY29udGFpbmVyKHgsIHkpLnNldFNjcm9sbEZhY3RvcigwKTtcbiAgICAgICAgY29uc3Qgd2lkdGggPSAyNjA7XG4gICAgICAgIGNvbnN0IGhlaWdodCA9IDUyO1xuICAgICAgICBjb25zdCByYWRpdXMgPSAyMDtcblxuICAgICAgICBjb25zdCBzaGFkb3cgPSB0aGlzLmFkZC5ncmFwaGljcygpO1xuICAgICAgICBzaGFkb3cuZmlsbFN0eWxlKDB4MDAwMDAwLCAwLjIpO1xuICAgICAgICBzaGFkb3cuZmlsbFJvdW5kZWRSZWN0KC13aWR0aCAvIDIgKyA0LCAtaGVpZ2h0IC8gMiArIDYsIHdpZHRoLCBoZWlnaHQsIHJhZGl1cyk7XG5cbiAgICAgICAgY29uc3QgYmcgPSB0aGlzLmFkZC5ncmFwaGljcygpO1xuICAgICAgICBjb25zdCBkcmF3ID0gKGZpbGw6IG51bWJlciwgc3Ryb2tlOiBudW1iZXIpID0+IHtcbiAgICAgICAgICAgIGJnLmNsZWFyKCk7XG4gICAgICAgICAgICBiZy5maWxsU3R5bGUoZmlsbCwgMSk7XG4gICAgICAgICAgICBiZy5maWxsUm91bmRlZFJlY3QoLXdpZHRoIC8gMiwgLWhlaWdodCAvIDIsIHdpZHRoLCBoZWlnaHQsIHJhZGl1cyk7XG4gICAgICAgICAgICBiZy5saW5lU3R5bGUoMiwgc3Ryb2tlLCAwLjgpO1xuICAgICAgICAgICAgYmcuc3Ryb2tlUm91bmRlZFJlY3QoLXdpZHRoIC8gMiwgLWhlaWdodCAvIDIsIHdpZHRoLCBoZWlnaHQsIHJhZGl1cyk7XG4gICAgICAgIH07XG4gICAgICAgIGRyYXcoMHgzYjgyZjYsIDB4OTNjNWZkKTtcblxuICAgICAgICBjb25zdCB0ZXh0ID0gdGhpcy5hZGQudGV4dCgwLCAwLCAnUGxheSBBZ2FpbicsIHtcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCBCbGFjaycsXG4gICAgICAgICAgICBmb250U2l6ZTogJzIwcHgnLFxuICAgICAgICAgICAgY29sb3I6ICcjZmZmZmZmJ1xuICAgICAgICB9KS5zZXRPcmlnaW4oMC41KTtcblxuICAgICAgICBjb25zdCBoaXQgPSB0aGlzLmFkZC5yZWN0YW5nbGUoMCwgMCwgd2lkdGgsIGhlaWdodCwgMHhmZmZmZmYsIDAuMDAxKTtcbiAgICAgICAgaGl0LnNldEludGVyYWN0aXZlKCk7XG5cbiAgICAgICAgY29udGFpbmVyLmFkZChbc2hhZG93LCBiZywgdGV4dCwgaGl0XSk7XG4gICAgICAgIGNvbnRhaW5lci5zZXRTaXplKHdpZHRoLCBoZWlnaHQpO1xuXG4gICAgICAgIGhpdC5vbigncG9pbnRlcm92ZXInLCAoKSA9PiB7XG4gICAgICAgICAgICBkcmF3KDB4MjU2M2ViLCAweGJmZGJmZSk7XG4gICAgICAgICAgICB0aGlzLnR3ZWVucy5hZGQoeyB0YXJnZXRzOiBjb250YWluZXIsIHNjYWxlOiAxLjAyLCBkdXJhdGlvbjogMTIwLCBlYXNlOiAnU2luZS5lYXNlT3V0JyB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGhpdC5vbigncG9pbnRlcm91dCcsICgpID0+IHtcbiAgICAgICAgICAgIGRyYXcoMHgzYjgyZjYsIDB4OTNjNWZkKTtcbiAgICAgICAgICAgIHRoaXMudHdlZW5zLmFkZCh7IHRhcmdldHM6IGNvbnRhaW5lciwgc2NhbGU6IDEsIGR1cmF0aW9uOiAxMjAsIGVhc2U6ICdTaW5lLmVhc2VPdXQnIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgaGl0Lm9uKCdwb2ludGVyZG93bicsICgpID0+IHtcbiAgICAgICAgICAgIGRyYXcoMHgxZDRlZDgsIDB4YmZkYmZlKTtcbiAgICAgICAgICAgIHRoaXMudHdlZW5zLmFkZCh7IHRhcmdldHM6IGNvbnRhaW5lciwgc2NhbGU6IDAuOTgsIGR1cmF0aW9uOiA4MCwgZWFzZTogJ1NpbmUuZWFzZU91dCcgfSk7XG4gICAgICAgICAgICB0aGlzLnJlc3RhcnRSdW4oKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGhpdC5vbigncG9pbnRlcnVwJywgKCkgPT4ge1xuICAgICAgICAgICAgZHJhdygweDI1NjNlYiwgMHhiZmRiZmUpO1xuICAgICAgICAgICAgdGhpcy50d2VlbnMuYWRkKHsgdGFyZ2V0czogY29udGFpbmVyLCBzY2FsZTogMS4wMiwgZHVyYXRpb246IDgwLCBlYXNlOiAnU2luZS5lYXNlT3V0JyB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZVRpbWVVcE1vZGFsKCk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMuc2NhbGU7XG5cbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5hZGQuY29udGFpbmVyKDAsIDApLnNldFNjcm9sbEZhY3RvcigwKS5zZXREZXB0aCgyNDApO1xuXG4gICAgICAgIGNvbnN0IG92ZXJsYXkgPSB0aGlzLmFkZC5yZWN0YW5nbGUoMCwgMCwgd2lkdGgsIGhlaWdodCwgMHgwMDAwMDAsIDAuMTIpXG4gICAgICAgICAgICAuc2V0T3JpZ2luKDAsIDApO1xuXG4gICAgICAgIGNvbnN0IHBhbmVsV2lkdGggPSBNYXRoLm1pbig1MjAsIHdpZHRoIC0gODApO1xuICAgICAgICBjb25zdCBwYW5lbEhlaWdodCA9IDE2MDtcbiAgICAgICAgY29uc3QgcGFuZWxDb250YWluZXIgPSB0aGlzLmFkZC5jb250YWluZXIod2lkdGggLyAyLCBNYXRoLnJvdW5kKGhlaWdodCAqIDAuNTYpKS5zZXRTY3JvbGxGYWN0b3IoMCk7XG5cbiAgICAgICAgY29uc3QgcGFuZWxTaGFkb3cgPSB0aGlzLmFkZC5ncmFwaGljcygpO1xuICAgICAgICBwYW5lbFNoYWRvdy5maWxsU3R5bGUoMHgwMDAwMDAsIDAuMTUpO1xuICAgICAgICBwYW5lbFNoYWRvdy5maWxsUm91bmRlZFJlY3QoLXBhbmVsV2lkdGggLyAyICsgNiwgLXBhbmVsSGVpZ2h0IC8gMiArIDEwLCBwYW5lbFdpZHRoLCBwYW5lbEhlaWdodCwgMjYpO1xuXG4gICAgICAgIGNvbnN0IHBhbmVsQmcgPSB0aGlzLmFkZC5ncmFwaGljcygpO1xuICAgICAgICBwYW5lbEJnLmZpbGxTdHlsZSgweGZmZmZmZiwgMC44NSk7XG4gICAgICAgIHBhbmVsQmcuZmlsbFJvdW5kZWRSZWN0KC1wYW5lbFdpZHRoIC8gMiwgLXBhbmVsSGVpZ2h0IC8gMiwgcGFuZWxXaWR0aCwgcGFuZWxIZWlnaHQsIDI0KTtcbiAgICAgICAgcGFuZWxCZy5saW5lU3R5bGUoMiwgMHg5M2M1ZmQsIDAuNDUpO1xuICAgICAgICBwYW5lbEJnLnN0cm9rZVJvdW5kZWRSZWN0KC1wYW5lbFdpZHRoIC8gMiwgLXBhbmVsSGVpZ2h0IC8gMiwgcGFuZWxXaWR0aCwgcGFuZWxIZWlnaHQsIDI0KTtcblxuICAgICAgICBjb25zdCB0aXRsZSA9IHRoaXMuYWRkLnRleHQoMCwgLTI2LCAnT3V0IG9mIHRpbWUhIEZhaWxlZCcsIHtcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCBCbGFjaycsXG4gICAgICAgICAgICBmb250U2l6ZTogJzIycHgnLFxuICAgICAgICAgICAgY29sb3I6ICcjMGYxNzJhJ1xuICAgICAgICB9KS5zZXRPcmlnaW4oMC41KTtcblxuICAgICAgICBjb25zdCByZXN0YXJ0QnV0dG9uID0gdGhpcy5jcmVhdGVSZXN0YXJ0QnV0dG9uKDAsIDQyKTtcblxuICAgICAgICBwYW5lbENvbnRhaW5lci5hZGQoW3BhbmVsU2hhZG93LCBwYW5lbEJnLCB0aXRsZSwgcmVzdGFydEJ1dHRvbl0pO1xuXG4gICAgICAgIGNvbnRhaW5lci5hZGQoW292ZXJsYXksIHBhbmVsQ29udGFpbmVyXSk7XG4gICAgICAgIGNvbnRhaW5lci5zZXRWaXNpYmxlKGZhbHNlKTtcblxuICAgICAgICB0aGlzLnRpbWVVcE1vZGFsID0gY29udGFpbmVyO1xuICAgICAgICB0aGlzLnRpbWVVcE1vZGFsLnNldERhdGEoJ3BhbmVsJywgcGFuZWxDb250YWluZXIpO1xuICAgICAgICBpZiAodGhpcy51aVJvb3QpIHRoaXMudWlSb290LmFkZChjb250YWluZXIpO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlUmVzdGFydEJ1dHRvbih4OiBudW1iZXIsIHk6IG51bWJlcik6IFBoYXNlci5HYW1lT2JqZWN0cy5Db250YWluZXIge1xuICAgICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmFkZC5jb250YWluZXIoeCwgeSkuc2V0U2Nyb2xsRmFjdG9yKDApO1xuICAgICAgICBjb25zdCB3aWR0aCA9IDI2MDtcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gNTI7XG4gICAgICAgIGNvbnN0IHJhZGl1cyA9IDIwO1xuXG4gICAgICAgIGNvbnN0IHNoYWRvdyA9IHRoaXMuYWRkLmdyYXBoaWNzKCk7XG4gICAgICAgIHNoYWRvdy5maWxsU3R5bGUoMHgwMDAwMDAsIDAuMik7XG4gICAgICAgIHNoYWRvdy5maWxsUm91bmRlZFJlY3QoLXdpZHRoIC8gMiArIDQsIC1oZWlnaHQgLyAyICsgNiwgd2lkdGgsIGhlaWdodCwgcmFkaXVzKTtcblxuICAgICAgICBjb25zdCBiZyA9IHRoaXMuYWRkLmdyYXBoaWNzKCk7XG4gICAgICAgIGNvbnN0IGRyYXcgPSAoZmlsbDogbnVtYmVyLCBzdHJva2U6IG51bWJlcikgPT4ge1xuICAgICAgICAgICAgYmcuY2xlYXIoKTtcbiAgICAgICAgICAgIGJnLmZpbGxTdHlsZShmaWxsLCAxKTtcbiAgICAgICAgICAgIGJnLmZpbGxSb3VuZGVkUmVjdCgtd2lkdGggLyAyLCAtaGVpZ2h0IC8gMiwgd2lkdGgsIGhlaWdodCwgcmFkaXVzKTtcbiAgICAgICAgICAgIGJnLmxpbmVTdHlsZSgyLCBzdHJva2UsIDAuOCk7XG4gICAgICAgICAgICBiZy5zdHJva2VSb3VuZGVkUmVjdCgtd2lkdGggLyAyLCAtaGVpZ2h0IC8gMiwgd2lkdGgsIGhlaWdodCwgcmFkaXVzKTtcbiAgICAgICAgfTtcbiAgICAgICAgZHJhdygweDNiODJmNiwgMHg5M2M1ZmQpO1xuXG4gICAgICAgIGNvbnN0IHRleHQgPSB0aGlzLmFkZC50ZXh0KDAsIDAsICdDb250aW51ZScsIHtcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCBCbGFjaycsXG4gICAgICAgICAgICBmb250U2l6ZTogJzIwcHgnLFxuICAgICAgICAgICAgY29sb3I6ICcjZmZmZmZmJ1xuICAgICAgICB9KS5zZXRPcmlnaW4oMC41KTtcblxuICAgICAgICBjb25zdCBoaXQgPSB0aGlzLmFkZC5yZWN0YW5nbGUoMCwgMCwgd2lkdGgsIGhlaWdodCwgMHhmZmZmZmYsIDAuMDAxKTtcbiAgICAgICAgaGl0LnNldEludGVyYWN0aXZlKCk7XG5cbiAgICAgICAgY29udGFpbmVyLmFkZChbc2hhZG93LCBiZywgdGV4dCwgaGl0XSk7XG4gICAgICAgIGNvbnRhaW5lci5zZXRTaXplKHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICBoaXQub24oJ3BvaW50ZXJvdmVyJywgKCkgPT4ge1xuICAgICAgICAgICAgZHJhdygweDI1NjNlYiwgMHhiZmRiZmUpO1xuICAgICAgICAgICAgdGhpcy50d2VlbnMuYWRkKHsgdGFyZ2V0czogY29udGFpbmVyLCBzY2FsZTogMS4wMiwgZHVyYXRpb246IDEyMCwgZWFzZTogJ1NpbmUuZWFzZU91dCcgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBoaXQub24oJ3BvaW50ZXJvdXQnLCAoKSA9PiB7XG4gICAgICAgICAgICBkcmF3KDB4M2I4MmY2LCAweDkzYzVmZCk7XG4gICAgICAgICAgICB0aGlzLnR3ZWVucy5hZGQoeyB0YXJnZXRzOiBjb250YWluZXIsIHNjYWxlOiAxLCBkdXJhdGlvbjogMTIwLCBlYXNlOiAnU2luZS5lYXNlT3V0JyB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGhpdC5vbigncG9pbnRlcmRvd24nLCAoKSA9PiB7XG4gICAgICAgICAgICBkcmF3KDB4MWQ0ZWQ4LCAweGJmZGJmZSk7XG4gICAgICAgICAgICB0aGlzLnR3ZWVucy5hZGQoeyB0YXJnZXRzOiBjb250YWluZXIsIHNjYWxlOiAwLjk4LCBkdXJhdGlvbjogODAsIGVhc2U6ICdTaW5lLmVhc2VPdXQnIH0pO1xuICAgICAgICAgICAgdGhpcy5yZXN0YXJ0UnVuKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBoaXQub24oJ3BvaW50ZXJ1cCcsICgpID0+IHtcbiAgICAgICAgICAgIGRyYXcoMHgyNTYzZWIsIDB4YmZkYmZlKTtcbiAgICAgICAgICAgIHRoaXMudHdlZW5zLmFkZCh7IHRhcmdldHM6IGNvbnRhaW5lciwgc2NhbGU6IDEuMDIsIGR1cmF0aW9uOiA4MCwgZWFzZTogJ1NpbmUuZWFzZU91dCcgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBjb250YWluZXI7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVTdGFydEJ1dHRvbih4OiBudW1iZXIsIHk6IG51bWJlcik6IFBoYXNlci5HYW1lT2JqZWN0cy5Db250YWluZXIge1xuICAgICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmFkZC5jb250YWluZXIoeCwgeSkuc2V0U2Nyb2xsRmFjdG9yKDApO1xuICAgICAgICBjb25zdCB3aWR0aCA9IDI2MDtcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gNTI7XG4gICAgICAgIGNvbnN0IHJhZGl1cyA9IDIwO1xuXG4gICAgICAgIGNvbnN0IHNoYWRvdyA9IHRoaXMuYWRkLmdyYXBoaWNzKCk7XG4gICAgICAgIHNoYWRvdy5maWxsU3R5bGUoMHgwMDAwMDAsIDAuMik7XG4gICAgICAgIHNoYWRvdy5maWxsUm91bmRlZFJlY3QoLXdpZHRoIC8gMiArIDQsIC1oZWlnaHQgLyAyICsgNiwgd2lkdGgsIGhlaWdodCwgcmFkaXVzKTtcblxuICAgICAgICBjb25zdCBiZyA9IHRoaXMuYWRkLmdyYXBoaWNzKCk7XG4gICAgICAgIGNvbnN0IGRyYXcgPSAoZmlsbDogbnVtYmVyLCBzdHJva2U6IG51bWJlcikgPT4ge1xuICAgICAgICAgICAgYmcuY2xlYXIoKTtcbiAgICAgICAgICAgIGJnLmZpbGxTdHlsZShmaWxsLCAxKTtcbiAgICAgICAgICAgIGJnLmZpbGxSb3VuZGVkUmVjdCgtd2lkdGggLyAyLCAtaGVpZ2h0IC8gMiwgd2lkdGgsIGhlaWdodCwgcmFkaXVzKTtcbiAgICAgICAgICAgIGJnLmxpbmVTdHlsZSgyLCBzdHJva2UsIDAuOCk7XG4gICAgICAgICAgICBiZy5zdHJva2VSb3VuZGVkUmVjdCgtd2lkdGggLyAyLCAtaGVpZ2h0IC8gMiwgd2lkdGgsIGhlaWdodCwgcmFkaXVzKTtcbiAgICAgICAgfTtcbiAgICAgICAgZHJhdygweDNiODJmNiwgMHg5M2M1ZmQpO1xuICAgICAgICAgICAgXG4gICAgICAgIGNvbnN0IHRleHQgPSB0aGlzLmFkZC50ZXh0KDAsIDAsICdTdGFydCBHYW1lJywge1xuICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsIEJsYWNrJywgZm9udFNpemU6ICcyMHB4JywgY29sb3I6ICcjZmZmZmZmJ1xuICAgICAgICB9KS5zZXRPcmlnaW4oMC41KTtcblxuICAgICAgICBjb25zdCBoaXRQYWQgPSAxNjtcbiAgICAgICAgY29uc3QgaGl0VyA9IHdpZHRoICsgaGl0UGFkICogMjtcbiAgICAgICAgY29uc3QgaGl0SCA9IGhlaWdodCArIGhpdFBhZCAqIDI7XG4gICAgICAgIGNvbnN0IGhpdCA9IHRoaXMuYWRkLnJlY3RhbmdsZSgwLCAwLCBoaXRXLCBoaXRILCAweGZmZmZmZiwgMC4wMDEpO1xuICAgICAgICBoaXQuc2V0SW50ZXJhY3RpdmUoKTtcblxuICAgICAgICBjb250YWluZXIuYWRkKFtzaGFkb3csIGJnLCB0ZXh0LCBoaXRdKTtcbiAgICAgICAgY29udGFpbmVyLnNldFNpemUod2lkdGgsIGhlaWdodCk7XG5cbiAgICAgICAgY29uc3Qgb25QcmVzcyA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5zdGFydE1vZGFsT3BlbikgcmV0dXJuO1xuICAgICAgICAgICAgZHJhdygweDFkNGVkOCwgMHhiZmRiZmUpO1xuICAgICAgICAgICAgdGhpcy5jbG9zZVN0YXJ0TW9kYWwoKTtcbiAgICAgICAgICAgIHRoaXMub3BlblF1aXpNb2RhbCgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IG9uUmVsZWFzZSA9ICgpID0+IHtcbiAgICAgICAgICAgIGRyYXcoMHgzYjgyZjYsIDB4OTNjNWZkKTtcbiAgICAgICAgfTtcblxuICAgICAgICBoaXQub24oJ3BvaW50ZXJkb3duJywgb25QcmVzcyk7XG4gICAgICAgIGhpdC5vbigncG9pbnRlcnVwJywgb25SZWxlYXNlKTtcbiAgICAgICAgaGl0Lm9uKCdwb2ludGVyb3V0Jywgb25SZWxlYXNlKTtcblxuICAgICAgICB0aGlzLnR3ZWVucy5hZGQoe1xuICAgICAgICAgICAgdGFyZ2V0czogY29udGFpbmVyLFxuICAgICAgICAgICAgc2NhbGU6IDEuMDUsXG4gICAgICAgICAgICBkdXJhdGlvbjogODAwLFxuICAgICAgICAgICAgeW95bzogdHJ1ZSxcbiAgICAgICAgICAgIHJlcGVhdDogLTFcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9wZW5TdGFydE1vZGFsKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnN0YXJ0TW9kYWxPcGVuID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5qdW1wQnV0dG9uLnNldEFscGhhKDAuNCk7XG4gICAgICAgIHRoaXMuc3RvcFRpbWVyKCk7XG5cbiAgICAgICAgdGhpcy5zdGFydE1vZGFsLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgIHRoaXMuc3RhcnRNb2RhbC5zZXRBbHBoYSgwKTtcblxuICAgICAgICB0aGlzLnR3ZWVucy5hZGQoe1xuICAgICAgICAgICAgdGFyZ2V0czogdGhpcy5zdGFydE1vZGFsLFxuICAgICAgICAgICAgYWxwaGE6IDEsXG4gICAgICAgICAgICBkdXJhdGlvbjogMTgwXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgY2xvc2VTdGFydE1vZGFsKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnN0YXJ0TW9kYWxPcGVuID0gZmFsc2U7XG4gICAgICAgIHRoaXMuanVtcEJ1dHRvbi5zZXRBbHBoYSgxKTtcbiAgICAgICAgdGhpcy5zdGFydFRpbWVyKCk7XG4gICAgICAgIHRoaXMuc3RhcnRNb2RhbC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNldFF1ZXN0aW9uKGRhdGE6IHsgaW5kZXg6IG51bWJlcjsgdG90YWw6IG51bWJlcjsgcXVlc3Rpb246IHN0cmluZzsgb3B0aW9uczogc3RyaW5nW10gfSk6IHZvaWQge1xuICAgICAgICB0aGlzLnF1aXpQYW5lbC5zZXRGZWVkYmFjaygnaWRsZScpO1xuICAgICAgICB0aGlzLnF1aXpQYW5lbC5zZXRRdWVzdGlvbihkYXRhKTtcbiAgICAgICAgdGhpcy5sYXlvdXRRdWl6KCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBsYXlvdXRRdWl6KCk6IHZvaWQge1xuICAgICAgICBpZiAoIXRoaXMucXVpelBhbmVsKSByZXR1cm47XG4gICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gdGhpcy5zY2FsZTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5xdWl6UGFuZWwubGF5b3V0KHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICB0aGlzLnVpU2NhbGUgPSByZXN1bHQudWlTY2FsZTtcbiAgICAgICAgdGhpcy5xdWl6UGFuZWxIZWlnaHQgPSByZXN1bHQucGFuZWxIZWlnaHQ7XG4gICAgICAgIHRoaXMucXVpelBhbmVsV2lkdGggPSByZXN1bHQucGFuZWxXaWR0aDtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9wZW5RdWl6TW9kYWwoKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLmdhbWVPdmVyKSByZXR1cm47XG4gICAgICAgIGlmICh0aGlzLmdhbWVDb21wbGV0ZWQpIHJldHVybjtcbiAgICAgICAgaWYgKHRoaXMucGxheWVyLmlzSnVtcGluZygpKSByZXR1cm47XG4gICAgICAgIHRoaXMucXVpek9wZW4gPSB0cnVlO1xuICAgICAgICB0aGlzLnF1aXpMb2NrZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5qdW1wQnV0dG9uLnNldEFscGhhKDAuNik7XG5cbiAgICAgICAgY29uc3QgcXVlc3Rpb25Qb29sID0gdGhpcy5nZXRRdWVzdGlvblBvb2woKTtcbiAgICAgICAgY29uc3QgcXVlc3Rpb24gPSBxdWVzdGlvblBvb2xbdGhpcy5xdWl6Q3VycmVudEluZGV4ICUgcXVlc3Rpb25Qb29sLmxlbmd0aF07XG4gICAgICAgIHRoaXMuc2V0UXVlc3Rpb24oe1xuICAgICAgICAgICAgaW5kZXg6IHRoaXMucXVpekN1cnJlbnRJbmRleCArIDEsXG4gICAgICAgICAgICB0b3RhbDogcXVlc3Rpb25Qb29sLmxlbmd0aCxcbiAgICAgICAgICAgIHF1ZXN0aW9uOiBxdWVzdGlvbi5xdWVzdGlvbixcbiAgICAgICAgICAgIG9wdGlvbnM6IHF1ZXN0aW9uLm9wdGlvbnNcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5xdWl6TW9kYWwuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgdGhpcy5xdWl6TW9kYWwuc2V0QWxwaGEoMCk7XG4gICAgICAgIGNvbnN0IHBhbmVsID0gdGhpcy5xdWl6UGFuZWwucGFuZWxDb250YWluZXI7XG4gICAgICAgIHBhbmVsLnNldFNjYWxlKDAuOTYpO1xuICAgICAgICBwYW5lbC55ICs9IDE4O1xuICAgICAgICB0aGlzLnR3ZWVucy5hZGQoe1xuICAgICAgICAgICAgdGFyZ2V0czogdGhpcy5xdWl6TW9kYWwsXG4gICAgICAgICAgICBhbHBoYTogMSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAxODBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudHdlZW5zLmFkZCh7XG4gICAgICAgICAgICB0YXJnZXRzOiBwYW5lbCxcbiAgICAgICAgICAgIHNjYWxlOiAxLFxuICAgICAgICAgICAgeTogcGFuZWwueSAtIDE4LFxuICAgICAgICAgICAgZHVyYXRpb246IDIyMCxcbiAgICAgICAgICAgIGVhc2U6ICdCYWNrLmVhc2VPdXQnXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgY2xvc2VRdWl6TW9kYWwoKTogdm9pZCB7XG4gICAgICAgIHRoaXMucXVpek9wZW4gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5xdWl6TG9ja2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuanVtcEJ1dHRvbi5zZXRBbHBoYSgxKTtcbiAgICAgICAgdGhpcy5xdWl6TW9kYWwuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVRdWl6QW5zd2VyKGluZGV4OiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgcXVlc3Rpb25Qb29sID0gdGhpcy5nZXRRdWVzdGlvblBvb2woKTtcbiAgICAgICAgY29uc3QgcXVlc3Rpb24gPSBxdWVzdGlvblBvb2xbdGhpcy5xdWl6Q3VycmVudEluZGV4ICUgcXVlc3Rpb25Qb29sLmxlbmd0aF07XG4gICAgICAgIGxldCBpc0NvcnJlY3QgPSBpbmRleCA9PT0gcXVlc3Rpb24uY29ycmVjdEluZGV4O1xuXG4gICAgICAgIGNvbnN0IHNlbGVjdGVkT3B0aW9uSWQgPSBxdWVzdGlvbi5vcHRpb25JZHNbaW5kZXhdO1xuICAgICAgICBpZiAodGhpcy5zZXNzaW9uSWQgJiYgcXVlc3Rpb24uc2Vzc2lvblF1ZXN0aW9uSWQgJiYgc2VsZWN0ZWRPcHRpb25JZCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHN1Ym1pdEFuc3dlciB9ID0gYXdhaXQgaW1wb3J0KCcuLi8uLi9zZXJ2aWNlcy9hcGknKTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBzdWJtaXRBbnN3ZXIoXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2Vzc2lvbklkLFxuICAgICAgICAgICAgICAgICAgICBxdWVzdGlvbi5zZXNzaW9uUXVlc3Rpb25JZCxcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRPcHRpb25JZFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgaXNDb3JyZWN0ID0gcmVzLmRhdGEuaXNfY29ycmVjdDtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignc3VibWl0QW5zd2VyIGZhaWxlZCwgZmFsbGJhY2sgdG8gbG9jYWwgY2hlY2snLCBlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBidG4gPSB0aGlzLnF1aXpPcHRpb25CdXR0b25zW2luZGV4XTtcbiAgICAgICAgY29uc3QgcmVkcmF3ID0gYnRuLmdldERhdGEoJ3JlZHJhdycpIGFzIChzdGF0ZTogJ25vcm1hbCcgfCAnY29ycmVjdCcgfCAnd3JvbmcnKSA9PiB2b2lkO1xuXG4gICAgICAgIGlmIChpc0NvcnJlY3QpIHtcbiAgICAgICAgICAgIHRoaXMucXVpekxvY2tlZCA9IHRydWU7XG4gICAgICAgICAgICByZWRyYXcoJ2NvcnJlY3QnKTtcbiAgICAgICAgICAgIHRoaXMuc2V0UXVpekZlZWRiYWNrKCdjb3JyZWN0Jyk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNjb3JlKDEpO1xuICAgICAgICAgICAgdGhpcy5zcGVlZFVwSnVtcCgpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5kZWxheSg0MDApO1xuICAgICAgICAgICAgdGhpcy5jbG9zZVF1aXpNb2RhbCgpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5oYW5kbGVKdW1wKCk7XG4gICAgICAgICAgICB0aGlzLnF1aXpDdXJyZW50SW5kZXggKz0gMTtcbiAgICAgICAgICAgIHRoaXMudGltZS5kZWxheWVkQ2FsbCgyNTAsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm9wZW5RdWl6TW9kYWwoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5xdWl6TG9ja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIHJlZHJhdygnd3JvbmcnKTtcbiAgICAgICAgICAgIHRoaXMuc2V0UXVpekZlZWRiYWNrKCd3cm9uZycpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTY29yZSgtMSk7XG4gICAgICAgICAgICB0aGlzLnNob3dQbGF5ZXJTdGF0ZSgnaW5jb3JyZWN0Jyk7XG4gICAgICAgICAgICBjb25zdCBwYW5lbCA9IHRoaXMucXVpelBhbmVsLnBhbmVsQ29udGFpbmVyO1xuICAgICAgICAgICAgY29uc3Qgc3RhcnRYID0gcGFuZWwueDtcbiAgICAgICAgICAgIHRoaXMudHdlZW5zLmFkZCh7XG4gICAgICAgICAgICAgICAgdGFyZ2V0czogcGFuZWwsXG4gICAgICAgICAgICAgICAgeDogc3RhcnRYICsgMTAsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDYwLFxuICAgICAgICAgICAgICAgIHlveW86IHRydWUsXG4gICAgICAgICAgICAgICAgcmVwZWF0OiAzLFxuICAgICAgICAgICAgICAgIGVhc2U6ICdTaW5lLmVhc2VJbk91dCcsXG4gICAgICAgICAgICAgICAgb25Db21wbGV0ZTogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBwYW5lbC54ID0gc3RhcnRYO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnF1aXpMb2NrZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgcmVkcmF3KCdub3JtYWwnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0UXVlc3Rpb25Qb29sKCkge1xuICAgICAgICBjb25zdCBhcGlRdWVzdGlvbnMgPSB0aGlzLnNlc3Npb25RdWVzdGlvbnM7XG4gICAgICAgIGlmIChhcGlRdWVzdGlvbnM/Lmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnF1ZXN0aW9uU291cmNlTG9nZ2VkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5xdWVzdGlvblNvdXJjZUxvZ2dlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tHQU1FXVtUT1dOXSBVc2luZyBzZXNzaW9uIHF1ZXN0aW9ucycsIHtcbiAgICAgICAgICAgICAgICAgICAgZ2FtZUNvZGU6IHRoaXMuZ2FtZUNvZGUsXG4gICAgICAgICAgICAgICAgICAgIGNvdW50OiBhcGlRdWVzdGlvbnMubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICBzYW1wbGU6IGFwaVF1ZXN0aW9uc1swXT8ucXVlc3Rpb24/LmNvbnRlbnQgPz8gbnVsbFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGFwaVF1ZXN0aW9ucy5tYXAoKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBvcHRpb25zID0gaXRlbS5xdWVzdGlvbi5vcHRpb25zLm1hcCgob3B0KSA9PiBvcHQudGV4dCk7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9uSWRzID0gaXRlbS5xdWVzdGlvbi5vcHRpb25zLm1hcCgob3B0KSA9PiBvcHQuaWQgPz8gJycpO1xuICAgICAgICAgICAgICAgIGxldCBjb3JyZWN0SW5kZXggPSBpdGVtLnF1ZXN0aW9uLm9wdGlvbnMuZmluZEluZGV4KChvcHQpID0+IG9wdC5pc19jb3JyZWN0KTtcbiAgICAgICAgICAgICAgICBpZiAoY29ycmVjdEluZGV4IDwgMCkgY29ycmVjdEluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uUXVlc3Rpb25JZDogaXRlbS5zZXNzaW9uX3F1ZXN0aW9uX2lkID8/IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIHF1ZXN0aW9uOiBpdGVtLnF1ZXN0aW9uLmNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbklkcyxcbiAgICAgICAgICAgICAgICAgICAgY29ycmVjdEluZGV4XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLnF1ZXN0aW9uU291cmNlTG9nZ2VkKSB7XG4gICAgICAgICAgICB0aGlzLnF1ZXN0aW9uU291cmNlTG9nZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignW0dBTUVdW1RPV05dIFVzaW5nIGZhbGxiYWNrIGxvY2FsIHF1ZXN0aW9ucycsIHtcbiAgICAgICAgICAgICAgICBnYW1lQ29kZTogdGhpcy5nYW1lQ29kZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBzZXNzaW9uUXVlc3Rpb25JZDogbnVsbCxcbiAgICAgICAgICAgICAgICBxdWVzdGlvbjogJ1doYXQgaXMgdGhlIGNhcGl0YWwgb2YgVmlldG5hbT8nLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IFsnSGFub2knLCAnRGEgTmFuZycsICdIYWkgUGhvbmcnLCAnQ2FuIFRobyddLFxuICAgICAgICAgICAgICAgIG9wdGlvbklkczogWycnLCAnJywgJycsICcnXSxcbiAgICAgICAgICAgICAgICBjb3JyZWN0SW5kZXg6IDBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgc2Vzc2lvblF1ZXN0aW9uSWQ6IG51bGwsXG4gICAgICAgICAgICAgICAgcXVlc3Rpb246ICdXaGljaCBsYW5ndWFnZSBkb2VzIFBoYXNlciB1c2U/JyxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBbJ1R5cGVTY3JpcHQvSmF2YVNjcmlwdCcsICdDIycsICdQeXRob24nLCAnR28nXSxcbiAgICAgICAgICAgICAgICBvcHRpb25JZHM6IFsnJywgJycsICcnLCAnJ10sXG4gICAgICAgICAgICAgICAgY29ycmVjdEluZGV4OiAwXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHNlc3Npb25RdWVzdGlvbklkOiBudWxsLFxuICAgICAgICAgICAgICAgIHF1ZXN0aW9uOiAnV2hhdCBjb2xvciBhcmUgdGhlIGxlYXZlcyBpbiB0aGUgZ2FtZT8nLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IFsnR3JlZW4nLCAnUmVkJywgJ1B1cnBsZScsICdZZWxsb3cnXSxcbiAgICAgICAgICAgICAgICBvcHRpb25JZHM6IFsnJywgJycsICcnLCAnJ10sXG4gICAgICAgICAgICAgICAgY29ycmVjdEluZGV4OiAwXG4gICAgICAgICAgICB9XG4gICAgICAgIF07XG4gICAgfVxuXG4gICAgYXN5bmMgaGFuZGxlSnVtcCgpIHtcbiAgICAgICAgaWYgKHRoaXMucGxheWVyLmlzSnVtcGluZygpKSByZXR1cm47XG4gICAgICAgIGlmICh0aGlzLmdhbWVPdmVyKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgbmV4dEluZGV4ID0gdGhpcy5jdXJyZW50TGVhZkluZGV4ICsgMTtcbiAgICAgICAgY29uc3QgbWF4SW5kZXggPSB0aGlzLmxlYWZQYXRoLmxlbmd0aCA+IDAgPyB0aGlzLmxlYWZQYXRoLmxlbmd0aCAtIDEgOiBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG5cbiAgICAgICAgaWYgKHRoaXMubGVhZlBhdGgubGVuZ3RoID4gMCAmJiBuZXh0SW5kZXggPiBtYXhJbmRleCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRhcmdldFBvcyA9IHRoaXMuZ2V0TGVhZlBvc2l0aW9uKG5leHRJbmRleCk7XG5cbiAgICAgICAgLy8gU3RvcCBpZGxlIGFuaW1hdGlvbiBkdXJpbmcganVtcFxuICAgICAgICB0aGlzLnBsYXllci5zdG9wSWRsZSgpO1xuXG4gICAgICAgIC8vIFNjcm9sbCBDYW1lcmFcbiAgICAgICAgdGhpcy50d2VlbnMuYWRkKHtcbiAgICAgICAgICAgIHRhcmdldHM6IHRoaXMuY2FtZXJhLFxuICAgICAgICAgICAgc2Nyb2xsWTogdGFyZ2V0UG9zLnkgLSA4MDAsXG4gICAgICAgICAgICBkdXJhdGlvbjogNjAwLFxuICAgICAgICAgICAgZWFzZTogJ1NpbmUuZWFzZUluT3V0J1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBQZXJmb3JtIGp1bXAgdXNpbmcgRW1vdGVDaGFyYWN0ZXJcbiAgICAgICAgYXdhaXQgdGhpcy5wbGF5ZXIuanVtcFRvKHRhcmdldFBvcy54LCB0YXJnZXRQb3MueSwgdGhpcy5qdW1wRHVyYXRpb25Ncyk7XG5cbiAgICAgICAgLy8gVXBkYXRlIHN0YXRlIGFmdGVyIGp1bXAgY29tcGxldGVzXG4gICAgICAgIHRoaXMuY3VycmVudExlYWZJbmRleCA9IG5leHRJbmRleDtcblxuICAgICAgICBjb25zdCBuZXh0UG9zID0gdGhpcy5nZXRMZWFmUG9zaXRpb24odGhpcy5jdXJyZW50TGVhZkluZGV4ICsgMSk7XG4gICAgICAgIHRoaXMucGxheWVyLmZsaXAobmV4dFBvcy54ID4gdGFyZ2V0UG9zLngpO1xuXG4gICAgICAgIC8vIFNob3cgY29ycmVjdCBzdGF0ZSBvbiBuZXcgbGVhZiwgdGhlbiByZXN1bWUgaWRsZVxuICAgICAgICB0aGlzLnBsYXllci5zaG93Q29ycmVjdCg4MDApO1xuICAgICAgICB0aGlzLnRpbWUuZGVsYXllZENhbGwoODAwLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsYXllci5wbGF5SWRsZSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAodGhpcy5sZWFmUGF0aC5sZW5ndGggPiAwICYmIHRoaXMuY3VycmVudExlYWZJbmRleCA+PSBtYXhJbmRleCkge1xuICAgICAgICAgICAgdGhpcy5nYW1lQ29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuanVtcEJ1dHRvbi5zZXRBbHBoYSgwLjQpO1xuICAgICAgICAgICAgdGhpcy5xdWl6T3BlbiA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5xdWl6TG9ja2VkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnN0b3BUaW1lcigpO1xuICAgICAgICAgICAgdGhpcy50aW1lck92ZXJsYXkuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgICAgICBpZiAodGhpcy50b3RhbFRpbWVNcyA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVNjb3JlKDMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cGRhdGVFbmRUaW1lVGV4dCgpO1xuICAgICAgICAgICAgdGhpcy50aW1lLmRlbGF5ZWRDYWxsKDQwMCwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMub3BlbkVuZE1vZGFsKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgc3RhcnRUaW1lcigpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMudGltZXJFdmVudCkge1xuICAgICAgICAgICAgdGhpcy50aW1lckV2ZW50LnJlbW92ZShmYWxzZSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnRvdGFsVGltZU1zID0gdGhpcy5zZXNzaW9uVGltZUxpbWl0ICYmIHRoaXMuc2Vzc2lvblRpbWVMaW1pdCA+IDBcbiAgICAgICAgICAgID8gdGhpcy5zZXNzaW9uVGltZUxpbWl0ICogMTAwMFxuICAgICAgICAgICAgOiAxODAwMDA7XG4gICAgICAgIHRoaXMudXBkYXRlVGltZXJUZXh0KHRoaXMudG90YWxUaW1lTXMpO1xuXG4gICAgICAgIHRoaXMudGltZXJFdmVudCA9IHRoaXMudGltZS5hZGRFdmVudCh7XG4gICAgICAgICAgICBkZWxheTogMTAwMCxcbiAgICAgICAgICAgIGxvb3A6IHRydWUsXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmdhbWVDb21wbGV0ZWQgfHwgdGhpcy5nYW1lT3ZlcikgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHRoaXMudG90YWxUaW1lTXMgLT0gMTAwMDtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVRpbWVyVGV4dCh0aGlzLnRvdGFsVGltZU1zKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50b3RhbFRpbWVNcyA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG90YWxUaW1lTXMgPSAwO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVRpbWVyVGV4dCh0aGlzLnRvdGFsVGltZU1zKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVUaW1lVXAoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgc3RvcFRpbWVyKCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy50aW1lckV2ZW50KSB7XG4gICAgICAgICAgICB0aGlzLnRpbWVyRXZlbnQucmVtb3ZlKGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgdXBkYXRlVGltZXJUZXh0KG1zOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgdG90YWxTZWNvbmRzID0gTWF0aC5tYXgoMCwgTWF0aC5mbG9vcihtcyAvIDEwMDApKTtcbiAgICAgICAgY29uc3QgbWludXRlcyA9IE1hdGguZmxvb3IodG90YWxTZWNvbmRzIC8gNjApO1xuICAgICAgICBjb25zdCBzZWNvbmRzID0gdG90YWxTZWNvbmRzICUgNjA7XG4gICAgICAgIGNvbnN0IHBhZCA9IChuOiBudW1iZXIpID0+IChuIDwgMTAgPyBgMCR7bn1gIDogYCR7bn1gKTtcbiAgICAgICAgY29uc3QgdGV4dCA9IGAke21pbnV0ZXN9bSAke3BhZChzZWNvbmRzKX1zYDtcbiAgICAgICAgdGhpcy50aW1lclRleHQuc2V0VGV4dCh0ZXh0KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZVRpbWVVcCgpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuZ2FtZU92ZXIgfHwgdGhpcy5nYW1lQ29tcGxldGVkKSByZXR1cm47XG4gICAgICAgIHRoaXMuZ2FtZU92ZXIgPSB0cnVlO1xuICAgICAgICB0aGlzLnF1aXpPcGVuID0gZmFsc2U7XG4gICAgICAgIHRoaXMucXVpekxvY2tlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmp1bXBCdXR0b24uc2V0QWxwaGEoMC40KTtcbiAgICAgICAgdGhpcy5jbG9zZVF1aXpNb2RhbCgpO1xuICAgICAgICB0aGlzLm9wZW5UaW1lVXBNb2RhbCgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgb3BlbkVuZE1vZGFsKCk6IHZvaWQge1xuICAgICAgICBpZiAoIXRoaXMuZW5kTW9kYWwpIHJldHVybjtcbiAgICAgICAgY29uc3QgcGFuZWwgPSB0aGlzLmVuZE1vZGFsLmdldERhdGEoJ3BhbmVsJykgYXMgUGhhc2VyLkdhbWVPYmplY3RzLkNvbnRhaW5lcjtcbiAgICAgICAgY29uc3Qgb3ZlcmxheSA9IHRoaXMuZW5kTW9kYWwuZ2V0RGF0YSgnb3ZlcmxheScpIGFzIFBoYXNlci5HYW1lT2JqZWN0cy5SZWN0YW5nbGUgfCB1bmRlZmluZWQ7XG4gICAgICAgIHBhbmVsLnNldFNjYWxlKDAuOSk7XG4gICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnNldEFscGhhKDApO1xuICAgICAgICB0aGlzLmVuZE1vZGFsLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgIHRoaXMuZW5kTW9kYWwuc2V0QWxwaGEoMSk7XG4gICAgICAgIHRoaXMubGF1bmNoQ29uZmV0dGkoKTtcbiAgICAgICAgdGhpcy5zdWJtaXRTZXNzaW9uUmVzdWx0KCk7XG4gICAgICAgIHRoaXMudHdlZW5zLmFkZCh7XG4gICAgICAgICAgICB0YXJnZXRzOiBvdmVybGF5LFxuICAgICAgICAgICAgYWxwaGE6IDAuNixcbiAgICAgICAgICAgIGR1cmF0aW9uOiAyMDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudHdlZW5zLmFkZCh7XG4gICAgICAgICAgICB0YXJnZXRzOiBwYW5lbCxcbiAgICAgICAgICAgIHNjYWxlOiAxLFxuICAgICAgICAgICAgZHVyYXRpb246IDI2MCxcbiAgICAgICAgICAgIGVhc2U6ICdCYWNrLmVhc2VPdXQnXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgbGF1bmNoQ29uZmV0dGkoKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLmNvbmZldHRpRW1pdHRlcikge1xuICAgICAgICAgICAgdGhpcy5jb25mZXR0aUVtaXR0ZXIuZGVzdHJveSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmNvbmZldHRpQnVyc3RFdmVudCkge1xuICAgICAgICAgICAgdGhpcy5jb25mZXR0aUJ1cnN0RXZlbnQucmVtb3ZlKGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMuY29uZmV0dGlCdXJzdEV2ZW50ID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSB0aGlzLnNjYWxlO1xuICAgICAgICB0aGlzLmNvbmZldHRpRW1pdHRlciA9IHRoaXMuYWRkLnBhcnRpY2xlcygwLCAwLCAndGlsZS1mbG93ZXInLCB7XG4gICAgICAgICAgICBzcGVlZDogeyBtaW46IDkwLCBtYXg6IDE3MCB9LFxuICAgICAgICAgICAgYW5nbGU6IHsgbWluOiAwLCBtYXg6IDM2MCB9LFxuICAgICAgICAgICAgcm90YXRlOiB7IG1pbjogLTIyMCwgbWF4OiAyMjAgfSxcbiAgICAgICAgICAgIHNjYWxlOiB7IHN0YXJ0OiAwLjMyLCBlbmQ6IDAuMSB9LFxuICAgICAgICAgICAgbGlmZXNwYW46IHsgbWluOiAxNDAwLCBtYXg6IDIyMDAgfSxcbiAgICAgICAgICAgIHF1YW50aXR5OiAwLFxuICAgICAgICAgICAgZnJlcXVlbmN5OiAtMSxcbiAgICAgICAgICAgIGdyYXZpdHlZOiAxNjBcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5jb25mZXR0aUVtaXR0ZXIuc2V0U2Nyb2xsRmFjdG9yKDApO1xuICAgICAgICB0aGlzLmNvbmZldHRpRW1pdHRlci5zZXREZXB0aCgyMTAwKTtcbiAgICAgICAgdGhpcy51aVJvb3QuYWRkKHRoaXMuY29uZmV0dGlFbWl0dGVyKTtcblxuICAgICAgICB0aGlzLmNvbmZldHRpQnVyc3RFdmVudCA9IHRoaXMudGltZS5hZGRFdmVudCh7XG4gICAgICAgICAgICBkZWxheTogOTAwLFxuICAgICAgICAgICAgcmVwZWF0OiAwLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY29uZmV0dGlFbWl0dGVyKSByZXR1cm47XG4gICAgICAgICAgICAgICAgdGhpcy5jb25mZXR0aUVtaXR0ZXIuZXhwbG9kZSgxOCwgd2lkdGggLyAyLCBoZWlnaHQgLyAyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy50aW1lLmRlbGF5ZWRDYWxsKDM1MDAsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY29uZmV0dGlFbWl0dGVyPy5kZXN0cm95KCk7XG4gICAgICAgICAgICB0aGlzLmNvbmZldHRpRW1pdHRlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMuY29uZmV0dGlCdXJzdEV2ZW50Py5yZW1vdmUoZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5jb25mZXR0aUJ1cnN0RXZlbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgb3BlblRpbWVVcE1vZGFsKCk6IHZvaWQge1xuICAgICAgICBpZiAoIXRoaXMudGltZVVwTW9kYWwpIHJldHVybjtcbiAgICAgICAgY29uc3QgcGFuZWwgPSB0aGlzLnRpbWVVcE1vZGFsLmdldERhdGEoJ3BhbmVsJykgYXMgUGhhc2VyLkdhbWVPYmplY3RzLkNvbnRhaW5lcjtcbiAgICAgICAgcGFuZWwuc2V0U2NhbGUoMC45Nik7XG4gICAgICAgIHRoaXMudGltZVVwTW9kYWwuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgdGhpcy50aW1lVXBNb2RhbC5zZXRBbHBoYSgwKTtcbiAgICAgICAgdGhpcy50d2VlbnMuYWRkKHtcbiAgICAgICAgICAgIHRhcmdldHM6IHRoaXMudGltZVVwTW9kYWwsXG4gICAgICAgICAgICBhbHBoYTogMSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAyMDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudHdlZW5zLmFkZCh7XG4gICAgICAgICAgICB0YXJnZXRzOiBwYW5lbCxcbiAgICAgICAgICAgIHNjYWxlOiAxLFxuICAgICAgICAgICAgZHVyYXRpb246IDI0MCxcbiAgICAgICAgICAgIGVhc2U6ICdCYWNrLmVhc2VPdXQnXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgY2xvc2VUaW1lVXBNb2RhbCgpOiB2b2lkIHtcbiAgICAgICAgaWYgKCF0aGlzLnRpbWVVcE1vZGFsKSByZXR1cm47XG4gICAgICAgIHRoaXMudGltZVVwTW9kYWwuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjbG9zZUVuZE1vZGFsKCk6IHZvaWQge1xuICAgICAgICBpZiAoIXRoaXMuZW5kTW9kYWwpIHJldHVybjtcbiAgICAgICAgdGhpcy5lbmRNb2RhbC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgdGhpcy5lbmRNb2RhbC5zZXRBbHBoYSgwKTtcbiAgICAgICAgY29uc3Qgb3ZlcmxheSA9IHRoaXMuZW5kTW9kYWwuZ2V0RGF0YSgnb3ZlcmxheScpIGFzIFBoYXNlci5HYW1lT2JqZWN0cy5SZWN0YW5nbGUgfCB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChvdmVybGF5KSBvdmVybGF5LnNldEFscGhhKDApO1xuICAgICAgICBpZiAodGhpcy5jb25mZXR0aUVtaXR0ZXIpIHtcbiAgICAgICAgICAgIHRoaXMuY29uZmV0dGlFbWl0dGVyLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIHRoaXMuY29uZmV0dGlFbWl0dGVyID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmNvbmZldHRpQnVyc3RFdmVudCkge1xuICAgICAgICAgICAgdGhpcy5jb25mZXR0aUJ1cnN0RXZlbnQucmVtb3ZlKGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMuY29uZmV0dGlCdXJzdEV2ZW50ID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdWJtaXRTZXNzaW9uUmVzdWx0KCk6IHZvaWQge1xuICAgICAgICBpZiAoIXRoaXMuc2Vzc2lvbkdhbWVJZCkgcmV0dXJuO1xuICAgICAgICBpbXBvcnQoJy4uLy4uL3NlcnZpY2VzL2FwaScpXG4gICAgICAgICAgICAudGhlbigoeyBlbmRHYW1lU2Vzc2lvbiB9KSA9PiBlbmRHYW1lU2Vzc2lvbih0aGlzLnNlc3Npb25HYW1lSWQgYXMgc3RyaW5nLCB0aGlzLnNjb3JlKSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignZW5kR2FtZVNlc3Npb24gZmFpbGVkJywgZXJyKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVzdGFydFJ1bigpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5nYW1lT3ZlciA9IGZhbHNlO1xuICAgICAgICB0aGlzLmdhbWVDb21wbGV0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5xdWl6T3BlbiA9IGZhbHNlO1xuICAgICAgICB0aGlzLnF1aXpMb2NrZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5xdWl6Q3VycmVudEluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5zdGFydE1vZGFsT3BlbiA9IGZhbHNlO1xuICAgICAgICB0aGlzLnNjb3JlID0gMDtcbiAgICAgICAgdGhpcy5zY29yZVRleHQuc2V0VGV4dCgnUE9JTlRTOiAwMCcpO1xuICAgICAgICB0aGlzLmp1bXBEdXJhdGlvbk1zID0gOTAwO1xuXG4gICAgICAgIHRoaXMuY2xvc2VUaW1lVXBNb2RhbCgpO1xuICAgICAgICB0aGlzLmNsb3NlUXVpek1vZGFsKCk7XG4gICAgICAgIHRoaXMuY2xvc2VFbmRNb2RhbCgpO1xuICAgICAgICBpZiAodGhpcy5zdGFydE1vZGFsKSB0aGlzLnN0YXJ0TW9kYWwuc2V0VmlzaWJsZShmYWxzZSk7XG5cbiAgICAgICAgY29uc3Qgc3RhcnRQb3MgPSB0aGlzLmdldExlYWZQb3NpdGlvbigwKTtcbiAgICAgICAgdGhpcy5wbGF5ZXIuc2V0UG9zaXRpb24oc3RhcnRQb3MueCwgc3RhcnRQb3MueSk7XG4gICAgICAgIHRoaXMucGxheWVyLnBsYXlJZGxlKCk7XG5cbiAgICAgICAgdGhpcy5jdXJyZW50TGVhZkluZGV4ID0gMDtcbiAgICAgICAgY29uc3QgbmV4dFBvcyA9IHRoaXMuZ2V0TGVhZlBvc2l0aW9uKHRoaXMuY3VycmVudExlYWZJbmRleCArIDEpO1xuICAgICAgICB0aGlzLnBsYXllci5mbGlwKG5leHRQb3MueCA+IHN0YXJ0UG9zLngpO1xuXG4gICAgICAgIHRoaXMuY2FtZXJhLnNjcm9sbFkgPSBzdGFydFBvcy55IC0gOTAwO1xuXG4gICAgICAgIHRoaXMuc3RvcFRpbWVyKCk7XG4gICAgICAgIHRoaXMudGltZXJPdmVybGF5LnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgIHRoaXMuanVtcEJ1dHRvbi5zZXRBbHBoYSgxKTtcbiAgICAgICAgdGhpcy5zdGFydFRpbWVyKCk7XG4gICAgICAgIHRoaXMub3BlblF1aXpNb2RhbCgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgdXBkYXRlU2NvcmUoZGVsdGE6IG51bWJlcik6IHZvaWQge1xuICAgICAgICB0aGlzLnNjb3JlICs9IGRlbHRhO1xuICAgICAgICBjb25zdCBwb2ludHMgPSBNYXRoLm1heCgwLCB0aGlzLnNjb3JlKTtcbiAgICAgICAgdGhpcy5zY29yZVRleHQuc2V0VGV4dChgUE9JTlRTOiAke3BvaW50cy50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9YCk7XG4gICAgICAgIGlmICh0aGlzLmVuZE1vZGFsU2NvcmVUZXh0KSB7XG4gICAgICAgICAgICB0aGlzLmVuZE1vZGFsU2NvcmVUZXh0LnNldFRleHQoYFNjb3JlOiAke3RoaXMuc2NvcmV9YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHVwZGF0ZUVuZFRpbWVUZXh0KCk6IHZvaWQge1xuICAgICAgICBpZiAoIXRoaXMuZW5kTW9kYWxUaW1lVGV4dCkgcmV0dXJuO1xuICAgICAgICBjb25zdCBiYXNlTXMgPSB0aGlzLnNlc3Npb25UaW1lTGltaXQgJiYgdGhpcy5zZXNzaW9uVGltZUxpbWl0ID4gMFxuICAgICAgICAgICAgPyB0aGlzLnNlc3Npb25UaW1lTGltaXQgKiAxMDAwXG4gICAgICAgICAgICA6IDE4MDAwMDtcbiAgICAgICAgY29uc3QgZWxhcHNlZE1zID0gYmFzZU1zIC0gdGhpcy50b3RhbFRpbWVNcztcbiAgICAgICAgY29uc3QgdG90YWxTZWNvbmRzID0gTWF0aC5tYXgoMCwgTWF0aC5mbG9vcihlbGFwc2VkTXMgLyAxMDAwKSk7XG4gICAgICAgIGNvbnN0IG1pbnV0ZXMgPSBNYXRoLmZsb29yKHRvdGFsU2Vjb25kcyAvIDYwKTtcbiAgICAgICAgY29uc3Qgc2Vjb25kcyA9IHRvdGFsU2Vjb25kcyAlIDYwO1xuICAgICAgICBjb25zdCBwYWQgPSAobjogbnVtYmVyKSA9PiAobiA8IDEwID8gYDAke259YCA6IGAke259YCk7XG4gICAgICAgIHRoaXMuZW5kTW9kYWxUaW1lVGV4dC5zZXRUZXh0KGBUaW1lOiAke3BhZChtaW51dGVzKX06JHtwYWQoc2Vjb25kcyl9YCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzcGVlZFVwSnVtcCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5qdW1wRHVyYXRpb25NcyA9IE1hdGgubWF4KDQ1MCwgdGhpcy5qdW1wRHVyYXRpb25NcyAtIDQwKTtcbiAgICB9XG5cbiAgICBnZXRMZWFmUG9zaXRpb24oaW5kZXg6IG51bWJlcikge1xuICAgICAgICBpZiAodGhpcy5sZWFmUGF0aC5sZW5ndGggPiAwICYmIHRoaXMudHJhY2tJbWFnZSkge1xuICAgICAgICAgICAgY29uc3QgcGF0aExlbmd0aCA9IHRoaXMubGVhZlBhdGgubGVuZ3RoO1xuICAgICAgICAgICAgY29uc3QgcGF0aEluZGV4ID0gTWF0aC5taW4oaW5kZXgsIHBhdGhMZW5ndGggLSAxKTtcblxuICAgICAgICAgICAgY29uc3QgbGVhZiA9IHRoaXMubGVhZlBhdGhbcGF0aEluZGV4XTtcbiAgICAgICAgICAgIGNvbnN0IHNjYWxlID0gdGhpcy50cmFja0ltYWdlLnNjYWxlWDtcbiAgICAgICAgICAgIGNvbnN0IG1hcExlZnQgPSB0aGlzLnRyYWNrSW1hZ2UueCAtIHRoaXMudHJhY2tJbWFnZS5kaXNwbGF5V2lkdGggLyAyO1xuICAgICAgICAgICAgY29uc3QgbWFwVG9wID0gdGhpcy50cmFja0ltYWdlLnkgLSB0aGlzLnRyYWNrSW1hZ2UuZGlzcGxheUhlaWdodDtcblxuICAgICAgICAgICAgY29uc3QgeCA9IG1hcExlZnQgKyAobGVhZi54ICogc2NhbGUpO1xuICAgICAgICAgICAgY29uc3QgeSA9IG1hcFRvcCArIChsZWFmLnkgKiBzY2FsZSk7XG5cbiAgICAgICAgICAgIHJldHVybiB7IHgsIHkgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNlbnRlclggPSB0aGlzLnNjYWxlLndpZHRoIC8gMjtcbiAgICAgICAgY29uc3QgaXNMZWZ0ID0gaW5kZXggJSAyID09PSAwO1xuICAgICAgICBcbiAgICAgICAgLy8gQWRqYWNlbnQgbGVhZiA9IGFsdGVybmF0ZSBsZWZ0L3JpZ2h0IHdpdGggYSBzbWFsbCB1cHdhcmQgc3RlcFxuICAgICAgICBjb25zdCB5ID0gdGhpcy5sZWFmU3RhcnRZIC0gKGluZGV4ICogdGhpcy5sZWFmU3RlcFkpO1xuICAgICAgICBjb25zdCB4ID0gaXNMZWZ0ID8gY2VudGVyWCAtIHRoaXMubGVhZlNpZGVPZmZzZXQgOiBjZW50ZXJYICsgdGhpcy5sZWFmU2lkZU9mZnNldDtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB7IHgsIHkgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGJ1aWxkTGVhZlBhdGgodGV4dHVyZUtleTogc3RyaW5nKTogUGhhc2VyLk1hdGguVmVjdG9yMltdIHtcbiAgICAgICAgY29uc3QgdGV4dHVyZSA9IHRoaXMudGV4dHVyZXMuZ2V0KHRleHR1cmVLZXkpO1xuICAgICAgICBjb25zdCBzb3VyY2UgPSB0ZXh0dXJlPy5nZXRTb3VyY2VJbWFnZSgpIGFzIEhUTUxJbWFnZUVsZW1lbnQgfCBIVE1MQ2FudmFzRWxlbWVudCB8IHVuZGVmaW5lZDtcblxuICAgICAgICBpZiAoIXNvdXJjZSB8fCAhc291cmNlLndpZHRoIHx8ICFzb3VyY2UuaGVpZ2h0KSB7XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjYW52YXMgPSB0aGlzLnN5cy5nYW1lLmNhbnZhcy5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgICBjYW52YXMud2lkdGggPSBzb3VyY2Uud2lkdGg7XG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSBzb3VyY2UuaGVpZ2h0O1xuXG4gICAgICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICBpZiAoIWN0eCkgcmV0dXJuIFtdO1xuXG4gICAgICAgIGN0eC5kcmF3SW1hZ2Uoc291cmNlLCAwLCAwKTtcbiAgICAgICAgY29uc3QgaW1hZ2VEYXRhID0gY3R4LmdldEltYWdlRGF0YSgwLCAwLCBzb3VyY2Uud2lkdGgsIHNvdXJjZS5oZWlnaHQpO1xuICAgICAgICBjb25zdCBkYXRhID0gaW1hZ2VEYXRhLmRhdGE7XG5cbiAgICAgICAgY29uc3Qgd2lkdGggPSBzb3VyY2Uud2lkdGg7XG4gICAgICAgIGNvbnN0IGhlaWdodCA9IHNvdXJjZS5oZWlnaHQ7XG4gICAgICAgIGNvbnN0IHZpc2l0ZWQgPSBuZXcgVWludDhBcnJheSh3aWR0aCAqIGhlaWdodCk7XG4gICAgICAgIGNvbnN0IGNlbnRlcnM6IFBoYXNlci5NYXRoLlZlY3RvcjJbXSA9IFtdO1xuXG4gICAgICAgIGNvbnN0IGlzTGVhZlBpeGVsID0gKGlkeDogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByID0gZGF0YVtpZHhdIC8gMjU1O1xuICAgICAgICAgICAgY29uc3QgZyA9IGRhdGFbaWR4ICsgMV0gLyAyNTU7XG4gICAgICAgICAgICBjb25zdCBiID0gZGF0YVtpZHggKyAyXSAvIDI1NTtcblxuICAgICAgICAgICAgY29uc3QgbWF4ID0gTWF0aC5tYXgociwgZywgYik7XG4gICAgICAgICAgICBjb25zdCBtaW4gPSBNYXRoLm1pbihyLCBnLCBiKTtcbiAgICAgICAgICAgIGNvbnN0IGRlbHRhID0gbWF4IC0gbWluO1xuXG4gICAgICAgICAgICBpZiAoZGVsdGEgPT09IDApIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgbGV0IGh1ZSA9IDA7XG4gICAgICAgICAgICBpZiAobWF4ID09PSByKSB7XG4gICAgICAgICAgICAgICAgaHVlID0gKChnIC0gYikgLyBkZWx0YSkgJSA2O1xuICAgICAgICAgICAgfSBlbHNlIGlmIChtYXggPT09IGcpIHtcbiAgICAgICAgICAgICAgICBodWUgPSAoYiAtIHIpIC8gZGVsdGEgKyAyO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBodWUgPSAociAtIGcpIC8gZGVsdGEgKyA0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaHVlID0gTWF0aC5yb3VuZChodWUgKiA2MCk7XG4gICAgICAgICAgICBpZiAoaHVlIDwgMCkgaHVlICs9IDM2MDtcblxuICAgICAgICAgICAgY29uc3Qgc2F0dXJhdGlvbiA9IG1heCA9PT0gMCA/IDAgOiBkZWx0YSAvIG1heDtcblxuICAgICAgICAgICAgY29uc3QgaXNHcmVlbkh1ZSA9IGh1ZSA+PSA3MCAmJiBodWUgPD0gMTUwO1xuICAgICAgICAgICAgY29uc3QgaXNTYXR1cmF0ZWQgPSBzYXR1cmF0aW9uID49IDAuMzU7XG5cbiAgICAgICAgICAgIHJldHVybiBpc0dyZWVuSHVlICYmIGlzU2F0dXJhdGVkO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IG1pbkJsb2JTaXplID0gNDUwMDtcbiAgICAgICAgY29uc3Qgc3RhY2s6IG51bWJlcltdID0gW107XG5cbiAgICAgICAgZm9yIChsZXQgeSA9IDA7IHkgPCBoZWlnaHQ7IHkrKykge1xuICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSB5ICogd2lkdGggKyB4O1xuICAgICAgICAgICAgICAgIGlmICh2aXNpdGVkW2luZGV4XSkgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhSW5kZXggPSBpbmRleCAqIDQ7XG4gICAgICAgICAgICAgICAgaWYgKCFpc0xlYWZQaXhlbChkYXRhSW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZpc2l0ZWRbaW5kZXhdID0gMTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbGV0IHN1bVggPSAwO1xuICAgICAgICAgICAgICAgIGxldCBzdW1ZID0gMDtcbiAgICAgICAgICAgICAgICBsZXQgY291bnQgPSAwO1xuICAgICAgICAgICAgICAgIGxldCBtaW5YID0geDtcbiAgICAgICAgICAgICAgICBsZXQgbWF4WCA9IHg7XG4gICAgICAgICAgICAgICAgbGV0IG1pblkgPSB5O1xuICAgICAgICAgICAgICAgIGxldCBtYXhZID0geTtcblxuICAgICAgICAgICAgICAgIHN0YWNrLnB1c2goaW5kZXgpO1xuICAgICAgICAgICAgICAgIHZpc2l0ZWRbaW5kZXhdID0gMTtcblxuICAgICAgICAgICAgICAgIHdoaWxlIChzdGFjay5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudCA9IHN0YWNrLnBvcCgpIGFzIG51bWJlcjtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3kgPSBNYXRoLmZsb29yKGN1cnJlbnQgLyB3aWR0aCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGN4ID0gY3VycmVudCAtIChjeSAqIHdpZHRoKTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50RGF0YUluZGV4ID0gY3VycmVudCAqIDQ7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNMZWFmUGl4ZWwoY3VycmVudERhdGFJbmRleCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgc3VtWCArPSBjeDtcbiAgICAgICAgICAgICAgICAgICAgc3VtWSArPSBjeTtcbiAgICAgICAgICAgICAgICAgICAgY291bnQgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN4IDwgbWluWCkgbWluWCA9IGN4O1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3ggPiBtYXhYKSBtYXhYID0gY3g7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjeSA8IG1pblkpIG1pblkgPSBjeTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN5ID4gbWF4WSkgbWF4WSA9IGN5O1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChjeCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxlZnQgPSBjdXJyZW50IC0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdmlzaXRlZFtsZWZ0XSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxlZnRJbmRleCA9IGxlZnQgKiA0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0xlYWZQaXhlbChsZWZ0SW5kZXgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpc2l0ZWRbbGVmdF0gPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFjay5wdXNoKGxlZnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpc2l0ZWRbbGVmdF0gPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChjeCA8IHdpZHRoIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmlnaHQgPSBjdXJyZW50ICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdmlzaXRlZFtyaWdodF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByaWdodEluZGV4ID0gcmlnaHQgKiA0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0xlYWZQaXhlbChyaWdodEluZGV4KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXNpdGVkW3JpZ2h0XSA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrLnB1c2gocmlnaHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpc2l0ZWRbcmlnaHRdID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoY3kgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1cCA9IGN1cnJlbnQgLSB3aWR0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdmlzaXRlZFt1cF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1cEluZGV4ID0gdXAgKiA0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0xlYWZQaXhlbCh1cEluZGV4KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXNpdGVkW3VwXSA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrLnB1c2godXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpc2l0ZWRbdXBdID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoY3kgPCBoZWlnaHQgLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkb3duID0gY3VycmVudCArIHdpZHRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF2aXNpdGVkW2Rvd25dKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZG93bkluZGV4ID0gZG93biAqIDQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzTGVhZlBpeGVsKGRvd25JbmRleCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlzaXRlZFtkb3duXSA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrLnB1c2goZG93bik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlzaXRlZFtkb3duXSA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGNvdW50ID49IG1pbkJsb2JTaXplKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJsb2JXaWR0aCA9IG1heFggLSBtaW5YO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBibG9iSGVpZ2h0ID0gbWF4WSAtIG1pblk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFzcGVjdCA9IGJsb2JXaWR0aCAvIChibG9iSGVpZ2h0IHx8IDEpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChibG9iV2lkdGggPj0gOTAgJiYgYmxvYkhlaWdodCA+PSA5MCAmJiBhc3BlY3QgPiAwLjYgJiYgYXNwZWN0IDwgMS43KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjZW50ZXJzLnB1c2gobmV3IFBoYXNlci5NYXRoLlZlY3RvcjIoc3VtWCAvIGNvdW50LCBzdW1ZIC8gY291bnQpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNlbnRlcnMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgY29uc3QgZHkgPSBiLnkgLSBhLnk7XG4gICAgICAgICAgICBpZiAoTWF0aC5hYnMoZHkpID4gMikgcmV0dXJuIGR5O1xuICAgICAgICAgICAgcmV0dXJuIGEueCAtIGIueDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGNlbnRlcnM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2hvdyBwbGF5ZXIgc3RhdGUgLSBjb3JyZWN0IG9yIGluY29ycmVjdFxuICAgICAqL1xuICAgIHNob3dQbGF5ZXJTdGF0ZShzdGF0ZTogJ2NvcnJlY3QnIHwgJ2luY29ycmVjdCcpIHtcbiAgICAgICAgaWYgKHN0YXRlID09PSAnY29ycmVjdCcpIHtcbiAgICAgICAgICAgIHRoaXMucGxheWVyLnNob3dDb3JyZWN0KDgwMCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnBsYXllci5zaG93SW5jb3JyZWN0KDgwMCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHNldFF1aXpGZWVkYmFjayhzdGF0ZTogJ2lkbGUnIHwgJ2NvcnJlY3QnIHwgJ3dyb25nJyk6IHZvaWQge1xuICAgICAgICBpZiAoIXRoaXMucXVpelBhbmVsKSByZXR1cm47XG4gICAgICAgIHRoaXMucXVpelBhbmVsLnNldEZlZWRiYWNrKHN0YXRlKTtcbiAgICAgICAgdGhpcy5xdWl6RmVlZGJhY2tTdGF0ZSA9IHN0YXRlO1xuICAgIH1cblxuICAgIHByaXZhdGUgZGVsYXkobXM6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIHRoaXMudGltZS5kZWxheWVkQ2FsbChtcywgKCkgPT4gcmVzb2x2ZSgpKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIkV2ZW50QnVzIiwiU2NlbmUiLCJFbW90ZUNoYXJhY3RlciIsImdldEdhbWVDb25maWciLCJyZXNvbHZlR2FtZUNvZGUiLCJRdWl6UGFuZWwiLCJHYW1lIiwiY29uc3RydWN0b3IiLCJxdWl6UGFuZWxXaWR0aCIsInF1aXpQYW5lbEhlaWdodCIsInVpU2NhbGUiLCJzYWZlSW5zZXRCb3R0b20iLCJxdWl6RmVlZGJhY2tTdGF0ZSIsInF1aXpPcHRpb25CdXR0b25zIiwicXVpek9wZW4iLCJxdWl6TG9ja2VkIiwicXVpekN1cnJlbnRJbmRleCIsInN0YXJ0TW9kYWxPcGVuIiwiZ2FtZUNvbXBsZXRlZCIsImdhbWVPdmVyIiwidG90YWxUaW1lTXMiLCJqdW1wRHVyYXRpb25NcyIsInNjb3JlIiwiY3VycmVudExlYWZJbmRleCIsInNlc3Npb25JZCIsInNlc3Npb25HYW1lSWQiLCJzZXNzaW9uUXVlc3Rpb25zIiwic2Vzc2lvblRpbWVMaW1pdCIsInF1ZXN0aW9uU291cmNlTG9nZ2VkIiwiZ2FtZUNvZGUiLCJnYW1lQ29uZmlnIiwibGVhZlBhdGgiLCJsZWFmU3RhcnRZIiwibGVhZlN0ZXBZIiwibGVhZlNpZGVPZmZzZXQiLCJpbml0IiwiZGF0YSIsInJlZ2lzdHJ5IiwiZ2V0Iiwic2V0IiwiZ2FtZUlkIiwicXVlc3Rpb25zIiwidGltZUxpbWl0IiwiY3JlYXRlIiwid2lkdGgiLCJoZWlnaHQiLCJzY2FsZSIsImNhbWVyYSIsImNhbWVyYXMiLCJtYWluIiwiY3JlYXRlUGFyYWxsYXhCYWNrZ3JvdW5kIiwidHJhY2tJbWFnZSIsImFkZCIsImltYWdlIiwibWFwS2V5Iiwic2V0T3JpZ2luIiwidHJhY2tTY2FsZSIsInNldFNjYWxlIiwibWFwVG9wIiwieSIsImRpc3BsYXlIZWlnaHQiLCJzZXRCb3VuZHMiLCJ1c2VUZXh0dXJlUGF0aCIsImJ1aWxkTGVhZlBhdGgiLCJzdGFydFBvcyIsImdldExlYWZQb3NpdGlvbiIsInBsYXllciIsIngiLCJuZXh0UG9zIiwiZmxpcCIsInBsYXlJZGxlIiwic2Nyb2xsWSIsInVpQ2FtZXJhIiwic2V0U2Nyb2xsIiwiaWdub3JlIiwiY2hpbGRyZW4iLCJsaXN0IiwiY3JlYXRlVUkiLCJlbWl0Iiwic2V0QmFja2dyb3VuZENvbG9yIiwiYmFja2dyb3VuZENvbG9yIiwicGFyYWxsYXhMYXllcnMiLCJ1cGRhdGUiLCJsZW5ndGgiLCJmb3JFYWNoIiwibGF5ZXIiLCJmYWN0b3IiLCJnZXREYXRhIiwiYmFzZVkiLCJ1aVJvb3QiLCJjb250YWluZXIiLCJzZXRTY3JvbGxGYWN0b3IiLCJzZXREZXB0aCIsInRpbWVyT3ZlcmxheSIsImh1ZEJhY2tCdXR0b24iLCJiYWNrQmciLCJncmFwaGljcyIsImZpbGxTdHlsZSIsImZpbGxSb3VuZGVkUmVjdCIsImxpbmVTdHlsZSIsInN0cm9rZVJvdW5kZWRSZWN0IiwiYmFja0ljb24iLCJ0ZXh0IiwiZm9udEZhbWlseSIsImZvbnRTaXplIiwiY29sb3IiLCJiYWNrSGl0Iiwiem9uZSIsInNldEludGVyYWN0aXZlIiwidXNlSGFuZEN1cnNvciIsIm9uIiwiaGFuZGxlQmFja1RvR2FtZUxpc3QiLCJzZXRTaXplIiwiaHVkUG9pbnRzUGlsbCIsInBvaW50c0JnIiwicG9pbnRzVyIsInBvaW50c0giLCJzdGFyIiwic2V0VGludCIsInNjb3JlVGV4dCIsImh1ZFRpbWVyUGlsbCIsInRpbWVyQmciLCJ0aW1lclciLCJ0aW1lckgiLCJ0aW1lclRleHQiLCJodWRIZWFydHNQaWxsIiwiaGVhcnRzQmciLCJoZWFydHNXIiwiaGVhcnRzSCIsImhlYXJ0c1RleHQiLCJsYXlvdXRIdWQiLCJqdW1wQnV0dG9uIiwiY3JlYXRlSnVtcEJ1dHRvbiIsInNldFZpc2libGUiLCJzZXRBY3RpdmUiLCJzZXR1cEp1bXBJbnB1dCIsImNyZWF0ZVF1aXpNb2RhbCIsInF1aXpNb2RhbCIsImxheW91dFF1aXoiLCJjcmVhdGVTdGFydE1vZGFsIiwib3BlblN0YXJ0TW9kYWwiLCJjcmVhdGVFbmRNb2RhbCIsImNyZWF0ZVRpbWVVcE1vZGFsIiwidG9wSW5zZXQiLCJNYXRoIiwibWF4Iiwicm91bmQiLCJzaWRlSW5zZXQiLCJnYXAiLCJzZXRQb3NpdGlvbiIsInJpZ2h0RWRnZSIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsImJnIiwicmVjdGFuZ2xlIiwic2V0U3Ryb2tlU3R5bGUiLCJzZXRGaWxsU3R5bGUiLCJqdW1wQnV0dG9uQmciLCJvblByZXNzIiwib3BlblF1aXpNb2RhbCIsIm9uUmVsZWFzZSIsIlBoYXNlciIsIkdlb20iLCJSZWN0YW5nbGUiLCJDb250YWlucyIsInR3ZWVucyIsInRhcmdldHMiLCJkdXJhdGlvbiIsInlveW8iLCJyZXBlYXQiLCJpbnB1dCIsImVuYWJsZWQiLCJtb3VzZSIsInBvaW50ZXIiLCJib3VuZHMiLCJnZXRCb3VuZHMiLCJjb250YWlucyIsInF1aXpQYW5lbCIsIm9wdGlvbkNvdW50IiwiZGVwdGgiLCJwYXJlbnQiLCJzaG93SW5kZXgiLCJxdWl6UGFuZWxDb250YWluZXIiLCJwYW5lbENvbnRhaW5lciIsInF1aXpQYW5lbFNoYWRvdyIsInBhbmVsU2hhZG93IiwicXVpelBhbmVsQmciLCJwYW5lbEJnIiwicXVpelBhbmVsR2xvdyIsInBhbmVsR2xvdyIsInF1aXpJbmRleFRleHQiLCJpbmRleFRleHQiLCJxdWl6RmVlZGJhY2tUaXRsZVRleHQiLCJmZWVkYmFja1RpdGxlVGV4dCIsInF1aXpGZWVkYmFja1N1YnRpdGxlVGV4dCIsImZlZWRiYWNrU3VidGl0bGVUZXh0IiwicXVpelF1ZXN0aW9uVGV4dCIsInF1ZXN0aW9uVGV4dCIsIm9wdGlvbkJ1dHRvbnMiLCJvbk9wdGlvblNlbGVjdGVkIiwiaW5kZXgiLCJoYW5kbGVRdWl6QW5zd2VyIiwib3ZlcmxheSIsInBhbmVsV2lkdGgiLCJtaW4iLCJwYW5lbEhlaWdodCIsInRpdGxlIiwiYWxpZ24iLCJ3b3JkV3JhcCIsInVzZUFkdmFuY2VkV3JhcCIsImJ1dHRvbiIsImNyZWF0ZVN0YXJ0QnV0dG9uIiwic3RhcnRNb2RhbCIsImJsb2NrZXIiLCJzaGFwZSIsInBhbmVsQm91bmRzIiwic3VidGl0bGUiLCJzdGF0c0dhcCIsImNhcmRXaWR0aCIsImZsb29yIiwiY2FyZEhlaWdodCIsInN0YXRzWSIsInNjb3JlQ2FyZCIsInRpbWVDYXJkIiwic2NvcmVDYXJkQ29udGFpbmVyIiwidGltZUNhcmRDb250YWluZXIiLCJzY29yZUxhYmVsIiwidGltZUxhYmVsIiwiZW5kTW9kYWxTY29yZVRleHQiLCJlbmRNb2RhbFRpbWVUZXh0IiwicmVzdGFydEJ1dHRvbiIsImNyZWF0ZUVuZFJlc3RhcnRCdXR0b24iLCJlbmRNb2RhbCIsInNldERhdGEiLCJyYWRpdXMiLCJzaGFkb3ciLCJkcmF3IiwiZmlsbCIsInN0cm9rZSIsImNsZWFyIiwiaGl0IiwiZWFzZSIsInJlc3RhcnRSdW4iLCJjcmVhdGVSZXN0YXJ0QnV0dG9uIiwidGltZVVwTW9kYWwiLCJoaXRQYWQiLCJoaXRXIiwiaGl0SCIsImNsb3NlU3RhcnRNb2RhbCIsInNldEFscGhhIiwic3RvcFRpbWVyIiwiYWxwaGEiLCJzdGFydFRpbWVyIiwic2V0UXVlc3Rpb24iLCJzZXRGZWVkYmFjayIsInJlc3VsdCIsImxheW91dCIsImlzSnVtcGluZyIsInF1ZXN0aW9uUG9vbCIsImdldFF1ZXN0aW9uUG9vbCIsInF1ZXN0aW9uIiwidG90YWwiLCJvcHRpb25zIiwicGFuZWwiLCJjbG9zZVF1aXpNb2RhbCIsImlzQ29ycmVjdCIsImNvcnJlY3RJbmRleCIsInNlbGVjdGVkT3B0aW9uSWQiLCJvcHRpb25JZHMiLCJzZXNzaW9uUXVlc3Rpb25JZCIsInN1Ym1pdEFuc3dlciIsInJlcyIsImlzX2NvcnJlY3QiLCJlcnJvciIsImNvbnNvbGUiLCJidG4iLCJyZWRyYXciLCJzZXRRdWl6RmVlZGJhY2siLCJ1cGRhdGVTY29yZSIsInNwZWVkVXBKdW1wIiwiZGVsYXkiLCJoYW5kbGVKdW1wIiwidGltZSIsImRlbGF5ZWRDYWxsIiwic2hvd1BsYXllclN0YXRlIiwic3RhcnRYIiwib25Db21wbGV0ZSIsImFwaVF1ZXN0aW9ucyIsImxvZyIsImNvdW50Iiwic2FtcGxlIiwiY29udGVudCIsIm1hcCIsIml0ZW0iLCJvcHQiLCJpZCIsImZpbmRJbmRleCIsInNlc3Npb25fcXVlc3Rpb25faWQiLCJ3YXJuIiwibmV4dEluZGV4IiwibWF4SW5kZXgiLCJOdW1iZXIiLCJQT1NJVElWRV9JTkZJTklUWSIsInRhcmdldFBvcyIsInN0b3BJZGxlIiwianVtcFRvIiwic2hvd0NvcnJlY3QiLCJ1cGRhdGVFbmRUaW1lVGV4dCIsIm9wZW5FbmRNb2RhbCIsInRpbWVyRXZlbnQiLCJyZW1vdmUiLCJ1cGRhdGVUaW1lclRleHQiLCJhZGRFdmVudCIsImxvb3AiLCJjYWxsYmFjayIsImhhbmRsZVRpbWVVcCIsIm1zIiwidG90YWxTZWNvbmRzIiwibWludXRlcyIsInNlY29uZHMiLCJwYWQiLCJuIiwic2V0VGV4dCIsIm9wZW5UaW1lVXBNb2RhbCIsImxhdW5jaENvbmZldHRpIiwic3VibWl0U2Vzc2lvblJlc3VsdCIsImNvbmZldHRpRW1pdHRlciIsImRlc3Ryb3kiLCJjb25mZXR0aUJ1cnN0RXZlbnQiLCJ1bmRlZmluZWQiLCJwYXJ0aWNsZXMiLCJzcGVlZCIsImFuZ2xlIiwicm90YXRlIiwic3RhcnQiLCJlbmQiLCJsaWZlc3BhbiIsInF1YW50aXR5IiwiZnJlcXVlbmN5IiwiZ3Jhdml0eVkiLCJleHBsb2RlIiwiY2xvc2VUaW1lVXBNb2RhbCIsImNsb3NlRW5kTW9kYWwiLCJ0aGVuIiwiZW5kR2FtZVNlc3Npb24iLCJjYXRjaCIsImVyciIsImRlbHRhIiwicG9pbnRzIiwidG9TdHJpbmciLCJwYWRTdGFydCIsImJhc2VNcyIsImVsYXBzZWRNcyIsInBhdGhMZW5ndGgiLCJwYXRoSW5kZXgiLCJsZWFmIiwic2NhbGVYIiwibWFwTGVmdCIsImRpc3BsYXlXaWR0aCIsImNlbnRlclgiLCJpc0xlZnQiLCJ0ZXh0dXJlS2V5IiwidGV4dHVyZSIsInRleHR1cmVzIiwic291cmNlIiwiZ2V0U291cmNlSW1hZ2UiLCJjYW52YXMiLCJzeXMiLCJnYW1lIiwib3duZXJEb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjdHgiLCJnZXRDb250ZXh0IiwiZHJhd0ltYWdlIiwiaW1hZ2VEYXRhIiwiZ2V0SW1hZ2VEYXRhIiwidmlzaXRlZCIsIlVpbnQ4QXJyYXkiLCJjZW50ZXJzIiwiaXNMZWFmUGl4ZWwiLCJpZHgiLCJyIiwiZyIsImIiLCJodWUiLCJzYXR1cmF0aW9uIiwiaXNHcmVlbkh1ZSIsImlzU2F0dXJhdGVkIiwibWluQmxvYlNpemUiLCJzdGFjayIsImRhdGFJbmRleCIsInN1bVgiLCJzdW1ZIiwibWluWCIsIm1heFgiLCJtaW5ZIiwibWF4WSIsInB1c2giLCJjdXJyZW50IiwicG9wIiwiY3kiLCJjeCIsImN1cnJlbnREYXRhSW5kZXgiLCJsZWZ0IiwibGVmdEluZGV4IiwicmlnaHQiLCJyaWdodEluZGV4IiwidXAiLCJ1cEluZGV4IiwiZG93biIsImRvd25JbmRleCIsImJsb2JXaWR0aCIsImJsb2JIZWlnaHQiLCJhc3BlY3QiLCJWZWN0b3IyIiwic29ydCIsImEiLCJkeSIsImFicyIsInN0YXRlIiwic2hvd0luY29ycmVjdCIsIlByb21pc2UiLCJyZXNvbHZlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/game/scenes/Game.ts\n");

/***/ }),

/***/ "(pages-dir-node)/./src/game/scenes/GameOver.ts":
/*!*************************************!*\
  !*** ./src/game/scenes/GameOver.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GameOver: () => (/* binding */ GameOver)\n/* harmony export */ });\n/* harmony import */ var _EventBus__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../EventBus */ \"(pages-dir-node)/./src/game/EventBus.ts\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _gameConfig__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../gameConfig */ \"(pages-dir-node)/./src/game/gameConfig.ts\");\n/* harmony import */ var _services_api__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../services/api */ \"(pages-dir-node)/./src/services/api.ts\");\n\n\n\n\nclass GameOver extends phaser__WEBPACK_IMPORTED_MODULE_1__.Scene {\n    constructor(){\n        super('GameOver');\n    }\n    init(data) {\n        this.dataPayload = data;\n    }\n    create() {\n        const { width, height } = this.scale;\n        const gameCode = (0,_gameConfig__WEBPACK_IMPORTED_MODULE_2__.resolveGameCode)(this.registry.get('gameCode'));\n        const gameConfig = (0,_gameConfig__WEBPACK_IMPORTED_MODULE_2__.getGameConfig)(gameCode);\n        const { gameId, score, bonus, result, reason } = this.dataPayload || {\n            gameId: null,\n            score: 0,\n            bonus: 0,\n            result: 'lose',\n            reason: ''\n        };\n        if (gameId) {\n            (0,_services_api__WEBPACK_IMPORTED_MODULE_3__.endGameSession)(gameId, score).catch((error)=>{\n                console.error('endGameSession failed', error);\n            });\n        }\n        this.camera = this.cameras.main;\n        this.camera.setBackgroundColor(result === 'win' ? 0x16a34a : 0xdc2626);\n        this.background = this.add.image(width / 2, height / 2, gameConfig.mapKey);\n        this.background.setAlpha(0.5);\n        this.gameOverText = this.add.text(width / 2, 220, result === 'win' ? 'Chiến Thắng!' : 'Hết Giờ', {\n            fontFamily: 'Arial Black',\n            fontSize: 64,\n            color: '#ffffff',\n            stroke: '#000000',\n            strokeThickness: 8,\n            align: 'center'\n        }).setOrigin(0.5).setDepth(100);\n        const bonusText = bonus > 0 ? `(+${bonus} thưởng)` : '';\n        this.detailText = this.add.text(width / 2, 340, `Điểm: ${score} ${bonusText}\\n${reason}`, {\n            fontFamily: 'Arial',\n            fontSize: 26,\n            color: '#e2e8f0',\n            align: 'center'\n        }).setOrigin(0.5).setDepth(100);\n        this.restartButton = this.createButton(width / 2, 520, 'Chơi lại');\n        _EventBus__WEBPACK_IMPORTED_MODULE_0__.EventBus.emit('current-scene-ready', this);\n    }\n    createButton(x, y, label) {\n        const button = this.add.container(x, y);\n        const bg = this.add.rectangle(0, 0, 240, 56, 0x1f2937).setStrokeStyle(2, 0xfbbf24);\n        const text = this.add.text(0, 0, label, {\n            fontFamily: 'Arial Black',\n            fontSize: 24,\n            color: '#f8fafc'\n        }).setOrigin(0.5);\n        button.add([\n            bg,\n            text\n        ]);\n        button.setSize(240, 56);\n        button.setInteractive(new Phaser.Geom.Rectangle(-120, -28, 240, 56), Phaser.Geom.Rectangle.Contains);\n        button.on('pointerover', ()=>bg.setFillStyle(0x334155));\n        button.on('pointerout', ()=>bg.setFillStyle(0x1f2937));\n        button.on('pointerdown', ()=>this.changeScene());\n        return button;\n    }\n    changeScene() {\n        const gameCode = (0,_gameConfig__WEBPACK_IMPORTED_MODULE_2__.resolveGameCode)(this.registry.get('gameCode'));\n        this.scene.start('MainMenu', {\n            gameCode\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9nYW1lL3NjZW5lcy9HYW1lT3Zlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBdUM7QUFDUjtBQUNnQztBQUNYO0FBVTdDLE1BQU1LLGlCQUFpQkoseUNBQUtBO0lBUy9CSyxhQUNBO1FBQ0ksS0FBSyxDQUFDO0lBQ1Y7SUFFQUMsS0FBTUMsSUFBa0IsRUFDeEI7UUFDSSxJQUFJLENBQUNDLFdBQVcsR0FBR0Q7SUFDdkI7SUFFQUUsU0FDQTtRQUNJLE1BQU0sRUFBRUMsS0FBSyxFQUFFQyxNQUFNLEVBQUUsR0FBRyxJQUFJLENBQUNDLEtBQUs7UUFDcEMsTUFBTUMsV0FBV1gsNERBQWVBLENBQUMsSUFBSSxDQUFDWSxRQUFRLENBQUNDLEdBQUcsQ0FBQztRQUNuRCxNQUFNQyxhQUFhZiwwREFBYUEsQ0FBQ1k7UUFDakMsTUFBTSxFQUFFSSxNQUFNLEVBQUVDLEtBQUssRUFBRUMsS0FBSyxFQUFFQyxNQUFNLEVBQUVDLE1BQU0sRUFBRSxHQUFHLElBQUksQ0FBQ2IsV0FBVyxJQUFJO1lBQ2pFUyxRQUFRO1lBQ1JDLE9BQU87WUFDUEMsT0FBTztZQUNQQyxRQUFRO1lBQ1JDLFFBQVE7UUFDWjtRQUVBLElBQUlKLFFBQVE7WUFDUmQsNkRBQWNBLENBQUNjLFFBQVFDLE9BQU9JLEtBQUssQ0FBQyxDQUFDQztnQkFDakNDLFFBQVFELEtBQUssQ0FBQyx5QkFBeUJBO1lBQzNDO1FBQ0o7UUFFQSxJQUFJLENBQUNFLE1BQU0sR0FBRyxJQUFJLENBQUNDLE9BQU8sQ0FBQ0MsSUFBSTtRQUMvQixJQUFJLENBQUNGLE1BQU0sQ0FBQ0csa0JBQWtCLENBQUNSLFdBQVcsUUFBUSxXQUFXO1FBRTdELElBQUksQ0FBQ1MsVUFBVSxHQUFHLElBQUksQ0FBQ0MsR0FBRyxDQUFDQyxLQUFLLENBQUNyQixRQUFRLEdBQUdDLFNBQVMsR0FBR0ssV0FBV2dCLE1BQU07UUFDekUsSUFBSSxDQUFDSCxVQUFVLENBQUNJLFFBQVEsQ0FBQztRQUV6QixJQUFJLENBQUNDLFlBQVksR0FBRyxJQUFJLENBQUNKLEdBQUcsQ0FBQ0ssSUFBSSxDQUFDekIsUUFBUSxHQUFHLEtBQUtVLFdBQVcsUUFBUSxpQkFBaUIsV0FBVztZQUM3RmdCLFlBQVk7WUFBZUMsVUFBVTtZQUFJQyxPQUFPO1lBQ2hEQyxRQUFRO1lBQVdDLGlCQUFpQjtZQUNwQ0MsT0FBTztRQUNYLEdBQUdDLFNBQVMsQ0FBQyxLQUFLQyxRQUFRLENBQUM7UUFFM0IsTUFBTUMsWUFBWXpCLFFBQVEsSUFBSSxDQUFDLEVBQUUsRUFBRUEsTUFBTSxRQUFRLENBQUMsR0FBRztRQUNyRCxJQUFJLENBQUMwQixVQUFVLEdBQUcsSUFBSSxDQUFDZixHQUFHLENBQUNLLElBQUksQ0FBQ3pCLFFBQVEsR0FBRyxLQUN2QyxDQUFDLE1BQU0sRUFBRVEsTUFBTSxDQUFDLEVBQUUwQixVQUFVLEVBQUUsRUFBRXZCLFFBQVEsRUFDeEM7WUFDSWUsWUFBWTtZQUFTQyxVQUFVO1lBQUlDLE9BQU87WUFDMUNHLE9BQU87UUFDWCxHQUNGQyxTQUFTLENBQUMsS0FBS0MsUUFBUSxDQUFDO1FBRTFCLElBQUksQ0FBQ0csYUFBYSxHQUFHLElBQUksQ0FBQ0MsWUFBWSxDQUFDckMsUUFBUSxHQUFHLEtBQUs7UUFDdkRYLCtDQUFRQSxDQUFDaUQsSUFBSSxDQUFDLHVCQUF1QixJQUFJO0lBQzdDO0lBRUFELGFBQWNFLENBQVMsRUFBRUMsQ0FBUyxFQUFFQyxLQUFhLEVBQ2pEO1FBQ0ksTUFBTUMsU0FBUyxJQUFJLENBQUN0QixHQUFHLENBQUN1QixTQUFTLENBQUNKLEdBQUdDO1FBQ3JDLE1BQU1JLEtBQUssSUFBSSxDQUFDeEIsR0FBRyxDQUFDeUIsU0FBUyxDQUFDLEdBQUcsR0FBRyxLQUFLLElBQUksVUFBVUMsY0FBYyxDQUFDLEdBQUc7UUFDekUsTUFBTXJCLE9BQU8sSUFBSSxDQUFDTCxHQUFHLENBQUNLLElBQUksQ0FBQyxHQUFHLEdBQUdnQixPQUFPO1lBQ3BDZixZQUFZO1lBQWVDLFVBQVU7WUFBSUMsT0FBTztRQUNwRCxHQUFHSSxTQUFTLENBQUM7UUFFYlUsT0FBT3RCLEdBQUcsQ0FBQztZQUFDd0I7WUFBSW5CO1NBQUs7UUFDckJpQixPQUFPSyxPQUFPLENBQUMsS0FBSztRQUNwQkwsT0FBT00sY0FBYyxDQUFDLElBQUlDLE9BQU9DLElBQUksQ0FBQ0MsU0FBUyxDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksS0FBSyxLQUFLRixPQUFPQyxJQUFJLENBQUNDLFNBQVMsQ0FBQ0MsUUFBUTtRQUNuR1YsT0FBT1csRUFBRSxDQUFDLGVBQWUsSUFBTVQsR0FBR1UsWUFBWSxDQUFDO1FBQy9DWixPQUFPVyxFQUFFLENBQUMsY0FBYyxJQUFNVCxHQUFHVSxZQUFZLENBQUM7UUFDOUNaLE9BQU9XLEVBQUUsQ0FBQyxlQUFlLElBQU0sSUFBSSxDQUFDRSxXQUFXO1FBRS9DLE9BQU9iO0lBQ1g7SUFFQWEsY0FDQTtRQUNJLE1BQU1wRCxXQUFXWCw0REFBZUEsQ0FBQyxJQUFJLENBQUNZLFFBQVEsQ0FBQ0MsR0FBRyxDQUFDO1FBQ25ELElBQUksQ0FBQ21ELEtBQUssQ0FBQ0MsS0FBSyxDQUFDLFlBQVk7WUFBRXREO1FBQVM7SUFDNUM7QUFDSiIsInNvdXJjZXMiOlsiL1VzZXJzL25iMjMwNjAxL0RvY3VtZW50cy9waGFzZXItZ2FtZWRldi9zcmMvZ2FtZS9zY2VuZXMvR2FtZU92ZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRXZlbnRCdXMgfSBmcm9tICcuLi9FdmVudEJ1cyc7XG5pbXBvcnQgeyBTY2VuZSB9IGZyb20gJ3BoYXNlcic7XG5pbXBvcnQgeyBnZXRHYW1lQ29uZmlnLCByZXNvbHZlR2FtZUNvZGUgfSBmcm9tICcuLi9nYW1lQ29uZmlnJztcbmltcG9ydCB7IGVuZEdhbWVTZXNzaW9uIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvYXBpJztcblxudHlwZSBHYW1lT3ZlckRhdGEgPSB7XG4gICAgZ2FtZUlkPzogc3RyaW5nIHwgbnVsbDtcbiAgICBzY29yZTogbnVtYmVyO1xuICAgIGJvbnVzOiBudW1iZXI7XG4gICAgcmVzdWx0OiAnd2luJyB8ICdsb3NlJztcbiAgICByZWFzb246IHN0cmluZztcbn07XG5cbmV4cG9ydCBjbGFzcyBHYW1lT3ZlciBleHRlbmRzIFNjZW5lXG57XG4gICAgY2FtZXJhOiBQaGFzZXIuQ2FtZXJhcy5TY2VuZTJELkNhbWVyYTtcbiAgICBiYWNrZ3JvdW5kOiBQaGFzZXIuR2FtZU9iamVjdHMuSW1hZ2U7XG4gICAgZ2FtZU92ZXJUZXh0IDogUGhhc2VyLkdhbWVPYmplY3RzLlRleHQ7XG4gICAgZGV0YWlsVGV4dDogUGhhc2VyLkdhbWVPYmplY3RzLlRleHQ7XG4gICAgcmVzdGFydEJ1dHRvbjogUGhhc2VyLkdhbWVPYmplY3RzLkNvbnRhaW5lcjtcbiAgICBkYXRhUGF5bG9hZD86IEdhbWVPdmVyRGF0YTtcblxuICAgIGNvbnN0cnVjdG9yICgpXG4gICAge1xuICAgICAgICBzdXBlcignR2FtZU92ZXInKTtcbiAgICB9XG5cbiAgICBpbml0IChkYXRhOiBHYW1lT3ZlckRhdGEpXG4gICAge1xuICAgICAgICB0aGlzLmRhdGFQYXlsb2FkID0gZGF0YTtcbiAgICB9XG5cbiAgICBjcmVhdGUgKClcbiAgICB7XG4gICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gdGhpcy5zY2FsZTtcbiAgICAgICAgY29uc3QgZ2FtZUNvZGUgPSByZXNvbHZlR2FtZUNvZGUodGhpcy5yZWdpc3RyeS5nZXQoJ2dhbWVDb2RlJykgYXMgc3RyaW5nIHwgdW5kZWZpbmVkKTtcbiAgICAgICAgY29uc3QgZ2FtZUNvbmZpZyA9IGdldEdhbWVDb25maWcoZ2FtZUNvZGUpO1xuICAgICAgICBjb25zdCB7IGdhbWVJZCwgc2NvcmUsIGJvbnVzLCByZXN1bHQsIHJlYXNvbiB9ID0gdGhpcy5kYXRhUGF5bG9hZCB8fCB7XG4gICAgICAgICAgICBnYW1lSWQ6IG51bGwsXG4gICAgICAgICAgICBzY29yZTogMCxcbiAgICAgICAgICAgIGJvbnVzOiAwLFxuICAgICAgICAgICAgcmVzdWx0OiAnbG9zZScsXG4gICAgICAgICAgICByZWFzb246ICcnXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGdhbWVJZCkge1xuICAgICAgICAgICAgZW5kR2FtZVNlc3Npb24oZ2FtZUlkLCBzY29yZSkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignZW5kR2FtZVNlc3Npb24gZmFpbGVkJywgZXJyb3IpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNhbWVyYSA9IHRoaXMuY2FtZXJhcy5tYWluXG4gICAgICAgIHRoaXMuY2FtZXJhLnNldEJhY2tncm91bmRDb2xvcihyZXN1bHQgPT09ICd3aW4nID8gMHgxNmEzNGEgOiAweGRjMjYyNik7XG5cbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kID0gdGhpcy5hZGQuaW1hZ2Uod2lkdGggLyAyLCBoZWlnaHQgLyAyLCBnYW1lQ29uZmlnLm1hcEtleSk7XG4gICAgICAgIHRoaXMuYmFja2dyb3VuZC5zZXRBbHBoYSgwLjUpO1xuXG4gICAgICAgIHRoaXMuZ2FtZU92ZXJUZXh0ID0gdGhpcy5hZGQudGV4dCh3aWR0aCAvIDIsIDIyMCwgcmVzdWx0ID09PSAnd2luJyA/ICdDaGnhur9uIFRo4bqvbmchJyA6ICdI4bq/dCBHaeG7nScsIHtcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCBCbGFjaycsIGZvbnRTaXplOiA2NCwgY29sb3I6ICcjZmZmZmZmJyxcbiAgICAgICAgICAgIHN0cm9rZTogJyMwMDAwMDAnLCBzdHJva2VUaGlja25lc3M6IDgsXG4gICAgICAgICAgICBhbGlnbjogJ2NlbnRlcidcbiAgICAgICAgfSkuc2V0T3JpZ2luKDAuNSkuc2V0RGVwdGgoMTAwKTtcblxuICAgICAgICBjb25zdCBib251c1RleHQgPSBib251cyA+IDAgPyBgKCske2JvbnVzfSB0aMaw4bufbmcpYCA6ICcnO1xuICAgICAgICB0aGlzLmRldGFpbFRleHQgPSB0aGlzLmFkZC50ZXh0KHdpZHRoIC8gMiwgMzQwLFxuICAgICAgICAgICAgYMSQaeG7g206ICR7c2NvcmV9ICR7Ym9udXNUZXh0fVxcbiR7cmVhc29ufWAsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsJywgZm9udFNpemU6IDI2LCBjb2xvcjogJyNlMmU4ZjAnLFxuICAgICAgICAgICAgICAgIGFsaWduOiAnY2VudGVyJ1xuICAgICAgICAgICAgfVxuICAgICAgICApLnNldE9yaWdpbigwLjUpLnNldERlcHRoKDEwMCk7XG5cbiAgICAgICAgdGhpcy5yZXN0YXJ0QnV0dG9uID0gdGhpcy5jcmVhdGVCdXR0b24od2lkdGggLyAyLCA1MjAsICdDaMahaSBs4bqhaScpO1xuICAgICAgICBFdmVudEJ1cy5lbWl0KCdjdXJyZW50LXNjZW5lLXJlYWR5JywgdGhpcyk7XG4gICAgfVxuXG4gICAgY3JlYXRlQnV0dG9uICh4OiBudW1iZXIsIHk6IG51bWJlciwgbGFiZWw6IHN0cmluZylcbiAgICB7XG4gICAgICAgIGNvbnN0IGJ1dHRvbiA9IHRoaXMuYWRkLmNvbnRhaW5lcih4LCB5KTtcbiAgICAgICAgY29uc3QgYmcgPSB0aGlzLmFkZC5yZWN0YW5nbGUoMCwgMCwgMjQwLCA1NiwgMHgxZjI5MzcpLnNldFN0cm9rZVN0eWxlKDIsIDB4ZmJiZjI0KTtcbiAgICAgICAgY29uc3QgdGV4dCA9IHRoaXMuYWRkLnRleHQoMCwgMCwgbGFiZWwsIHtcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCBCbGFjaycsIGZvbnRTaXplOiAyNCwgY29sb3I6ICcjZjhmYWZjJ1xuICAgICAgICB9KS5zZXRPcmlnaW4oMC41KTtcblxuICAgICAgICBidXR0b24uYWRkKFtiZywgdGV4dF0pO1xuICAgICAgICBidXR0b24uc2V0U2l6ZSgyNDAsIDU2KTtcbiAgICAgICAgYnV0dG9uLnNldEludGVyYWN0aXZlKG5ldyBQaGFzZXIuR2VvbS5SZWN0YW5nbGUoLTEyMCwgLTI4LCAyNDAsIDU2KSwgUGhhc2VyLkdlb20uUmVjdGFuZ2xlLkNvbnRhaW5zKTtcbiAgICAgICAgYnV0dG9uLm9uKCdwb2ludGVyb3ZlcicsICgpID0+IGJnLnNldEZpbGxTdHlsZSgweDMzNDE1NSkpO1xuICAgICAgICBidXR0b24ub24oJ3BvaW50ZXJvdXQnLCAoKSA9PiBiZy5zZXRGaWxsU3R5bGUoMHgxZjI5MzcpKTtcbiAgICAgICAgYnV0dG9uLm9uKCdwb2ludGVyZG93bicsICgpID0+IHRoaXMuY2hhbmdlU2NlbmUoKSk7XG5cbiAgICAgICAgcmV0dXJuIGJ1dHRvbjtcbiAgICB9XG5cbiAgICBjaGFuZ2VTY2VuZSAoKVxuICAgIHtcbiAgICAgICAgY29uc3QgZ2FtZUNvZGUgPSByZXNvbHZlR2FtZUNvZGUodGhpcy5yZWdpc3RyeS5nZXQoJ2dhbWVDb2RlJykgYXMgc3RyaW5nIHwgdW5kZWZpbmVkKTtcbiAgICAgICAgdGhpcy5zY2VuZS5zdGFydCgnTWFpbk1lbnUnLCB7IGdhbWVDb2RlIH0pO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJFdmVudEJ1cyIsIlNjZW5lIiwiZ2V0R2FtZUNvbmZpZyIsInJlc29sdmVHYW1lQ29kZSIsImVuZEdhbWVTZXNzaW9uIiwiR2FtZU92ZXIiLCJjb25zdHJ1Y3RvciIsImluaXQiLCJkYXRhIiwiZGF0YVBheWxvYWQiLCJjcmVhdGUiLCJ3aWR0aCIsImhlaWdodCIsInNjYWxlIiwiZ2FtZUNvZGUiLCJyZWdpc3RyeSIsImdldCIsImdhbWVDb25maWciLCJnYW1lSWQiLCJzY29yZSIsImJvbnVzIiwicmVzdWx0IiwicmVhc29uIiwiY2F0Y2giLCJlcnJvciIsImNvbnNvbGUiLCJjYW1lcmEiLCJjYW1lcmFzIiwibWFpbiIsInNldEJhY2tncm91bmRDb2xvciIsImJhY2tncm91bmQiLCJhZGQiLCJpbWFnZSIsIm1hcEtleSIsInNldEFscGhhIiwiZ2FtZU92ZXJUZXh0IiwidGV4dCIsImZvbnRGYW1pbHkiLCJmb250U2l6ZSIsImNvbG9yIiwic3Ryb2tlIiwic3Ryb2tlVGhpY2tuZXNzIiwiYWxpZ24iLCJzZXRPcmlnaW4iLCJzZXREZXB0aCIsImJvbnVzVGV4dCIsImRldGFpbFRleHQiLCJyZXN0YXJ0QnV0dG9uIiwiY3JlYXRlQnV0dG9uIiwiZW1pdCIsIngiLCJ5IiwibGFiZWwiLCJidXR0b24iLCJjb250YWluZXIiLCJiZyIsInJlY3RhbmdsZSIsInNldFN0cm9rZVN0eWxlIiwic2V0U2l6ZSIsInNldEludGVyYWN0aXZlIiwiUGhhc2VyIiwiR2VvbSIsIlJlY3RhbmdsZSIsIkNvbnRhaW5zIiwib24iLCJzZXRGaWxsU3R5bGUiLCJjaGFuZ2VTY2VuZSIsInNjZW5lIiwic3RhcnQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/game/scenes/GameOver.ts\n");

/***/ }),

/***/ "(pages-dir-node)/./src/game/scenes/MainMenu.ts":
/*!*************************************!*\
  !*** ./src/game/scenes/MainMenu.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MainMenu: () => (/* binding */ MainMenu)\n/* harmony export */ });\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _EventBus__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../EventBus */ \"(pages-dir-node)/./src/game/EventBus.ts\");\n/* harmony import */ var _services_api__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../services/api */ \"(pages-dir-node)/./src/services/api.ts\");\n/* harmony import */ var _services_apiMode__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../services/apiMode */ \"(pages-dir-node)/./src/services/apiMode.ts\");\n/* harmony import */ var _gameConfig__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../gameConfig */ \"(pages-dir-node)/./src/game/gameConfig.ts\");\n\n\n\n\n\nclass MainMenu extends phaser__WEBPACK_IMPORTED_MODULE_0__.Scene {\n    constructor(){\n        super('MainMenu'), this.isStarting = false, this.gameCode = 'vocab_race';\n    }\n    init(data) {\n        this.gameCode = (0,_gameConfig__WEBPACK_IMPORTED_MODULE_4__.resolveGameCode)(data?.gameCode ?? this.registry.get('gameCode'));\n        this.registry.set('gameCode', this.gameCode);\n    }\n    create() {\n        const { width, height } = this.scale;\n        const gameConfig = (0,_gameConfig__WEBPACK_IMPORTED_MODULE_4__.getGameConfig)(this.gameCode);\n        this.background = this.add.image(width / 2, height / 2, gameConfig.mapKey).setDisplaySize(width, height);\n        this.logo = this.add.image(width / 2, 220, 'logo').setDepth(100).setScale(0.9);\n        this.title = this.add.text(width / 2, 360, gameConfig.label, {\n            fontFamily: 'Arial Black',\n            fontSize: 46,\n            color: '#ffffff',\n            stroke: '#000000',\n            strokeThickness: 8,\n            align: 'center'\n        }).setOrigin(0.5).setDepth(100);\n        this.description = this.add.text(width / 2, 460, 'Nhấn nút NEXT để nhảy!\\nĐạt điểm cao nhất có thể!', {\n            fontFamily: 'Arial',\n            fontSize: 28,\n            color: '#e2e8f0',\n            align: 'center',\n            wordWrap: {\n                width: 600\n            }\n        }).setOrigin(0.5).setDepth(100);\n        const tokenSource =  true ? 'env_debug_token' : 0;\n        this.debugText = this.add.text(width / 2, 660, `DEBUG: ready | token=static (${tokenSource})`, {\n            fontFamily: 'Arial',\n            fontSize: 16,\n            color: '#f8fafc',\n            align: 'center',\n            wordWrap: {\n                width: 640\n            }\n        }).setOrigin(0.5).setDepth(120);\n        this.startButton = this.createButton(width / 2, 590, 'Bắt đầu');\n        if (gameConfig.code === 'vocab_race') {\n            this.debugText.setText('DEBUG: preflight -> calling /game/list-game ...');\n            (0,_services_api__WEBPACK_IMPORTED_MODULE_2__.fetchGameList)().then((res)=>{\n                console.error('[GAME][PREFLIGHT] list-game success', {\n                    count: res.data?.length ?? 0\n                });\n                this.debugText.setText(`DEBUG: preflight success | list=${res.data?.length ?? 0}`);\n            }).catch((error)=>{\n                const msg = error instanceof Error ? error.message : String(error);\n                console.error('[GAME][PREFLIGHT] list-game failed', {\n                    error: msg\n                });\n                this.debugText.setText(`DEBUG: preflight failed | ${msg}`);\n            });\n        }\n        _EventBus__WEBPACK_IMPORTED_MODULE_1__.EventBus.emit('current-scene-ready', this);\n    }\n    createButton(x, y, label) {\n        const button = this.add.container(x, y);\n        const bg = this.add.rectangle(0, 0, 300, 80, 0x1f2937).setStrokeStyle(3, 0x38bdf8);\n        const text = this.add.text(0, 0, label, {\n            fontFamily: 'Arial Black',\n            fontSize: 32,\n            color: '#f8fafc'\n        }).setOrigin(0.5);\n        button.add([\n            bg,\n            text\n        ]);\n        // Ensure size is set \n        button.setSize(300, 80);\n        // Make interactive with a clear hit area\n        button.setInteractive(new Phaser.Geom.Rectangle(-150, -40, 300, 80), Phaser.Geom.Rectangle.Contains);\n        button.on('pointerover', ()=>{\n            bg.setFillStyle(0x334155);\n            button.setScale(1.1);\n            this.input.setDefaultCursor('pointer');\n        });\n        button.on('pointerout', ()=>{\n            bg.setFillStyle(0x1f2937);\n            button.setScale(1);\n            this.input.setDefaultCursor('default');\n        });\n        button.on('pointerdown', ()=>{\n            if (this.isStarting) return;\n            button.setScale(0.95);\n            this.time.delayedCall(100, ()=>this.changeScene());\n        });\n        return button;\n    }\n    changeScene() {\n        if (this.isStarting) return;\n        this.isStarting = true;\n        this.startButton.setAlpha(0.6);\n        console.log('[GAME][SESSION] Start button clicked', {\n            gameCode: this.gameCode\n        });\n        this.debugText.setText('DEBUG: start clicked -> calling startGameSession...');\n        const gameConfig = (0,_gameConfig__WEBPACK_IMPORTED_MODULE_4__.getGameConfig)(this.gameCode);\n        (0,_services_api__WEBPACK_IMPORTED_MODULE_2__.startGameSession)(gameConfig.code).then((res)=>{\n            const data = res.data;\n            console.log('[GAME][SESSION] startGameSession success', {\n                gameCode: this.gameCode,\n                apiMode: (0,_services_apiMode__WEBPACK_IMPORTED_MODULE_3__.getApiMode)(),\n                sessionId: data.id,\n                gameId: data.game_id,\n                questionCount: data.questions?.length ?? 0,\n                timeLimit: data.game?.time_limit ?? null\n            });\n            this.debugText.setText(`DEBUG: API success | questions=${data.questions?.length ?? 0}`);\n            const nextScene = gameConfig.code === 'train_game' ? 'TrainGame' : 'Game';\n            this.scene.start(nextScene, {\n                gameCode: this.gameCode,\n                sessionId: data.id,\n                gameId: data.game_id,\n                questions: data.questions,\n                timeLimit: data.game.time_limit\n            });\n        }).catch((err)=>{\n            console.error('[GAME][SESSION] startGameSession failed, fallback to local questions', {\n                gameCode: this.gameCode,\n                apiMode: (0,_services_apiMode__WEBPACK_IMPORTED_MODULE_3__.getApiMode)(),\n                error: err\n            });\n            const errorMessage = err instanceof Error ? err.message : String(err);\n            this.debugText.setText(`DEBUG: API failed -> ${errorMessage}`);\n            const nextScene = gameConfig.code === 'train_game' ? 'TrainGame' : 'Game';\n            this.scene.start(nextScene, {\n                gameCode: this.gameCode,\n                sessionId: null,\n                gameId: null,\n                questions: null,\n                timeLimit: null\n            });\n        }).finally(()=>{\n            this.isStarting = false;\n            this.startButton.setAlpha(1);\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9nYW1lL3NjZW5lcy9NYWluTWVudS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQTRDO0FBQ0w7QUFDOEI7QUFDakI7QUFDVztBQUV4RCxNQUFNTyxpQkFBaUJQLHlDQUFLQTtJQVcvQlEsYUFDQTtRQUNJLEtBQUssQ0FBQyxrQkFMVkMsYUFBc0IsWUFDdEJDLFdBQW1CO0lBS25CO0lBRUFDLEtBQU1DLElBQWtDLEVBQ3hDO1FBQ0ksSUFBSSxDQUFDRixRQUFRLEdBQUdKLDREQUFlQSxDQUFDTSxNQUFNRixZQUFhLElBQUksQ0FBQ0csUUFBUSxDQUFDQyxHQUFHLENBQUM7UUFDckUsSUFBSSxDQUFDRCxRQUFRLENBQUNFLEdBQUcsQ0FBQyxZQUFZLElBQUksQ0FBQ0wsUUFBUTtJQUMvQztJQUVBTSxTQUNBO1FBQ0ksTUFBTSxFQUFFQyxLQUFLLEVBQUVDLE1BQU0sRUFBRSxHQUFHLElBQUksQ0FBQ0MsS0FBSztRQUNwQyxNQUFNQyxhQUFhZiwwREFBYUEsQ0FBQyxJQUFJLENBQUNLLFFBQVE7UUFFOUMsSUFBSSxDQUFDVyxVQUFVLEdBQUcsSUFBSSxDQUFDQyxHQUFHLENBQUNDLEtBQUssQ0FBQ04sUUFBUSxHQUFHQyxTQUFTLEdBQUdFLFdBQVdJLE1BQU0sRUFBRUMsY0FBYyxDQUFDUixPQUFPQztRQUVqRyxJQUFJLENBQUNRLElBQUksR0FBRyxJQUFJLENBQUNKLEdBQUcsQ0FBQ0MsS0FBSyxDQUFDTixRQUFRLEdBQUcsS0FBSyxRQUFRVSxRQUFRLENBQUMsS0FBS0MsUUFBUSxDQUFDO1FBRTFFLElBQUksQ0FBQ0MsS0FBSyxHQUFHLElBQUksQ0FBQ1AsR0FBRyxDQUFDUSxJQUFJLENBQUNiLFFBQVEsR0FBRyxLQUFLRyxXQUFXVyxLQUFLLEVBQUU7WUFDekRDLFlBQVk7WUFBZUMsVUFBVTtZQUFJQyxPQUFPO1lBQ2hEQyxRQUFRO1lBQVdDLGlCQUFpQjtZQUNwQ0MsT0FBTztRQUNYLEdBQUdDLFNBQVMsQ0FBQyxLQUFLWCxRQUFRLENBQUM7UUFFM0IsSUFBSSxDQUFDWSxXQUFXLEdBQUcsSUFBSSxDQUFDakIsR0FBRyxDQUFDUSxJQUFJLENBQUNiLFFBQVEsR0FBRyxLQUN4QyxxREFDQTtZQUNJZSxZQUFZO1lBQVNDLFVBQVU7WUFBSUMsT0FBTztZQUMxQ0csT0FBTztZQUNQRyxVQUFVO2dCQUFFdkIsT0FBTztZQUFJO1FBQzNCLEdBQ0ZxQixTQUFTLENBQUMsS0FBS1gsUUFBUSxDQUFDO1FBRTFCLE1BQU1jLGNBQWNDLEtBQTBDLEdBQUcsb0JBQW9CLENBQXVCO1FBQzVHLElBQUksQ0FBQ0csU0FBUyxHQUFHLElBQUksQ0FBQ3ZCLEdBQUcsQ0FBQ1EsSUFBSSxDQUFDYixRQUFRLEdBQUcsS0FBSyxDQUFDLDZCQUE2QixFQUFFd0IsWUFBWSxDQUFDLENBQUMsRUFBRTtZQUMzRlQsWUFBWTtZQUNaQyxVQUFVO1lBQ1ZDLE9BQU87WUFDUEcsT0FBTztZQUNQRyxVQUFVO2dCQUFFdkIsT0FBTztZQUFJO1FBQzNCLEdBQUdxQixTQUFTLENBQUMsS0FBS1gsUUFBUSxDQUFDO1FBRTNCLElBQUksQ0FBQ21CLFdBQVcsR0FBRyxJQUFJLENBQUNDLFlBQVksQ0FBQzlCLFFBQVEsR0FBRyxLQUFLO1FBRXJELElBQUlHLFdBQVc0QixJQUFJLEtBQUssY0FBYztZQUNsQyxJQUFJLENBQUNILFNBQVMsQ0FBQ0ksT0FBTyxDQUFDO1lBQ3ZCL0MsNERBQWFBLEdBQ1JnRCxJQUFJLENBQUMsQ0FBQ0M7Z0JBQ0hDLFFBQVFDLEtBQUssQ0FBQyx1Q0FBdUM7b0JBQ2pEQyxPQUFPSCxJQUFJdkMsSUFBSSxFQUFFMkMsVUFBVTtnQkFDL0I7Z0JBQ0EsSUFBSSxDQUFDVixTQUFTLENBQUNJLE9BQU8sQ0FBQyxDQUFDLGdDQUFnQyxFQUFFRSxJQUFJdkMsSUFBSSxFQUFFMkMsVUFBVSxHQUFHO1lBQ3JGLEdBQ0NDLEtBQUssQ0FBQyxDQUFDSDtnQkFDSixNQUFNSSxNQUFNSixpQkFBaUJLLFFBQVFMLE1BQU1NLE9BQU8sR0FBR0MsT0FBT1A7Z0JBQzVERCxRQUFRQyxLQUFLLENBQUMsc0NBQXNDO29CQUFFQSxPQUFPSTtnQkFBSTtnQkFDakUsSUFBSSxDQUFDWixTQUFTLENBQUNJLE9BQU8sQ0FBQyxDQUFDLDBCQUEwQixFQUFFUSxLQUFLO1lBQzdEO1FBQ1I7UUFFQXhELCtDQUFRQSxDQUFDNEQsSUFBSSxDQUFDLHVCQUF1QixJQUFJO0lBQzdDO0lBRUFkLGFBQWNlLENBQVMsRUFBRUMsQ0FBUyxFQUFFaEMsS0FBYSxFQUNqRDtRQUNJLE1BQU1pQyxTQUFTLElBQUksQ0FBQzFDLEdBQUcsQ0FBQzJDLFNBQVMsQ0FBQ0gsR0FBR0M7UUFDckMsTUFBTUcsS0FBSyxJQUFJLENBQUM1QyxHQUFHLENBQUM2QyxTQUFTLENBQUMsR0FBRyxHQUFHLEtBQUssSUFBSSxVQUFVQyxjQUFjLENBQUMsR0FBRztRQUN6RSxNQUFNdEMsT0FBTyxJQUFJLENBQUNSLEdBQUcsQ0FBQ1EsSUFBSSxDQUFDLEdBQUcsR0FBR0MsT0FBTztZQUNwQ0MsWUFBWTtZQUFlQyxVQUFVO1lBQUlDLE9BQU87UUFDcEQsR0FBR0ksU0FBUyxDQUFDO1FBRWIwQixPQUFPMUMsR0FBRyxDQUFDO1lBQUM0QztZQUFJcEM7U0FBSztRQUVyQixzQkFBc0I7UUFDdEJrQyxPQUFPSyxPQUFPLENBQUMsS0FBSztRQUVwQix5Q0FBeUM7UUFDekNMLE9BQU9NLGNBQWMsQ0FBQyxJQUFJQyxPQUFPQyxJQUFJLENBQUNDLFNBQVMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLEtBQUssS0FBS0YsT0FBT0MsSUFBSSxDQUFDQyxTQUFTLENBQUNDLFFBQVE7UUFFbkdWLE9BQU9XLEVBQUUsQ0FBQyxlQUFlO1lBQ3JCVCxHQUFHVSxZQUFZLENBQUM7WUFDaEJaLE9BQU9wQyxRQUFRLENBQUM7WUFDaEIsSUFBSSxDQUFDaUQsS0FBSyxDQUFDQyxnQkFBZ0IsQ0FBQztRQUNoQztRQUVBZCxPQUFPVyxFQUFFLENBQUMsY0FBYztZQUNwQlQsR0FBR1UsWUFBWSxDQUFDO1lBQ2hCWixPQUFPcEMsUUFBUSxDQUFDO1lBQ2hCLElBQUksQ0FBQ2lELEtBQUssQ0FBQ0MsZ0JBQWdCLENBQUM7UUFDaEM7UUFFQWQsT0FBT1csRUFBRSxDQUFDLGVBQWU7WUFDckIsSUFBSSxJQUFJLENBQUNsRSxVQUFVLEVBQUU7WUFDckJ1RCxPQUFPcEMsUUFBUSxDQUFDO1lBQ2hCLElBQUksQ0FBQ21ELElBQUksQ0FBQ0MsV0FBVyxDQUFDLEtBQUssSUFBTSxJQUFJLENBQUNDLFdBQVc7UUFDckQ7UUFFQSxPQUFPakI7SUFDWDtJQUVBaUIsY0FDQTtRQUNJLElBQUksSUFBSSxDQUFDeEUsVUFBVSxFQUFFO1FBQ3JCLElBQUksQ0FBQ0EsVUFBVSxHQUFHO1FBQ2xCLElBQUksQ0FBQ3FDLFdBQVcsQ0FBQ29DLFFBQVEsQ0FBQztRQUMxQjlCLFFBQVErQixHQUFHLENBQUMsd0NBQXdDO1lBQUV6RSxVQUFVLElBQUksQ0FBQ0EsUUFBUTtRQUFDO1FBQzlFLElBQUksQ0FBQ21DLFNBQVMsQ0FBQ0ksT0FBTyxDQUFDO1FBRXZCLE1BQU03QixhQUFhZiwwREFBYUEsQ0FBQyxJQUFJLENBQUNLLFFBQVE7UUFDOUNQLCtEQUFnQkEsQ0FBQ2lCLFdBQVc0QixJQUFJLEVBQzNCRSxJQUFJLENBQUMsQ0FBQ0M7WUFDSCxNQUFNdkMsT0FBT3VDLElBQUl2QyxJQUFJO1lBQ3JCd0MsUUFBUStCLEdBQUcsQ0FBQyw0Q0FBNEM7Z0JBQ3BEekUsVUFBVSxJQUFJLENBQUNBLFFBQVE7Z0JBQ3ZCMEUsU0FBU2hGLDZEQUFVQTtnQkFDbkJpRixXQUFXekUsS0FBSzBFLEVBQUU7Z0JBQ2xCQyxRQUFRM0UsS0FBSzRFLE9BQU87Z0JBQ3BCQyxlQUFlN0UsS0FBSzhFLFNBQVMsRUFBRW5DLFVBQVU7Z0JBQ3pDb0MsV0FBVy9FLEtBQUtnRixJQUFJLEVBQUVDLGNBQWM7WUFDeEM7WUFDQSxJQUFJLENBQUNoRCxTQUFTLENBQUNJLE9BQU8sQ0FBQyxDQUFDLCtCQUErQixFQUFFckMsS0FBSzhFLFNBQVMsRUFBRW5DLFVBQVUsR0FBRztZQUN0RixNQUFNdUMsWUFBWTFFLFdBQVc0QixJQUFJLEtBQUssZUFBZSxjQUFjO1lBQ25FLElBQUksQ0FBQytDLEtBQUssQ0FBQ0MsS0FBSyxDQUFDRixXQUFXO2dCQUN4QnBGLFVBQVUsSUFBSSxDQUFDQSxRQUFRO2dCQUN2QjJFLFdBQVd6RSxLQUFLMEUsRUFBRTtnQkFDbEJDLFFBQVEzRSxLQUFLNEUsT0FBTztnQkFDcEJFLFdBQVc5RSxLQUFLOEUsU0FBUztnQkFDekJDLFdBQVcvRSxLQUFLZ0YsSUFBSSxDQUFDQyxVQUFVO1lBQ25DO1FBQ0osR0FDQ3JDLEtBQUssQ0FBQyxDQUFDeUM7WUFDSjdDLFFBQVFDLEtBQUssQ0FBQyx3RUFBd0U7Z0JBQ2xGM0MsVUFBVSxJQUFJLENBQUNBLFFBQVE7Z0JBQ3ZCMEUsU0FBU2hGLDZEQUFVQTtnQkFDbkJpRCxPQUFPNEM7WUFDWDtZQUNBLE1BQU1DLGVBQWVELGVBQWV2QyxRQUFRdUMsSUFBSXRDLE9BQU8sR0FBR0MsT0FBT3FDO1lBQ2pFLElBQUksQ0FBQ3BELFNBQVMsQ0FBQ0ksT0FBTyxDQUFDLENBQUMscUJBQXFCLEVBQUVpRCxjQUFjO1lBRTdELE1BQU1KLFlBQVkxRSxXQUFXNEIsSUFBSSxLQUFLLGVBQWUsY0FBYztZQUNuRSxJQUFJLENBQUMrQyxLQUFLLENBQUNDLEtBQUssQ0FBQ0YsV0FBVztnQkFDeEJwRixVQUFVLElBQUksQ0FBQ0EsUUFBUTtnQkFDdkIyRSxXQUFXO2dCQUNYRSxRQUFRO2dCQUNSRyxXQUFXO2dCQUNYQyxXQUFXO1lBQ2Y7UUFDSixHQUNDUSxPQUFPLENBQUM7WUFDTCxJQUFJLENBQUMxRixVQUFVLEdBQUc7WUFDbEIsSUFBSSxDQUFDcUMsV0FBVyxDQUFDb0MsUUFBUSxDQUFDO1FBQzlCO0lBQ1I7QUFDSiIsInNvdXJjZXMiOlsiL1VzZXJzL25iMjMwNjAxL0RvY3VtZW50cy9waGFzZXItZ2FtZWRldi9zcmMvZ2FtZS9zY2VuZXMvTWFpbk1lbnUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgR2FtZU9iamVjdHMsIFNjZW5lIH0gZnJvbSAncGhhc2VyJztcbmltcG9ydCB7IEV2ZW50QnVzIH0gZnJvbSAnLi4vRXZlbnRCdXMnO1xuaW1wb3J0IHsgZmV0Y2hHYW1lTGlzdCwgc3RhcnRHYW1lU2Vzc2lvbiB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL2FwaSc7XG5pbXBvcnQgeyBnZXRBcGlNb2RlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvYXBpTW9kZSc7XG5pbXBvcnQgeyBnZXRHYW1lQ29uZmlnLCByZXNvbHZlR2FtZUNvZGUgfSBmcm9tICcuLi9nYW1lQ29uZmlnJztcblxuZXhwb3J0IGNsYXNzIE1haW5NZW51IGV4dGVuZHMgU2NlbmVcbntcbiAgICBiYWNrZ3JvdW5kOiBHYW1lT2JqZWN0cy5JbWFnZTtcbiAgICBsb2dvOiBHYW1lT2JqZWN0cy5JbWFnZTtcbiAgICB0aXRsZTogR2FtZU9iamVjdHMuVGV4dDtcbiAgICBkZXNjcmlwdGlvbjogR2FtZU9iamVjdHMuVGV4dDtcbiAgICBkZWJ1Z1RleHQ6IEdhbWVPYmplY3RzLlRleHQ7XG4gICAgc3RhcnRCdXR0b246IEdhbWVPYmplY3RzLkNvbnRhaW5lcjtcbiAgICBpc1N0YXJ0aW5nOiBib29sZWFuID0gZmFsc2U7XG4gICAgZ2FtZUNvZGU6IHN0cmluZyA9ICd2b2NhYl9yYWNlJztcblxuICAgIGNvbnN0cnVjdG9yICgpXG4gICAge1xuICAgICAgICBzdXBlcignTWFpbk1lbnUnKTtcbiAgICB9XG5cbiAgICBpbml0IChkYXRhOiB7IGdhbWVDb2RlPzogc3RyaW5nIHwgbnVsbCB9KVxuICAgIHtcbiAgICAgICAgdGhpcy5nYW1lQ29kZSA9IHJlc29sdmVHYW1lQ29kZShkYXRhPy5nYW1lQ29kZSA/PyAodGhpcy5yZWdpc3RyeS5nZXQoJ2dhbWVDb2RlJykgYXMgc3RyaW5nIHwgdW5kZWZpbmVkKSk7XG4gICAgICAgIHRoaXMucmVnaXN0cnkuc2V0KCdnYW1lQ29kZScsIHRoaXMuZ2FtZUNvZGUpO1xuICAgIH1cblxuICAgIGNyZWF0ZSAoKVxuICAgIHtcbiAgICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSB0aGlzLnNjYWxlO1xuICAgICAgICBjb25zdCBnYW1lQ29uZmlnID0gZ2V0R2FtZUNvbmZpZyh0aGlzLmdhbWVDb2RlKTtcblxuICAgICAgICB0aGlzLmJhY2tncm91bmQgPSB0aGlzLmFkZC5pbWFnZSh3aWR0aCAvIDIsIGhlaWdodCAvIDIsIGdhbWVDb25maWcubWFwS2V5KS5zZXREaXNwbGF5U2l6ZSh3aWR0aCwgaGVpZ2h0KTtcblxuICAgICAgICB0aGlzLmxvZ28gPSB0aGlzLmFkZC5pbWFnZSh3aWR0aCAvIDIsIDIyMCwgJ2xvZ28nKS5zZXREZXB0aCgxMDApLnNldFNjYWxlKDAuOSk7XG5cbiAgICAgICAgdGhpcy50aXRsZSA9IHRoaXMuYWRkLnRleHQod2lkdGggLyAyLCAzNjAsIGdhbWVDb25maWcubGFiZWwsIHtcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCBCbGFjaycsIGZvbnRTaXplOiA0NiwgY29sb3I6ICcjZmZmZmZmJyxcbiAgICAgICAgICAgIHN0cm9rZTogJyMwMDAwMDAnLCBzdHJva2VUaGlja25lc3M6IDgsXG4gICAgICAgICAgICBhbGlnbjogJ2NlbnRlcidcbiAgICAgICAgfSkuc2V0T3JpZ2luKDAuNSkuc2V0RGVwdGgoMTAwKTtcblxuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gdGhpcy5hZGQudGV4dCh3aWR0aCAvIDIsIDQ2MCxcbiAgICAgICAgICAgICdOaOG6pW4gbsO6dCBORVhUIMSR4buDIG5o4bqjeSFcXG7EkOG6oXQgxJFp4buDbSBjYW8gbmjhuqV0IGPDsyB0aOG7gyEnLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCcsIGZvbnRTaXplOiAyOCwgY29sb3I6ICcjZTJlOGYwJyxcbiAgICAgICAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsXG4gICAgICAgICAgICAgICAgd29yZFdyYXA6IHsgd2lkdGg6IDYwMCB9XG4gICAgICAgICAgICB9XG4gICAgICAgICkuc2V0T3JpZ2luKDAuNSkuc2V0RGVwdGgoMTAwKTtcblxuICAgICAgICBjb25zdCB0b2tlblNvdXJjZSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0RFQlVHX0JFQVJFUl9UT0tFTiA/ICdlbnZfZGVidWdfdG9rZW4nIDogJ2hhcmRjb2RlZF9kZWJ1Z190b2tlbic7XG4gICAgICAgIHRoaXMuZGVidWdUZXh0ID0gdGhpcy5hZGQudGV4dCh3aWR0aCAvIDIsIDY2MCwgYERFQlVHOiByZWFkeSB8IHRva2VuPXN0YXRpYyAoJHt0b2tlblNvdXJjZX0pYCwge1xuICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsJyxcbiAgICAgICAgICAgIGZvbnRTaXplOiAxNixcbiAgICAgICAgICAgIGNvbG9yOiAnI2Y4ZmFmYycsXG4gICAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsXG4gICAgICAgICAgICB3b3JkV3JhcDogeyB3aWR0aDogNjQwIH1cbiAgICAgICAgfSkuc2V0T3JpZ2luKDAuNSkuc2V0RGVwdGgoMTIwKTtcblxuICAgICAgICB0aGlzLnN0YXJ0QnV0dG9uID0gdGhpcy5jcmVhdGVCdXR0b24od2lkdGggLyAyLCA1OTAsICdC4bqvdCDEkeG6p3UnKTtcblxuICAgICAgICBpZiAoZ2FtZUNvbmZpZy5jb2RlID09PSAndm9jYWJfcmFjZScpIHtcbiAgICAgICAgICAgIHRoaXMuZGVidWdUZXh0LnNldFRleHQoJ0RFQlVHOiBwcmVmbGlnaHQgLT4gY2FsbGluZyAvZ2FtZS9saXN0LWdhbWUgLi4uJyk7XG4gICAgICAgICAgICBmZXRjaEdhbWVMaXN0KClcbiAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tHQU1FXVtQUkVGTElHSFRdIGxpc3QtZ2FtZSBzdWNjZXNzJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgY291bnQ6IHJlcy5kYXRhPy5sZW5ndGggPz8gMFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWJ1Z1RleHQuc2V0VGV4dChgREVCVUc6IHByZWZsaWdodCBzdWNjZXNzIHwgbGlzdD0ke3Jlcy5kYXRhPy5sZW5ndGggPz8gMH1gKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbXNnID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbR0FNRV1bUFJFRkxJR0hUXSBsaXN0LWdhbWUgZmFpbGVkJywgeyBlcnJvcjogbXNnIH0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlYnVnVGV4dC5zZXRUZXh0KGBERUJVRzogcHJlZmxpZ2h0IGZhaWxlZCB8ICR7bXNnfWApO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgRXZlbnRCdXMuZW1pdCgnY3VycmVudC1zY2VuZS1yZWFkeScsIHRoaXMpO1xuICAgIH1cbiAgICBcbiAgICBjcmVhdGVCdXR0b24gKHg6IG51bWJlciwgeTogbnVtYmVyLCBsYWJlbDogc3RyaW5nKVxuICAgIHtcbiAgICAgICAgY29uc3QgYnV0dG9uID0gdGhpcy5hZGQuY29udGFpbmVyKHgsIHkpO1xuICAgICAgICBjb25zdCBiZyA9IHRoaXMuYWRkLnJlY3RhbmdsZSgwLCAwLCAzMDAsIDgwLCAweDFmMjkzNykuc2V0U3Ryb2tlU3R5bGUoMywgMHgzOGJkZjgpO1xuICAgICAgICBjb25zdCB0ZXh0ID0gdGhpcy5hZGQudGV4dCgwLCAwLCBsYWJlbCwge1xuICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsIEJsYWNrJywgZm9udFNpemU6IDMyLCBjb2xvcjogJyNmOGZhZmMnXG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUpO1xuXG4gICAgICAgIGJ1dHRvbi5hZGQoW2JnLCB0ZXh0XSk7XG4gICAgICAgIFxuICAgICAgICAvLyBFbnN1cmUgc2l6ZSBpcyBzZXQgXG4gICAgICAgIGJ1dHRvbi5zZXRTaXplKDMwMCwgODApO1xuXG4gICAgICAgIC8vIE1ha2UgaW50ZXJhY3RpdmUgd2l0aCBhIGNsZWFyIGhpdCBhcmVhXG4gICAgICAgIGJ1dHRvbi5zZXRJbnRlcmFjdGl2ZShuZXcgUGhhc2VyLkdlb20uUmVjdGFuZ2xlKC0xNTAsIC00MCwgMzAwLCA4MCksIFBoYXNlci5HZW9tLlJlY3RhbmdsZS5Db250YWlucyk7XG4gICAgICAgIFxuICAgICAgICBidXR0b24ub24oJ3BvaW50ZXJvdmVyJywgKCkgPT4geyBcbiAgICAgICAgICAgIGJnLnNldEZpbGxTdHlsZSgweDMzNDE1NSk7IFxuICAgICAgICAgICAgYnV0dG9uLnNldFNjYWxlKDEuMSk7XG4gICAgICAgICAgICB0aGlzLmlucHV0LnNldERlZmF1bHRDdXJzb3IoJ3BvaW50ZXInKTsgXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgYnV0dG9uLm9uKCdwb2ludGVyb3V0JywgKCkgPT4geyBcbiAgICAgICAgICAgIGJnLnNldEZpbGxTdHlsZSgweDFmMjkzNyk7IFxuICAgICAgICAgICAgYnV0dG9uLnNldFNjYWxlKDEpO1xuICAgICAgICAgICAgdGhpcy5pbnB1dC5zZXREZWZhdWx0Q3Vyc29yKCdkZWZhdWx0Jyk7IFxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGJ1dHRvbi5vbigncG9pbnRlcmRvd24nLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1N0YXJ0aW5nKSByZXR1cm47XG4gICAgICAgICAgICBidXR0b24uc2V0U2NhbGUoMC45NSk7XG4gICAgICAgICAgICB0aGlzLnRpbWUuZGVsYXllZENhbGwoMTAwLCAoKSA9PiB0aGlzLmNoYW5nZVNjZW5lKCkpO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gYnV0dG9uO1xuICAgIH1cblxuICAgIGNoYW5nZVNjZW5lICgpXG4gICAge1xuICAgICAgICBpZiAodGhpcy5pc1N0YXJ0aW5nKSByZXR1cm47XG4gICAgICAgIHRoaXMuaXNTdGFydGluZyA9IHRydWU7XG4gICAgICAgIHRoaXMuc3RhcnRCdXR0b24uc2V0QWxwaGEoMC42KTtcbiAgICAgICAgY29uc29sZS5sb2coJ1tHQU1FXVtTRVNTSU9OXSBTdGFydCBidXR0b24gY2xpY2tlZCcsIHsgZ2FtZUNvZGU6IHRoaXMuZ2FtZUNvZGUgfSk7XG4gICAgICAgIHRoaXMuZGVidWdUZXh0LnNldFRleHQoJ0RFQlVHOiBzdGFydCBjbGlja2VkIC0+IGNhbGxpbmcgc3RhcnRHYW1lU2Vzc2lvbi4uLicpO1xuXG4gICAgICAgIGNvbnN0IGdhbWVDb25maWcgPSBnZXRHYW1lQ29uZmlnKHRoaXMuZ2FtZUNvZGUpO1xuICAgICAgICBzdGFydEdhbWVTZXNzaW9uKGdhbWVDb25maWcuY29kZSlcbiAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gcmVzLmRhdGE7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tHQU1FXVtTRVNTSU9OXSBzdGFydEdhbWVTZXNzaW9uIHN1Y2Nlc3MnLCB7XG4gICAgICAgICAgICAgICAgICAgIGdhbWVDb2RlOiB0aGlzLmdhbWVDb2RlLFxuICAgICAgICAgICAgICAgICAgICBhcGlNb2RlOiBnZXRBcGlNb2RlKCksXG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25JZDogZGF0YS5pZCxcbiAgICAgICAgICAgICAgICAgICAgZ2FtZUlkOiBkYXRhLmdhbWVfaWQsXG4gICAgICAgICAgICAgICAgICAgIHF1ZXN0aW9uQ291bnQ6IGRhdGEucXVlc3Rpb25zPy5sZW5ndGggPz8gMCxcbiAgICAgICAgICAgICAgICAgICAgdGltZUxpbWl0OiBkYXRhLmdhbWU/LnRpbWVfbGltaXQgPz8gbnVsbFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuZGVidWdUZXh0LnNldFRleHQoYERFQlVHOiBBUEkgc3VjY2VzcyB8IHF1ZXN0aW9ucz0ke2RhdGEucXVlc3Rpb25zPy5sZW5ndGggPz8gMH1gKTtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0U2NlbmUgPSBnYW1lQ29uZmlnLmNvZGUgPT09ICd0cmFpbl9nYW1lJyA/ICdUcmFpbkdhbWUnIDogJ0dhbWUnO1xuICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUuc3RhcnQobmV4dFNjZW5lLCB7XG4gICAgICAgICAgICAgICAgICAgIGdhbWVDb2RlOiB0aGlzLmdhbWVDb2RlLFxuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uSWQ6IGRhdGEuaWQsXG4gICAgICAgICAgICAgICAgICAgIGdhbWVJZDogZGF0YS5nYW1lX2lkLFxuICAgICAgICAgICAgICAgICAgICBxdWVzdGlvbnM6IGRhdGEucXVlc3Rpb25zLFxuICAgICAgICAgICAgICAgICAgICB0aW1lTGltaXQ6IGRhdGEuZ2FtZS50aW1lX2xpbWl0XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbR0FNRV1bU0VTU0lPTl0gc3RhcnRHYW1lU2Vzc2lvbiBmYWlsZWQsIGZhbGxiYWNrIHRvIGxvY2FsIHF1ZXN0aW9ucycsIHtcbiAgICAgICAgICAgICAgICAgICAgZ2FtZUNvZGU6IHRoaXMuZ2FtZUNvZGUsXG4gICAgICAgICAgICAgICAgICAgIGFwaU1vZGU6IGdldEFwaU1vZGUoKSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGVyclxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiBTdHJpbmcoZXJyKTtcbiAgICAgICAgICAgICAgICB0aGlzLmRlYnVnVGV4dC5zZXRUZXh0KGBERUJVRzogQVBJIGZhaWxlZCAtPiAke2Vycm9yTWVzc2FnZX1gKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IG5leHRTY2VuZSA9IGdhbWVDb25maWcuY29kZSA9PT0gJ3RyYWluX2dhbWUnID8gJ1RyYWluR2FtZScgOiAnR2FtZSc7XG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZS5zdGFydChuZXh0U2NlbmUsIHtcbiAgICAgICAgICAgICAgICAgICAgZ2FtZUNvZGU6IHRoaXMuZ2FtZUNvZGUsXG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25JZDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgZ2FtZUlkOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBxdWVzdGlvbnM6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIHRpbWVMaW1pdDogbnVsbFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzU3RhcnRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0QnV0dG9uLnNldEFscGhhKDEpO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIlNjZW5lIiwiRXZlbnRCdXMiLCJmZXRjaEdhbWVMaXN0Iiwic3RhcnRHYW1lU2Vzc2lvbiIsImdldEFwaU1vZGUiLCJnZXRHYW1lQ29uZmlnIiwicmVzb2x2ZUdhbWVDb2RlIiwiTWFpbk1lbnUiLCJjb25zdHJ1Y3RvciIsImlzU3RhcnRpbmciLCJnYW1lQ29kZSIsImluaXQiLCJkYXRhIiwicmVnaXN0cnkiLCJnZXQiLCJzZXQiLCJjcmVhdGUiLCJ3aWR0aCIsImhlaWdodCIsInNjYWxlIiwiZ2FtZUNvbmZpZyIsImJhY2tncm91bmQiLCJhZGQiLCJpbWFnZSIsIm1hcEtleSIsInNldERpc3BsYXlTaXplIiwibG9nbyIsInNldERlcHRoIiwic2V0U2NhbGUiLCJ0aXRsZSIsInRleHQiLCJsYWJlbCIsImZvbnRGYW1pbHkiLCJmb250U2l6ZSIsImNvbG9yIiwic3Ryb2tlIiwic3Ryb2tlVGhpY2tuZXNzIiwiYWxpZ24iLCJzZXRPcmlnaW4iLCJkZXNjcmlwdGlvbiIsIndvcmRXcmFwIiwidG9rZW5Tb3VyY2UiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfREVCVUdfQkVBUkVSX1RPS0VOIiwiZGVidWdUZXh0Iiwic3RhcnRCdXR0b24iLCJjcmVhdGVCdXR0b24iLCJjb2RlIiwic2V0VGV4dCIsInRoZW4iLCJyZXMiLCJjb25zb2xlIiwiZXJyb3IiLCJjb3VudCIsImxlbmd0aCIsImNhdGNoIiwibXNnIiwiRXJyb3IiLCJtZXNzYWdlIiwiU3RyaW5nIiwiZW1pdCIsIngiLCJ5IiwiYnV0dG9uIiwiY29udGFpbmVyIiwiYmciLCJyZWN0YW5nbGUiLCJzZXRTdHJva2VTdHlsZSIsInNldFNpemUiLCJzZXRJbnRlcmFjdGl2ZSIsIlBoYXNlciIsIkdlb20iLCJSZWN0YW5nbGUiLCJDb250YWlucyIsIm9uIiwic2V0RmlsbFN0eWxlIiwiaW5wdXQiLCJzZXREZWZhdWx0Q3Vyc29yIiwidGltZSIsImRlbGF5ZWRDYWxsIiwiY2hhbmdlU2NlbmUiLCJzZXRBbHBoYSIsImxvZyIsImFwaU1vZGUiLCJzZXNzaW9uSWQiLCJpZCIsImdhbWVJZCIsImdhbWVfaWQiLCJxdWVzdGlvbkNvdW50IiwicXVlc3Rpb25zIiwidGltZUxpbWl0IiwiZ2FtZSIsInRpbWVfbGltaXQiLCJuZXh0U2NlbmUiLCJzY2VuZSIsInN0YXJ0IiwiZXJyIiwiZXJyb3JNZXNzYWdlIiwiZmluYWxseSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/game/scenes/MainMenu.ts\n");

/***/ }),

/***/ "(pages-dir-node)/./src/game/scenes/Preloader.ts":
/*!**************************************!*\
  !*** ./src/game/scenes/Preloader.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Preloader: () => (/* binding */ Preloader)\n/* harmony export */ });\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _gameConfig__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../gameConfig */ \"(pages-dir-node)/./src/game/gameConfig.ts\");\n\n\n/**\n * Preloader Scene - Stage 2: Load all game assets with visual progress\n *\n * Features:\n * - Visual progress bar with outline and fill\n * - Percentage text display\n * - Loading status text\n * - Error handling for failed loads\n * - Smooth transition to MainMenu\n */ class Preloader extends phaser__WEBPACK_IMPORTED_MODULE_0__.Scene {\n    constructor(){\n        super('Preloader'), this.loadErrors = [], this.parallaxLayers = [];\n    }\n    init() {\n        const { width, height } = this.cameras.main;\n        const centerX = width / 2;\n        const centerY = height / 2;\n        // Parallax background (loaded in Boot scene)\n        this.createParallaxLoaderBackground();\n        // Logo at top\n        const logo = this.add.image(centerX, centerY - 120, 'logo');\n        logo.setScale(0.8);\n        // Loading text\n        this.add.text(centerX, centerY - 40, 'Loading Game...', {\n            fontFamily: 'Arial',\n            fontSize: '24px',\n            color: '#ffffff',\n            stroke: '#000000',\n            strokeThickness: 4\n        }).setOrigin(0.5);\n        // Progress bar container (outline)\n        const barWidth = 400;\n        const barHeight = 24;\n        const barX = centerX - barWidth / 2;\n        const barY = centerY + 20;\n        // Progress bar background (dark)\n        this.add.rectangle(centerX, barY + barHeight / 2, barWidth + 4, barHeight + 4, 0x000000, 0.5);\n        // Progress bar outline\n        this.add.rectangle(centerX, barY + barHeight / 2, barWidth, barHeight).setStrokeStyle(2, 0xffffff);\n        // Progress bar fill (starts at 0 width)\n        this.progressBar = this.add.rectangle(barX + 2, barY + 2, 0, barHeight - 4, 0x00ff88);\n        this.progressBar.setOrigin(0, 0);\n        // Percentage text\n        this.progressText = this.add.text(centerX, barY + barHeight / 2, '0%', {\n            fontFamily: 'Arial',\n            fontSize: '16px',\n            color: '#ffffff',\n            stroke: '#000000',\n            strokeThickness: 3\n        }).setOrigin(0.5);\n        // Status text (shows current file being loaded)\n        this.statusText = this.add.text(centerX, barY + barHeight + 20, '', {\n            fontFamily: 'Arial',\n            fontSize: '14px',\n            color: '#cccccc'\n        }).setOrigin(0.5);\n        // Progress event - update bar width and percentage\n        this.load.on('progress', (progress)=>{\n            this.progressBar.width = (barWidth - 4) * progress;\n            this.progressText.setText(`${Math.round(progress * 100)}%`);\n        });\n        // File load event - show current file name\n        this.load.on('load', (file)=>{\n            this.statusText.setText(`Loading: ${file.key}`);\n        });\n        // Error handling - track failed loads\n        this.load.on('loaderror', (file)=>{\n            this.loadErrors.push(file.key);\n            console.warn(`Failed to load: ${file.key}`);\n            this.statusText.setText(`Error loading: ${file.key}`);\n            this.statusText.setColor('#ff6666');\n        });\n    }\n    update() {\n        if (!this.parallaxLayers.length) return;\n        const time = this.time.now;\n        this.parallaxLayers.forEach((layer)=>{\n            const speed = layer.getData('speed');\n            layer.tilePositionY = time * speed;\n        });\n    }\n    preload() {\n        const gameCode = this.registry.get('gameCode');\n        const gameConfig = (0,_gameConfig__WEBPACK_IMPORTED_MODULE_1__.getGameConfig)(gameCode);\n        const assetRoot = gameConfig.assetRoot;\n        // Ensure assets resolve from site root even on /game/* routes\n        this.load.setPath('/assets');\n        if (gameConfig.code === 'train_game') {\n            // ==================== TRAIN GAME ASSETS ====================\n            this.load.image('star', 'games/tower/ui/star.png');\n            this.load.image('train-bg', `${assetRoot}/background copy 2.png`);\n            this.load.image('train-engine', `${assetRoot}/train.png`);\n            this.load.image('train-light', `${assetRoot}/light.png`);\n            this.load.image('train-light-red', `${assetRoot}/Fox and Traffic light/Red.png`);\n            this.load.image('train-light-yellow', `${assetRoot}/Fox and Traffic light/Yellow.png`);\n            this.load.image('train-light-green', `${assetRoot}/Fox and Traffic light/Green.png`);\n            this.load.image('train-fox-idle', `${assetRoot}/Fox and Traffic light/Idle.png`);\n            this.load.image('train-fox-correct', `${assetRoot}/Fox and Traffic light/Correct.png`);\n            this.load.image('train-fox-incorrect', `${assetRoot}/Fox and Traffic light/Incorrect.png`);\n            this.load.image('train-barrier', `${assetRoot}/s.png`);\n            for(let i = 1; i <= 11; i += 1){\n                this.load.image(`train-car-${i}`, `${assetRoot}/Train/${i}.png`);\n            }\n            this.load.image(gameConfig.mapKey, `${assetRoot}/${gameConfig.mapPath}`);\n        } else {\n            // ==================== UI ASSETS ====================\n            this.load.image('star', `${assetRoot}/ui/star.png`);\n            this.load.image('ui-example', `${assetRoot}/ui/example.png`);\n            // ==================== GAMEPLAY ASSETS ====================\n            this.load.image('bg-1', `${assetRoot}/backgrounds/1.png`);\n            this.load.image('bg-2', `${assetRoot}/backgrounds/2.png`);\n            this.load.image('bg-3', `${assetRoot}/backgrounds/3.png`);\n            this.load.image('bg-4', `${assetRoot}/backgrounds/4.png`);\n            this.load.image('bg-5', `${assetRoot}/backgrounds/5.png`);\n            this.load.image('bg-6', `${assetRoot}/backgrounds/6.png`);\n            this.load.image(gameConfig.mapKey, `${assetRoot}/${gameConfig.mapPath}`);\n            // ==================== CHARACTER ASSETS ====================\n            this.load.spritesheet('character', `${assetRoot}/characters/character animation tran.png`, {\n                frameWidth: 515,\n                frameHeight: 1128,\n                margin: 15\n            });\n            // char-jump.png is not present in assets; skip loading to avoid load error\n            this.load.image('char-emotes', `${assetRoot}/characters/char-emotes.png`);\n            // ==================== EMOTE ASSETS ====================\n            // Legacy emotes\n            this.load.image('emote-tran-idle', `${assetRoot}/emotes/emo tran .png`);\n            this.load.image('emote-tran-idle-flipped', `${assetRoot}/emotes/emo tran flipped idle.png`);\n            this.load.image('emote-tran-correct', `${assetRoot}/emotes/emo tran correct.png`);\n            this.load.image('emote-tran-correct-flipped', `${assetRoot}/emotes/emo tran flipped correct.png`);\n            this.load.image('emote-tran-incorrect', `${assetRoot}/emotes/emo tran incorrect.png`);\n            this.load.image('emote-tran-incorrect-flipped', `${assetRoot}/emotes/emo tran flipped incorrect.png`);\n            // ==================== TILE ASSETS ====================\n            this.load.image('tile-1', `${assetRoot}/tiles/1.png`);\n            this.load.image('tile-2', `${assetRoot}/tiles/2.png`);\n            this.load.image('tile-3', `${assetRoot}/tiles/3.png`);\n            this.load.image('tile-4', `${assetRoot}/tiles/4.png`);\n            this.load.image('tile-5', `${assetRoot}/tiles/5.png`);\n            this.load.image('tile-6', `${assetRoot}/tiles/6.png`);\n            this.load.image('tile-flower', `${assetRoot}/tiles/flower.png`);\n            this.load.image('tile-green', `${assetRoot}/tiles/green.png`);\n            this.load.image('tile-shadow', `${assetRoot}/tiles/shadoe.png`);\n            // ==================== MAP ASSETS ====================\n            this.load.image('map-all', `${assetRoot}/maps/All map.png`);\n        }\n    }\n    createParallaxLoaderBackground() {\n        const { width, height } = this.cameras.main;\n        const layerKeys = [\n            'bg-1',\n            'bg-2',\n            'bg-3',\n            'bg-4',\n            'bg-5',\n            'bg-6'\n        ];\n        const speeds = [\n            0.01,\n            0.02,\n            0.03,\n            0.04,\n            0.055,\n            0.07\n        ];\n        this.parallaxLayers = layerKeys.map((key, index)=>{\n            const layer = this.add.tileSprite(0, 0, width, height, key).setOrigin(0, 0).setScrollFactor(0).setDepth(-100 + index);\n            layer.setData('speed', speeds[index]);\n            return layer;\n        });\n    }\n    create() {\n        // Log any loading errors\n        if (this.loadErrors.length > 0) {\n            console.warn('Assets failed to load:', this.loadErrors);\n        }\n        const gameCode = this.registry.get('gameCode');\n        // Create global animations here if needed\n        if ((0,_gameConfig__WEBPACK_IMPORTED_MODULE_1__.getGameConfig)(gameCode).code !== 'train_game') {\n            this.createGlobalAnimations();\n        }\n        // Skip MainMenu and go straight into Game\n        this.time.delayedCall(300, ()=>{\n            this.cameras.main.fadeOut(200, 0, 0, 0);\n            this.cameras.main.once('camerafadeoutcomplete', ()=>{\n                if ((0,_gameConfig__WEBPACK_IMPORTED_MODULE_1__.getGameConfig)(gameCode).code === 'train_game') {\n                    this.scene.start('TrainGame', {\n                        gameCode\n                    });\n                } else {\n                    this.scene.start('Game', {\n                        gameCode\n                    });\n                }\n            });\n        });\n    }\n    /**\n     * Create animations that will be used across multiple scenes\n     */ createGlobalAnimations() {\n        this.anims.create({\n            key: 'character-fly',\n            frames: this.anims.generateFrameNumbers('character', {\n                start: 0,\n                end: 9\n            }),\n            frameRate: 10,\n            repeat: -1\n        });\n        this.anims.create({\n            key: 'tran-jump',\n            frames: this.anims.generateFrameNumbers('character', {\n                start: 0,\n                end: 4\n            }),\n            frameRate: 6,\n            repeat: -1\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9nYW1lL3NjZW5lcy9QcmVsb2FkZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUErQjtBQUNlO0FBRTlDOzs7Ozs7Ozs7Q0FTQyxHQUNNLE1BQU1FLGtCQUFrQkYseUNBQUtBO0lBUWhDRyxhQUNBO1FBQ0ksS0FBSyxDQUFDLG1CQUxGQyxhQUF1QixFQUFFLE9BQ3pCQyxpQkFBa0QsRUFBRTtJQUs1RDtJQUVBQyxPQUNBO1FBQ0ksTUFBTSxFQUFFQyxLQUFLLEVBQUVDLE1BQU0sRUFBRSxHQUFHLElBQUksQ0FBQ0MsT0FBTyxDQUFDQyxJQUFJO1FBQzNDLE1BQU1DLFVBQVVKLFFBQVE7UUFDeEIsTUFBTUssVUFBVUosU0FBUztRQUV6Qiw2Q0FBNkM7UUFDN0MsSUFBSSxDQUFDSyw4QkFBOEI7UUFFbkMsY0FBYztRQUNkLE1BQU1DLE9BQU8sSUFBSSxDQUFDQyxHQUFHLENBQUNDLEtBQUssQ0FBQ0wsU0FBU0MsVUFBVSxLQUFLO1FBQ3BERSxLQUFLRyxRQUFRLENBQUM7UUFFZCxlQUFlO1FBQ2YsSUFBSSxDQUFDRixHQUFHLENBQUNHLElBQUksQ0FBQ1AsU0FBU0MsVUFBVSxJQUFJLG1CQUFtQjtZQUNwRE8sWUFBWTtZQUNaQyxVQUFVO1lBQ1ZDLE9BQU87WUFDUEMsUUFBUTtZQUNSQyxpQkFBaUI7UUFDckIsR0FBR0MsU0FBUyxDQUFDO1FBRWIsbUNBQW1DO1FBQ25DLE1BQU1DLFdBQVc7UUFDakIsTUFBTUMsWUFBWTtRQUNsQixNQUFNQyxPQUFPaEIsVUFBVWMsV0FBVztRQUNsQyxNQUFNRyxPQUFPaEIsVUFBVTtRQUV2QixpQ0FBaUM7UUFDakMsSUFBSSxDQUFDRyxHQUFHLENBQUNjLFNBQVMsQ0FBQ2xCLFNBQVNpQixPQUFPRixZQUFZLEdBQUdELFdBQVcsR0FBR0MsWUFBWSxHQUFHLFVBQVU7UUFFekYsdUJBQXVCO1FBQ3ZCLElBQUksQ0FBQ1gsR0FBRyxDQUFDYyxTQUFTLENBQUNsQixTQUFTaUIsT0FBT0YsWUFB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O1FBQzFDLElBQUksQ0FBQy9CLElBQUksQ0FBQ2dDLFdBQVcsQ0FBQyxLQUFLO1lBQ3ZCLElBQUksQ0FBQ3ZFLE9BQU8sQ0FBQ0MsSUFBSSxDQUFDdUUsT0FBTyxDQUFDLEtBQUssR0FBRyxHQUFHO1lBQ3JDLElBQUksQ0FBQ3hFLE9BQU8sQ0FBQ0MsSUFBSSxDQUFDd0UsSUFBSSxDQUFDLHlCQUF5QjtnQkFDNUMsSUFBSWpGLDBEQUFhQSxDQUFDdUQsVUFBVU0sSUFBSSxLQUFLLGNBQWM7b0JBQy9DLElBQUksQ0FBQ3FCLEtBQUssQ0FBQ0MsS0FBSyxDQUFDLGFBQWE7d0JBQUU1QjtvQkFBUztnQkFDN0MsT0FBTztvQkFDSCxJQUFJLENBQUMyQixLQUFLLENBQUNDLEtBQUssQ0FBQyxRQUFRO3dCQUFFNUI7b0JBQVM7Z0JBQ3hDO1lBQ0o7UUFDSjtJQUNKO0lBRUE7O0tBRUMsR0FDRCx5QkFDQTtRQUNJLElBQUksQ0FBQzZCLEtBQUssQ0FBQ1AsTUFBTSxDQUFDO1lBQ2RyQyxLQUFLO1lBQ0w2QyxRQUFRLElBQUksQ0FBQ0QsS0FBSyxDQUFDRSxvQkFBb0IsQ0FBQyxhQUFhO2dCQUFFSCxPQUFPO2dCQUFHSSxLQUFLO1lBQUU7WUFDeEVDLFdBQVc7WUFDWEMsUUFBUSxDQUFDO1FBQ2I7UUFFQSxJQUFJLENBQUNMLEtBQUssQ0FBQ1AsTUFBTSxDQUFDO1lBQ2RyQyxLQUFLO1lBQ0w2QyxRQUFRLElBQUksQ0FBQ0QsS0FBSyxDQUFDRSxvQkFBb0IsQ0FBQyxhQUFhO2dCQUFFSCxPQUFPO2dCQUFHSSxLQUFLO1lBQUU7WUFDeEVDLFdBQVc7WUFDWEMsUUFBUSxDQUFDO1FBQ2I7SUFDSjtBQUNKIiwic291cmNlcyI6WyIvVXNlcnMvbmIyMzA2MDEvRG9jdW1lbnRzL3BoYXNlci1nYW1lZGV2L3NyYy9nYW1lL3NjZW5lcy9QcmVsb2FkZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU2NlbmUgfSBmcm9tICdwaGFzZXInO1xuaW1wb3J0IHsgZ2V0R2FtZUNvbmZpZyB9IGZyb20gJy4uL2dhbWVDb25maWcnO1xuXG4vKipcbiAqIFByZWxvYWRlciBTY2VuZSAtIFN0YWdlIDI6IExvYWQgYWxsIGdhbWUgYXNzZXRzIHdpdGggdmlzdWFsIHByb2dyZXNzXG4gKlxuICogRmVhdHVyZXM6XG4gKiAtIFZpc3VhbCBwcm9ncmVzcyBiYXIgd2l0aCBvdXRsaW5lIGFuZCBmaWxsXG4gKiAtIFBlcmNlbnRhZ2UgdGV4dCBkaXNwbGF5XG4gKiAtIExvYWRpbmcgc3RhdHVzIHRleHRcbiAqIC0gRXJyb3IgaGFuZGxpbmcgZm9yIGZhaWxlZCBsb2Fkc1xuICogLSBTbW9vdGggdHJhbnNpdGlvbiB0byBNYWluTWVudVxuICovXG5leHBvcnQgY2xhc3MgUHJlbG9hZGVyIGV4dGVuZHMgU2NlbmVcbntcbiAgICBwcml2YXRlIHByb2dyZXNzQmFyITogUGhhc2VyLkdhbWVPYmplY3RzLlJlY3RhbmdsZTtcbiAgICBwcml2YXRlIHByb2dyZXNzVGV4dCE6IFBoYXNlci5HYW1lT2JqZWN0cy5UZXh0O1xuICAgIHByaXZhdGUgc3RhdHVzVGV4dCE6IFBoYXNlci5HYW1lT2JqZWN0cy5UZXh0O1xuICAgIHByaXZhdGUgbG9hZEVycm9yczogc3RyaW5nW10gPSBbXTtcbiAgICBwcml2YXRlIHBhcmFsbGF4TGF5ZXJzOiBQaGFzZXIuR2FtZU9iamVjdHMuVGlsZVNwcml0ZVtdID0gW107XG5cbiAgICBjb25zdHJ1Y3RvciAoKVxuICAgIHtcbiAgICAgICAgc3VwZXIoJ1ByZWxvYWRlcicpO1xuICAgIH1cblxuICAgIGluaXQgKClcbiAgICB7XG4gICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gdGhpcy5jYW1lcmFzLm1haW47XG4gICAgICAgIGNvbnN0IGNlbnRlclggPSB3aWR0aCAvIDI7XG4gICAgICAgIGNvbnN0IGNlbnRlclkgPSBoZWlnaHQgLyAyO1xuXG4gICAgICAgIC8vIFBhcmFsbGF4IGJhY2tncm91bmQgKGxvYWRlZCBpbiBCb290IHNjZW5lKVxuICAgICAgICB0aGlzLmNyZWF0ZVBhcmFsbGF4TG9hZGVyQmFja2dyb3VuZCgpO1xuXG4gICAgICAgIC8vIExvZ28gYXQgdG9wXG4gICAgICAgIGNvbnN0IGxvZ28gPSB0aGlzLmFkZC5pbWFnZShjZW50ZXJYLCBjZW50ZXJZIC0gMTIwLCAnbG9nbycpO1xuICAgICAgICBsb2dvLnNldFNjYWxlKDAuOCk7XG5cbiAgICAgICAgLy8gTG9hZGluZyB0ZXh0XG4gICAgICAgIHRoaXMuYWRkLnRleHQoY2VudGVyWCwgY2VudGVyWSAtIDQwLCAnTG9hZGluZyBHYW1lLi4uJywge1xuICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsJyxcbiAgICAgICAgICAgIGZvbnRTaXplOiAnMjRweCcsXG4gICAgICAgICAgICBjb2xvcjogJyNmZmZmZmYnLFxuICAgICAgICAgICAgc3Ryb2tlOiAnIzAwMDAwMCcsXG4gICAgICAgICAgICBzdHJva2VUaGlja25lc3M6IDRcbiAgICAgICAgfSkuc2V0T3JpZ2luKDAuNSk7XG5cbiAgICAgICAgLy8gUHJvZ3Jlc3MgYmFyIGNvbnRhaW5lciAob3V0bGluZSlcbiAgICAgICAgY29uc3QgYmFyV2lkdGggPSA0MDA7XG4gICAgICAgIGNvbnN0IGJhckhlaWdodCA9IDI0O1xuICAgICAgICBjb25zdCBiYXJYID0gY2VudGVyWCAtIGJhcldpZHRoIC8gMjtcbiAgICAgICAgY29uc3QgYmFyWSA9IGNlbnRlclkgKyAyMDtcblxuICAgICAgICAvLyBQcm9ncmVzcyBiYXIgYmFja2dyb3VuZCAoZGFyaylcbiAgICAgICAgdGhpcy5hZGQucmVjdGFuZ2xlKGNlbnRlclgsIGJhclkgKyBiYXJIZWlnaHQgLyAyLCBiYXJXaWR0aCArIDQsIGJhckhlaWdodCArIDQsIDB4MDAwMDAwLCAwLjUpO1xuXG4gICAgICAgIC8vIFByb2dyZXNzIGJhciBvdXRsaW5lXG4gICAgICAgIHRoaXMuYWRkLnJlY3RhbmdsZShjZW50ZXJYLCBiYXJZICsgYmFySGVpZ2h0IC8gMiwgYmFyV2lkdGgsIGJhckhlaWdodCkuc2V0U3Ryb2tlU3R5bGUoMiwgMHhmZmZmZmYpO1xuXG4gICAgICAgIC8vIFByb2dyZXNzIGJhciBmaWxsIChzdGFydHMgYXQgMCB3aWR0aClcbiAgICAgICAgdGhpcy5wcm9ncmVzc0JhciA9IHRoaXMuYWRkLnJlY3RhbmdsZShcbiAgICAgICAgICAgIGJhclggKyAyLFxuICAgICAgICAgICAgYmFyWSArIDIsXG4gICAgICAgICAgICAwLFxuICAgICAgICAgICAgYmFySGVpZ2h0IC0gNCxcbiAgICAgICAgICAgIDB4MDBmZjg4XG4gICAgICAgICk7XG4gICAgICAgIHRoaXMucHJvZ3Jlc3NCYXIuc2V0T3JpZ2luKDAsIDApO1xuXG4gICAgICAgIC8vIFBlcmNlbnRhZ2UgdGV4dFxuICAgICAgICB0aGlzLnByb2dyZXNzVGV4dCA9IHRoaXMuYWRkLnRleHQoY2VudGVyWCwgYmFyWSArIGJhckhlaWdodCAvIDIsICcwJScsIHtcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCcsXG4gICAgICAgICAgICBmb250U2l6ZTogJzE2cHgnLFxuICAgICAgICAgICAgY29sb3I6ICcjZmZmZmZmJyxcbiAgICAgICAgICAgIHN0cm9rZTogJyMwMDAwMDAnLFxuICAgICAgICAgICAgc3Ryb2tlVGhpY2tuZXNzOiAzXG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUpO1xuXG4gICAgICAgIC8vIFN0YXR1cyB0ZXh0IChzaG93cyBjdXJyZW50IGZpbGUgYmVpbmcgbG9hZGVkKVxuICAgICAgICB0aGlzLnN0YXR1c1RleHQgPSB0aGlzLmFkZC50ZXh0KGNlbnRlclgsIGJhclkgKyBiYXJIZWlnaHQgKyAyMCwgJycsIHtcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCcsXG4gICAgICAgICAgICBmb250U2l6ZTogJzE0cHgnLFxuICAgICAgICAgICAgY29sb3I6ICcjY2NjY2NjJ1xuICAgICAgICB9KS5zZXRPcmlnaW4oMC41KTtcblxuICAgICAgICAvLyBQcm9ncmVzcyBldmVudCAtIHVwZGF0ZSBiYXIgd2lkdGggYW5kIHBlcmNlbnRhZ2VcbiAgICAgICAgdGhpcy5sb2FkLm9uKCdwcm9ncmVzcycsIChwcm9ncmVzczogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnByb2dyZXNzQmFyLndpZHRoID0gKGJhcldpZHRoIC0gNCkgKiBwcm9ncmVzcztcbiAgICAgICAgICAgIHRoaXMucHJvZ3Jlc3NUZXh0LnNldFRleHQoYCR7TWF0aC5yb3VuZChwcm9ncmVzcyAqIDEwMCl9JWApO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBGaWxlIGxvYWQgZXZlbnQgLSBzaG93IGN1cnJlbnQgZmlsZSBuYW1lXG4gICAgICAgIHRoaXMubG9hZC5vbignbG9hZCcsIChmaWxlOiBQaGFzZXIuTG9hZGVyLkZpbGUpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzVGV4dC5zZXRUZXh0KGBMb2FkaW5nOiAke2ZpbGUua2V5fWApO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBFcnJvciBoYW5kbGluZyAtIHRyYWNrIGZhaWxlZCBsb2Fkc1xuICAgICAgICB0aGlzLmxvYWQub24oJ2xvYWRlcnJvcicsIChmaWxlOiBQaGFzZXIuTG9hZGVyLkZpbGUpID0+IHtcbiAgICAgICAgICAgIHRoaXMubG9hZEVycm9ycy5wdXNoKGZpbGUua2V5KTtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgRmFpbGVkIHRvIGxvYWQ6ICR7ZmlsZS5rZXl9YCk7XG4gICAgICAgICAgICB0aGlzLnN0YXR1c1RleHQuc2V0VGV4dChgRXJyb3IgbG9hZGluZzogJHtmaWxlLmtleX1gKTtcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzVGV4dC5zZXRDb2xvcignI2ZmNjY2NicpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICB1cGRhdGUgKClcbiAgICB7XG4gICAgICAgIGlmICghdGhpcy5wYXJhbGxheExheWVycy5sZW5ndGgpIHJldHVybjtcblxuICAgICAgICBjb25zdCB0aW1lID0gdGhpcy50aW1lLm5vdztcbiAgICAgICAgdGhpcy5wYXJhbGxheExheWVycy5mb3JFYWNoKChsYXllcikgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc3BlZWQgPSBsYXllci5nZXREYXRhKCdzcGVlZCcpIGFzIG51bWJlcjtcbiAgICAgICAgICAgIGxheWVyLnRpbGVQb3NpdGlvblkgPSB0aW1lICogc3BlZWQ7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByZWxvYWQgKClcbiAgICB7XG4gICAgICAgIGNvbnN0IGdhbWVDb2RlID0gdGhpcy5yZWdpc3RyeS5nZXQoJ2dhbWVDb2RlJykgYXMgc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBnYW1lQ29uZmlnID0gZ2V0R2FtZUNvbmZpZyhnYW1lQ29kZSk7XG4gICAgICAgIGNvbnN0IGFzc2V0Um9vdCA9IGdhbWVDb25maWcuYXNzZXRSb290O1xuXG4gICAgICAgIC8vIEVuc3VyZSBhc3NldHMgcmVzb2x2ZSBmcm9tIHNpdGUgcm9vdCBldmVuIG9uIC9nYW1lLyogcm91dGVzXG4gICAgICAgIHRoaXMubG9hZC5zZXRQYXRoKCcvYXNzZXRzJyk7XG5cbiAgICAgICAgaWYgKGdhbWVDb25maWcuY29kZSA9PT0gJ3RyYWluX2dhbWUnKSB7XG4gICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PSBUUkFJTiBHQU1FIEFTU0VUUyA9PT09PT09PT09PT09PT09PT09PVxuICAgICAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdzdGFyJywgJ2dhbWVzL3Rvd2VyL3VpL3N0YXIucG5nJyk7XG4gICAgICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ3RyYWluLWJnJywgYCR7YXNzZXRSb290fS9iYWNrZ3JvdW5kIGNvcHkgMi5wbmdgKTtcbiAgICAgICAgICAgIHRoaXMubG9hZC5pbWFnZSgndHJhaW4tZW5naW5lJywgYCR7YXNzZXRSb290fS90cmFpbi5wbmdgKTtcbiAgICAgICAgICAgIHRoaXMubG9hZC5pbWFnZSgndHJhaW4tbGlnaHQnLCBgJHthc3NldFJvb3R9L2xpZ2h0LnBuZ2ApO1xuICAgICAgICAgICAgdGhpcy5sb2FkLmltYWdlKCd0cmFpbi1saWdodC1yZWQnLCBgJHthc3NldFJvb3R9L0ZveCBhbmQgVHJhZmZpYyBsaWdodC9SZWQucG5nYCk7XG4gICAgICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ3RyYWluLWxpZ2h0LXllbGxvdycsIGAke2Fzc2V0Um9vdH0vRm94IGFuZCBUcmFmZmljIGxpZ2h0L1llbGxvdy5wbmdgKTtcbiAgICAgICAgICAgIHRoaXMubG9hZC5pbWFnZSgndHJhaW4tbGlnaHQtZ3JlZW4nLCBgJHthc3NldFJvb3R9L0ZveCBhbmQgVHJhZmZpYyBsaWdodC9HcmVlbi5wbmdgKTtcbiAgICAgICAgICAgIHRoaXMubG9hZC5pbWFnZSgndHJhaW4tZm94LWlkbGUnLCBgJHthc3NldFJvb3R9L0ZveCBhbmQgVHJhZmZpYyBsaWdodC9JZGxlLnBuZ2ApO1xuICAgICAgICAgICAgdGhpcy5sb2FkLmltYWdlKCd0cmFpbi1mb3gtY29ycmVjdCcsIGAke2Fzc2V0Um9vdH0vRm94IGFuZCBUcmFmZmljIGxpZ2h0L0NvcnJlY3QucG5nYCk7XG4gICAgICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ3RyYWluLWZveC1pbmNvcnJlY3QnLCBgJHthc3NldFJvb3R9L0ZveCBhbmQgVHJhZmZpYyBsaWdodC9JbmNvcnJlY3QucG5nYCk7XG4gICAgICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ3RyYWluLWJhcnJpZXInLCBgJHthc3NldFJvb3R9L3MucG5nYCk7XG5cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IDExOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoYHRyYWluLWNhci0ke2l9YCwgYCR7YXNzZXRSb290fS9UcmFpbi8ke2l9LnBuZ2ApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoZ2FtZUNvbmZpZy5tYXBLZXksIGAke2Fzc2V0Um9vdH0vJHtnYW1lQ29uZmlnLm1hcFBhdGh9YCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PSBVSSBBU1NFVFMgPT09PT09PT09PT09PT09PT09PT1cbiAgICAgICAgICAgIHRoaXMubG9hZC5pbWFnZSgnc3RhcicsIGAke2Fzc2V0Um9vdH0vdWkvc3Rhci5wbmdgKTtcbiAgICAgICAgICAgIHRoaXMubG9hZC5pbWFnZSgndWktZXhhbXBsZScsIGAke2Fzc2V0Um9vdH0vdWkvZXhhbXBsZS5wbmdgKTtcblxuICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT0gR0FNRVBMQVkgQVNTRVRTID09PT09PT09PT09PT09PT09PT09XG4gICAgICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ2JnLTEnLCBgJHthc3NldFJvb3R9L2JhY2tncm91bmRzLzEucG5nYCk7XG4gICAgICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ2JnLTInLCBgJHthc3NldFJvb3R9L2JhY2tncm91bmRzLzIucG5nYCk7XG4gICAgICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ2JnLTMnLCBgJHthc3NldFJvb3R9L2JhY2tncm91bmRzLzMucG5nYCk7XG4gICAgICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ2JnLTQnLCBgJHthc3NldFJvb3R9L2JhY2tncm91bmRzLzQucG5nYCk7XG4gICAgICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ2JnLTUnLCBgJHthc3NldFJvb3R9L2JhY2tncm91bmRzLzUucG5nYCk7XG4gICAgICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ2JnLTYnLCBgJHthc3NldFJvb3R9L2JhY2tncm91bmRzLzYucG5nYCk7XG4gICAgICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoZ2FtZUNvbmZpZy5tYXBLZXksIGAke2Fzc2V0Um9vdH0vJHtnYW1lQ29uZmlnLm1hcFBhdGh9YCk7XG5cbiAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09IENIQVJBQ1RFUiBBU1NFVFMgPT09PT09PT09PT09PT09PT09PT1cbiAgICAgICAgICAgIHRoaXMubG9hZC5zcHJpdGVzaGVldCgnY2hhcmFjdGVyJywgYCR7YXNzZXRSb290fS9jaGFyYWN0ZXJzL2NoYXJhY3RlciBhbmltYXRpb24gdHJhbi5wbmdgLCB7XG4gICAgICAgICAgICAgICAgZnJhbWVXaWR0aDogNTE1LFxuICAgICAgICAgICAgICAgIGZyYW1lSGVpZ2h0OiAxMTI4LFxuICAgICAgICAgICAgICAgIG1hcmdpbjogMTVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gY2hhci1qdW1wLnBuZyBpcyBub3QgcHJlc2VudCBpbiBhc3NldHM7IHNraXAgbG9hZGluZyB0byBhdm9pZCBsb2FkIGVycm9yXG4gICAgICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ2NoYXItZW1vdGVzJywgYCR7YXNzZXRSb290fS9jaGFyYWN0ZXJzL2NoYXItZW1vdGVzLnBuZ2ApO1xuXG4gICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PSBFTU9URSBBU1NFVFMgPT09PT09PT09PT09PT09PT09PT1cbiAgICAgICAgICAgIC8vIExlZ2FjeSBlbW90ZXNcbiAgICAgICAgICAgIHRoaXMubG9hZC5pbWFnZSgnZW1vdGUtdHJhbi1pZGxlJywgYCR7YXNzZXRSb290fS9lbW90ZXMvZW1vIHRyYW4gLnBuZ2ApO1xuICAgICAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdlbW90ZS10cmFuLWlkbGUtZmxpcHBlZCcsIGAke2Fzc2V0Um9vdH0vZW1vdGVzL2VtbyB0cmFuIGZsaXBwZWQgaWRsZS5wbmdgKTtcbiAgICAgICAgICAgIHRoaXMubG9hZC5pbWFnZSgnZW1vdGUtdHJhbi1jb3JyZWN0JywgYCR7YXNzZXRSb290fS9lbW90ZXMvZW1vIHRyYW4gY29ycmVjdC5wbmdgKTtcbiAgICAgICAgICAgIHRoaXMubG9hZC5pbWFnZSgnZW1vdGUtdHJhbi1jb3JyZWN0LWZsaXBwZWQnLCBgJHthc3NldFJvb3R9L2Vtb3Rlcy9lbW8gdHJhbiBmbGlwcGVkIGNvcnJlY3QucG5nYCk7XG4gICAgICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ2Vtb3RlLXRyYW4taW5jb3JyZWN0JywgYCR7YXNzZXRSb290fS9lbW90ZXMvZW1vIHRyYW4gaW5jb3JyZWN0LnBuZ2ApO1xuICAgICAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdlbW90ZS10cmFuLWluY29ycmVjdC1mbGlwcGVkJywgYCR7YXNzZXRSb290fS9lbW90ZXMvZW1vIHRyYW4gZmxpcHBlZCBpbmNvcnJlY3QucG5nYCk7XG5cbiAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09IFRJTEUgQVNTRVRTID09PT09PT09PT09PT09PT09PT09XG4gICAgICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ3RpbGUtMScsIGAke2Fzc2V0Um9vdH0vdGlsZXMvMS5wbmdgKTtcbiAgICAgICAgICAgIHRoaXMubG9hZC5pbWFnZSgndGlsZS0yJywgYCR7YXNzZXRSb290fS90aWxlcy8yLnBuZ2ApO1xuICAgICAgICAgICAgdGhpcy5sb2FkLmltYWdlKCd0aWxlLTMnLCBgJHthc3NldFJvb3R9L3RpbGVzLzMucG5nYCk7XG4gICAgICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ3RpbGUtNCcsIGAke2Fzc2V0Um9vdH0vdGlsZXMvNC5wbmdgKTtcbiAgICAgICAgICAgIHRoaXMubG9hZC5pbWFnZSgndGlsZS01JywgYCR7YXNzZXRSb290fS90aWxlcy81LnBuZ2ApO1xuICAgICAgICAgICAgdGhpcy5sb2FkLmltYWdlKCd0aWxlLTYnLCBgJHthc3NldFJvb3R9L3RpbGVzLzYucG5nYCk7XG4gICAgICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ3RpbGUtZmxvd2VyJywgYCR7YXNzZXRSb290fS90aWxlcy9mbG93ZXIucG5nYCk7XG4gICAgICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ3RpbGUtZ3JlZW4nLCBgJHthc3NldFJvb3R9L3RpbGVzL2dyZWVuLnBuZ2ApO1xuICAgICAgICAgICAgdGhpcy5sb2FkLmltYWdlKCd0aWxlLXNoYWRvdycsIGAke2Fzc2V0Um9vdH0vdGlsZXMvc2hhZG9lLnBuZ2ApO1xuXG4gICAgICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PSBNQVAgQVNTRVRTID09PT09PT09PT09PT09PT09PT09XG4gICAgICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ21hcC1hbGwnLCBgJHthc3NldFJvb3R9L21hcHMvQWxsIG1hcC5wbmdgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlUGFyYWxsYXhMb2FkZXJCYWNrZ3JvdW5kICgpXG4gICAge1xuICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMuY2FtZXJhcy5tYWluO1xuICAgICAgICBjb25zdCBsYXllcktleXMgPSBbJ2JnLTEnLCAnYmctMicsICdiZy0zJywgJ2JnLTQnLCAnYmctNScsICdiZy02J107XG4gICAgICAgIGNvbnN0IHNwZWVkcyA9IFswLjAxLCAwLjAyLCAwLjAzLCAwLjA0LCAwLjA1NSwgMC4wN107XG5cbiAgICAgICAgdGhpcy5wYXJhbGxheExheWVycyA9IGxheWVyS2V5cy5tYXAoKGtleSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGxheWVyID0gdGhpcy5hZGQudGlsZVNwcml0ZSgwLCAwLCB3aWR0aCwgaGVpZ2h0LCBrZXkpXG4gICAgICAgICAgICAgICAgLnNldE9yaWdpbigwLCAwKVxuICAgICAgICAgICAgICAgIC5zZXRTY3JvbGxGYWN0b3IoMClcbiAgICAgICAgICAgICAgICAuc2V0RGVwdGgoLTEwMCArIGluZGV4KTtcbiAgICAgICAgICAgIGxheWVyLnNldERhdGEoJ3NwZWVkJywgc3BlZWRzW2luZGV4XSk7XG4gICAgICAgICAgICByZXR1cm4gbGF5ZXI7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGNyZWF0ZSAoKVxuICAgIHtcbiAgICAgICAgLy8gTG9nIGFueSBsb2FkaW5nIGVycm9yc1xuICAgICAgICBpZiAodGhpcy5sb2FkRXJyb3JzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignQXNzZXRzIGZhaWxlZCB0byBsb2FkOicsIHRoaXMubG9hZEVycm9ycyk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBnYW1lQ29kZSA9IHRoaXMucmVnaXN0cnkuZ2V0KCdnYW1lQ29kZScpIGFzIHN0cmluZyB8IHVuZGVmaW5lZDtcblxuICAgICAgICAvLyBDcmVhdGUgZ2xvYmFsIGFuaW1hdGlvbnMgaGVyZSBpZiBuZWVkZWRcbiAgICAgICAgaWYgKGdldEdhbWVDb25maWcoZ2FtZUNvZGUpLmNvZGUgIT09ICd0cmFpbl9nYW1lJykge1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVHbG9iYWxBbmltYXRpb25zKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTa2lwIE1haW5NZW51IGFuZCBnbyBzdHJhaWdodCBpbnRvIEdhbWVcbiAgICAgICAgdGhpcy50aW1lLmRlbGF5ZWRDYWxsKDMwMCwgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jYW1lcmFzLm1haW4uZmFkZU91dCgyMDAsIDAsIDAsIDApO1xuICAgICAgICAgICAgdGhpcy5jYW1lcmFzLm1haW4ub25jZSgnY2FtZXJhZmFkZW91dGNvbXBsZXRlJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChnZXRHYW1lQ29uZmlnKGdhbWVDb2RlKS5jb2RlID09PSAndHJhaW5fZ2FtZScpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zY2VuZS5zdGFydCgnVHJhaW5HYW1lJywgeyBnYW1lQ29kZSB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLnN0YXJ0KCdHYW1lJywgeyBnYW1lQ29kZSB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGFuaW1hdGlvbnMgdGhhdCB3aWxsIGJlIHVzZWQgYWNyb3NzIG11bHRpcGxlIHNjZW5lc1xuICAgICAqL1xuICAgIHByaXZhdGUgY3JlYXRlR2xvYmFsQW5pbWF0aW9ucygpOiB2b2lkXG4gICAge1xuICAgICAgICB0aGlzLmFuaW1zLmNyZWF0ZSh7XG4gICAgICAgICAgICBrZXk6ICdjaGFyYWN0ZXItZmx5JyxcbiAgICAgICAgICAgIGZyYW1lczogdGhpcy5hbmltcy5nZW5lcmF0ZUZyYW1lTnVtYmVycygnY2hhcmFjdGVyJywgeyBzdGFydDogMCwgZW5kOiA5IH0pLFxuICAgICAgICAgICAgZnJhbWVSYXRlOiAxMCxcbiAgICAgICAgICAgIHJlcGVhdDogLTFcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5hbmltcy5jcmVhdGUoe1xuICAgICAgICAgICAga2V5OiAndHJhbi1qdW1wJyxcbiAgICAgICAgICAgIGZyYW1lczogdGhpcy5hbmltcy5nZW5lcmF0ZUZyYW1lTnVtYmVycygnY2hhcmFjdGVyJywgeyBzdGFydDogMCwgZW5kOiA0IH0pLFxuICAgICAgICAgICAgZnJhbWVSYXRlOiA2LFxuICAgICAgICAgICAgcmVwZWF0OiAtMVxuICAgICAgICB9KTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiU2NlbmUiLCJnZXRHYW1lQ29uZmlnIiwiUHJlbG9hZGVyIiwiY29uc3RydWN0b3IiLCJsb2FkRXJyb3JzIiwicGFyYWxsYXhMYXllcnMiLCJpbml0Iiwid2lkdGgiLCJoZWlnaHQiLCJjYW1lcmFzIiwibWFpbiIsImNlbnRlclgiLCJjZW50ZXJZIiwiY3JlYXRlUGFyYWxsYXhMb2FkZXJCYWNrZ3JvdW5kIiwibG9nbyIsImFkZCIsImltYWdlIiwic2V0U2NhbGUiLCJ0ZXh0IiwiZm9udEZhbWlseSIsImZvbnRTaXplIiwiY29sb3IiLCJzdHJva2UiLCJzdHJva2VUaGlja25lc3MiLCJzZXRPcmlnaW4iLCJiYXJXaWR0aCIsImJhckhlaWdodCIsImJhclgiLCJiYXJZIiwicmVjdGFuZ2xlIiwic2V0U3Ryb2tlU3R5bGUiLCJwcm9ncmVzc0JhciIsInByb2dyZXNzVGV4dCIsInN0YXR1c1RleHQiLCJsb2FkIiwib24iLCJwcm9ncmVzcyIsInNldFRleHQiLCJNYXRoIiwicm91bmQiLCJmaWxlIiwia2V5IiwicHVzaCIsImNvbnNvbGUiLCJ3YXJuIiwic2V0Q29sb3IiLCJ1cGRhdGUiLCJsZW5ndGgiLCJ0aW1lIiwibm93IiwiZm9yRWFjaCIsImxheWVyIiwic3BlZWQiLCJnZXREYXRhIiwidGlsZVBvc2l0aW9uWSIsInByZWxvYWQiLCJnYW1lQ29kZSIsInJlZ2lzdHJ5IiwiZ2V0IiwiZ2FtZUNvbmZpZyIsImFzc2V0Um9vdCIsInNldFBhdGgiLCJjb2RlIiwiaSIsIm1hcEtleSIsIm1hcFBhdGgiLCJzcHJpdGVzaGVldCIsImZyYW1lV2lkdGgiLCJmcmFtZUhlaWdodCIsIm1hcmdpbiIsImxheWVyS2V5cyIsInNwZWVkcyIsIm1hcCIsImluZGV4IiwidGlsZVNwcml0ZSIsInNldFNjcm9sbEZhY3RvciIsInNldERlcHRoIiwic2V0RGF0YSIsImNyZWF0ZSIsImNyZWF0ZUdsb2JhbEFuaW1hdGlvbnMiLCJkZWxheWVkQ2FsbCIsImZhZGVPdXQiLCJvbmNlIiwic2NlbmUiLCJzdGFydCIsImFuaW1zIiwiZnJhbWVzIiwiZ2VuZXJhdGVGcmFtZU51bWJlcnMiLCJlbmQiLCJmcmFtZVJhdGUiLCJyZXBlYXQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/game/scenes/Preloader.ts\n");

/***/ }),

/***/ "(pages-dir-node)/./src/game/scenes/TrainGame.ts":
/*!**************************************!*\
  !*** ./src/game/scenes/TrainGame.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TrainGame: () => (/* binding */ TrainGame)\n/* harmony export */ });\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _EventBus__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../EventBus */ \"(pages-dir-node)/./src/game/EventBus.ts\");\n/* harmony import */ var _gameConfig__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../gameConfig */ \"(pages-dir-node)/./src/game/gameConfig.ts\");\n/* harmony import */ var _ui_QuizPanel__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../ui/QuizPanel */ \"(pages-dir-node)/./src/game/ui/QuizPanel.ts\");\n\n\n\n\nconst FALLBACK_QUESTIONS = [\n    {\n        question: {\n            content: 'Thủ đô của Việt Nam là gì?',\n            options: [\n                {\n                    text: 'Hà Nội',\n                    is_correct: true\n                },\n                {\n                    text: 'Đà Nẵng',\n                    is_correct: false\n                },\n                {\n                    text: 'Hải Phòng',\n                    is_correct: false\n                },\n                {\n                    text: 'Cần Thơ',\n                    is_correct: false\n                }\n            ]\n        }\n    },\n    {\n        question: {\n            content: 'Phaser sử dụng ngôn ngữ nào?',\n            options: [\n                {\n                    text: 'TypeScript/JavaScript',\n                    is_correct: true\n                },\n                {\n                    text: 'C#',\n                    is_correct: false\n                },\n                {\n                    text: 'Python',\n                    is_correct: false\n                },\n                {\n                    text: 'Go',\n                    is_correct: false\n                }\n            ]\n        }\n    },\n    {\n        question: {\n            content: 'Chọn từ trái nghĩa của “fast”.',\n            options: [\n                {\n                    text: 'slow',\n                    is_correct: true\n                },\n                {\n                    text: 'far',\n                    is_correct: false\n                },\n                {\n                    text: 'high',\n                    is_correct: false\n                },\n                {\n                    text: 'small',\n                    is_correct: false\n                }\n            ]\n        }\n    },\n    {\n        question: {\n            content: 'Chọn đáp án đúng: She ___ to school every day.',\n            options: [\n                {\n                    text: 'goes',\n                    is_correct: true\n                },\n                {\n                    text: 'go',\n                    is_correct: false\n                },\n                {\n                    text: 'going',\n                    is_correct: false\n                },\n                {\n                    text: 'gone',\n                    is_correct: false\n                }\n            ]\n        }\n    },\n    {\n        question: {\n            content: 'Từ nào có nghĩa là “nhảy”?',\n            options: [\n                {\n                    text: 'jump',\n                    is_correct: true\n                },\n                {\n                    text: 'swim',\n                    is_correct: false\n                },\n                {\n                    text: 'crawl',\n                    is_correct: false\n                },\n                {\n                    text: 'sleep',\n                    is_correct: false\n                }\n            ]\n        }\n    },\n    {\n        question: {\n            content: 'Từ nào là danh từ?',\n            options: [\n                {\n                    text: 'river',\n                    is_correct: true\n                },\n                {\n                    text: 'run',\n                    is_correct: false\n                },\n                {\n                    text: 'quickly',\n                    is_correct: false\n                },\n                {\n                    text: 'blue',\n                    is_correct: false\n                }\n            ]\n        }\n    },\n    {\n        question: {\n            content: 'Chọn câu đúng ngữ pháp.',\n            options: [\n                {\n                    text: 'He is playing football.',\n                    is_correct: true\n                },\n                {\n                    text: 'He are playing football.',\n                    is_correct: false\n                },\n                {\n                    text: 'He playing football.',\n                    is_correct: false\n                },\n                {\n                    text: 'He play football.',\n                    is_correct: false\n                }\n            ]\n        }\n    },\n    {\n        question: {\n            content: 'Từ nào là tính từ?',\n            options: [\n                {\n                    text: 'beautiful',\n                    is_correct: true\n                },\n                {\n                    text: 'beauty',\n                    is_correct: false\n                },\n                {\n                    text: 'beautify',\n                    is_correct: false\n                },\n                {\n                    text: 'beautifully',\n                    is_correct: false\n                }\n            ]\n        }\n    },\n    {\n        question: {\n            content: 'Chọn đáp án đúng: I ___ a book now.',\n            options: [\n                {\n                    text: 'am reading',\n                    is_correct: true\n                },\n                {\n                    text: 'read',\n                    is_correct: false\n                },\n                {\n                    text: 'reads',\n                    is_correct: false\n                },\n                {\n                    text: 'reading',\n                    is_correct: false\n                }\n            ]\n        }\n    },\n    {\n        question: {\n            content: 'Từ nào là trạng từ?',\n            options: [\n                {\n                    text: 'quickly',\n                    is_correct: true\n                },\n                {\n                    text: 'quick',\n                    is_correct: false\n                },\n                {\n                    text: 'quicker',\n                    is_correct: false\n                },\n                {\n                    text: 'quickness',\n                    is_correct: false\n                }\n            ]\n        }\n    },\n    {\n        question: {\n            content: 'Chọn câu hỏi phù hợp khi gặp người mới.',\n            options: [\n                {\n                    text: 'What is your name?',\n                    is_correct: true\n                },\n                {\n                    text: 'Where do you live?',\n                    is_correct: false\n                },\n                {\n                    text: 'How old are you?',\n                    is_correct: false\n                },\n                {\n                    text: 'What time is it?',\n                    is_correct: false\n                }\n            ]\n        }\n    }\n];\nclass TrainGame extends phaser__WEBPACK_IMPORTED_MODULE_0__.Scene {\n    constructor(){\n        super('TrainGame'), this.debugTrack = false, this.showRailOverlay = false, this.showCars = true, this.trainMoving = false, this.trafficLightState = null, this.trainDistancePx = 0, this.trainSpeedPxPerSec = -180, this.trainGapPx = 0, this.trackLength = 0, this.trainCarGapFactor = 0.68, this.trainCarScaleFactor = 0.468, this.railPathPoints = [], this.railSegmentLengths = [], this.railTotalLength = 0, this.trainRotationOffset = Phaser.Math.DegToRad(-90), this.leadCarState = 'idle', this.leadCarBaseSize = null, this.debugMarkerLabels = [], this.showHoverCoords = false, this.barrierBaseAngle = 0, this.barrierIsOpen = false, this.carSlots = [], this.startModalOpen = false, this.hasStarted = false, this.gameCode = 'train_game', this.sessionId = null, this.sessionGameId = null, this.sessionQuestions = null, this.sessionTimeLimit = null, this.maxCars = 11, this.currentIndex = 0, this.score = 0, this.totalTimeMs = 300000, this.remainingMs = 300000, this.lastSecondShown = -1, this.quizOpen = false, this.quizLocked = false, this.gameOver = false, this.questions = [], this.currentCorrectIndex = 0, this.currentSessionQuestionId = null, this.currentOptionIds = [], this.trainStepPx = 0;\n    }\n    init(data) {\n        this.gameCode = (0,_gameConfig__WEBPACK_IMPORTED_MODULE_2__.resolveGameCode)(data?.gameCode ?? this.registry.get('gameCode'));\n        this.registry.set('gameCode', this.gameCode);\n        this.sessionId = data?.sessionId ?? null;\n        this.sessionGameId = data?.gameId ?? null;\n        this.sessionQuestions = data?.questions ?? null;\n        this.sessionTimeLimit = data?.timeLimit ?? null;\n    }\n    create() {\n        const { width, height } = this.scale;\n        const gameConfig = (0,_gameConfig__WEBPACK_IMPORTED_MODULE_2__.getGameConfig)(this.gameCode);\n        // Reset runtime state on every create() because scene.restart reuses the same instance.\n        this.gameOver = false;\n        this.quizOpen = false;\n        this.quizLocked = false;\n        this.startModalOpen = false;\n        this.hasStarted = false;\n        this.currentSessionQuestionId = null;\n        this.currentOptionIds = [];\n        this.leadCarState = 'idle';\n        this.barrierIsOpen = false;\n        this.carSlots = [];\n        this.leadCarBadge = undefined;\n        this.camera = this.cameras.main;\n        this.camera.setBackgroundColor(gameConfig.backgroundColor);\n        this.background = this.add.image(width / 2, height / 2, 'train-bg').setDisplaySize(width, height).setOrigin(0.5, 0.5);\n        this.setupQuestions();\n        this.setupTimer();\n        this.createHud();\n        this.currentIndex = 0;\n        this.score = 0;\n        this.createRailway();\n        if (this.showCars) {\n            this.layoutTrain();\n            this.updateTrainCars(true);\n        }\n        this.createBarrierGate();\n        this.createQuizModal();\n        this.createStartModal();\n        this.createTimeUpModal();\n        this.openStartModal();\n        this.scale.on('resize', ()=>{\n            const { width: newWidth, height: newHeight } = this.scale;\n            this.background.setPosition(newWidth / 2, newHeight / 2).setDisplaySize(newWidth, newHeight);\n            this.layoutHud();\n            this.layoutQuiz();\n            this.updateBarrierPosition();\n            this.layoutStartModal();\n            this.layoutTimeUpModal();\n        });\n        _EventBus__WEBPACK_IMPORTED_MODULE_1__.EventBus.emit('current-scene-ready', this);\n    }\n    update(_time, delta) {\n        if (this.gameOver) return;\n        if (!this.hasStarted) {\n            this.updateTrainCars();\n            return;\n        }\n        this.remainingMs = Math.max(0, this.remainingMs - delta);\n        const seconds = Math.ceil(this.remainingMs / 1000);\n        if (seconds !== this.lastSecondShown) {\n            this.lastSecondShown = seconds;\n            this.timerText.setText(this.formatTime(seconds));\n        }\n        if (this.remainingMs <= 0 && !this.gameOver) {\n            this.endGame('Out of time.', 'lose');\n        }\n        this.updateTrainCars();\n    }\n    setupQuestions() {\n        const source = this.sessionQuestions && this.sessionQuestions.length > 0 ? this.sessionQuestions : FALLBACK_QUESTIONS;\n        this.questions = source.slice(0);\n    }\n    setupTimer() {\n        if (this.sessionTimeLimit && this.sessionTimeLimit > 0) {\n            this.totalTimeMs = this.sessionTimeLimit * 1000;\n        }\n        this.remainingMs = this.totalTimeMs;\n    }\n    createHud() {\n        this.uiRoot = this.add.container(0, 0).setDepth(2000);\n        this.hudBackButton = this.add.container(0, 0);\n        const backBg = this.add.graphics();\n        backBg.fillStyle(0xffffff, 0.95);\n        backBg.fillRoundedRect(-22, -22, 44, 44, 14);\n        backBg.lineStyle(2, 0x0ea5e9, 0.2);\n        backBg.strokeRoundedRect(-22, -22, 44, 44, 14);\n        const backIcon = this.add.text(0, 1, '<', {\n            fontFamily: 'Arial Black',\n            fontSize: '26px',\n            color: '#0f172a'\n        }).setOrigin(0.5);\n        const backHit = this.add.zone(0, 0, 44, 44).setOrigin(0.5).setInteractive({\n            useHandCursor: true\n        });\n        backHit.on('pointerup', ()=>this.handleBackToGameList());\n        this.hudBackButton.add([\n            backBg,\n            backIcon\n        ]);\n        this.hudBackButton.setSize(44, 44);\n        this.hudBackButton.add(backHit);\n        this.hudPointsPill = this.add.container(0, 0);\n        const pointsBg = this.add.graphics();\n        const pointsW = 168;\n        const pointsH = 44;\n        pointsBg.fillStyle(0xffffff, 0.98);\n        pointsBg.fillRoundedRect(-pointsW / 2, -pointsH / 2, pointsW, pointsH, 22);\n        pointsBg.lineStyle(2, 0xf59e0b, 0.4);\n        pointsBg.strokeRoundedRect(-pointsW / 2, -pointsH / 2, pointsW, pointsH, 22);\n        const star = this.add.image(-pointsW / 2 + 24, 0, 'star').setScale(0.32).setTint(0xfbbf24);\n        this.scoreText = this.add.text(-pointsW / 2 + 46, 0, 'POINTS: 00', {\n            fontFamily: 'Arial Black',\n            fontSize: '18px',\n            color: '#0f172a'\n        }).setOrigin(0, 0.5);\n        this.hudPointsPill.add([\n            pointsBg,\n            star,\n            this.scoreText\n        ]);\n        this.hudTimerPill = this.add.container(0, 0);\n        const timerBg = this.add.graphics();\n        const timerW = 96;\n        const timerH = 40;\n        timerBg.fillStyle(0xffffff, 0.98);\n        timerBg.fillRoundedRect(-timerW / 2, -timerH / 2, timerW, timerH, 20);\n        timerBg.lineStyle(2, 0x94a3b8, 0.4);\n        timerBg.strokeRoundedRect(-timerW / 2, -timerH / 2, timerW, timerH, 20);\n        this.timerText = this.add.text(0, 0, this.formatTime(Math.ceil(this.remainingMs / 1000)), {\n            fontFamily: 'Arial Black',\n            fontSize: '16px',\n            color: '#0f172a'\n        }).setOrigin(0.5);\n        this.hudTimerPill.add([\n            timerBg,\n            this.timerText\n        ]);\n        this.uiRoot.add([\n            this.hudBackButton,\n            this.hudPointsPill,\n            this.hudTimerPill\n        ]);\n        this.layoutHud();\n        this.createTrafficLight();\n    }\n    layoutHud() {\n        const { width, height } = this.scale;\n        const topInset = Math.max(16, Math.round(height * 0.03));\n        const sideInset = Math.max(14, Math.round(width * 0.04));\n        const rightEdge = width - sideInset;\n        this.hudBackButton.setPosition(sideInset + 22, topInset + 22);\n        this.hudPointsPill.setPosition(width / 2, topInset + 22);\n        this.hudTimerPill.setPosition(rightEdge - 48, topInset + 22);\n    }\n    handleBackToGameList() {\n        window.location.href = '/';\n    }\n    createTrafficLight() {\n        const lightHeight = 230;\n        const sourceHeight = 1463;\n        const sourceWidth = 335;\n        const lightWidth = Math.round(lightHeight * (sourceWidth / sourceHeight));\n        const baseX = 88;\n        const baseY = 808;\n        const anchorY = Math.round(baseY + lightHeight / 2);\n        const makeVariant = (key)=>this.add.image(baseX, baseY, key).setOrigin(0.5, 1).setDisplaySize(lightWidth, lightHeight).setDepth(1000).setAlpha(1);\n        const container = this.add.container(baseX, anchorY).setDepth(1000);\n        const offsets = {\n            red: {\n                x: 0,\n                y: 0\n            },\n            yellow: {\n                x: 0,\n                y: 0\n            },\n            green: {\n                x: -1,\n                y: 0\n            }\n        };\n        const red = this.textures.exists('train-light-red') ? this.add.image(0, 0, 'train-light-red') : this.add.rectangle(0, 0, lightWidth, lightHeight, 0xef4444, 1);\n        const yellow = this.textures.exists('train-light-yellow') ? this.add.image(0, 0, 'train-light-yellow') : this.add.rectangle(0, 0, lightWidth, lightHeight, 0xfbbf24, 1);\n        const green = this.textures.exists('train-light-green') ? this.add.image(0, 0, 'train-light-green') : this.add.rectangle(0, 0, lightWidth, lightHeight, 0x22c55e, 1);\n        const normalize = (obj)=>{\n            if ('setOrigin' in obj) {\n                obj.setOrigin(0.5, 1);\n            }\n            if ('setDisplaySize' in obj) {\n                obj.setDisplaySize(lightWidth, lightHeight);\n            }\n        };\n        normalize(red);\n        normalize(yellow);\n        normalize(green);\n        red.setPosition(offsets.red.x, offsets.red.y);\n        yellow.setPosition(offsets.yellow.x, offsets.yellow.y);\n        green.setPosition(offsets.green.x, offsets.green.y);\n        container.add([\n            red,\n            yellow,\n            green\n        ]);\n        this.trafficLightVariants = {\n            red: red,\n            yellow: yellow,\n            green: green\n        };\n        this.trafficLight = this.trafficLightVariants.red;\n        const cycle = [\n            'red',\n            'yellow',\n            'green'\n        ];\n        let cycleIndex = 0;\n        this.setTrafficLightColor(cycle[cycleIndex]);\n        this.time.addEvent({\n            delay: 700,\n            loop: true,\n            callback: ()=>{\n                cycleIndex = (cycleIndex + 1) % cycle.length;\n                this.setTrafficLightColor(cycle[cycleIndex]);\n            }\n        });\n    }\n    setTrafficLightColor(color) {\n        if (!this.trafficLightVariants) return;\n        if (this.trafficLightState === color) return;\n        this.trafficLightState = color;\n        const { red, yellow, green } = this.trafficLightVariants;\n        red.setVisible(color === 'red');\n        yellow.setVisible(color === 'yellow');\n        green.setVisible(color === 'green');\n    }\n    layoutTrain() {\n        const { width, height } = this.scale;\n        const scaleX = this.background.displayWidth / this.background.width;\n        const scaleY = this.background.displayHeight / this.background.height;\n        const scale = Math.min(scaleX, scaleY) * this.trainCarScaleFactor;\n        const trackCurve = this.createTrackCurve(width, height);\n        const trackPoints = this.sampleTrack(trackCurve, this.maxCars);\n        this.carSlots = [];\n        for(let i = 0; i < this.maxCars; i += 1){\n            const carKey = `train-car-${i + 1}`;\n            const point = trackPoints[i] ?? {\n                x: width / 2,\n                y: height / 2\n            };\n            const angle = this.getTrackAngle(trackPoints, i) + this.trainRotationOffset;\n            const car = this.add.image(point.x, point.y, carKey).setScale(scale).setRotation(angle);\n            car.setAlpha(1);\n            const lock = this.createLockOverlay(point.x, point.y, car.displayWidth, car.displayHeight, i);\n            lock.setVisible(false);\n            lock.disableInteractive();\n            this.carSlots.push({\n                index: i,\n                car,\n                lock\n            });\n        }\n        if (this.carSlots.length > 0) {\n            const referenceCar = this.carSlots[0].car;\n            const carLength = Math.max(referenceCar.displayWidth, referenceCar.displayHeight);\n            this.trainGapPx = carLength * this.trainCarGapFactor;\n            this.trainStepPx = this.trainGapPx;\n            this.leadCarBaseSize = {\n                width: referenceCar.displayWidth,\n                height: referenceCar.displayHeight\n            };\n        }\n        this.carSlots[0]?.car.setTexture('train-car-1');\n        this.setLeadCarState('idle');\n        this.refreshLocks();\n    }\n    getLeadCarTextureKey(state) {\n        switch(state){\n            case 'correct':\n                return 'train-fox-correct';\n            case 'incorrect':\n                return 'train-fox-incorrect';\n            case 'idle':\n            default:\n                return 'train-fox-idle';\n        }\n    }\n    setLeadCarState(state) {\n        this.leadCarState = state;\n        const leadCar = this.carSlots[0]?.car;\n        if (!leadCar) return;\n        if (!leadCar.scene) return;\n        if (this.leadCarBadge && !this.leadCarBadge.scene) {\n            this.leadCarBadge = undefined;\n        }\n        if (leadCar.texture.key !== 'train-car-1') {\n            leadCar.setTexture('train-car-1');\n        }\n        if (this.leadCarBaseSize) {\n            leadCar.setDisplaySize(this.leadCarBaseSize.width, this.leadCarBaseSize.height);\n            leadCar.setOrigin(0.5, 0.5);\n        }\n        const textureKey = this.getLeadCarTextureKey(state);\n        if (!this.textures.exists(textureKey)) {\n            if (this.leadCarBadge) this.leadCarBadge.setVisible(false);\n            return;\n        }\n        if (!this.leadCarBadge) {\n            this.leadCarBadge = this.add.image(leadCar.x, leadCar.y, textureKey).setDepth(leadCar.depth + 1).setOrigin(0.5, 0.5);\n        } else {\n            this.leadCarBadge.setTexture(textureKey).setVisible(true);\n        }\n        if (this.leadCarBaseSize && this.leadCarBadge && this.leadCarBadge.scene) {\n            this.leadCarBadge.setDisplaySize(this.leadCarBaseSize.width * 0.5, this.leadCarBaseSize.height * 0.5);\n        }\n    }\n    createLockOverlay(x, y, width, height, index) {\n        const lock = this.add.container(x, y);\n        lock.setDepth(10);\n        const panelW = Math.max(140, width * 0.6);\n        const panelH = Math.max(48, height * 0.35);\n        const bg = this.add.rectangle(0, 0, panelW, panelH, 0x1f2937, 0.9);\n        bg.setStrokeStyle(2, 0xfbbf24, 0.9);\n        const text = this.add.text(0, 0, 'UNLOCK', {\n            fontFamily: 'Arial Black',\n            fontSize: '18px',\n            color: '#f8fafc'\n        }).setOrigin(0.5);\n        lock.add([\n            bg,\n            text\n        ]);\n        lock.setSize(panelW, panelH);\n        const hitArea = new Phaser.Geom.Rectangle(-panelW / 2, -panelH / 2, panelW, panelH);\n        lock.setInteractive(hitArea, Phaser.Geom.Rectangle.Contains);\n        lock.setData('hitArea', hitArea);\n        lock.on('pointerover', ()=>{\n            if (this.quizOpen || this.gameOver) return;\n            bg.setFillStyle(0x334155, 0.95);\n            lock.setScale(1.05);\n            this.input.setDefaultCursor('pointer');\n        });\n        lock.on('pointerout', ()=>{\n            bg.setFillStyle(0x1f2937, 0.9);\n            lock.setScale(1);\n            this.input.setDefaultCursor('default');\n        });\n        lock.on('pointerdown', ()=>{\n            if (this.quizOpen || this.gameOver) return;\n            if (index !== this.currentIndex) return;\n            this.openQuestion(index);\n        });\n        return lock;\n    }\n    refreshLocks() {\n        this.carSlots.forEach((slot)=>{\n            if (!slot || !slot.car || !slot.lock) return;\n            if (!slot.car.scene || !slot.lock.scene) return;\n            slot.car.setAlpha(1);\n            slot.lock.setVisible(false);\n            if (slot.lock.input) {\n                slot.lock.disableInteractive();\n            }\n        });\n        const points = Math.max(0, this.score);\n        this.scoreText.setText(`POINTS: ${points.toString().padStart(2, '0')}`);\n    }\n    createQuizModal() {\n        this.quizPanel = new _ui_QuizPanel__WEBPACK_IMPORTED_MODULE_3__.QuizPanel(this, {\n            optionCount: 4,\n            depth: 2000,\n            parent: this.uiRoot,\n            showIndex: true\n        });\n        this.quizModal = this.quizPanel.container;\n        this.quizPanel.onOptionSelected((index)=>{\n            if (this.quizLocked) return;\n            void this.handleAnswer(index);\n        });\n        this.layoutQuiz();\n    }\n    createStartModal() {\n        const { width, height } = this.scale;\n        const container = this.add.container(0, 0).setDepth(2100).setVisible(false);\n        const overlay = this.add.rectangle(0, 0, width, height, 0xffffff, 0.12).setOrigin(0, 0);\n        const panel = this.add.container(width / 2, Math.round(height * 0.56));\n        const panelWidth = Math.min(620, width - 80);\n        const panelHeight = Math.min(220, Math.round(height * 0.32));\n        const panelShadow = this.add.graphics();\n        panelShadow.fillStyle(0x000000, 0.18);\n        panelShadow.fillRoundedRect(-panelWidth / 2 + 8, -panelHeight / 2 + 10, panelWidth, panelHeight, 30);\n        const panelBg = this.add.graphics();\n        panelBg.fillStyle(0xffffff, 0.85);\n        panelBg.fillRoundedRect(-panelWidth / 2, -panelHeight / 2, panelWidth, panelHeight, 28);\n        panelBg.lineStyle(2, 0xffffff, 0.65);\n        panelBg.strokeRoundedRect(-panelWidth / 2, -panelHeight / 2, panelWidth, panelHeight, 28);\n        const title = this.add.text(0, -38, 'Answer the questions to help the\\ntrain go ahead.', {\n            fontFamily: 'Arial Black',\n            fontSize: '20px',\n            color: '#0f172a',\n            align: 'center',\n            lineSpacing: 6\n        }).setOrigin(0.5);\n        const button = this.createStartButton(0, Math.round(panelHeight * 0.23));\n        panel.add([\n            panelShadow,\n            panelBg,\n            title,\n            button\n        ]);\n        container.add([\n            overlay,\n            panel\n        ]);\n        this.startModal = container;\n        this.startModalPanel = panel;\n        this.uiRoot.add(container);\n        this.layoutStartModal();\n    }\n    createTimeUpModal() {\n        const { width, height } = this.scale;\n        const container = this.add.container(0, 0).setDepth(2200).setVisible(false);\n        const overlay = this.add.rectangle(0, 0, width, height, 0x000000, 0.1).setOrigin(0, 0);\n        const panel = this.add.container(width / 2, Math.round(height * 0.56));\n        const panelWidth = Math.min(620, width - 80);\n        const panelHeight = Math.min(220, Math.round(height * 0.32));\n        const panelShadow = this.add.graphics();\n        panelShadow.fillStyle(0x000000, 0.18);\n        panelShadow.fillRoundedRect(-panelWidth / 2 + 8, -panelHeight / 2 + 10, panelWidth, panelHeight, 30);\n        const panelBg = this.add.graphics();\n        panelBg.fillStyle(0xffffff, 0.85);\n        panelBg.fillRoundedRect(-panelWidth / 2, -panelHeight / 2, panelWidth, panelHeight, 28);\n        panelBg.lineStyle(2, 0xffffff, 0.65);\n        panelBg.strokeRoundedRect(-panelWidth / 2, -panelHeight / 2, panelWidth, panelHeight, 28);\n        this.timeUpTitleText = this.add.text(0, -14, 'Out of time! Failed!', {\n            fontFamily: 'Arial Black',\n            fontSize: '20px',\n            color: '#0f172a',\n            align: 'center'\n        }).setOrigin(0.5);\n        const button = this.createTimeoutButton(0, Math.round(panelHeight * 0.23));\n        panel.add([\n            panelShadow,\n            panelBg,\n            this.timeUpTitleText,\n            button\n        ]);\n        container.add([\n            overlay,\n            panel\n        ]);\n        this.timeUpModal = container;\n        this.timeUpModalPanel = panel;\n        this.uiRoot.add(container);\n        this.layoutTimeUpModal();\n    }\n    layoutStartModal() {\n        if (!this.startModal || !this.startModalPanel) return;\n        const { width, height } = this.scale;\n        const overlay = this.startModal.list[0];\n        if (overlay && 'setSize' in overlay) {\n            overlay.setSize(width, height);\n        }\n        this.startModalPanel.setPosition(width / 2, Math.round(height * 0.56));\n    }\n    layoutTimeUpModal() {\n        if (!this.timeUpModal || !this.timeUpModalPanel) return;\n        const { width, height } = this.scale;\n        const overlay = this.timeUpModal.list[0];\n        if (overlay && 'setSize' in overlay) {\n            overlay.setSize(width, height);\n        }\n        this.timeUpModalPanel.setPosition(width / 2, Math.round(height * 0.56));\n    }\n    createStartButton(x, y) {\n        const container = this.add.container(x, y);\n        const width = 530;\n        const height = 72;\n        const radius = 30;\n        const shadow = this.add.graphics();\n        shadow.fillStyle(0x1e3a8a, 0.18);\n        shadow.fillRoundedRect(-width / 2 + 4, -height / 2 + 6, width, height, radius);\n        const bg = this.add.graphics();\n        const draw = (fill, stroke)=>{\n            bg.clear();\n            bg.fillStyle(fill, 1);\n            bg.fillRoundedRect(-width / 2, -height / 2, width, height, radius);\n            bg.lineStyle(2, stroke, 0.65);\n            bg.strokeRoundedRect(-width / 2, -height / 2, width, height, radius);\n        };\n        draw(0x3b82f6, 0x93c5fd);\n        const text = this.add.text(0, 1, 'Start Game', {\n            fontFamily: 'Arial Black',\n            fontSize: '34px',\n            color: '#ffffff'\n        }).setOrigin(0.5).setScale(0.66);\n        const hit = this.add.rectangle(0, 0, width + 16, height + 16, 0xffffff, 0.001);\n        hit.setInteractive();\n        container.add([\n            shadow,\n            bg,\n            text,\n            hit\n        ]);\n        container.setSize(width, height);\n        hit.on('pointerover', ()=>{\n            draw(0x2563eb, 0xbfdbfe);\n            this.input.setDefaultCursor('pointer');\n            this.tweens.add({\n                targets: container,\n                scale: 1.02,\n                duration: 100,\n                ease: 'Sine.easeOut'\n            });\n        });\n        hit.on('pointerout', ()=>{\n            draw(0x3b82f6, 0x93c5fd);\n            this.input.setDefaultCursor('default');\n            this.tweens.add({\n                targets: container,\n                scale: 1,\n                duration: 100,\n                ease: 'Sine.easeOut'\n            });\n        });\n        hit.on('pointerdown', ()=>{\n            if (!this.startModalOpen) return;\n            draw(0x1d4ed8, 0xbfdbfe);\n            this.tweens.add({\n                targets: container,\n                scale: 0.98,\n                duration: 70,\n                ease: 'Sine.easeOut'\n            });\n            this.startGameFlow();\n        });\n        hit.on('pointerup', ()=>{\n            draw(0x2563eb, 0xbfdbfe);\n            this.tweens.add({\n                targets: container,\n                scale: 1.02,\n                duration: 70,\n                ease: 'Sine.easeOut'\n            });\n        });\n        this.tweens.add({\n            targets: container,\n            scale: 1.03,\n            duration: 850,\n            yoyo: true,\n            repeat: -1\n        });\n        return container;\n    }\n    createTimeoutButton(x, y) {\n        const container = this.add.container(x, y);\n        const width = 530;\n        const height = 72;\n        const radius = 30;\n        const shadow = this.add.graphics();\n        shadow.fillStyle(0x1e3a8a, 0.18);\n        shadow.fillRoundedRect(-width / 2 + 4, -height / 2 + 6, width, height, radius);\n        const bg = this.add.graphics();\n        const draw = (fill, stroke)=>{\n            bg.clear();\n            bg.fillStyle(fill, 1);\n            bg.fillRoundedRect(-width / 2, -height / 2, width, height, radius);\n            bg.lineStyle(2, stroke, 0.65);\n            bg.strokeRoundedRect(-width / 2, -height / 2, width, height, radius);\n        };\n        draw(0x3b82f6, 0x93c5fd);\n        const text = this.add.text(0, 1, 'Play Again', {\n            fontFamily: 'Arial Black',\n            fontSize: '34px',\n            color: '#ffffff'\n        }).setOrigin(0.5).setScale(0.66);\n        const hit = this.add.rectangle(0, 0, width + 16, height + 16, 0xffffff, 0.001);\n        hit.setInteractive();\n        container.add([\n            shadow,\n            bg,\n            text,\n            hit\n        ]);\n        container.setSize(width, height);\n        hit.on('pointerover', ()=>{\n            if (hit.getData('restarting')) return;\n            draw(0x2563eb, 0xbfdbfe);\n            this.input.setDefaultCursor('pointer');\n            this.tweens.add({\n                targets: container,\n                scale: 1.02,\n                duration: 100,\n                ease: 'Sine.easeOut'\n            });\n        });\n        hit.on('pointerout', ()=>{\n            if (hit.getData('restarting')) return;\n            draw(0x3b82f6, 0x93c5fd);\n            this.input.setDefaultCursor('default');\n            this.tweens.add({\n                targets: container,\n                scale: 1,\n                duration: 100,\n                ease: 'Sine.easeOut'\n            });\n        });\n        hit.on('pointerdown', ()=>{\n            if (hit.getData('restarting')) return;\n            hit.setData('restarting', true);\n            hit.disableInteractive();\n            draw(0x1d4ed8, 0xbfdbfe);\n            this.tweens.add({\n                targets: container,\n                scale: 0.98,\n                duration: 70,\n                ease: 'Sine.easeOut'\n            });\n            this.time.delayedCall(90, ()=>{\n                if (!this.sys.isActive()) return;\n                this.restartTrainRun();\n            });\n        });\n        hit.on('pointerup', ()=>{\n            if (hit.getData('restarting')) return;\n            draw(0x2563eb, 0xbfdbfe);\n            this.tweens.add({\n                targets: container,\n                scale: 1.02,\n                duration: 70,\n                ease: 'Sine.easeOut'\n            });\n        });\n        return container;\n    }\n    openStartModal() {\n        if (!this.startModal) return;\n        this.startModalOpen = true;\n        this.hasStarted = false;\n        this.startModal.setVisible(true);\n        this.startModal.setAlpha(0);\n        this.tweens.add({\n            targets: this.startModal,\n            alpha: 1,\n            duration: 180\n        });\n    }\n    closeStartModal() {\n        if (!this.startModal) return;\n        this.startModalOpen = false;\n        this.startModal.setVisible(false);\n    }\n    startGameFlow() {\n        if (this.hasStarted) return;\n        this.hasStarted = true;\n        this.closeStartModal();\n        this.openQuestion(this.currentIndex);\n    }\n    openTimeUpModal(message = 'Out of time! Try again.') {\n        if (!this.timeUpModal || !this.timeUpModalPanel) return;\n        this.timeUpTitleText.setText(message);\n        this.timeUpModalPanel.setScale(0.96);\n        this.timeUpModal.setVisible(true);\n        this.timeUpModal.setAlpha(0);\n        this.tweens.add({\n            targets: this.timeUpModal,\n            alpha: 1,\n            duration: 200\n        });\n        this.tweens.add({\n            targets: this.timeUpModalPanel,\n            scale: 1,\n            duration: 240,\n            ease: 'Back.easeOut'\n        });\n    }\n    submitSessionResult() {\n        if (!this.sessionGameId) return;\n        Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../../services/api */ \"(pages-dir-node)/./src/services/api.ts\")).then(({ endGameSession })=>endGameSession(this.sessionGameId, this.score)).catch((error)=>{\n            console.error('endGameSession failed', error);\n        });\n    }\n    restartTrainRun() {\n        if (!this.sys || !this.sys.isActive()) return;\n        this.input.setDefaultCursor('default');\n        this.closeQuiz();\n        if (this.timeUpModal) {\n            this.timeUpModal.setVisible(false);\n        }\n        this.scene.restart({\n            gameCode: this.gameCode,\n            sessionId: this.sessionId,\n            gameId: this.sessionGameId,\n            questions: this.sessionQuestions,\n            timeLimit: this.sessionTimeLimit\n        });\n    }\n    layoutQuiz() {\n        const { width, height } = this.scale;\n        this.quizPanel.layout(width, height);\n    }\n    openQuestion(index) {\n        if (this.quizOpen || this.gameOver) return;\n        if (!this.hasStarted) return;\n        this.setLeadCarState('idle');\n        const question = this.getQuestionForIndex(index);\n        const options = question.question.options.map((opt)=>opt.text);\n        this.currentOptionIds = question.question.options.map((opt)=>opt.id ?? '');\n        this.currentSessionQuestionId = question.session_question_id ?? null;\n        let correctIndex = question.question.options.findIndex((opt)=>opt.is_correct);\n        if (correctIndex < 0) correctIndex = 0;\n        this.currentCorrectIndex = correctIndex;\n        this.quizPanel.setFeedback('idle');\n        this.quizPanel.setQuestion({\n            index: index + 1,\n            total: this.maxCars,\n            question: question.question.content,\n            options\n        });\n        this.updateBarrierPosition();\n        this.setBarrierOpen(false);\n        this.layoutQuiz();\n        this.quizOpen = true;\n        this.quizLocked = false;\n        this.quizModal.setVisible(true);\n        this.quizPanel.setInteractive(true);\n    }\n    async handleAnswer(selectedIndex) {\n        if (this.quizLocked) return;\n        this.quizLocked = true;\n        let isCorrect = selectedIndex === this.currentCorrectIndex;\n        const selectedOptionId = this.currentOptionIds[selectedIndex];\n        if (this.sessionId && this.currentSessionQuestionId && selectedOptionId) {\n            try {\n                const { submitAnswer } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../../services/api */ \"(pages-dir-node)/./src/services/api.ts\"));\n                const res = await submitAnswer(this.sessionId, this.currentSessionQuestionId, selectedOptionId);\n                isCorrect = res.data.is_correct;\n            } catch (error) {\n                console.error('submitAnswer failed, fallback to local check', error);\n            }\n        }\n        if (isCorrect) {\n            this.setLeadCarState('correct');\n            this.quizPanel.setFeedback('correct');\n            this.quizPanel.setOptionState(selectedIndex, 'correct');\n            this.quizPanel.setInteractive(false);\n            this.time.delayedCall(500, ()=>{\n                this.closeQuiz();\n                this.applyCorrect();\n            });\n        } else {\n            this.setLeadCarState('incorrect');\n            this.quizPanel.setFeedback('wrong');\n            this.quizPanel.setOptionState(selectedIndex, 'wrong');\n            this.quizPanel.setInteractive(false);\n            this.time.delayedCall(650, ()=>{\n                this.applyWrong();\n                this.setLeadCarState('idle');\n                this.quizPanel.setOptionState(selectedIndex, 'normal');\n                this.quizPanel.setFeedback('idle');\n                this.quizPanel.setInteractive(true);\n                this.quizLocked = false;\n            });\n        }\n    }\n    applyCorrect() {\n        this.currentIndex = Math.min(this.maxCars, this.currentIndex + 1);\n        this.score = this.currentIndex;\n        this.refreshLocks();\n        if (this.currentIndex >= this.maxCars) {\n            this.setBarrierOpen(true);\n            this.moveTrainToEnd(()=>{\n                this.endGame(`You completed all ${this.maxCars} cars!`, 'win');\n            });\n            return;\n        }\n        this.moveTrainToIndex(this.currentIndex, ()=>{\n            this.openQuestion(this.currentIndex);\n        });\n    }\n    applyWrong() {\n        this.refreshLocks();\n    }\n    moveTrainToIndex(targetIndex, onComplete) {\n        if (this.railTotalLength <= 0 || this.trainStepPx <= 0) {\n            if (onComplete) onComplete();\n            return;\n        }\n        const visualIndex = Phaser.Math.Clamp(targetIndex, 0, this.maxCars);\n        const maxDistance = Math.max(0, this.railTotalLength - 1);\n        const targetDistance = Math.min(this.trainStepPx * visualIndex, maxDistance);\n        const delta = Math.abs(targetDistance - this.trainDistancePx);\n        const duration = Phaser.Math.Clamp(Math.round(420 + delta * 1.8), 650, 1200);\n        this.trainMoving = true;\n        const tweenState = {\n            value: this.trainDistancePx\n        };\n        this.tweens.add({\n            targets: tweenState,\n            value: targetDistance,\n            duration,\n            ease: 'Sine.easeInOut',\n            onUpdate: ()=>{\n                this.trainDistancePx = tweenState.value;\n                this.updateTrainCars(true);\n            },\n            onComplete: ()=>{\n                this.trainDistancePx = targetDistance;\n                this.trainMoving = false;\n                this.updateTrainCars(true);\n                if (onComplete) onComplete();\n            }\n        });\n    }\n    moveTrainToEnd(onComplete) {\n        if (this.railTotalLength <= 0) {\n            if (onComplete) onComplete();\n            return;\n        }\n        const maxDistance = Math.max(0, this.railTotalLength - 1);\n        const trainLength = Math.max(0, (this.maxCars - 1) * this.trainGapPx);\n        const targetDistance = maxDistance + trainLength;\n        const delta = Math.abs(targetDistance - this.trainDistancePx);\n        const duration = Phaser.Math.Clamp(Math.round(520 + delta * 1.6), 800, 1800);\n        this.trainMoving = true;\n        const tweenState = {\n            value: this.trainDistancePx\n        };\n        this.tweens.add({\n            targets: tweenState,\n            value: targetDistance,\n            duration,\n            ease: 'Sine.easeInOut',\n            onUpdate: ()=>{\n                this.trainDistancePx = tweenState.value;\n                this.updateTrainCars(true);\n            },\n            onComplete: ()=>{\n                this.trainDistancePx = targetDistance;\n                this.trainMoving = false;\n                this.updateTrainCars(true);\n                if (onComplete) onComplete();\n            }\n        });\n    }\n    closeQuiz() {\n        this.quizModal.setVisible(false);\n        this.quizOpen = false;\n        this.quizLocked = false;\n    }\n    getQuestionForIndex(index) {\n        if (this.questions.length === 0) {\n            return FALLBACK_QUESTIONS[0];\n        }\n        return this.questions[index % this.questions.length];\n    }\n    createTrackCurve(width, height) {\n        const baseWidth = 750;\n        const baseHeight = 1334;\n        const scaleX = width / baseWidth;\n        const scaleY = height / baseHeight;\n        const points = [\n            {\n                x: 405,\n                y: 10\n            },\n            {\n                x: 455,\n                y: 85\n            },\n            {\n                x: 515,\n                y: 200\n            },\n            {\n                x: 485,\n                y: 360\n            },\n            {\n                x: 375,\n                y: 540\n            },\n            {\n                x: 250,\n                y: 740\n            },\n            {\n                x: 220,\n                y: 920\n            },\n            {\n                x: 270,\n                y: 1100\n            },\n            {\n                x: 325,\n                y: 1185\n            },\n            {\n                x: 505,\n                y: 1325\n            }\n        ].map((p)=>new Phaser.Math.Vector2(p.x * scaleX, p.y * scaleY));\n        return new Phaser.Curves.Spline(points);\n    }\n    sampleTrack(curve, count) {\n        const points = [];\n        const total = Math.max(1, count - 1);\n        for(let i = 0; i < count; i += 1){\n            const t = total === 0 ? 0 : i / total;\n            const p = curve.getPointAt(t);\n            points.push({\n                x: p.x,\n                y: p.y\n            });\n        }\n        return points;\n    }\n    drawTrackCurve(curve) {\n        const { startT, endT } = this.getVisibleTRange(curve);\n        const graphics = this.add.graphics();\n        graphics.setDepth(1000);\n        graphics.lineStyle(10, 0xff0000, 1);\n        const steps = 120;\n        const first = curve.getPoint(startT);\n        graphics.beginPath();\n        graphics.moveTo(first.x, first.y);\n        for(let i = 1; i <= steps; i += 1){\n            const t = startT + (endT - startT) * (i / steps);\n            const p = curve.getPoint(t);\n            graphics.lineTo(p.x, p.y);\n        }\n        graphics.strokePath();\n        this.debugCurveGraphics = graphics;\n    }\n    drawCurveMarkers(curve, count) {\n        const { width, height } = this.scale;\n        const { startT, endT } = this.getVisibleTRange(curve);\n        const graphics = this.add.graphics();\n        graphics.setDepth(1001);\n        graphics.fillStyle(0x22c55e, 1);\n        graphics.lineStyle(2, 0x22c55e, 1);\n        const total = Math.max(1, count - 1);\n        for(let i = 0; i < count; i += 1){\n            const t = total === 0 ? startT : startT + (endT - startT) * (i / total);\n            const point = curve.getPoint(t);\n            const clampedX = Phaser.Math.Clamp(point.x, 16, width - 16);\n            const clampedY = Phaser.Math.Clamp(point.y, 16, height - 16);\n            if (clampedX !== point.x || clampedY !== point.y) {\n                graphics.strokeLineShape(new Phaser.Geom.Line(point.x, point.y, clampedX, clampedY));\n            }\n            graphics.fillCircle(clampedX, clampedY, 8);\n            const labelText = `${i + 1} (${Math.round(point.x)}, ${Math.round(point.y)})`;\n            const label = this.add.text(clampedX + 10, clampedY - 10, labelText, {\n                fontFamily: 'Arial Black',\n                fontSize: '18px',\n                color: '#22c55e',\n                stroke: '#0f172a',\n                strokeThickness: 3\n            });\n            label.setDepth(1002);\n            this.debugMarkerLabels.push(label);\n        }\n        this.debugMarkerGraphics = graphics;\n    }\n    getVisibleTRange(curve) {\n        const { width, height } = this.scale;\n        const margin = 8;\n        const samples = 400;\n        let startT = 0;\n        let endT = 1;\n        let foundStart = false;\n        for(let i = 0; i <= samples; i += 1){\n            const t = i / samples;\n            const p = curve.getPoint(t);\n            const inside = p.x >= margin && p.x <= width - margin && p.y >= margin && p.y <= height - margin;\n            if (inside && !foundStart) {\n                startT = t;\n                foundStart = true;\n            }\n            if (inside) {\n                endT = t;\n            }\n        }\n        const startExtend = 0.0;\n        const endExtend = 0.0;\n        return {\n            startT: Math.max(0, startT - startExtend),\n            endT: Math.min(1, endT + endExtend)\n        };\n    }\n    getTrackAngle(points, index) {\n        const curr = points[index];\n        const next = points[index + 1] ?? points[index - 1] ?? curr;\n        const angle = Math.atan2(next.y - curr.y, next.x - curr.x);\n        return angle;\n    }\n    buildRailPath(spline) {\n        const length = spline.getLength();\n        const sampleEveryPx = 20;\n        const samples = Math.max(60, Math.round(length / sampleEveryPx));\n        const points = [];\n        for(let i = 0; i <= samples; i += 1){\n            const t = i / samples;\n            const p = spline.getPointAt(t);\n            points.push(new Phaser.Math.Vector2(p.x, p.y));\n        }\n        if (points.length < 2) {\n            this.railPathPoints = points;\n            this.railSegmentLengths = [];\n            this.railTotalLength = 0;\n            return;\n        }\n        const segments = [];\n        let total = 0;\n        for(let i = 0; i < points.length - 1; i += 1){\n            const curr = points[i];\n            const next = points[i + 1];\n            const segLen = Phaser.Math.Distance.Between(curr.x, curr.y, next.x, next.y);\n            segments.push(segLen);\n            total += segLen;\n        }\n        this.railPathPoints = points;\n        this.railSegmentLengths = segments;\n        this.railTotalLength = total;\n    }\n    sampleRailByDistanceNoWrap(distancePx) {\n        if (this.railPathPoints.length < 2 || this.railTotalLength <= 0) {\n            return {\n                position: new Phaser.Math.Vector2(0, 0),\n                angle: 0\n            };\n        }\n        const total = this.railTotalLength;\n        if (distancePx <= 0) {\n            const start = this.railPathPoints[0];\n            const next = this.railPathPoints[1];\n            const angle = Math.atan2(next.y - start.y, next.x - start.x);\n            const dir = new Phaser.Math.Vector2(Math.cos(angle), Math.sin(angle));\n            const pos = new Phaser.Math.Vector2(start.x, start.y).add(dir.scale(distancePx));\n            return {\n                position: pos,\n                angle\n            };\n        }\n        if (distancePx >= total) {\n            const end = this.railPathPoints[this.railPathPoints.length - 1];\n            const prev = this.railPathPoints[this.railPathPoints.length - 2];\n            const angle = Math.atan2(end.y - prev.y, end.x - prev.x);\n            const dir = new Phaser.Math.Vector2(Math.cos(angle), Math.sin(angle));\n            const pos = new Phaser.Math.Vector2(end.x, end.y).add(dir.scale(distancePx - total));\n            return {\n                position: pos,\n                angle\n            };\n        }\n        let remaining = distancePx;\n        let segIndex = 0;\n        while(segIndex < this.railSegmentLengths.length && remaining > this.railSegmentLengths[segIndex]){\n            remaining -= this.railSegmentLengths[segIndex];\n            segIndex += 1;\n        }\n        const safeIndex = Math.min(segIndex, this.railPathPoints.length - 2);\n        const curr = this.railPathPoints[safeIndex];\n        const next = this.railPathPoints[safeIndex + 1];\n        const segLen = this.railSegmentLengths[safeIndex] || 1;\n        const ratio = Phaser.Math.Clamp(remaining / segLen, 0, 1);\n        const x = Phaser.Math.Linear(curr.x, next.x, ratio);\n        const y = Phaser.Math.Linear(curr.y, next.y, ratio);\n        const angle = Math.atan2(next.y - curr.y, next.x - curr.x);\n        return {\n            position: new Phaser.Math.Vector2(x, y),\n            angle\n        };\n    }\n    createRailway() {\n        const { width, height } = this.scale;\n        const spline = this.createTrackCurve(width, height);\n        this.trackSpline = spline;\n        this.trackLength = spline.getLength();\n        this.buildRailPath(spline);\n        const baseScale = Math.min(width / 750, height / 1334);\n        const railOffset = 18 * baseScale;\n        const sleeperWidth = railOffset * 1.8;\n        const sleeperHeight = 7 * baseScale;\n        const railwayContainer = this.add.container(0, 0);\n        this.railwayContainer = railwayContainer;\n        const railLeft = [];\n        const railRight = [];\n        const samples = 140;\n        for(let i = 0; i <= samples; i += 1){\n            const t = i / samples;\n            const point = spline.getPoint(t);\n            const tangent = spline.getTangent(t).normalize();\n            const normal = new Phaser.Math.Vector2(-tangent.y, tangent.x).normalize();\n            railLeft.push(new Phaser.Math.Vector2(point.x + normal.x * railOffset, point.y + normal.y * railOffset));\n            railRight.push(new Phaser.Math.Vector2(point.x - normal.x * railOffset, point.y - normal.y * railOffset));\n        }\n        const rails = this.add.graphics();\n        rails.lineStyle(8 * baseScale, 0xf8fafc, 1);\n        rails.beginPath();\n        rails.moveTo(railLeft[0].x, railLeft[0].y);\n        railLeft.forEach((p)=>rails.lineTo(p.x, p.y));\n        rails.strokePath();\n        rails.beginPath();\n        rails.moveTo(railRight[0].x, railRight[0].y);\n        railRight.forEach((p)=>rails.lineTo(p.x, p.y));\n        rails.strokePath();\n        rails.setDepth(5);\n        railwayContainer.add(rails);\n        const sleeperCount = 28;\n        for(let i = 0; i <= sleeperCount; i += 1){\n            const t = i / sleeperCount;\n            const point = spline.getPoint(t);\n            const tangent = spline.getTangent(t).normalize();\n            const angle = Math.atan2(tangent.y, tangent.x) + Math.PI / 2;\n            const sleeper = this.add.rectangle(point.x, point.y, sleeperWidth, sleeperHeight, 0xb45309, 0.95);\n            sleeper.setRotation(angle);\n            sleeper.setDepth(4);\n            railwayContainer.add(sleeper);\n        }\n        if (this.debugTrack) {\n            this.drawTrackCurve(spline);\n            this.drawCurveMarkers(spline, 11);\n        }\n        this.setRailwayVisible(this.showRailOverlay);\n        this.setDebugTrackVisible(this.debugTrack);\n        this.trainDistancePx = 0;\n        if (this.trainStepPx <= 0) {\n            this.trainStepPx = this.railTotalLength > 1 ? (this.railTotalLength - 1) / this.maxCars : 0;\n        }\n        this.refreshLocks();\n        this.updateTrainCars(true);\n    }\n    createBarrierGate() {\n        if (!this.textures.exists('train-barrier')) return;\n        const gate = this.add.image(0, 0, 'train-barrier');\n        gate.setDepth(6);\n        gate.setOrigin(0.08, 0.5);\n        this.barrierGate = gate;\n        this.updateBarrierPosition();\n        this.setBarrierOpen(false, true);\n    }\n    updateBarrierPosition() {\n        if (!this.barrierGate) return;\n        const baseWidth = 750;\n        const baseHeight = 1334;\n        const scaleX = this.scale.width / baseWidth;\n        const scaleY = this.scale.height / baseHeight;\n        const baseX = 355;\n        const baseY = 230;\n        this.barrierGate.setPosition(baseX * scaleX, baseY * scaleY);\n        const scale = Math.min(scaleX, scaleY) * 0.35;\n        this.barrierGate.setScale(scale);\n        this.barrierBaseAngle = 0;\n        const targetAngle = this.barrierIsOpen ? this.barrierBaseAngle - Phaser.Math.DegToRad(45) : this.barrierBaseAngle;\n        this.barrierGate.setRotation(targetAngle);\n    }\n    setBarrierOpen(open, immediate = false) {\n        if (!this.barrierGate) return;\n        this.barrierIsOpen = open;\n        const targetAngle = open ? this.barrierBaseAngle - Phaser.Math.DegToRad(45) : this.barrierBaseAngle;\n        if (immediate) {\n            this.barrierGate.setRotation(targetAngle);\n            return;\n        }\n        this.tweens.add({\n            targets: this.barrierGate,\n            rotation: targetAngle,\n            duration: 220,\n            ease: 'Sine.easeInOut'\n        });\n    }\n    updateTrainCars(force = false) {\n        if (!this.showCars) return;\n        if (!force && !this.trainMoving) return;\n        if (this.railTotalLength <= 0) return;\n        for(let i = 0; i < this.carSlots.length; i += 1){\n            const slot = this.carSlots[i];\n            const distanceFromBottom = this.trainDistancePx - i * this.trainGapPx;\n            const mappedDistance = Math.max(0, this.railTotalLength - 1) - distanceFromBottom;\n            const sample = this.sampleRailByDistanceNoWrap(mappedDistance);\n            slot.car.setPosition(sample.position.x, sample.position.y);\n            slot.car.setRotation(sample.angle + this.trainRotationOffset);\n        }\n        const leadCar = this.carSlots[0]?.car;\n        if (leadCar && this.leadCarBadge && this.leadCarBadge.scene) {\n            const offsetX = -leadCar.displayWidth * 0.34;\n            const offsetY = -leadCar.displayHeight * 0.08;\n            const rotation = leadCar.rotation;\n            const worldX = leadCar.x + Math.cos(rotation) * offsetX - Math.sin(rotation) * offsetY;\n            const worldY = leadCar.y + Math.sin(rotation) * offsetX + Math.cos(rotation) * offsetY;\n            this.leadCarBadge.setPosition(worldX, worldY);\n            this.leadCarBadge.setRotation(rotation);\n        }\n    }\n    setShowCars(value) {\n        this.showCars = value;\n        this.carSlots.forEach((slot)=>{\n            slot.car.setVisible(value);\n            slot.lock.setVisible(false);\n        });\n        if (this.leadCarBadge) {\n            this.leadCarBadge.setVisible(value);\n        }\n        if (value) {\n            this.refreshLocks();\n            this.updateTrainCars(true);\n        }\n    }\n    setRailwayVisible(value) {\n        if (this.railwayContainer) {\n            this.railwayContainer.setVisible(value);\n        }\n        if (this.debugCurveGraphics) {\n            this.debugCurveGraphics.setVisible(value && this.debugTrack);\n        }\n        if (this.debugMarkerGraphics) {\n            this.debugMarkerGraphics.setVisible(value && this.debugTrack);\n        }\n        this.debugMarkerLabels.forEach((label)=>label.setVisible(value && this.debugTrack));\n    }\n    isRailwayVisible() {\n        return this.railwayContainer?.visible ?? true;\n    }\n    setDebugTrackVisible(value) {\n        this.debugTrack = value;\n        if (this.debugCurveGraphics) {\n            this.debugCurveGraphics.setVisible(value);\n        }\n        if (this.debugMarkerGraphics) {\n            this.debugMarkerGraphics.setVisible(value);\n        }\n        this.debugMarkerLabels.forEach((label)=>label.setVisible(value));\n    }\n    setTrainMoving(value) {\n        this.trainMoving = value;\n        if (!value) {\n            this.updateTrainCars(true);\n        }\n    }\n    endGame(reason, result) {\n        if (this.gameOver) return;\n        this.gameOver = true;\n        this.quizOpen = false;\n        this.quizLocked = false;\n        this.hasStarted = false;\n        this.closeQuiz();\n        this.submitSessionResult();\n        if (result === 'lose') {\n            this.openTimeUpModal('Out of time! Try again.');\n            return;\n        }\n        this.openTimeUpModal(reason || 'Great job! You won!');\n    }\n    formatTime(seconds) {\n        const mins = Math.floor(seconds / 60);\n        const secs = seconds % 60;\n        return `${mins}m ${secs.toString().padStart(2, '0')}s`;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9nYW1lL3NjZW5lcy9UcmFpbkdhbWUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQStCO0FBQ1E7QUFFd0I7QUFDbkI7QUFrQjVDLE1BQU1LLHFCQUFxQztJQUN2QztRQUNJQyxVQUFVO1lBQ05DLFNBQVM7WUFDVEMsU0FBUztnQkFDTDtvQkFBRUMsTUFBTTtvQkFBVUMsWUFBWTtnQkFBSztnQkFDbkM7b0JBQUVELE1BQU07b0JBQVdDLFlBQVk7Z0JBQU07Z0JBQ3JDO29CQUFFRCxNQUFNO29CQUFhQyxZQUFZO2dCQUFNO2dCQUN2QztvQkFBRUQsTUFBTTtvQkFBV0MsWUFBWTtnQkFBTTthQUN4QztRQUNMO0lBQ0o7SUFDQTtRQUNJSixVQUFVO1lBQ05DLFNBQVM7WUFDVEMsU0FBUztnQkFDTDtvQkFBRUMsTUFBTTtvQkFBeUJDLFlBQVk7Z0JBQUs7Z0JBQ2xEO29CQUFFRCxNQUFNO29CQUFNQyxZQUFZO2dCQUFNO2dCQUNoQztvQkFBRUQsTUFBTTtvQkFBVUMsWUFBWTtnQkFBTTtnQkFDcEM7b0JBQUVELE1BQU07b0JBQU1DLFlBQVk7Z0JBQU07YUFDbkM7UUFDTDtJQUNKO0lBQ0E7UUFDSUosVUFBVTtZQUNOQyxTQUFTO1lBQ1RDLFNBQVM7Z0JBQ0w7b0JBQUVDLE1BQU07b0JBQVFDLFlBQVk7Z0JBQUs7Z0JBQ2pDO29CQUFFRCxNQUFNO29CQUFPQyxZQUFZO2dCQUFNO2dCQUNqQztvQkFBRUQsTUFBTTtvQkFBUUMsWUFBWTtnQkFBTTtnQkFDbEM7b0JBQUVELE1BQU07b0JBQVNDLFlBQVk7Z0JBQU07YUFDdEM7UUFDTDtJQUNKO0lBQ0E7UUFDSUosVUFBVTtZQUNOQyxTQUFTO1lBQ1RDLFNBQVM7Z0JBQ0w7b0JBQUVDLE1BQU07b0JBQVFDLFlBQVk7Z0JBQUs7Z0JBQ2pDO29CQUFFRCxNQUFNO29CQUFNQyxZQUFZO2dCQUFNO2dCQUNoQztvQkFBRUQsTUFBTTtvQkFBU0MsWUFBWTtnQkFBTTtnQkFDbkM7b0JBQUVE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QUFnQnJHLEtBQWMsRUFDdEM7UUFDSSxJQUFJLENBQUN0VCxXQUFXLEdBQUdzVDtRQUNuQixJQUFJLENBQUNBLE9BQU87WUFDUixJQUFJLENBQUM5TyxlQUFlLENBQUM7UUFDekI7SUFDSjtJQUVReUIsUUFBUzJULE1BQWMsRUFBRUMsTUFBc0IsRUFDdkQ7UUFDSSxJQUFJLElBQUksQ0FBQ3hYLFFBQVEsRUFBRTtRQUNuQixJQUFJLENBQUNBLFFBQVEsR0FBRztRQUNoQixJQUFJLENBQUNGLFFBQVEsR0FBRztRQUNoQixJQUFJLENBQUNDLFVBQVUsR0FBRztRQUNsQixJQUFJLENBQUNiLFVBQVUsR0FBRztRQUNsQixJQUFJLENBQUMrUCxTQUFTO1FBQ2QsSUFBSSxDQUFDTixtQkFBbUI7UUFFeEIsSUFBSTZJLFdBQVcsUUFBUTtZQUNuQixJQUFJLENBQUMvSSxlQUFlLENBQUM7WUFDckI7UUFDSjtRQUNBLElBQUksQ0FBQ0EsZUFBZSxDQUFDOEksVUFBVTtJQUNuQztJQUVRNVQsV0FBWUosT0FBZSxFQUNuQztRQUNJLE1BQU1rVSxPQUFPalosS0FBS2taLEtBQUssQ0FBQ25VLFVBQVU7UUFDbEMsTUFBTW9VLE9BQU9wVSxVQUFVO1FBQ3ZCLE9BQU8sR0FBR2tVLEtBQUssRUFBRSxFQUFFRSxLQUFLbE0sUUFBUSxHQUFHQyxRQUFRLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQztJQUMxRDtBQUNKIiwic291cmNlcyI6WyIvVXNlcnMvbmIyMzA2MDEvRG9jdW1lbnRzL3BoYXNlci1nYW1lZGV2L3NyYy9nYW1lL3NjZW5lcy9UcmFpbkdhbWUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU2NlbmUgfSBmcm9tICdwaGFzZXInO1xuaW1wb3J0IHsgRXZlbnRCdXMgfSBmcm9tICcuLi9FdmVudEJ1cyc7XG5pbXBvcnQgdHlwZSB7IEdhbWVRdWVzdGlvbiB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL2FwaSc7XG5pbXBvcnQgeyBnZXRHYW1lQ29uZmlnLCByZXNvbHZlR2FtZUNvZGUgfSBmcm9tICcuLi9nYW1lQ29uZmlnJztcbmltcG9ydCB7IFF1aXpQYW5lbCB9IGZyb20gJy4uL3VpL1F1aXpQYW5lbCc7XG5cbnR5cGUgVHJhaW5DYXJTbG90ID0ge1xuICAgIGluZGV4OiBudW1iZXI7XG4gICAgY2FyOiBQaGFzZXIuR2FtZU9iamVjdHMuSW1hZ2U7XG4gICAgbG9jazogUGhhc2VyLkdhbWVPYmplY3RzLkNvbnRhaW5lcjtcbn07XG5cbnR5cGUgVHJhaW5HYW1lSW5pdERhdGEgPSB7XG4gICAgZ2FtZUNvZGU/OiBzdHJpbmcgfCBudWxsO1xuICAgIHNlc3Npb25JZD86IHN0cmluZyB8IG51bGw7XG4gICAgZ2FtZUlkPzogc3RyaW5nIHwgbnVsbDtcbiAgICBxdWVzdGlvbnM/OiBHYW1lUXVlc3Rpb25bXSB8IG51bGw7XG4gICAgdGltZUxpbWl0PzogbnVtYmVyIHwgbnVsbDtcbn07XG5cbnR5cGUgTGVhZENhclN0YXRlID0gJ2lkbGUnIHwgJ2NvcnJlY3QnIHwgJ2luY29ycmVjdCc7XG5cbmNvbnN0IEZBTExCQUNLX1FVRVNUSU9OUzogR2FtZVF1ZXN0aW9uW10gPSBbXG4gICAge1xuICAgICAgICBxdWVzdGlvbjoge1xuICAgICAgICAgICAgY29udGVudDogJ1Ro4bunIMSRw7QgY+G7p2EgVmnhu4d0IE5hbSBsw6AgZ8OsPycsXG4gICAgICAgICAgICBvcHRpb25zOiBbXG4gICAgICAgICAgICAgICAgeyB0ZXh0OiAnSMOgIE7hu5lpJywgaXNfY29ycmVjdDogdHJ1ZSB9LFxuICAgICAgICAgICAgICAgIHsgdGV4dDogJ8SQw6AgTuG6tW5nJywgaXNfY29ycmVjdDogZmFsc2UgfSxcbiAgICAgICAgICAgICAgICB7IHRleHQ6ICdI4bqjaSBQaMOybmcnLCBpc19jb3JyZWN0OiBmYWxzZSB9LFxuICAgICAgICAgICAgICAgIHsgdGV4dDogJ0PhuqduIFRoxqEnLCBpc19jb3JyZWN0OiBmYWxzZSB9XG4gICAgICAgICAgICBdXG4gICAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgICAgcXVlc3Rpb246IHtcbiAgICAgICAgICAgIGNvbnRlbnQ6ICdQaGFzZXIgc+G7rSBk4bulbmcgbmfDtG4gbmfhu68gbsOgbz8nLFxuICAgICAgICAgICAgb3B0aW9uczogW1xuICAgICAgICAgICAgICAgIHsgdGV4dDogJ1R5cGVTY3JpcHQvSmF2YVNjcmlwdCcsIGlzX2NvcnJlY3Q6IHRydWUgfSxcbiAgICAgICAgICAgICAgICB7IHRleHQ6ICdDIycsIGlzX2NvcnJlY3Q6IGZhbHNlIH0sXG4gICAgICAgICAgICAgICAgeyB0ZXh0OiAnUHl0aG9uJywgaXNfY29ycmVjdDogZmFsc2UgfSxcbiAgICAgICAgICAgICAgICB7IHRleHQ6ICdHbycsIGlzX2NvcnJlY3Q6IGZhbHNlIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgICBxdWVzdGlvbjoge1xuICAgICAgICAgICAgY29udGVudDogJ0No4buNbiB04burIHRyw6FpIG5naMSpYSBj4bunYSDigJxmYXN04oCdLicsXG4gICAgICAgICAgICBvcHRpb25zOiBbXG4gICAgICAgICAgICAgICAgeyB0ZXh0OiAnc2xvdycsIGlzX2NvcnJlY3Q6IHRydWUgfSxcbiAgICAgICAgICAgICAgICB7IHRleHQ6ICdmYXInLCBpc19jb3JyZWN0OiBmYWxzZSB9LFxuICAgICAgICAgICAgICAgIHsgdGV4dDogJ2hpZ2gnLCBpc19jb3JyZWN0OiBmYWxzZSB9LFxuICAgICAgICAgICAgICAgIHsgdGV4dDogJ3NtYWxsJywgaXNfY29ycmVjdDogZmFsc2UgfVxuICAgICAgICAgICAgXVxuICAgICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICAgIHF1ZXN0aW9uOiB7XG4gICAgICAgICAgICBjb250ZW50OiAnQ2jhu41uIMSRw6FwIMOhbiDEkcO6bmc6IFNoZSBfX18gdG8gc2Nob29sIGV2ZXJ5IGRheS4nLFxuICAgICAgICAgICAgb3B0aW9uczogW1xuICAgICAgICAgICAgICAgIHsgdGV4dDogJ2dvZXMnLCBpc19jb3JyZWN0OiB0cnVlIH0sXG4gICAgICAgICAgICAgICAgeyB0ZXh0OiAnZ28nLCBpc19jb3JyZWN0OiBmYWxzZSB9LFxuICAgICAgICAgICAgICAgIHsgdGV4dDogJ2dvaW5nJywgaXNfY29ycmVjdDogZmFsc2UgfSxcbiAgICAgICAgICAgICAgICB7IHRleHQ6ICdnb25lJywgaXNfY29ycmVjdDogZmFsc2UgfVxuICAgICAgICAgICAgXVxuICAgICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICAgIHF1ZXN0aW9uOiB7XG4gICAgICAgICAgICBjb250ZW50OiAnVOG7qyBuw6BvIGPDsyBuZ2jEqWEgbMOgIOKAnG5o4bqjeeKAnT8nLFxuICAgICAgICAgICAgb3B0aW9uczogW1xuICAgICAgICAgICAgICAgIHsgdGV4dDogJ2p1bXAnLCBpc19jb3JyZWN0OiB0cnVlIH0sXG4gICAgICAgICAgICAgICAgeyB0ZXh0OiAnc3dpbScsIGlzX2NvcnJlY3Q6IGZhbHNlIH0sXG4gICAgICAgICAgICAgICAgeyB0ZXh0OiAnY3Jhd2wnLCBpc19jb3JyZWN0OiBmYWxzZSB9LFxuICAgICAgICAgICAgICAgIHsgdGV4dDogJ3NsZWVwJywgaXNfY29ycmVjdDogZmFsc2UgfVxuICAgICAgICAgICAgXVxuICAgICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICAgIHF1ZXN0aW9uOiB7XG4gICAgICAgICAgICBjb250ZW50OiAnVOG7qyBuw6BvIGzDoCBkYW5oIHThu6s/JyxcbiAgICAgICAgICAgIG9wdGlvbnM6IFtcbiAgICAgICAgICAgICAgICB7IHRleHQ6ICdyaXZlcicsIGlzX2NvcnJlY3Q6IHRydWUgfSxcbiAgICAgICAgICAgICAgICB7IHRleHQ6ICdydW4nLCBpc19jb3JyZWN0OiBmYWxzZSB9LFxuICAgICAgICAgICAgICAgIHsgdGV4dDogJ3F1aWNrbHknLCBpc19jb3JyZWN0OiBmYWxzZSB9LFxuICAgICAgICAgICAgICAgIHsgdGV4dDogJ2JsdWUnLCBpc19jb3JyZWN0OiBmYWxzZSB9XG4gICAgICAgICAgICBdXG4gICAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgICAgcXVlc3Rpb246IHtcbiAgICAgICAgICAgIGNvbnRlbnQ6ICdDaOG7jW4gY8OidSDEkcO6bmcgbmfhu68gcGjDoXAuJyxcbiAgICAgICAgICAgIG9wdGlvbnM6IFtcbiAgICAgICAgICAgICAgICB7IHRleHQ6ICdIZSBpcyBwbGF5aW5nIGZvb3RiYWxsLicsIGlzX2NvcnJlY3Q6IHRydWUgfSxcbiAgICAgICAgICAgICAgICB7IHRleHQ6ICdIZSBhcmUgcGxheWluZyBmb290YmFsbC4nLCBpc19jb3JyZWN0OiBmYWxzZSB9LFxuICAgICAgICAgICAgICAgIHsgdGV4dDogJ0hlIHBsYXlpbmcgZm9vdGJhbGwuJywgaXNfY29ycmVjdDogZmFsc2UgfSxcbiAgICAgICAgICAgICAgICB7IHRleHQ6ICdIZSBwbGF5IGZvb3RiYWxsLicsIGlzX2NvcnJlY3Q6IGZhbHNlIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgICBxdWVzdGlvbjoge1xuICAgICAgICAgICAgY29udGVudDogJ1Thu6sgbsOgbyBsw6AgdMOtbmggdOG7qz8nLFxuICAgICAgICAgICAgb3B0aW9uczogW1xuICAgICAgICAgICAgICAgIHsgdGV4dDogJ2JlYXV0aWZ1bCcsIGlzX2NvcnJlY3Q6IHRydWUgfSxcbiAgICAgICAgICAgICAgICB7IHRleHQ6ICdiZWF1dHknLCBpc19jb3JyZWN0OiBmYWxzZSB9LFxuICAgICAgICAgICAgICAgIHsgdGV4dDogJ2JlYXV0aWZ5JywgaXNfY29ycmVjdDogZmFsc2UgfSxcbiAgICAgICAgICAgICAgICB7IHRleHQ6ICdiZWF1dGlmdWxseScsIGlzX2NvcnJlY3Q6IGZhbHNlIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgICBxdWVzdGlvbjoge1xuICAgICAgICAgICAgY29udGVudDogJ0No4buNbiDEkcOhcCDDoW4gxJHDum5nOiBJIF9fXyBhIGJvb2sgbm93LicsXG4gICAgICAgICAgICBvcHRpb25zOiBbXG4gICAgICAgICAgICAgICAgeyB0ZXh0OiAnYW0gcmVhZGluZycsIGlzX2NvcnJlY3Q6IHRydWUgfSxcbiAgICAgICAgICAgICAgICB7IHRleHQ6ICdyZWFkJywgaXNfY29ycmVjdDogZmFsc2UgfSxcbiAgICAgICAgICAgICAgICB7IHRleHQ6ICdyZWFkcycsIGlzX2NvcnJlY3Q6IGZhbHNlIH0sXG4gICAgICAgICAgICAgICAgeyB0ZXh0OiAncmVhZGluZycsIGlzX2NvcnJlY3Q6IGZhbHNlIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgICBxdWVzdGlvbjoge1xuICAgICAgICAgICAgY29udGVudDogJ1Thu6sgbsOgbyBsw6AgdHLhuqFuZyB04burPycsXG4gICAgICAgICAgICBvcHRpb25zOiBbXG4gICAgICAgICAgICAgICAgeyB0ZXh0OiAncXVpY2tseScsIGlzX2NvcnJlY3Q6IHRydWUgfSxcbiAgICAgICAgICAgICAgICB7IHRleHQ6ICdxdWljaycsIGlzX2NvcnJlY3Q6IGZhbHNlIH0sXG4gICAgICAgICAgICAgICAgeyB0ZXh0OiAncXVpY2tlcicsIGlzX2NvcnJlY3Q6IGZhbHNlIH0sXG4gICAgICAgICAgICAgICAgeyB0ZXh0OiAncXVpY2tuZXNzJywgaXNfY29ycmVjdDogZmFsc2UgfVxuICAgICAgICAgICAgXVxuICAgICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICAgIHF1ZXN0aW9uOiB7XG4gICAgICAgICAgICBjb250ZW50OiAnQ2jhu41uIGPDonUgaOG7j2kgcGjDuSBo4bujcCBraGkgZ+G6t3AgbmfGsOG7nWkgbeG7m2kuJyxcbiAgICAgICAgICAgIG9wdGlvbnM6IFtcbiAgICAgICAgICAgICAgICB7IHRleHQ6ICdXaGF0IGlzIHlvdXIgbmFtZT8nLCBpc19jb3JyZWN0OiB0cnVlIH0sXG4gICAgICAgICAgICAgICAgeyB0ZXh0OiAnV2hlcmUgZG8geW91IGxpdmU/JywgaXNfY29ycmVjdDogZmFsc2UgfSxcbiAgICAgICAgICAgICAgICB7IHRleHQ6ICdIb3cgb2xkIGFyZSB5b3U/JywgaXNfY29ycmVjdDogZmFsc2UgfSxcbiAgICAgICAgICAgICAgICB7IHRleHQ6ICdXaGF0IHRpbWUgaXMgaXQ/JywgaXNfY29ycmVjdDogZmFsc2UgfVxuICAgICAgICAgICAgXVxuICAgICAgICB9XG4gICAgfVxuXTtcblxuZXhwb3J0IGNsYXNzIFRyYWluR2FtZSBleHRlbmRzIFNjZW5lXG57XG4gICAgcHJpdmF0ZSBkZWJ1Z1RyYWNrID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBzaG93UmFpbE92ZXJsYXkgPSBmYWxzZTtcbiAgICBwcml2YXRlIHNob3dDYXJzID0gdHJ1ZTtcbiAgICBwcml2YXRlIHRyYWluTW92aW5nID0gZmFsc2U7XG4gICAgcHJpdmF0ZSB0cmFja1NwbGluZT86IFBoYXNlci5DdXJ2ZXMuU3BsaW5lO1xuICAgIHByaXZhdGUgdHJhaW5TcHJpdGU/OiBQaGFzZXIuR2FtZU9iamVjdHMuSW1hZ2U7XG4gICAgcHJpdmF0ZSB0cmFmZmljTGlnaHQ/OiBQaGFzZXIuR2FtZU9iamVjdHMuSW1hZ2U7XG4gICAgcHJpdmF0ZSB0cmFmZmljTGlnaHRWYXJpYW50cz86IHtcbiAgICAgICAgcmVkOiBQaGFzZXIuR2FtZU9iamVjdHMuSW1hZ2U7XG4gICAgICAgIHllbGxvdzogUGhhc2VyLkdhbWVPYmplY3RzLkltYWdlO1xuICAgICAgICBncmVlbjogUGhhc2VyLkdhbWVPYmplY3RzLkltYWdlO1xuICAgIH07XG4gICAgcHJpdmF0ZSB0cmFmZmljTGlnaHRTdGF0ZTogJ3JlZCcgfCAneWVsbG93JyB8ICdncmVlbicgfCBudWxsID0gbnVsbDtcbiAgICBwcml2YXRlIHRyYWluRGlzdGFuY2VQeDogbnVtYmVyID0gMDtcbiAgICBwcml2YXRlIHRyYWluU3BlZWRQeFBlclNlYzogbnVtYmVyID0gLTE4MDtcbiAgICBwcml2YXRlIHRyYWluR2FwUHg6IG51bWJlciA9IDA7XG4gICAgcHJpdmF0ZSB0cmFja0xlbmd0aDogbnVtYmVyID0gMDtcbiAgICBwcml2YXRlIHJlYWRvbmx5IHRyYWluQ2FyR2FwRmFjdG9yID0gMC42ODtcbiAgICBwcml2YXRlIHJlYWRvbmx5IHRyYWluQ2FyU2NhbGVGYWN0b3IgPSAwLjQ2ODtcbiAgICBwcml2YXRlIHJhaWxQYXRoUG9pbnRzOiBQaGFzZXIuTWF0aC5WZWN0b3IyW10gPSBbXTtcbiAgICBwcml2YXRlIHJhaWxTZWdtZW50TGVuZ3RoczogbnVtYmVyW10gPSBbXTtcbiAgICBwcml2YXRlIHJhaWxUb3RhbExlbmd0aDogbnVtYmVyID0gMDtcbiAgICBwcml2YXRlIHJlYWRvbmx5IHRyYWluUm90YXRpb25PZmZzZXQgPSBQaGFzZXIuTWF0aC5EZWdUb1JhZCgtOTApO1xuICAgIHByaXZhdGUgbGVhZENhclN0YXRlOiBMZWFkQ2FyU3RhdGUgPSAnaWRsZSc7XG4gICAgcHJpdmF0ZSBsZWFkQ2FyQmFzZVNpemU6IHsgd2lkdGg6IG51bWJlcjsgaGVpZ2h0OiBudW1iZXIgfSB8IG51bGwgPSBudWxsO1xuICAgIHByaXZhdGUgbGVhZENhckJhZGdlPzogUGhhc2VyLkdhbWVPYmplY3RzLkltYWdlO1xuICAgIHByaXZhdGUgcmFpbHdheUNvbnRhaW5lcj86IFBoYXNlci5HYW1lT2JqZWN0cy5Db250YWluZXI7XG4gICAgcHJpdmF0ZSBkZWJ1Z0N1cnZlR3JhcGhpY3M/OiBQaGFzZXIuR2FtZU9iamVjdHMuR3JhcGhpY3M7XG4gICAgcHJpdmF0ZSBkZWJ1Z01hcmtlckdyYXBoaWNzPzogUGhhc2VyLkdhbWVPYmplY3RzLkdyYXBoaWNzO1xuICAgIHByaXZhdGUgZGVidWdNYXJrZXJMYWJlbHM6IFBoYXNlci5HYW1lT2JqZWN0cy5UZXh0W10gPSBbXTtcbiAgICBwcml2YXRlIHNob3dIb3ZlckNvb3JkcyA9IGZhbHNlO1xuICAgIHByaXZhdGUgaG92ZXJDb29yZFRleHQ/OiBQaGFzZXIuR2FtZU9iamVjdHMuVGV4dDtcbiAgICBwcml2YXRlIGJhcnJpZXJHYXRlPzogUGhhc2VyLkdhbWVPYmplY3RzLkltYWdlO1xuICAgIHByaXZhdGUgYmFycmllckJhc2VBbmdsZTogbnVtYmVyID0gMDtcbiAgICBwcml2YXRlIGJhcnJpZXJJc09wZW46IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBjYW1lcmEhOiBQaGFzZXIuQ2FtZXJhcy5TY2VuZTJELkNhbWVyYTtcbiAgICBiYWNrZ3JvdW5kITogUGhhc2VyLkdhbWVPYmplY3RzLkltYWdlO1xuICAgIGNhclNsb3RzOiBUcmFpbkNhclNsb3RbXSA9IFtdO1xuICAgIHF1aXpNb2RhbCE6IFBoYXNlci5HYW1lT2JqZWN0cy5Db250YWluZXI7XG4gICAgcXVpelBhbmVsITogUXVpelBhbmVsO1xuICAgIHRpbWVyVGV4dCE6IFBoYXNlci5HYW1lT2JqZWN0cy5UZXh0O1xuICAgIHNjb3JlVGV4dCE6IFBoYXNlci5HYW1lT2JqZWN0cy5UZXh0O1xuICAgIGh1ZEJhY2tCdXR0b24hOiBQaGFzZXIuR2FtZU9iamVjdHMuQ29udGFpbmVyO1xuICAgIGh1ZFBvaW50c1BpbGwhOiBQaGFzZXIuR2FtZU9iamVjdHMuQ29udGFpbmVyO1xuICAgIGh1ZFRpbWVyUGlsbCE6IFBoYXNlci5HYW1lT2JqZWN0cy5Db250YWluZXI7XG4gICAgdWlSb290ITogUGhhc2VyLkdhbWVPYmplY3RzLkNvbnRhaW5lcjtcbiAgICBzdGFydE1vZGFsITogUGhhc2VyLkdhbWVPYmplY3RzLkNvbnRhaW5lcjtcbiAgICBzdGFydE1vZGFsUGFuZWwhOiBQaGFzZXIuR2FtZU9iamVjdHMuQ29udGFpbmVyO1xuICAgIHRpbWVVcE1vZGFsITogUGhhc2VyLkdhbWVPYmplY3RzLkNvbnRhaW5lcjtcbiAgICB0aW1lVXBNb2RhbFBhbmVsITogUGhhc2VyLkdhbWVPYmplY3RzLkNvbnRhaW5lcjtcbiAgICB0aW1lVXBUaXRsZVRleHQhOiBQaGFzZXIuR2FtZU9iamVjdHMuVGV4dDtcbiAgICBzdGFydE1vZGFsT3BlbjogYm9vbGVhbiA9IGZhbHNlO1xuICAgIGhhc1N0YXJ0ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgIGdhbWVDb2RlOiBzdHJpbmcgPSAndHJhaW5fZ2FtZSc7XG4gICAgc2Vzc2lvbklkOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgICBzZXNzaW9uR2FtZUlkOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgICBzZXNzaW9uUXVlc3Rpb25zOiBHYW1lUXVlc3Rpb25bXSB8IG51bGwgPSBudWxsO1xuICAgIHNlc3Npb25UaW1lTGltaXQ6IG51bWJlciB8IG51bGwgPSBudWxsO1xuXG4gICAgbWF4Q2FyczogbnVtYmVyID0gMTE7XG4gICAgY3VycmVudEluZGV4OiBudW1iZXIgPSAwO1xuICAgIHNjb3JlOiBudW1iZXIgPSAwO1xuXG4gICAgdG90YWxUaW1lTXM6IG51bWJlciA9IDMwMDAwMDtcbiAgICByZW1haW5pbmdNczogbnVtYmVyID0gMzAwMDAwO1xuICAgIGxhc3RTZWNvbmRTaG93bjogbnVtYmVyID0gLTE7XG5cbiAgICBxdWl6T3BlbjogYm9vbGVhbiA9IGZhbHNlO1xuICAgIHF1aXpMb2NrZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBnYW1lT3ZlcjogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgcHJpdmF0ZSBxdWVzdGlvbnM6IEdhbWVRdWVzdGlvbltdID0gW107XG4gICAgcHJpdmF0ZSBjdXJyZW50Q29ycmVjdEluZGV4OiBudW1iZXIgPSAwO1xuICAgIHByaXZhdGUgY3VycmVudFNlc3Npb25RdWVzdGlvbklkOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgICBwcml2YXRlIGN1cnJlbnRPcHRpb25JZHM6IHN0cmluZ1tdID0gW107XG4gICAgcHJpdmF0ZSB0cmFpblN0ZXBQeDogbnVtYmVyID0gMDtcblxuICAgIGNvbnN0cnVjdG9yICgpXG4gICAge1xuICAgICAgICBzdXBlcignVHJhaW5HYW1lJyk7XG4gICAgfVxuXG4gICAgaW5pdCAoZGF0YTogVHJhaW5HYW1lSW5pdERhdGEpXG4gICAge1xuICAgICAgICB0aGlzLmdhbWVDb2RlID0gcmVzb2x2ZUdhbWVDb2RlKGRhdGE/LmdhbWVDb2RlID8/ICh0aGlzLnJlZ2lzdHJ5LmdldCgnZ2FtZUNvZGUnKSBhcyBzdHJpbmcgfCB1bmRlZmluZWQpKTtcbiAgICAgICAgdGhpcy5yZWdpc3RyeS5zZXQoJ2dhbWVDb2RlJywgdGhpcy5nYW1lQ29kZSk7XG4gICAgICAgIHRoaXMuc2Vzc2lvbklkID0gZGF0YT8uc2Vzc2lvbklkID8/IG51bGw7XG4gICAgICAgIHRoaXMuc2Vzc2lvbkdhbWVJZCA9IGRhdGE/LmdhbWVJZCA/PyBudWxsO1xuICAgICAgICB0aGlzLnNlc3Npb25RdWVzdGlvbnMgPSBkYXRhPy5xdWVzdGlvbnMgPz8gbnVsbDtcbiAgICAgICAgdGhpcy5zZXNzaW9uVGltZUxpbWl0ID0gZGF0YT8udGltZUxpbWl0ID8/IG51bGw7XG4gICAgfVxuXG4gICAgY3JlYXRlICgpXG4gICAge1xuICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMuc2NhbGU7XG4gICAgICAgIGNvbnN0IGdhbWVDb25maWcgPSBnZXRHYW1lQ29uZmlnKHRoaXMuZ2FtZUNvZGUpO1xuXG4gICAgICAgIC8vIFJlc2V0IHJ1bnRpbWUgc3RhdGUgb24gZXZlcnkgY3JlYXRlKCkgYmVjYXVzZSBzY2VuZS5yZXN0YXJ0IHJldXNlcyB0aGUgc2FtZSBpbnN0YW5jZS5cbiAgICAgICAgdGhpcy5nYW1lT3ZlciA9IGZhbHNlO1xuICAgICAgICB0aGlzLnF1aXpPcGVuID0gZmFsc2U7XG4gICAgICAgIHRoaXMucXVpekxvY2tlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnN0YXJ0TW9kYWxPcGVuID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaGFzU3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmN1cnJlbnRTZXNzaW9uUXVlc3Rpb25JZCA9IG51bGw7XG4gICAgICAgIHRoaXMuY3VycmVudE9wdGlvbklkcyA9IFtdO1xuICAgICAgICB0aGlzLmxlYWRDYXJTdGF0ZSA9ICdpZGxlJztcbiAgICAgICAgdGhpcy5iYXJyaWVySXNPcGVuID0gZmFsc2U7XG5cbiAgICAgICAgdGhpcy5jYXJTbG90cyA9IFtdO1xuICAgICAgICB0aGlzLmxlYWRDYXJCYWRnZSA9IHVuZGVmaW5lZDtcblxuICAgICAgICB0aGlzLmNhbWVyYSA9IHRoaXMuY2FtZXJhcy5tYWluO1xuICAgICAgICB0aGlzLmNhbWVyYS5zZXRCYWNrZ3JvdW5kQ29sb3IoZ2FtZUNvbmZpZy5iYWNrZ3JvdW5kQ29sb3IpO1xuXG4gICAgICAgIHRoaXMuYmFja2dyb3VuZCA9IHRoaXMuYWRkLmltYWdlKHdpZHRoIC8gMiwgaGVpZ2h0IC8gMiwgJ3RyYWluLWJnJylcbiAgICAgICAgICAgIC5zZXREaXNwbGF5U2l6ZSh3aWR0aCwgaGVpZ2h0KVxuICAgICAgICAgICAgLnNldE9yaWdpbigwLjUsIDAuNSk7XG5cbiAgICAgICAgdGhpcy5zZXR1cFF1ZXN0aW9ucygpO1xuICAgICAgICB0aGlzLnNldHVwVGltZXIoKTtcbiAgICAgICAgdGhpcy5jcmVhdGVIdWQoKTtcbiAgICAgICAgdGhpcy5jdXJyZW50SW5kZXggPSAwO1xuICAgICAgICB0aGlzLnNjb3JlID0gMDtcbiAgICAgICAgdGhpcy5jcmVhdGVSYWlsd2F5KCk7XG4gICAgICAgIGlmICh0aGlzLnNob3dDYXJzKSB7XG4gICAgICAgICAgICB0aGlzLmxheW91dFRyYWluKCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVRyYWluQ2Fycyh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNyZWF0ZUJhcnJpZXJHYXRlKCk7XG4gICAgICAgIHRoaXMuY3JlYXRlUXVpek1vZGFsKCk7XG4gICAgICAgIHRoaXMuY3JlYXRlU3RhcnRNb2RhbCgpO1xuICAgICAgICB0aGlzLmNyZWF0ZVRpbWVVcE1vZGFsKCk7XG4gICAgICAgIHRoaXMub3BlblN0YXJ0TW9kYWwoKTtcblxuICAgICAgICB0aGlzLnNjYWxlLm9uKCdyZXNpemUnLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB7IHdpZHRoOiBuZXdXaWR0aCwgaGVpZ2h0OiBuZXdIZWlnaHQgfSA9IHRoaXMuc2NhbGU7XG4gICAgICAgICAgICB0aGlzLmJhY2tncm91bmQuc2V0UG9zaXRpb24obmV3V2lkdGggLyAyLCBuZXdIZWlnaHQgLyAyKS5zZXREaXNwbGF5U2l6ZShuZXdXaWR0aCwgbmV3SGVpZ2h0KTtcbiAgICAgICAgICAgIHRoaXMubGF5b3V0SHVkKCk7XG4gICAgICAgICAgICB0aGlzLmxheW91dFF1aXooKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQmFycmllclBvc2l0aW9uKCk7XG4gICAgICAgICAgICB0aGlzLmxheW91dFN0YXJ0TW9kYWwoKTtcbiAgICAgICAgICAgIHRoaXMubGF5b3V0VGltZVVwTW9kYWwoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgRXZlbnRCdXMuZW1pdCgnY3VycmVudC1zY2VuZS1yZWFkeScsIHRoaXMpO1xuICAgIH1cblxuICAgIHVwZGF0ZSAoX3RpbWU6IG51bWJlciwgZGVsdGE6IG51bWJlcilcbiAgICB7XG4gICAgICAgIGlmICh0aGlzLmdhbWVPdmVyKSByZXR1cm47XG4gICAgICAgIGlmICghdGhpcy5oYXNTdGFydGVkKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVRyYWluQ2FycygpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5yZW1haW5pbmdNcyA9IE1hdGgubWF4KDAsIHRoaXMucmVtYWluaW5nTXMgLSBkZWx0YSk7XG4gICAgICAgIGNvbnN0IHNlY29uZHMgPSBNYXRoLmNlaWwodGhpcy5yZW1haW5pbmdNcyAvIDEwMDApO1xuICAgICAgICBpZiAoc2Vjb25kcyAhPT0gdGhpcy5sYXN0U2Vjb25kU2hvd24pIHtcbiAgICAgICAgICAgIHRoaXMubGFzdFNlY29uZFNob3duID0gc2Vjb25kcztcbiAgICAgICAgICAgIHRoaXMudGltZXJUZXh0LnNldFRleHQodGhpcy5mb3JtYXRUaW1lKHNlY29uZHMpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnJlbWFpbmluZ01zIDw9IDAgJiYgIXRoaXMuZ2FtZU92ZXIpIHtcbiAgICAgICAgICAgIHRoaXMuZW5kR2FtZSgnT3V0IG9mIHRpbWUuJywgJ2xvc2UnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudXBkYXRlVHJhaW5DYXJzKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZXR1cFF1ZXN0aW9ucyAoKVxuICAgIHtcbiAgICAgICAgY29uc3Qgc291cmNlID0gdGhpcy5zZXNzaW9uUXVlc3Rpb25zICYmIHRoaXMuc2Vzc2lvblF1ZXN0aW9ucy5sZW5ndGggPiAwXG4gICAgICAgICAgICA/IHRoaXMuc2Vzc2lvblF1ZXN0aW9uc1xuICAgICAgICAgICAgOiBGQUxMQkFDS19RVUVTVElPTlM7XG5cbiAgICAgICAgdGhpcy5xdWVzdGlvbnMgPSBzb3VyY2Uuc2xpY2UoMCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZXR1cFRpbWVyICgpXG4gICAge1xuICAgICAgICBpZiAodGhpcy5zZXNzaW9uVGltZUxpbWl0ICYmIHRoaXMuc2Vzc2lvblRpbWVMaW1pdCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMudG90YWxUaW1lTXMgPSB0aGlzLnNlc3Npb25UaW1lTGltaXQgKiAxMDAwO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVtYWluaW5nTXMgPSB0aGlzLnRvdGFsVGltZU1zO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlSHVkICgpXG4gICAge1xuICAgICAgICB0aGlzLnVpUm9vdCA9IHRoaXMuYWRkLmNvbnRhaW5lcigwLCAwKS5zZXREZXB0aCgyMDAwKTtcblxuICAgICAgICB0aGlzLmh1ZEJhY2tCdXR0b24gPSB0aGlzLmFkZC5jb250YWluZXIoMCwgMCk7XG4gICAgICAgIGNvbnN0IGJhY2tCZyA9IHRoaXMuYWRkLmdyYXBoaWNzKCk7XG4gICAgICAgIGJhY2tCZy5maWxsU3R5bGUoMHhmZmZmZmYsIDAuOTUpO1xuICAgICAgICBiYWNrQmcuZmlsbFJvdW5kZWRSZWN0KC0yMiwgLTIyLCA0NCwgNDQsIDE0KTtcbiAgICAgICAgYmFja0JnLmxpbmVTdHlsZSgyLCAweDBlYTVlOSwgMC4yKTtcbiAgICAgICAgYmFja0JnLnN0cm9rZVJvdW5kZWRSZWN0KC0yMiwgLTIyLCA0NCwgNDQsIDE0KTtcbiAgICAgICAgY29uc3QgYmFja0ljb24gPSB0aGlzLmFkZC50ZXh0KDAsIDEsICc8Jywge1xuICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsIEJsYWNrJyxcbiAgICAgICAgICAgIGZvbnRTaXplOiAnMjZweCcsXG4gICAgICAgICAgICBjb2xvcjogJyMwZjE3MmEnXG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUpO1xuICAgICAgICBjb25zdCBiYWNrSGl0ID0gdGhpcy5hZGQuem9uZSgwLCAwLCA0NCwgNDQpXG4gICAgICAgICAgICAuc2V0T3JpZ2luKDAuNSlcbiAgICAgICAgICAgIC5zZXRJbnRlcmFjdGl2ZSh7IHVzZUhhbmRDdXJzb3I6IHRydWUgfSk7XG4gICAgICAgIGJhY2tIaXQub24oJ3BvaW50ZXJ1cCcsICgpID0+IHRoaXMuaGFuZGxlQmFja1RvR2FtZUxpc3QoKSk7XG4gICAgICAgIHRoaXMuaHVkQmFja0J1dHRvbi5hZGQoW2JhY2tCZywgYmFja0ljb25dKTtcbiAgICAgICAgdGhpcy5odWRCYWNrQnV0dG9uLnNldFNpemUoNDQsIDQ0KTtcbiAgICAgICAgdGhpcy5odWRCYWNrQnV0dG9uLmFkZChiYWNrSGl0KTtcblxuICAgICAgICB0aGlzLmh1ZFBvaW50c1BpbGwgPSB0aGlzLmFkZC5jb250YWluZXIoMCwgMCk7XG4gICAgICAgIGNvbnN0IHBvaW50c0JnID0gdGhpcy5hZGQuZ3JhcGhpY3MoKTtcbiAgICAgICAgY29uc3QgcG9pbnRzVyA9IDE2ODtcbiAgICAgICAgY29uc3QgcG9pbnRzSCA9IDQ0O1xuICAgICAgICBwb2ludHNCZy5maWxsU3R5bGUoMHhmZmZmZmYsIDAuOTgpO1xuICAgICAgICBwb2ludHNCZy5maWxsUm91bmRlZFJlY3QoLXBvaW50c1cgLyAyLCAtcG9pbnRzSCAvIDIsIHBvaW50c1csIHBvaW50c0gsIDIyKTtcbiAgICAgICAgcG9pbnRzQmcubGluZVN0eWxlKDIsIDB4ZjU5ZTBiLCAwLjQpO1xuICAgICAgICBwb2ludHNCZy5zdHJva2VSb3VuZGVkUmVjdCgtcG9pbnRzVyAvIDIsIC1wb2ludHNIIC8gMiwgcG9pbnRzVywgcG9pbnRzSCwgMjIpO1xuICAgICAgICBjb25zdCBzdGFyID0gdGhpcy5hZGQuaW1hZ2UoLXBvaW50c1cgLyAyICsgMjQsIDAsICdzdGFyJylcbiAgICAgICAgICAgIC5zZXRTY2FsZSgwLjMyKVxuICAgICAgICAgICAgLnNldFRpbnQoMHhmYmJmMjQpO1xuICAgICAgICB0aGlzLnNjb3JlVGV4dCA9IHRoaXMuYWRkLnRleHQoLXBvaW50c1cgLyAyICsgNDYsIDAsICdQT0lOVFM6IDAwJywge1xuICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsIEJsYWNrJyxcbiAgICAgICAgICAgIGZvbnRTaXplOiAnMThweCcsXG4gICAgICAgICAgICBjb2xvcjogJyMwZjE3MmEnXG4gICAgICAgIH0pLnNldE9yaWdpbigwLCAwLjUpO1xuICAgICAgICB0aGlzLmh1ZFBvaW50c1BpbGwuYWRkKFtwb2ludHNCZywgc3RhciwgdGhpcy5zY29yZVRleHRdKTtcblxuICAgICAgICB0aGlzLmh1ZFRpbWVyUGlsbCA9IHRoaXMuYWRkLmNvbnRhaW5lcigwLCAwKTtcbiAgICAgICAgY29uc3QgdGltZXJCZyA9IHRoaXMuYWRkLmdyYXBoaWNzKCk7XG4gICAgICAgIGNvbnN0IHRpbWVyVyA9IDk2O1xuICAgICAgICBjb25zdCB0aW1lckggPSA0MDtcbiAgICAgICAgdGltZXJCZy5maWxsU3R5bGUoMHhmZmZmZmYsIDAuOTgpO1xuICAgICAgICB0aW1lckJnLmZpbGxSb3VuZGVkUmVjdCgtdGltZXJXIC8gMiwgLXRpbWVySCAvIDIsIHRpbWVyVywgdGltZXJILCAyMCk7XG4gICAgICAgIHRpbWVyQmcubGluZVN0eWxlKDIsIDB4OTRhM2I4LCAwLjQpO1xuICAgICAgICB0aW1lckJnLnN0cm9rZVJvdW5kZWRSZWN0KC10aW1lclcgLyAyLCAtdGltZXJIIC8gMiwgdGltZXJXLCB0aW1lckgsIDIwKTtcbiAgICAgICAgdGhpcy50aW1lclRleHQgPSB0aGlzLmFkZC50ZXh0KDAsIDAsIHRoaXMuZm9ybWF0VGltZShNYXRoLmNlaWwodGhpcy5yZW1haW5pbmdNcyAvIDEwMDApKSwge1xuICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsIEJsYWNrJyxcbiAgICAgICAgICAgIGZvbnRTaXplOiAnMTZweCcsXG4gICAgICAgICAgICBjb2xvcjogJyMwZjE3MmEnXG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUpO1xuICAgICAgICB0aGlzLmh1ZFRpbWVyUGlsbC5hZGQoW3RpbWVyQmcsIHRoaXMudGltZXJUZXh0XSk7XG5cbiAgICAgICAgdGhpcy51aVJvb3QuYWRkKFt0aGlzLmh1ZEJhY2tCdXR0b24sIHRoaXMuaHVkUG9pbnRzUGlsbCwgdGhpcy5odWRUaW1lclBpbGxdKTtcbiAgICAgICAgdGhpcy5sYXlvdXRIdWQoKTtcbiAgICAgICAgdGhpcy5jcmVhdGVUcmFmZmljTGlnaHQoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGxheW91dEh1ZCAoKVxuICAgIHtcbiAgICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSB0aGlzLnNjYWxlO1xuICAgICAgICBjb25zdCB0b3BJbnNldCA9IE1hdGgubWF4KDE2LCBNYXRoLnJvdW5kKGhlaWdodCAqIDAuMDMpKTtcbiAgICAgICAgY29uc3Qgc2lkZUluc2V0ID0gTWF0aC5tYXgoMTQsIE1hdGgucm91bmQod2lkdGggKiAwLjA0KSk7XG4gICAgICAgIGNvbnN0IHJpZ2h0RWRnZSA9IHdpZHRoIC0gc2lkZUluc2V0O1xuICAgICAgICB0aGlzLmh1ZEJhY2tCdXR0b24uc2V0UG9zaXRpb24oc2lkZUluc2V0ICsgMjIsIHRvcEluc2V0ICsgMjIpO1xuICAgICAgICB0aGlzLmh1ZFBvaW50c1BpbGwuc2V0UG9zaXRpb24od2lkdGggLyAyLCB0b3BJbnNldCArIDIyKTtcbiAgICAgICAgdGhpcy5odWRUaW1lclBpbGwuc2V0UG9zaXRpb24ocmlnaHRFZGdlIC0gNDgsIHRvcEluc2V0ICsgMjIpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGFuZGxlQmFja1RvR2FtZUxpc3QgKCk6IHZvaWRcbiAgICB7XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy8nO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlVHJhZmZpY0xpZ2h0ICgpXG4gICAge1xuICAgICAgICBjb25zdCBsaWdodEhlaWdodCA9IDIzMDtcbiAgICAgICAgY29uc3Qgc291cmNlSGVpZ2h0ID0gMTQ2MztcbiAgICAgICAgY29uc3Qgc291cmNlV2lkdGggPSAzMzU7XG4gICAgICAgIGNvbnN0IGxpZ2h0V2lkdGggPSBNYXRoLnJvdW5kKGxpZ2h0SGVpZ2h0ICogKHNvdXJjZVdpZHRoIC8gc291cmNlSGVpZ2h0KSk7XG4gICAgICAgIGNvbnN0IGJhc2VYID0gODg7XG4gICAgICAgIGNvbnN0IGJhc2VZID0gODA4O1xuICAgICAgICBjb25zdCBhbmNob3JZID0gTWF0aC5yb3VuZChiYXNlWSArIGxpZ2h0SGVpZ2h0IC8gMik7XG4gICAgICAgIGNvbnN0IG1ha2VWYXJpYW50ID0gKGtleTogc3RyaW5nKSA9PiB0aGlzLmFkZC5pbWFnZShiYXNlWCwgYmFzZVksIGtleSlcbiAgICAgICAgICAgIC5zZXRPcmlnaW4oMC41LCAxKVxuICAgICAgICAgICAgLnNldERpc3BsYXlTaXplKGxpZ2h0V2lkdGgsIGxpZ2h0SGVpZ2h0KVxuICAgICAgICAgICAgLnNldERlcHRoKDEwMDApXG4gICAgICAgICAgICAuc2V0QWxwaGEoMSk7XG5cbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5hZGQuY29udGFpbmVyKGJhc2VYLCBhbmNob3JZKS5zZXREZXB0aCgxMDAwKTtcbiAgICAgICAgY29uc3Qgb2Zmc2V0cyA9IHtcbiAgICAgICAgICAgIHJlZDogeyB4OiAwLCB5OiAwIH0sXG4gICAgICAgICAgICB5ZWxsb3c6IHsgeDogMCwgeTogMCB9LFxuICAgICAgICAgICAgZ3JlZW46IHsgeDogLTEsIHk6IDAgfVxuICAgICAgICB9O1xuICAgICAgICBjb25zdCByZWQgPSB0aGlzLnRleHR1cmVzLmV4aXN0cygndHJhaW4tbGlnaHQtcmVkJylcbiAgICAgICAgICAgID8gdGhpcy5hZGQuaW1hZ2UoMCwgMCwgJ3RyYWluLWxpZ2h0LXJlZCcpXG4gICAgICAgICAgICA6IHRoaXMuYWRkLnJlY3RhbmdsZSgwLCAwLCBsaWdodFdpZHRoLCBsaWdodEhlaWdodCwgMHhlZjQ0NDQsIDEpO1xuICAgICAgICBjb25zdCB5ZWxsb3cgPSB0aGlzLnRleHR1cmVzLmV4aXN0cygndHJhaW4tbGlnaHQteWVsbG93JylcbiAgICAgICAgICAgID8gdGhpcy5hZGQuaW1hZ2UoMCwgMCwgJ3RyYWluLWxpZ2h0LXllbGxvdycpXG4gICAgICAgICAgICA6IHRoaXMuYWRkLnJlY3RhbmdsZSgwLCAwLCBsaWdodFdpZHRoLCBsaWdodEhlaWdodCwgMHhmYmJmMjQsIDEpO1xuICAgICAgICBjb25zdCBncmVlbiA9IHRoaXMudGV4dHVyZXMuZXhpc3RzKCd0cmFpbi1saWdodC1ncmVlbicpXG4gICAgICAgICAgICA/IHRoaXMuYWRkLmltYWdlKDAsIDAsICd0cmFpbi1saWdodC1ncmVlbicpXG4gICAgICAgICAgICA6IHRoaXMuYWRkLnJlY3RhbmdsZSgwLCAwLCBsaWdodFdpZHRoLCBsaWdodEhlaWdodCwgMHgyMmM1NWUsIDEpO1xuXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZSA9IChvYmo6IFBoYXNlci5HYW1lT2JqZWN0cy5HYW1lT2JqZWN0KSA9PiB7XG4gICAgICAgICAgICBpZiAoJ3NldE9yaWdpbicgaW4gb2JqKSB7XG4gICAgICAgICAgICAgICAgKG9iaiBhcyBQaGFzZXIuR2FtZU9iamVjdHMuSW1hZ2UpLnNldE9yaWdpbigwLjUsIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCdzZXREaXNwbGF5U2l6ZScgaW4gb2JqKSB7XG4gICAgICAgICAgICAgICAgKG9iaiBhcyBQaGFzZXIuR2FtZU9iamVjdHMuSW1hZ2UpLnNldERpc3BsYXlTaXplKGxpZ2h0V2lkdGgsIGxpZ2h0SGVpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgbm9ybWFsaXplKHJlZCk7XG4gICAgICAgIG5vcm1hbGl6ZSh5ZWxsb3cpO1xuICAgICAgICBub3JtYWxpemUoZ3JlZW4pO1xuICAgICAgICByZWQuc2V0UG9zaXRpb24ob2Zmc2V0cy5yZWQueCwgb2Zmc2V0cy5yZWQueSk7XG4gICAgICAgIHllbGxvdy5zZXRQb3NpdGlvbihvZmZzZXRzLnllbGxvdy54LCBvZmZzZXRzLnllbGxvdy55KTtcbiAgICAgICAgZ3JlZW4uc2V0UG9zaXRpb24ob2Zmc2V0cy5ncmVlbi54LCBvZmZzZXRzLmdyZWVuLnkpO1xuICAgICAgICBjb250YWluZXIuYWRkKFtyZWQsIHllbGxvdywgZ3JlZW5dKTtcblxuICAgICAgICB0aGlzLnRyYWZmaWNMaWdodFZhcmlhbnRzID0ge1xuICAgICAgICAgICAgcmVkOiByZWQgYXMgUGhhc2VyLkdhbWVPYmplY3RzLkltYWdlLFxuICAgICAgICAgICAgeWVsbG93OiB5ZWxsb3cgYXMgUGhhc2VyLkdhbWVPYmplY3RzLkltYWdlLFxuICAgICAgICAgICAgZ3JlZW46IGdyZWVuIGFzIFBoYXNlci5HYW1lT2JqZWN0cy5JbWFnZVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnRyYWZmaWNMaWdodCA9IHRoaXMudHJhZmZpY0xpZ2h0VmFyaWFudHMucmVkO1xuICAgICAgICBjb25zdCBjeWNsZTogQXJyYXk8J3JlZCcgfCAneWVsbG93JyB8ICdncmVlbic+ID0gWydyZWQnLCAneWVsbG93JywgJ2dyZWVuJ107XG4gICAgICAgIGxldCBjeWNsZUluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5zZXRUcmFmZmljTGlnaHRDb2xvcihjeWNsZVtjeWNsZUluZGV4XSk7XG4gICAgICAgIHRoaXMudGltZS5hZGRFdmVudCh7XG4gICAgICAgICAgICBkZWxheTogNzAwLFxuICAgICAgICAgICAgbG9vcDogdHJ1ZSxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY3ljbGVJbmRleCA9IChjeWNsZUluZGV4ICsgMSkgJSBjeWNsZS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRUcmFmZmljTGlnaHRDb2xvcihjeWNsZVtjeWNsZUluZGV4XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2V0VHJhZmZpY0xpZ2h0Q29sb3IgKGNvbG9yOiAncmVkJyB8ICd5ZWxsb3cnIHwgJ2dyZWVuJylcbiAgICB7XG4gICAgICAgIGlmICghdGhpcy50cmFmZmljTGlnaHRWYXJpYW50cykgcmV0dXJuO1xuICAgICAgICBpZiAodGhpcy50cmFmZmljTGlnaHRTdGF0ZSA9PT0gY29sb3IpIHJldHVybjtcbiAgICAgICAgdGhpcy50cmFmZmljTGlnaHRTdGF0ZSA9IGNvbG9yO1xuXG4gICAgICAgIGNvbnN0IHsgcmVkLCB5ZWxsb3csIGdyZWVuIH0gPSB0aGlzLnRyYWZmaWNMaWdodFZhcmlhbnRzO1xuICAgICAgICByZWQuc2V0VmlzaWJsZShjb2xvciA9PT0gJ3JlZCcpO1xuICAgICAgICB5ZWxsb3cuc2V0VmlzaWJsZShjb2xvciA9PT0gJ3llbGxvdycpO1xuICAgICAgICBncmVlbi5zZXRWaXNpYmxlKGNvbG9yID09PSAnZ3JlZW4nKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGxheW91dFRyYWluICgpXG4gICAge1xuICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMuc2NhbGU7XG4gICAgICAgIGNvbnN0IHNjYWxlWCA9IHRoaXMuYmFja2dyb3VuZC5kaXNwbGF5V2lkdGggLyB0aGlzLmJhY2tncm91bmQud2lkdGg7XG4gICAgICAgIGNvbnN0IHNjYWxlWSA9IHRoaXMuYmFja2dyb3VuZC5kaXNwbGF5SGVpZ2h0IC8gdGhpcy5iYWNrZ3JvdW5kLmhlaWdodDtcbiAgICAgICAgY29uc3Qgc2NhbGUgPSBNYXRoLm1pbihzY2FsZVgsIHNjYWxlWSkgKiB0aGlzLnRyYWluQ2FyU2NhbGVGYWN0b3I7XG5cbiAgICAgICAgY29uc3QgdHJhY2tDdXJ2ZSA9IHRoaXMuY3JlYXRlVHJhY2tDdXJ2ZSh3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgY29uc3QgdHJhY2tQb2ludHMgPSB0aGlzLnNhbXBsZVRyYWNrKHRyYWNrQ3VydmUsIHRoaXMubWF4Q2Fycyk7XG5cbiAgICAgICAgdGhpcy5jYXJTbG90cyA9IFtdO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tYXhDYXJzOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhcktleSA9IGB0cmFpbi1jYXItJHtpICsgMX1gO1xuICAgICAgICAgICAgY29uc3QgcG9pbnQgPSB0cmFja1BvaW50c1tpXSA/PyB7IHg6IHdpZHRoIC8gMiwgeTogaGVpZ2h0IC8gMiB9O1xuICAgICAgICAgICAgY29uc3QgYW5nbGUgPSB0aGlzLmdldFRyYWNrQW5nbGUodHJhY2tQb2ludHMsIGkpICsgdGhpcy50cmFpblJvdGF0aW9uT2Zmc2V0O1xuICAgICAgICAgICAgY29uc3QgY2FyID0gdGhpcy5hZGQuaW1hZ2UocG9pbnQueCwgcG9pbnQueSwgY2FyS2V5KS5zZXRTY2FsZShzY2FsZSkuc2V0Um90YXRpb24oYW5nbGUpO1xuICAgICAgICAgICAgY2FyLnNldEFscGhhKDEpO1xuXG4gICAgICAgICAgICBjb25zdCBsb2NrID0gdGhpcy5jcmVhdGVMb2NrT3ZlcmxheShwb2ludC54LCBwb2ludC55LCBjYXIuZGlzcGxheVdpZHRoLCBjYXIuZGlzcGxheUhlaWdodCwgaSk7XG4gICAgICAgICAgICBsb2NrLnNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICAgICAgbG9jay5kaXNhYmxlSW50ZXJhY3RpdmUoKTtcblxuICAgICAgICAgICAgdGhpcy5jYXJTbG90cy5wdXNoKHsgaW5kZXg6IGksIGNhciwgbG9jayB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmNhclNsb3RzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHJlZmVyZW5jZUNhciA9IHRoaXMuY2FyU2xvdHNbMF0uY2FyO1xuICAgICAgICAgICAgY29uc3QgY2FyTGVuZ3RoID0gTWF0aC5tYXgocmVmZXJlbmNlQ2FyLmRpc3BsYXlXaWR0aCwgcmVmZXJlbmNlQ2FyLmRpc3BsYXlIZWlnaHQpO1xuICAgICAgICAgICAgdGhpcy50cmFpbkdhcFB4ID0gY2FyTGVuZ3RoICogdGhpcy50cmFpbkNhckdhcEZhY3RvcjtcbiAgICAgICAgICAgIHRoaXMudHJhaW5TdGVwUHggPSB0aGlzLnRyYWluR2FwUHg7XG4gICAgICAgICAgICB0aGlzLmxlYWRDYXJCYXNlU2l6ZSA9IHtcbiAgICAgICAgICAgICAgICB3aWR0aDogcmVmZXJlbmNlQ2FyLmRpc3BsYXlXaWR0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHJlZmVyZW5jZUNhci5kaXNwbGF5SGVpZ2h0XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jYXJTbG90c1swXT8uY2FyLnNldFRleHR1cmUoJ3RyYWluLWNhci0xJyk7XG4gICAgICAgIHRoaXMuc2V0TGVhZENhclN0YXRlKCdpZGxlJyk7XG4gICAgICAgIHRoaXMucmVmcmVzaExvY2tzKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRMZWFkQ2FyVGV4dHVyZUtleSAoc3RhdGU6IExlYWRDYXJTdGF0ZSlcbiAgICB7XG4gICAgICAgIHN3aXRjaCAoc3RhdGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ2NvcnJlY3QnOlxuICAgICAgICAgICAgICAgIHJldHVybiAndHJhaW4tZm94LWNvcnJlY3QnO1xuICAgICAgICAgICAgY2FzZSAnaW5jb3JyZWN0JzpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3RyYWluLWZveC1pbmNvcnJlY3QnO1xuICAgICAgICAgICAgY2FzZSAnaWRsZSc6XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiAndHJhaW4tZm94LWlkbGUnO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZXRMZWFkQ2FyU3RhdGUgKHN0YXRlOiBMZWFkQ2FyU3RhdGUpXG4gICAge1xuICAgICAgICB0aGlzLmxlYWRDYXJTdGF0ZSA9IHN0YXRlO1xuICAgICAgICBjb25zdCBsZWFkQ2FyID0gdGhpcy5jYXJTbG90c1swXT8uY2FyO1xuICAgICAgICBpZiAoIWxlYWRDYXIpIHJldHVybjtcbiAgICAgICAgaWYgKCFsZWFkQ2FyLnNjZW5lKSByZXR1cm47XG4gICAgICAgIGlmICh0aGlzLmxlYWRDYXJCYWRnZSAmJiAhdGhpcy5sZWFkQ2FyQmFkZ2Uuc2NlbmUpIHtcbiAgICAgICAgICAgIHRoaXMubGVhZENhckJhZGdlID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsZWFkQ2FyLnRleHR1cmUua2V5ICE9PSAndHJhaW4tY2FyLTEnKSB7XG4gICAgICAgICAgICBsZWFkQ2FyLnNldFRleHR1cmUoJ3RyYWluLWNhci0xJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubGVhZENhckJhc2VTaXplKSB7XG4gICAgICAgICAgICBsZWFkQ2FyLnNldERpc3BsYXlTaXplKHRoaXMubGVhZENhckJhc2VTaXplLndpZHRoLCB0aGlzLmxlYWRDYXJCYXNlU2l6ZS5oZWlnaHQpO1xuICAgICAgICAgICAgbGVhZENhci5zZXRPcmlnaW4oMC41LCAwLjUpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdGV4dHVyZUtleSA9IHRoaXMuZ2V0TGVhZENhclRleHR1cmVLZXkoc3RhdGUpO1xuICAgICAgICBpZiAoIXRoaXMudGV4dHVyZXMuZXhpc3RzKHRleHR1cmVLZXkpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5sZWFkQ2FyQmFkZ2UpIHRoaXMubGVhZENhckJhZGdlLnNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLmxlYWRDYXJCYWRnZSkge1xuICAgICAgICAgICAgdGhpcy5sZWFkQ2FyQmFkZ2UgPSB0aGlzLmFkZC5pbWFnZShsZWFkQ2FyLngsIGxlYWRDYXIueSwgdGV4dHVyZUtleSlcbiAgICAgICAgICAgICAgICAuc2V0RGVwdGgobGVhZENhci5kZXB0aCArIDEpXG4gICAgICAgICAgICAgICAgLnNldE9yaWdpbigwLjUsIDAuNSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxlYWRDYXJCYWRnZS5zZXRUZXh0dXJlKHRleHR1cmVLZXkpLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5sZWFkQ2FyQmFzZVNpemUgJiYgdGhpcy5sZWFkQ2FyQmFkZ2UgJiYgdGhpcy5sZWFkQ2FyQmFkZ2Uuc2NlbmUpIHtcbiAgICAgICAgICAgIHRoaXMubGVhZENhckJhZGdlLnNldERpc3BsYXlTaXplKHRoaXMubGVhZENhckJhc2VTaXplLndpZHRoICogMC41LCB0aGlzLmxlYWRDYXJCYXNlU2l6ZS5oZWlnaHQgKiAwLjUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVMb2NrT3ZlcmxheSAoeDogbnVtYmVyLCB5OiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCBpbmRleDogbnVtYmVyKVxuICAgIHtcbiAgICAgICAgY29uc3QgbG9jayA9IHRoaXMuYWRkLmNvbnRhaW5lcih4LCB5KTtcbiAgICAgICAgbG9jay5zZXREZXB0aCgxMCk7XG4gICAgICAgIGNvbnN0IHBhbmVsVyA9IE1hdGgubWF4KDE0MCwgd2lkdGggKiAwLjYpO1xuICAgICAgICBjb25zdCBwYW5lbEggPSBNYXRoLm1heCg0OCwgaGVpZ2h0ICogMC4zNSk7XG5cbiAgICAgICAgY29uc3QgYmcgPSB0aGlzLmFkZC5yZWN0YW5nbGUoMCwgMCwgcGFuZWxXLCBwYW5lbEgsIDB4MWYyOTM3LCAwLjkpO1xuICAgICAgICBiZy5zZXRTdHJva2VTdHlsZSgyLCAweGZiYmYyNCwgMC45KTtcblxuICAgICAgICBjb25zdCB0ZXh0ID0gdGhpcy5hZGQudGV4dCgwLCAwLCAnVU5MT0NLJywge1xuICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsIEJsYWNrJyxcbiAgICAgICAgICAgIGZvbnRTaXplOiAnMThweCcsXG4gICAgICAgICAgICBjb2xvcjogJyNmOGZhZmMnXG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUpO1xuXG4gICAgICAgIGxvY2suYWRkKFtiZywgdGV4dF0pO1xuICAgICAgICBsb2NrLnNldFNpemUocGFuZWxXLCBwYW5lbEgpO1xuICAgICAgICBjb25zdCBoaXRBcmVhID0gbmV3IFBoYXNlci5HZW9tLlJlY3RhbmdsZSgtcGFuZWxXIC8gMiwgLXBhbmVsSCAvIDIsIHBhbmVsVywgcGFuZWxIKTtcbiAgICAgICAgbG9jay5zZXRJbnRlcmFjdGl2ZShoaXRBcmVhLCBQaGFzZXIuR2VvbS5SZWN0YW5nbGUuQ29udGFpbnMpO1xuICAgICAgICBsb2NrLnNldERhdGEoJ2hpdEFyZWEnLCBoaXRBcmVhKTtcblxuICAgICAgICBsb2NrLm9uKCdwb2ludGVyb3ZlcicsICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnF1aXpPcGVuIHx8IHRoaXMuZ2FtZU92ZXIpIHJldHVybjtcbiAgICAgICAgICAgIGJnLnNldEZpbGxTdHlsZSgweDMzNDE1NSwgMC45NSk7XG4gICAgICAgICAgICBsb2NrLnNldFNjYWxlKDEuMDUpO1xuICAgICAgICAgICAgdGhpcy5pbnB1dC5zZXREZWZhdWx0Q3Vyc29yKCdwb2ludGVyJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxvY2sub24oJ3BvaW50ZXJvdXQnLCAoKSA9PiB7XG4gICAgICAgICAgICBiZy5zZXRGaWxsU3R5bGUoMHgxZjI5MzcsIDAuOSk7XG4gICAgICAgICAgICBsb2NrLnNldFNjYWxlKDEpO1xuICAgICAgICAgICAgdGhpcy5pbnB1dC5zZXREZWZhdWx0Q3Vyc29yKCdkZWZhdWx0Jyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxvY2sub24oJ3BvaW50ZXJkb3duJywgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMucXVpek9wZW4gfHwgdGhpcy5nYW1lT3ZlcikgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKGluZGV4ICE9PSB0aGlzLmN1cnJlbnRJbmRleCkgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5vcGVuUXVlc3Rpb24oaW5kZXgpO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gbG9jaztcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZnJlc2hMb2NrcyAoKVxuICAgIHtcbiAgICAgICAgdGhpcy5jYXJTbG90cy5mb3JFYWNoKChzbG90KSA9PiB7XG4gICAgICAgICAgICBpZiAoIXNsb3QgfHwgIXNsb3QuY2FyIHx8ICFzbG90LmxvY2spIHJldHVybjtcbiAgICAgICAgICAgIGlmICghc2xvdC5jYXIuc2NlbmUgfHwgIXNsb3QubG9jay5zY2VuZSkgcmV0dXJuO1xuICAgICAgICAgICAgc2xvdC5jYXIuc2V0QWxwaGEoMSk7XG4gICAgICAgICAgICBzbG90LmxvY2suc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgICAgICBpZiAoc2xvdC5sb2NrLmlucHV0KSB7XG4gICAgICAgICAgICAgICAgc2xvdC5sb2NrLmRpc2FibGVJbnRlcmFjdGl2ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBwb2ludHMgPSBNYXRoLm1heCgwLCB0aGlzLnNjb3JlKTtcbiAgICAgICAgdGhpcy5zY29yZVRleHQuc2V0VGV4dChgUE9JTlRTOiAke3BvaW50cy50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9YCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVRdWl6TW9kYWwgKClcbiAgICB7XG4gICAgICAgIHRoaXMucXVpelBhbmVsID0gbmV3IFF1aXpQYW5lbCh0aGlzLCB7IG9wdGlvbkNvdW50OiA0LCBkZXB0aDogMjAwMCwgcGFyZW50OiB0aGlzLnVpUm9vdCwgc2hvd0luZGV4OiB0cnVlIH0pO1xuICAgICAgICB0aGlzLnF1aXpNb2RhbCA9IHRoaXMucXVpelBhbmVsLmNvbnRhaW5lcjtcblxuICAgICAgICB0aGlzLnF1aXpQYW5lbC5vbk9wdGlvblNlbGVjdGVkKChpbmRleCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMucXVpekxvY2tlZCkgcmV0dXJuO1xuICAgICAgICAgICAgdm9pZCB0aGlzLmhhbmRsZUFuc3dlcihpbmRleCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMubGF5b3V0UXVpeigpO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlU3RhcnRNb2RhbCAoKVxuICAgIHtcbiAgICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSB0aGlzLnNjYWxlO1xuICAgICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmFkZC5jb250YWluZXIoMCwgMCkuc2V0RGVwdGgoMjEwMCkuc2V0VmlzaWJsZShmYWxzZSk7XG5cbiAgICAgICAgY29uc3Qgb3ZlcmxheSA9IHRoaXMuYWRkLnJlY3RhbmdsZSgwLCAwLCB3aWR0aCwgaGVpZ2h0LCAweGZmZmZmZiwgMC4xMikuc2V0T3JpZ2luKDAsIDApO1xuXG4gICAgICAgIGNvbnN0IHBhbmVsID0gdGhpcy5hZGQuY29udGFpbmVyKHdpZHRoIC8gMiwgTWF0aC5yb3VuZChoZWlnaHQgKiAwLjU2KSk7XG4gICAgICAgIGNvbnN0IHBhbmVsV2lkdGggPSBNYXRoLm1pbig2MjAsIHdpZHRoIC0gODApO1xuICAgICAgICBjb25zdCBwYW5lbEhlaWdodCA9IE1hdGgubWluKDIyMCwgTWF0aC5yb3VuZChoZWlnaHQgKiAwLjMyKSk7XG5cbiAgICAgICAgY29uc3QgcGFuZWxTaGFkb3cgPSB0aGlzLmFkZC5ncmFwaGljcygpO1xuICAgICAgICBwYW5lbFNoYWRvdy5maWxsU3R5bGUoMHgwMDAwMDAsIDAuMTgpO1xuICAgICAgICBwYW5lbFNoYWRvdy5maWxsUm91bmRlZFJlY3QoLXBhbmVsV2lkdGggLyAyICsgOCwgLXBhbmVsSGVpZ2h0IC8gMiArIDEwLCBwYW5lbFdpZHRoLCBwYW5lbEhlaWdodCwgMzApO1xuXG4gICAgICAgIGNvbnN0IHBhbmVsQmcgPSB0aGlzLmFkZC5ncmFwaGljcygpO1xuICAgICAgICBwYW5lbEJnLmZpbGxTdHlsZSgweGZmZmZmZiwgMC44NSk7XG4gICAgICAgIHBhbmVsQmcuZmlsbFJvdW5kZWRSZWN0KC1wYW5lbFdpZHRoIC8gMiwgLXBhbmVsSGVpZ2h0IC8gMiwgcGFuZWxXaWR0aCwgcGFuZWxIZWlnaHQsIDI4KTtcbiAgICAgICAgcGFuZWxCZy5saW5lU3R5bGUoMiwgMHhmZmZmZmYsIDAuNjUpO1xuICAgICAgICBwYW5lbEJnLnN0cm9rZVJvdW5kZWRSZWN0KC1wYW5lbFdpZHRoIC8gMiwgLXBhbmVsSGVpZ2h0IC8gMiwgcGFuZWxXaWR0aCwgcGFuZWxIZWlnaHQsIDI4KTtcblxuICAgICAgICBjb25zdCB0aXRsZSA9IHRoaXMuYWRkLnRleHQoMCwgLTM4LCAnQW5zd2VyIHRoZSBxdWVzdGlvbnMgdG8gaGVscCB0aGVcXG50cmFpbiBnbyBhaGVhZC4nLCB7XG4gICAgICAgICAgICBmb250RmFtaWx5OiAnQXJpYWwgQmxhY2snLFxuICAgICAgICAgICAgZm9udFNpemU6ICcyMHB4JyxcbiAgICAgICAgICAgIGNvbG9yOiAnIzBmMTcyYScsXG4gICAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsXG4gICAgICAgICAgICBsaW5lU3BhY2luZzogNlxuICAgICAgICB9KS5zZXRPcmlnaW4oMC41KTtcblxuICAgICAgICBjb25zdCBidXR0b24gPSB0aGlzLmNyZWF0ZVN0YXJ0QnV0dG9uKDAsIE1hdGgucm91bmQocGFuZWxIZWlnaHQgKiAwLjIzKSk7XG5cbiAgICAgICAgcGFuZWwuYWRkKFtwYW5lbFNoYWRvdywgcGFuZWxCZywgdGl0bGUsIGJ1dHRvbl0pO1xuICAgICAgICBjb250YWluZXIuYWRkKFtvdmVybGF5LCBwYW5lbF0pO1xuXG4gICAgICAgIHRoaXMuc3RhcnRNb2RhbCA9IGNvbnRhaW5lcjtcbiAgICAgICAgdGhpcy5zdGFydE1vZGFsUGFuZWwgPSBwYW5lbDtcbiAgICAgICAgdGhpcy51aVJvb3QuYWRkKGNvbnRhaW5lcik7XG4gICAgICAgIHRoaXMubGF5b3V0U3RhcnRNb2RhbCgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlVGltZVVwTW9kYWwgKClcbiAgICB7XG4gICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gdGhpcy5zY2FsZTtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5hZGQuY29udGFpbmVyKDAsIDApLnNldERlcHRoKDIyMDApLnNldFZpc2libGUoZmFsc2UpO1xuICAgICAgICBjb25zdCBvdmVybGF5ID0gdGhpcy5hZGQucmVjdGFuZ2xlKDAsIDAsIHdpZHRoLCBoZWlnaHQsIDB4MDAwMDAwLCAwLjEpLnNldE9yaWdpbigwLCAwKTtcblxuICAgICAgICBjb25zdCBwYW5lbCA9IHRoaXMuYWRkLmNvbnRhaW5lcih3aWR0aCAvIDIsIE1hdGgucm91bmQoaGVpZ2h0ICogMC41NikpO1xuICAgICAgICBjb25zdCBwYW5lbFdpZHRoID0gTWF0aC5taW4oNjIwLCB3aWR0aCAtIDgwKTtcbiAgICAgICAgY29uc3QgcGFuZWxIZWlnaHQgPSBNYXRoLm1pbigyMjAsIE1hdGgucm91bmQoaGVpZ2h0ICogMC4zMikpO1xuXG4gICAgICAgIGNvbnN0IHBhbmVsU2hhZG93ID0gdGhpcy5hZGQuZ3JhcGhpY3MoKTtcbiAgICAgICAgcGFuZWxTaGFkb3cuZmlsbFN0eWxlKDB4MDAwMDAwLCAwLjE4KTtcbiAgICAgICAgcGFuZWxTaGFkb3cuZmlsbFJvdW5kZWRSZWN0KC1wYW5lbFdpZHRoIC8gMiArIDgsIC1wYW5lbEhlaWdodCAvIDIgKyAxMCwgcGFuZWxXaWR0aCwgcGFuZWxIZWlnaHQsIDMwKTtcblxuICAgICAgICBjb25zdCBwYW5lbEJnID0gdGhpcy5hZGQuZ3JhcGhpY3MoKTtcbiAgICAgICAgcGFuZWxCZy5maWxsU3R5bGUoMHhmZmZmZmYsIDAuODUpO1xuICAgICAgICBwYW5lbEJnLmZpbGxSb3VuZGVkUmVjdCgtcGFuZWxXaWR0aCAvIDIsIC1wYW5lbEhlaWdodCAvIDIsIHBhbmVsV2lkdGgsIHBhbmVsSGVpZ2h0LCAyOCk7XG4gICAgICAgIHBhbmVsQmcubGluZVN0eWxlKDIsIDB4ZmZmZmZmLCAwLjY1KTtcbiAgICAgICAgcGFuZWxCZy5zdHJva2VSb3VuZGVkUmVjdCgtcGFuZWxXaWR0aCAvIDIsIC1wYW5lbEhlaWdodCAvIDIsIHBhbmVsV2lkdGgsIHBhbmVsSGVpZ2h0LCAyOCk7XG5cbiAgICAgICAgdGhpcy50aW1lVXBUaXRsZVRleHQgPSB0aGlzLmFkZC50ZXh0KDAsIC0xNCwgJ091dCBvZiB0aW1lISBGYWlsZWQhJywge1xuICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsIEJsYWNrJyxcbiAgICAgICAgICAgIGZvbnRTaXplOiAnMjBweCcsXG4gICAgICAgICAgICBjb2xvcjogJyMwZjE3MmEnLFxuICAgICAgICAgICAgYWxpZ246ICdjZW50ZXInXG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUpO1xuXG4gICAgICAgIGNvbnN0IGJ1dHRvbiA9IHRoaXMuY3JlYXRlVGltZW91dEJ1dHRvbigwLCBNYXRoLnJvdW5kKHBhbmVsSGVpZ2h0ICogMC4yMykpO1xuXG4gICAgICAgIHBhbmVsLmFkZChbcGFuZWxTaGFkb3csIHBhbmVsQmcsIHRoaXMudGltZVVwVGl0bGVUZXh0LCBidXR0b25dKTtcbiAgICAgICAgY29udGFpbmVyLmFkZChbb3ZlcmxheSwgcGFuZWxdKTtcblxuICAgICAgICB0aGlzLnRpbWVVcE1vZGFsID0gY29udGFpbmVyO1xuICAgICAgICB0aGlzLnRpbWVVcE1vZGFsUGFuZWwgPSBwYW5lbDtcbiAgICAgICAgdGhpcy51aVJvb3QuYWRkKGNvbnRhaW5lcik7XG4gICAgICAgIHRoaXMubGF5b3V0VGltZVVwTW9kYWwoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGxheW91dFN0YXJ0TW9kYWwgKClcbiAgICB7XG4gICAgICAgIGlmICghdGhpcy5zdGFydE1vZGFsIHx8ICF0aGlzLnN0YXJ0TW9kYWxQYW5lbCkgcmV0dXJuO1xuICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMuc2NhbGU7XG4gICAgICAgIGNvbnN0IG92ZXJsYXkgPSB0aGlzLnN0YXJ0TW9kYWwubGlzdFswXTtcbiAgICAgICAgaWYgKG92ZXJsYXkgJiYgJ3NldFNpemUnIGluIG92ZXJsYXkpIHtcbiAgICAgICAgICAgIChvdmVybGF5IGFzIFBoYXNlci5HYW1lT2JqZWN0cy5SZWN0YW5nbGUpLnNldFNpemUod2lkdGgsIGhlaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdGFydE1vZGFsUGFuZWwuc2V0UG9zaXRpb24od2lkdGggLyAyLCBNYXRoLnJvdW5kKGhlaWdodCAqIDAuNTYpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGxheW91dFRpbWVVcE1vZGFsICgpXG4gICAge1xuICAgICAgICBpZiAoIXRoaXMudGltZVVwTW9kYWwgfHwgIXRoaXMudGltZVVwTW9kYWxQYW5lbCkgcmV0dXJuO1xuICAgICAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IHRoaXMuc2NhbGU7XG4gICAgICAgIGNvbnN0IG92ZXJsYXkgPSB0aGlzLnRpbWVVcE1vZGFsLmxpc3RbMF07XG4gICAgICAgIGlmIChvdmVybGF5ICYmICdzZXRTaXplJyBpbiBvdmVybGF5KSB7XG4gICAgICAgICAgICAob3ZlcmxheSBhcyBQaGFzZXIuR2FtZU9iamVjdHMuUmVjdGFuZ2xlKS5zZXRTaXplKHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudGltZVVwTW9kYWxQYW5lbC5zZXRQb3NpdGlvbih3aWR0aCAvIDIsIE1hdGgucm91bmQoaGVpZ2h0ICogMC41NikpO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlU3RhcnRCdXR0b24gKHg6IG51bWJlciwgeTogbnVtYmVyKVxuICAgIHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5hZGQuY29udGFpbmVyKHgsIHkpO1xuICAgICAgICBjb25zdCB3aWR0aCA9IDUzMDtcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gNzI7XG4gICAgICAgIGNvbnN0IHJhZGl1cyA9IDMwO1xuXG4gICAgICAgIGNvbnN0IHNoYWRvdyA9IHRoaXMuYWRkLmdyYXBoaWNzKCk7XG4gICAgICAgIHNoYWRvdy5maWxsU3R5bGUoMHgxZTNhOGEsIDAuMTgpO1xuICAgICAgICBzaGFkb3cuZmlsbFJvdW5kZWRSZWN0KC13aWR0aCAvIDIgKyA0LCAtaGVpZ2h0IC8gMiArIDYsIHdpZHRoLCBoZWlnaHQsIHJhZGl1cyk7XG5cbiAgICAgICAgY29uc3QgYmcgPSB0aGlzLmFkZC5ncmFwaGljcygpO1xuICAgICAgICBjb25zdCBkcmF3ID0gKGZpbGw6IG51bWJlciwgc3Ryb2tlOiBudW1iZXIpID0+IHtcbiAgICAgICAgICAgIGJnLmNsZWFyKCk7XG4gICAgICAgICAgICBiZy5maWxsU3R5bGUoZmlsbCwgMSk7XG4gICAgICAgICAgICBiZy5maWxsUm91bmRlZFJlY3QoLXdpZHRoIC8gMiwgLWhlaWdodCAvIDIsIHdpZHRoLCBoZWlnaHQsIHJhZGl1cyk7XG4gICAgICAgICAgICBiZy5saW5lU3R5bGUoMiwgc3Ryb2tlLCAwLjY1KTtcbiAgICAgICAgICAgIGJnLnN0cm9rZVJvdW5kZWRSZWN0KC13aWR0aCAvIDIsIC1oZWlnaHQgLyAyLCB3aWR0aCwgaGVpZ2h0LCByYWRpdXMpO1xuICAgICAgICB9O1xuICAgICAgICBkcmF3KDB4M2I4MmY2LCAweDkzYzVmZCk7XG5cbiAgICAgICAgY29uc3QgdGV4dCA9IHRoaXMuYWRkLnRleHQoMCwgMSwgJ1N0YXJ0IEdhbWUnLCB7XG4gICAgICAgICAgICBmb250RmFtaWx5OiAnQXJpYWwgQmxhY2snLFxuICAgICAgICAgICAgZm9udFNpemU6ICczNHB4JyxcbiAgICAgICAgICAgIGNvbG9yOiAnI2ZmZmZmZidcbiAgICAgICAgfSkuc2V0T3JpZ2luKDAuNSkuc2V0U2NhbGUoMC42Nik7XG5cbiAgICAgICAgY29uc3QgaGl0ID0gdGhpcy5hZGQucmVjdGFuZ2xlKDAsIDAsIHdpZHRoICsgMTYsIGhlaWdodCArIDE2LCAweGZmZmZmZiwgMC4wMDEpO1xuICAgICAgICBoaXQuc2V0SW50ZXJhY3RpdmUoKTtcblxuICAgICAgICBjb250YWluZXIuYWRkKFtzaGFkb3csIGJnLCB0ZXh0LCBoaXRdKTtcbiAgICAgICAgY29udGFpbmVyLnNldFNpemUod2lkdGgsIGhlaWdodCk7XG5cbiAgICAgICAgaGl0Lm9uKCdwb2ludGVyb3ZlcicsICgpID0+IHtcbiAgICAgICAgICAgIGRyYXcoMHgyNTYzZWIsIDB4YmZkYmZlKTtcbiAgICAgICAgICAgIHRoaXMuaW5wdXQuc2V0RGVmYXVsdEN1cnNvcigncG9pbnRlcicpO1xuICAgICAgICAgICAgdGhpcy50d2VlbnMuYWRkKHsgdGFyZ2V0czogY29udGFpbmVyLCBzY2FsZTogMS4wMiwgZHVyYXRpb246IDEwMCwgZWFzZTogJ1NpbmUuZWFzZU91dCcgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBoaXQub24oJ3BvaW50ZXJvdXQnLCAoKSA9PiB7XG4gICAgICAgICAgICBkcmF3KDB4M2I4MmY2LCAweDkzYzVmZCk7XG4gICAgICAgICAgICB0aGlzLmlucHV0LnNldERlZmF1bHRDdXJzb3IoJ2RlZmF1bHQnKTtcbiAgICAgICAgICAgIHRoaXMudHdlZW5zLmFkZCh7IHRhcmdldHM6IGNvbnRhaW5lciwgc2NhbGU6IDEsIGR1cmF0aW9uOiAxMDAsIGVhc2U6ICdTaW5lLmVhc2VPdXQnIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgaGl0Lm9uKCdwb2ludGVyZG93bicsICgpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5zdGFydE1vZGFsT3BlbikgcmV0dXJuO1xuICAgICAgICAgICAgZHJhdygweDFkNGVkOCwgMHhiZmRiZmUpO1xuICAgICAgICAgICAgdGhpcy50d2VlbnMuYWRkKHsgdGFyZ2V0czogY29udGFpbmVyLCBzY2FsZTogMC45OCwgZHVyYXRpb246IDcwLCBlYXNlOiAnU2luZS5lYXNlT3V0JyB9KTtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRHYW1lRmxvdygpO1xuICAgICAgICB9KTtcbiAgICAgICAgaGl0Lm9uKCdwb2ludGVydXAnLCAoKSA9PiB7XG4gICAgICAgICAgICBkcmF3KDB4MjU2M2ViLCAweGJmZGJmZSk7XG4gICAgICAgICAgICB0aGlzLnR3ZWVucy5hZGQoeyB0YXJnZXRzOiBjb250YWluZXIsIHNjYWxlOiAxLjAyLCBkdXJhdGlvbjogNzAsIGVhc2U6ICdTaW5lLmVhc2VPdXQnIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnR3ZWVucy5hZGQoe1xuICAgICAgICAgICAgdGFyZ2V0czogY29udGFpbmVyLFxuICAgICAgICAgICAgc2NhbGU6IDEuMDMsXG4gICAgICAgICAgICBkdXJhdGlvbjogODUwLFxuICAgICAgICAgICAgeW95bzogdHJ1ZSxcbiAgICAgICAgICAgIHJlcGVhdDogLTFcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZVRpbWVvdXRCdXR0b24gKHg6IG51bWJlciwgeTogbnVtYmVyKVxuICAgIHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5hZGQuY29udGFpbmVyKHgsIHkpO1xuICAgICAgICBjb25zdCB3aWR0aCA9IDUzMDtcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gNzI7XG4gICAgICAgIGNvbnN0IHJhZGl1cyA9IDMwO1xuXG4gICAgICAgIGNvbnN0IHNoYWRvdyA9IHRoaXMuYWRkLmdyYXBoaWNzKCk7XG4gICAgICAgIHNoYWRvdy5maWxsU3R5bGUoMHgxZTNhOGEsIDAuMTgpO1xuICAgICAgICBzaGFkb3cuZmlsbFJvdW5kZWRSZWN0KC13aWR0aCAvIDIgKyA0LCAtaGVpZ2h0IC8gMiArIDYsIHdpZHRoLCBoZWlnaHQsIHJhZGl1cyk7XG5cbiAgICAgICAgY29uc3QgYmcgPSB0aGlzLmFkZC5ncmFwaGljcygpO1xuICAgICAgICBjb25zdCBkcmF3ID0gKGZpbGw6IG51bWJlciwgc3Ryb2tlOiBudW1iZXIpID0+IHtcbiAgICAgICAgICAgIGJnLmNsZWFyKCk7XG4gICAgICAgICAgICBiZy5maWxsU3R5bGUoZmlsbCwgMSk7XG4gICAgICAgICAgICBiZy5maWxsUm91bmRlZFJlY3QoLXdpZHRoIC8gMiwgLWhlaWdodCAvIDIsIHdpZHRoLCBoZWlnaHQsIHJhZGl1cyk7XG4gICAgICAgICAgICBiZy5saW5lU3R5bGUoMiwgc3Ryb2tlLCAwLjY1KTtcbiAgICAgICAgICAgIGJnLnN0cm9rZVJvdW5kZWRSZWN0KC13aWR0aCAvIDIsIC1oZWlnaHQgLyAyLCB3aWR0aCwgaGVpZ2h0LCByYWRpdXMpO1xuICAgICAgICB9O1xuICAgICAgICBkcmF3KDB4M2I4MmY2LCAweDkzYzVmZCk7XG5cbiAgICAgICAgY29uc3QgdGV4dCA9IHRoaXMuYWRkLnRleHQoMCwgMSwgJ1BsYXkgQWdhaW4nLCB7XG4gICAgICAgICAgICBmb250RmFtaWx5OiAnQXJpYWwgQmxhY2snLFxuICAgICAgICAgICAgZm9udFNpemU6ICczNHB4JyxcbiAgICAgICAgICAgIGNvbG9yOiAnI2ZmZmZmZidcbiAgICAgICAgfSkuc2V0T3JpZ2luKDAuNSkuc2V0U2NhbGUoMC42Nik7XG5cbiAgICAgICAgY29uc3QgaGl0ID0gdGhpcy5hZGQucmVjdGFuZ2xlKDAsIDAsIHdpZHRoICsgMTYsIGhlaWdodCArIDE2LCAweGZmZmZmZiwgMC4wMDEpO1xuICAgICAgICBoaXQuc2V0SW50ZXJhY3RpdmUoKTtcblxuICAgICAgICBjb250YWluZXIuYWRkKFtzaGFkb3csIGJnLCB0ZXh0LCBoaXRdKTtcbiAgICAgICAgY29udGFpbmVyLnNldFNpemUod2lkdGgsIGhlaWdodCk7XG5cbiAgICAgICAgaGl0Lm9uKCdwb2ludGVyb3ZlcicsICgpID0+IHtcbiAgICAgICAgICAgIGlmIChoaXQuZ2V0RGF0YSgncmVzdGFydGluZycpKSByZXR1cm47XG4gICAgICAgICAgICBkcmF3KDB4MjU2M2ViLCAweGJmZGJmZSk7XG4gICAgICAgICAgICB0aGlzLmlucHV0LnNldERlZmF1bHRDdXJzb3IoJ3BvaW50ZXInKTtcbiAgICAgICAgICAgIHRoaXMudHdlZW5zLmFkZCh7IHRhcmdldHM6IGNvbnRhaW5lciwgc2NhbGU6IDEuMDIsIGR1cmF0aW9uOiAxMDAsIGVhc2U6ICdTaW5lLmVhc2VPdXQnIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgaGl0Lm9uKCdwb2ludGVyb3V0JywgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGhpdC5nZXREYXRhKCdyZXN0YXJ0aW5nJykpIHJldHVybjtcbiAgICAgICAgICAgIGRyYXcoMHgzYjgyZjYsIDB4OTNjNWZkKTtcbiAgICAgICAgICAgIHRoaXMuaW5wdXQuc2V0RGVmYXVsdEN1cnNvcignZGVmYXVsdCcpO1xuICAgICAgICAgICAgdGhpcy50d2VlbnMuYWRkKHsgdGFyZ2V0czogY29udGFpbmVyLCBzY2FsZTogMSwgZHVyYXRpb246IDEwMCwgZWFzZTogJ1NpbmUuZWFzZU91dCcgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBoaXQub24oJ3BvaW50ZXJkb3duJywgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGhpdC5nZXREYXRhKCdyZXN0YXJ0aW5nJykpIHJldHVybjtcbiAgICAgICAgICAgIGhpdC5zZXREYXRhKCdyZXN0YXJ0aW5nJywgdHJ1ZSk7XG4gICAgICAgICAgICBoaXQuZGlzYWJsZUludGVyYWN0aXZlKCk7XG4gICAgICAgICAgICBkcmF3KDB4MWQ0ZWQ4LCAweGJmZGJmZSk7XG4gICAgICAgICAgICB0aGlzLnR3ZWVucy5hZGQoeyB0YXJnZXRzOiBjb250YWluZXIsIHNjYWxlOiAwLjk4LCBkdXJhdGlvbjogNzAsIGVhc2U6ICdTaW5lLmVhc2VPdXQnIH0pO1xuICAgICAgICAgICAgdGhpcy50aW1lLmRlbGF5ZWRDYWxsKDkwLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnN5cy5pc0FjdGl2ZSgpKSByZXR1cm47XG4gICAgICAgICAgICAgICAgdGhpcy5yZXN0YXJ0VHJhaW5SdW4oKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgaGl0Lm9uKCdwb2ludGVydXAnLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoaGl0LmdldERhdGEoJ3Jlc3RhcnRpbmcnKSkgcmV0dXJuO1xuICAgICAgICAgICAgZHJhdygweDI1NjNlYiwgMHhiZmRiZmUpO1xuICAgICAgICAgICAgdGhpcy50d2VlbnMuYWRkKHsgdGFyZ2V0czogY29udGFpbmVyLCBzY2FsZTogMS4wMiwgZHVyYXRpb246IDcwLCBlYXNlOiAnU2luZS5lYXNlT3V0JyB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9wZW5TdGFydE1vZGFsICgpXG4gICAge1xuICAgICAgICBpZiAoIXRoaXMuc3RhcnRNb2RhbCkgcmV0dXJuO1xuICAgICAgICB0aGlzLnN0YXJ0TW9kYWxPcGVuID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5oYXNTdGFydGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc3RhcnRNb2RhbC5zZXRWaXNpYmxlKHRydWUpO1xuICAgICAgICB0aGlzLnN0YXJ0TW9kYWwuc2V0QWxwaGEoMCk7XG4gICAgICAgIHRoaXMudHdlZW5zLmFkZCh7XG4gICAgICAgICAgICB0YXJnZXRzOiB0aGlzLnN0YXJ0TW9kYWwsXG4gICAgICAgICAgICBhbHBoYTogMSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAxODBcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjbG9zZVN0YXJ0TW9kYWwgKClcbiAgICB7XG4gICAgICAgIGlmICghdGhpcy5zdGFydE1vZGFsKSByZXR1cm47XG4gICAgICAgIHRoaXMuc3RhcnRNb2RhbE9wZW4gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zdGFydE1vZGFsLnNldFZpc2libGUoZmFsc2UpO1xuICAgIH1cblxuICAgIHByaXZhdGUgc3RhcnRHYW1lRmxvdyAoKVxuICAgIHtcbiAgICAgICAgaWYgKHRoaXMuaGFzU3RhcnRlZCkgcmV0dXJuO1xuICAgICAgICB0aGlzLmhhc1N0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmNsb3NlU3RhcnRNb2RhbCgpO1xuICAgICAgICB0aGlzLm9wZW5RdWVzdGlvbih0aGlzLmN1cnJlbnRJbmRleCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvcGVuVGltZVVwTW9kYWwgKG1lc3NhZ2U6IHN0cmluZyA9ICdPdXQgb2YgdGltZSEgVHJ5IGFnYWluLicpXG4gICAge1xuICAgICAgICBpZiAoIXRoaXMudGltZVVwTW9kYWwgfHwgIXRoaXMudGltZVVwTW9kYWxQYW5lbCkgcmV0dXJuO1xuICAgICAgICB0aGlzLnRpbWVVcFRpdGxlVGV4dC5zZXRUZXh0KG1lc3NhZ2UpO1xuICAgICAgICB0aGlzLnRpbWVVcE1vZGFsUGFuZWwuc2V0U2NhbGUoMC45Nik7XG4gICAgICAgIHRoaXMudGltZVVwTW9kYWwuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgdGhpcy50aW1lVXBNb2RhbC5zZXRBbHBoYSgwKTtcbiAgICAgICAgdGhpcy50d2VlbnMuYWRkKHtcbiAgICAgICAgICAgIHRhcmdldHM6IHRoaXMudGltZVVwTW9kYWwsXG4gICAgICAgICAgICBhbHBoYTogMSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAyMDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudHdlZW5zLmFkZCh7XG4gICAgICAgICAgICB0YXJnZXRzOiB0aGlzLnRpbWVVcE1vZGFsUGFuZWwsXG4gICAgICAgICAgICBzY2FsZTogMSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAyNDAsXG4gICAgICAgICAgICBlYXNlOiAnQmFjay5lYXNlT3V0J1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHN1Ym1pdFNlc3Npb25SZXN1bHQgKClcbiAgICB7XG4gICAgICAgIGlmICghdGhpcy5zZXNzaW9uR2FtZUlkKSByZXR1cm47XG4gICAgICAgIGltcG9ydCgnLi4vLi4vc2VydmljZXMvYXBpJylcbiAgICAgICAgICAgIC50aGVuKCh7IGVuZEdhbWVTZXNzaW9uIH0pID0+IGVuZEdhbWVTZXNzaW9uKHRoaXMuc2Vzc2lvbkdhbWVJZCBhcyBzdHJpbmcsIHRoaXMuc2NvcmUpKVxuICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ2VuZEdhbWVTZXNzaW9uIGZhaWxlZCcsIGVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVzdGFydFRyYWluUnVuICgpXG4gICAge1xuICAgICAgICBpZiAoIXRoaXMuc3lzIHx8ICF0aGlzLnN5cy5pc0FjdGl2ZSgpKSByZXR1cm47XG4gICAgICAgIHRoaXMuaW5wdXQuc2V0RGVmYXVsdEN1cnNvcignZGVmYXVsdCcpO1xuICAgICAgICB0aGlzLmNsb3NlUXVpeigpO1xuICAgICAgICBpZiAodGhpcy50aW1lVXBNb2RhbCkge1xuICAgICAgICAgICAgdGhpcy50aW1lVXBNb2RhbC5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNjZW5lLnJlc3RhcnQoe1xuICAgICAgICAgICAgZ2FtZUNvZGU6IHRoaXMuZ2FtZUNvZGUsXG4gICAgICAgICAgICBzZXNzaW9uSWQ6IHRoaXMuc2Vzc2lvbklkLFxuICAgICAgICAgICAgZ2FtZUlkOiB0aGlzLnNlc3Npb25HYW1lSWQsXG4gICAgICAgICAgICBxdWVzdGlvbnM6IHRoaXMuc2Vzc2lvblF1ZXN0aW9ucyxcbiAgICAgICAgICAgIHRpbWVMaW1pdDogdGhpcy5zZXNzaW9uVGltZUxpbWl0XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgbGF5b3V0UXVpeiAoKVxuICAgIHtcbiAgICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSB0aGlzLnNjYWxlO1xuICAgICAgICB0aGlzLnF1aXpQYW5lbC5sYXlvdXQod2lkdGgsIGhlaWdodCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvcGVuUXVlc3Rpb24gKGluZGV4OiBudW1iZXIpXG4gICAge1xuICAgICAgICBpZiAodGhpcy5xdWl6T3BlbiB8fCB0aGlzLmdhbWVPdmVyKSByZXR1cm47XG4gICAgICAgIGlmICghdGhpcy5oYXNTdGFydGVkKSByZXR1cm47XG4gICAgICAgIHRoaXMuc2V0TGVhZENhclN0YXRlKCdpZGxlJyk7XG5cbiAgICAgICAgY29uc3QgcXVlc3Rpb24gPSB0aGlzLmdldFF1ZXN0aW9uRm9ySW5kZXgoaW5kZXgpO1xuICAgICAgICBjb25zdCBvcHRpb25zID0gcXVlc3Rpb24ucXVlc3Rpb24ub3B0aW9ucy5tYXAoKG9wdCkgPT4gb3B0LnRleHQpO1xuICAgICAgICB0aGlzLmN1cnJlbnRPcHRpb25JZHMgPSBxdWVzdGlvbi5xdWVzdGlvbi5vcHRpb25zLm1hcCgob3B0KSA9PiBvcHQuaWQgPz8gJycpO1xuICAgICAgICB0aGlzLmN1cnJlbnRTZXNzaW9uUXVlc3Rpb25JZCA9IHF1ZXN0aW9uLnNlc3Npb25fcXVlc3Rpb25faWQgPz8gbnVsbDtcbiAgICAgICAgbGV0IGNvcnJlY3RJbmRleCA9IHF1ZXN0aW9uLnF1ZXN0aW9uLm9wdGlvbnMuZmluZEluZGV4KChvcHQpID0+IG9wdC5pc19jb3JyZWN0KTtcbiAgICAgICAgaWYgKGNvcnJlY3RJbmRleCA8IDApIGNvcnJlY3RJbmRleCA9IDA7XG4gICAgICAgIHRoaXMuY3VycmVudENvcnJlY3RJbmRleCA9IGNvcnJlY3RJbmRleDtcbiAgICAgICAgdGhpcy5xdWl6UGFuZWwuc2V0RmVlZGJhY2soJ2lkbGUnKTtcbiAgICAgICAgdGhpcy5xdWl6UGFuZWwuc2V0UXVlc3Rpb24oe1xuICAgICAgICAgICAgaW5kZXg6IGluZGV4ICsgMSxcbiAgICAgICAgICAgIHRvdGFsOiB0aGlzLm1heENhcnMsXG4gICAgICAgICAgICBxdWVzdGlvbjogcXVlc3Rpb24ucXVlc3Rpb24uY29udGVudCxcbiAgICAgICAgICAgIG9wdGlvbnNcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudXBkYXRlQmFycmllclBvc2l0aW9uKCk7XG4gICAgICAgIHRoaXMuc2V0QmFycmllck9wZW4oZmFsc2UpO1xuICAgICAgICB0aGlzLmxheW91dFF1aXooKTtcblxuICAgICAgICB0aGlzLnF1aXpPcGVuID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5xdWl6TG9ja2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucXVpek1vZGFsLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgIHRoaXMucXVpelBhbmVsLnNldEludGVyYWN0aXZlKHRydWUpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlQW5zd2VyIChzZWxlY3RlZEluZGV4OiBudW1iZXIpXG4gICAge1xuICAgICAgICBpZiAodGhpcy5xdWl6TG9ja2VkKSByZXR1cm47XG4gICAgICAgIHRoaXMucXVpekxvY2tlZCA9IHRydWU7XG5cbiAgICAgICAgbGV0IGlzQ29ycmVjdCA9IHNlbGVjdGVkSW5kZXggPT09IHRoaXMuY3VycmVudENvcnJlY3RJbmRleDtcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRPcHRpb25JZCA9IHRoaXMuY3VycmVudE9wdGlvbklkc1tzZWxlY3RlZEluZGV4XTtcbiAgICAgICAgaWYgKHRoaXMuc2Vzc2lvbklkICYmIHRoaXMuY3VycmVudFNlc3Npb25RdWVzdGlvbklkICYmIHNlbGVjdGVkT3B0aW9uSWQpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBzdWJtaXRBbnN3ZXIgfSA9IGF3YWl0IGltcG9ydCgnLi4vLi4vc2VydmljZXMvYXBpJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgc3VibWl0QW5zd2VyKHRoaXMuc2Vzc2lvbklkLCB0aGlzLmN1cnJlbnRTZXNzaW9uUXVlc3Rpb25JZCwgc2VsZWN0ZWRPcHRpb25JZCk7XG4gICAgICAgICAgICAgICAgaXNDb3JyZWN0ID0gcmVzLmRhdGEuaXNfY29ycmVjdDtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignc3VibWl0QW5zd2VyIGZhaWxlZCwgZmFsbGJhY2sgdG8gbG9jYWwgY2hlY2snLCBlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNDb3JyZWN0KSB7XG4gICAgICAgICAgICB0aGlzLnNldExlYWRDYXJTdGF0ZSgnY29ycmVjdCcpO1xuICAgICAgICAgICAgdGhpcy5xdWl6UGFuZWwuc2V0RmVlZGJhY2soJ2NvcnJlY3QnKTtcbiAgICAgICAgICAgIHRoaXMucXVpelBhbmVsLnNldE9wdGlvblN0YXRlKHNlbGVjdGVkSW5kZXgsICdjb3JyZWN0Jyk7XG4gICAgICAgICAgICB0aGlzLnF1aXpQYW5lbC5zZXRJbnRlcmFjdGl2ZShmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLnRpbWUuZGVsYXllZENhbGwoNTAwLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZVF1aXooKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGx5Q29ycmVjdCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNldExlYWRDYXJTdGF0ZSgnaW5jb3JyZWN0Jyk7XG4gICAgICAgICAgICB0aGlzLnF1aXpQYW5lbC5zZXRGZWVkYmFjaygnd3JvbmcnKTtcbiAgICAgICAgICAgIHRoaXMucXVpelBhbmVsLnNldE9wdGlvblN0YXRlKHNlbGVjdGVkSW5kZXgsICd3cm9uZycpO1xuICAgICAgICAgICAgdGhpcy5xdWl6UGFuZWwuc2V0SW50ZXJhY3RpdmUoZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy50aW1lLmRlbGF5ZWRDYWxsKDY1MCwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlXcm9uZygpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0TGVhZENhclN0YXRlKCdpZGxlJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5xdWl6UGFuZWwuc2V0T3B0aW9uU3RhdGUoc2VsZWN0ZWRJbmRleCwgJ25vcm1hbCcpO1xuICAgICAgICAgICAgICAgIHRoaXMucXVpelBhbmVsLnNldEZlZWRiYWNrKCdpZGxlJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5xdWl6UGFuZWwuc2V0SW50ZXJhY3RpdmUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5xdWl6TG9ja2VkID0gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXBwbHlDb3JyZWN0ICgpXG4gICAge1xuICAgICAgICB0aGlzLmN1cnJlbnRJbmRleCA9IE1hdGgubWluKHRoaXMubWF4Q2FycywgdGhpcy5jdXJyZW50SW5kZXggKyAxKTtcbiAgICAgICAgdGhpcy5zY29yZSA9IHRoaXMuY3VycmVudEluZGV4O1xuICAgICAgICB0aGlzLnJlZnJlc2hMb2NrcygpO1xuXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRJbmRleCA+PSB0aGlzLm1heENhcnMpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0QmFycmllck9wZW4odHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLm1vdmVUcmFpblRvRW5kKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmVuZEdhbWUoYFlvdSBjb21wbGV0ZWQgYWxsICR7dGhpcy5tYXhDYXJzfSBjYXJzIWAsICd3aW4nKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5tb3ZlVHJhaW5Ub0luZGV4KHRoaXMuY3VycmVudEluZGV4LCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9wZW5RdWVzdGlvbih0aGlzLmN1cnJlbnRJbmRleCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXBwbHlXcm9uZyAoKVxuICAgIHtcbiAgICAgICAgdGhpcy5yZWZyZXNoTG9ja3MoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG1vdmVUcmFpblRvSW5kZXggKHRhcmdldEluZGV4OiBudW1iZXIsIG9uQ29tcGxldGU/OiAoKSA9PiB2b2lkKVxuICAgIHtcbiAgICAgICAgaWYgKHRoaXMucmFpbFRvdGFsTGVuZ3RoIDw9IDAgfHwgdGhpcy50cmFpblN0ZXBQeCA8PSAwKSB7XG4gICAgICAgICAgICBpZiAob25Db21wbGV0ZSkgb25Db21wbGV0ZSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdmlzdWFsSW5kZXggPSBQaGFzZXIuTWF0aC5DbGFtcCh0YXJnZXRJbmRleCwgMCwgdGhpcy5tYXhDYXJzKTtcbiAgICAgICAgY29uc3QgbWF4RGlzdGFuY2UgPSBNYXRoLm1heCgwLCB0aGlzLnJhaWxUb3RhbExlbmd0aCAtIDEpO1xuICAgICAgICBjb25zdCB0YXJnZXREaXN0YW5jZSA9IE1hdGgubWluKHRoaXMudHJhaW5TdGVwUHggKiB2aXN1YWxJbmRleCwgbWF4RGlzdGFuY2UpO1xuICAgICAgICBjb25zdCBkZWx0YSA9IE1hdGguYWJzKHRhcmdldERpc3RhbmNlIC0gdGhpcy50cmFpbkRpc3RhbmNlUHgpO1xuICAgICAgICBjb25zdCBkdXJhdGlvbiA9IFBoYXNlci5NYXRoLkNsYW1wKE1hdGgucm91bmQoNDIwICsgZGVsdGEgKiAxLjgpLCA2NTAsIDEyMDApO1xuXG4gICAgICAgIHRoaXMudHJhaW5Nb3ZpbmcgPSB0cnVlO1xuICAgICAgICBjb25zdCB0d2VlblN0YXRlID0geyB2YWx1ZTogdGhpcy50cmFpbkRpc3RhbmNlUHggfTtcbiAgICAgICAgdGhpcy50d2VlbnMuYWRkKHtcbiAgICAgICAgICAgIHRhcmdldHM6IHR3ZWVuU3RhdGUsXG4gICAgICAgICAgICB2YWx1ZTogdGFyZ2V0RGlzdGFuY2UsXG4gICAgICAgICAgICBkdXJhdGlvbixcbiAgICAgICAgICAgIGVhc2U6ICdTaW5lLmVhc2VJbk91dCcsXG4gICAgICAgICAgICBvblVwZGF0ZTogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudHJhaW5EaXN0YW5jZVB4ID0gdHdlZW5TdGF0ZS52YWx1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVRyYWluQ2Fycyh0cnVlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbkNvbXBsZXRlOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy50cmFpbkRpc3RhbmNlUHggPSB0YXJnZXREaXN0YW5jZTtcbiAgICAgICAgICAgICAgICB0aGlzLnRyYWluTW92aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUcmFpbkNhcnModHJ1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKG9uQ29tcGxldGUpIG9uQ29tcGxldGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBtb3ZlVHJhaW5Ub0VuZCAob25Db21wbGV0ZT86ICgpID0+IHZvaWQpXG4gICAge1xuICAgICAgICBpZiAodGhpcy5yYWlsVG90YWxMZW5ndGggPD0gMCkge1xuICAgICAgICAgICAgaWYgKG9uQ29tcGxldGUpIG9uQ29tcGxldGUoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG1heERpc3RhbmNlID0gTWF0aC5tYXgoMCwgdGhpcy5yYWlsVG90YWxMZW5ndGggLSAxKTtcbiAgICAgICAgY29uc3QgdHJhaW5MZW5ndGggPSBNYXRoLm1heCgwLCAodGhpcy5tYXhDYXJzIC0gMSkgKiB0aGlzLnRyYWluR2FwUHgpO1xuICAgICAgICBjb25zdCB0YXJnZXREaXN0YW5jZSA9IG1heERpc3RhbmNlICsgdHJhaW5MZW5ndGg7XG4gICAgICAgIGNvbnN0IGRlbHRhID0gTWF0aC5hYnModGFyZ2V0RGlzdGFuY2UgLSB0aGlzLnRyYWluRGlzdGFuY2VQeCk7XG4gICAgICAgIGNvbnN0IGR1cmF0aW9uID0gUGhhc2VyLk1hdGguQ2xhbXAoTWF0aC5yb3VuZCg1MjAgKyBkZWx0YSAqIDEuNiksIDgwMCwgMTgwMCk7XG5cbiAgICAgICAgdGhpcy50cmFpbk1vdmluZyA9IHRydWU7XG4gICAgICAgIGNvbnN0IHR3ZWVuU3RhdGUgPSB7IHZhbHVlOiB0aGlzLnRyYWluRGlzdGFuY2VQeCB9O1xuICAgICAgICB0aGlzLnR3ZWVucy5hZGQoe1xuICAgICAgICAgICAgdGFyZ2V0czogdHdlZW5TdGF0ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0YXJnZXREaXN0YW5jZSxcbiAgICAgICAgICAgIGR1cmF0aW9uLFxuICAgICAgICAgICAgZWFzZTogJ1NpbmUuZWFzZUluT3V0JyxcbiAgICAgICAgICAgIG9uVXBkYXRlOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy50cmFpbkRpc3RhbmNlUHggPSB0d2VlblN0YXRlLnZhbHVlO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVHJhaW5DYXJzKHRydWUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uQ29tcGxldGU6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnRyYWluRGlzdGFuY2VQeCA9IHRhcmdldERpc3RhbmNlO1xuICAgICAgICAgICAgICAgIHRoaXMudHJhaW5Nb3ZpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVRyYWluQ2Fycyh0cnVlKTtcbiAgICAgICAgICAgICAgICBpZiAob25Db21wbGV0ZSkgb25Db21wbGV0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNsb3NlUXVpeiAoKVxuICAgIHtcbiAgICAgICAgdGhpcy5xdWl6TW9kYWwuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgIHRoaXMucXVpek9wZW4gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5xdWl6TG9ja2VkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRRdWVzdGlvbkZvckluZGV4IChpbmRleDogbnVtYmVyKVxuICAgIHtcbiAgICAgICAgaWYgKHRoaXMucXVlc3Rpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIEZBTExCQUNLX1FVRVNUSU9OU1swXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5xdWVzdGlvbnNbaW5kZXggJSB0aGlzLnF1ZXN0aW9ucy5sZW5ndGhdO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlVHJhY2tDdXJ2ZSAod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpXG4gICAge1xuICAgICAgICBjb25zdCBiYXNlV2lkdGggPSA3NTA7XG4gICAgICAgIGNvbnN0IGJhc2VIZWlnaHQgPSAxMzM0O1xuICAgICAgICBjb25zdCBzY2FsZVggPSB3aWR0aCAvIGJhc2VXaWR0aDtcbiAgICAgICAgY29uc3Qgc2NhbGVZID0gaGVpZ2h0IC8gYmFzZUhlaWdodDtcblxuICAgICAgICBjb25zdCBwb2ludHMgPSBbXG4gICAgICAgICAgICB7IHg6IDQwNSwgeTogMTAgfSxcbiAgICAgICAgICAgIHsgeDogNDU1LCB5OiA4NSB9LFxuICAgICAgICAgICAgeyB4OiA1MTUsIHk6IDIwMCB9LFxuICAgICAgICAgICAgeyB4OiA0ODUsIHk6IDM2MCB9LFxuICAgICAgICAgICAgeyB4OiAzNzUsIHk6IDU0MCB9LFxuICAgICAgICAgICAgeyB4OiAyNTAsIHk6IDc0MCB9LFxuICAgICAgICAgICAgeyB4OiAyMjAsIHk6IDkyMCB9LFxuICAgICAgICAgICAgeyB4OiAyNzAsIHk6IDExMDAgfSxcbiAgICAgICAgICAgIHsgeDogMzI1LCB5OiAxMTg1IH0sXG4gICAgICAgICAgICB7IHg6IDUwNSwgeTogMTMyNSB9XG4gICAgICAgIF0ubWFwKChwKSA9PiBuZXcgUGhhc2VyLk1hdGguVmVjdG9yMihwLnggKiBzY2FsZVgsIHAueSAqIHNjYWxlWSkpO1xuXG4gICAgICAgIHJldHVybiBuZXcgUGhhc2VyLkN1cnZlcy5TcGxpbmUocG9pbnRzKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNhbXBsZVRyYWNrIChjdXJ2ZTogUGhhc2VyLkN1cnZlcy5TcGxpbmUsIGNvdW50OiBudW1iZXIpXG4gICAge1xuICAgICAgICBjb25zdCBwb2ludHM6IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfVtdID0gW107XG4gICAgICAgIGNvbnN0IHRvdGFsID0gTWF0aC5tYXgoMSwgY291bnQgLSAxKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSArPSAxKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gdG90YWwgPT09IDAgPyAwIDogaSAvIHRvdGFsO1xuICAgICAgICAgICAgY29uc3QgcCA9IGN1cnZlLmdldFBvaW50QXQodCk7XG4gICAgICAgICAgICBwb2ludHMucHVzaCh7IHg6IHAueCwgeTogcC55IH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwb2ludHM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBkcmF3VHJhY2tDdXJ2ZSAoY3VydmU6IFBoYXNlci5DdXJ2ZXMuU3BsaW5lKVxuICAgIHtcbiAgICAgICAgY29uc3QgeyBzdGFydFQsIGVuZFQgfSA9IHRoaXMuZ2V0VmlzaWJsZVRSYW5nZShjdXJ2ZSk7XG4gICAgICAgIGNvbnN0IGdyYXBoaWNzID0gdGhpcy5hZGQuZ3JhcGhpY3MoKTtcbiAgICAgICAgZ3JhcGhpY3Muc2V0RGVwdGgoMTAwMCk7XG4gICAgICAgIGdyYXBoaWNzLmxpbmVTdHlsZSgxMCwgMHhmZjAwMDAsIDEpO1xuICAgICAgICBjb25zdCBzdGVwcyA9IDEyMDtcbiAgICAgICAgY29uc3QgZmlyc3QgPSBjdXJ2ZS5nZXRQb2ludChzdGFydFQpO1xuICAgICAgICBncmFwaGljcy5iZWdpblBhdGgoKTtcbiAgICAgICAgZ3JhcGhpY3MubW92ZVRvKGZpcnN0LngsIGZpcnN0LnkpO1xuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBzdGVwczsgaSArPSAxKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gc3RhcnRUICsgKGVuZFQgLSBzdGFydFQpICogKGkgLyBzdGVwcyk7XG4gICAgICAgICAgICBjb25zdCBwID0gY3VydmUuZ2V0UG9pbnQodCk7XG4gICAgICAgICAgICBncmFwaGljcy5saW5lVG8ocC54LCBwLnkpO1xuICAgICAgICB9XG4gICAgICAgIGdyYXBoaWNzLnN0cm9rZVBhdGgoKTtcbiAgICAgICAgdGhpcy5kZWJ1Z0N1cnZlR3JhcGhpY3MgPSBncmFwaGljcztcbiAgICB9XG5cbiAgICBwcml2YXRlIGRyYXdDdXJ2ZU1hcmtlcnMgKGN1cnZlOiBQaGFzZXIuQ3VydmVzLlNwbGluZSwgY291bnQ6IG51bWJlcilcbiAgICB7XG4gICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gdGhpcy5zY2FsZTtcbiAgICAgICAgY29uc3QgeyBzdGFydFQsIGVuZFQgfSA9IHRoaXMuZ2V0VmlzaWJsZVRSYW5nZShjdXJ2ZSk7XG4gICAgICAgIGNvbnN0IGdyYXBoaWNzID0gdGhpcy5hZGQuZ3JhcGhpY3MoKTtcbiAgICAgICAgZ3JhcGhpY3Muc2V0RGVwdGgoMTAwMSk7XG4gICAgICAgIGdyYXBoaWNzLmZpbGxTdHlsZSgweDIyYzU1ZSwgMSk7XG4gICAgICAgIGdyYXBoaWNzLmxpbmVTdHlsZSgyLCAweDIyYzU1ZSwgMSk7XG5cbiAgICAgICAgY29uc3QgdG90YWwgPSBNYXRoLm1heCgxLCBjb3VudCAtIDEpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyBpICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0b3RhbCA9PT0gMCA/IHN0YXJ0VCA6IHN0YXJ0VCArIChlbmRUIC0gc3RhcnRUKSAqIChpIC8gdG90YWwpO1xuICAgICAgICAgICAgY29uc3QgcG9pbnQgPSBjdXJ2ZS5nZXRQb2ludCh0KTtcbiAgICAgICAgICAgIGNvbnN0IGNsYW1wZWRYID0gUGhhc2VyLk1hdGguQ2xhbXAocG9pbnQueCwgMTYsIHdpZHRoIC0gMTYpO1xuICAgICAgICAgICAgY29uc3QgY2xhbXBlZFkgPSBQaGFzZXIuTWF0aC5DbGFtcChwb2ludC55LCAxNiwgaGVpZ2h0IC0gMTYpO1xuICAgICAgICAgICAgaWYgKGNsYW1wZWRYICE9PSBwb2ludC54IHx8IGNsYW1wZWRZICE9PSBwb2ludC55KSB7XG4gICAgICAgICAgICAgICAgZ3JhcGhpY3Muc3Ryb2tlTGluZVNoYXBlKG5ldyBQaGFzZXIuR2VvbS5MaW5lKHBvaW50LngsIHBvaW50LnksIGNsYW1wZWRYLCBjbGFtcGVkWSkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBncmFwaGljcy5maWxsQ2lyY2xlKGNsYW1wZWRYLCBjbGFtcGVkWSwgOCk7XG4gICAgICAgICAgICBjb25zdCBsYWJlbFRleHQgPSBgJHtpICsgMX0gKCR7TWF0aC5yb3VuZChwb2ludC54KX0sICR7TWF0aC5yb3VuZChwb2ludC55KX0pYDtcbiAgICAgICAgICAgIGNvbnN0IGxhYmVsID0gdGhpcy5hZGQudGV4dChjbGFtcGVkWCArIDEwLCBjbGFtcGVkWSAtIDEwLCBsYWJlbFRleHQsIHtcbiAgICAgICAgICAgICAgICBmb250RmFtaWx5OiAnQXJpYWwgQmxhY2snLFxuICAgICAgICAgICAgICAgIGZvbnRTaXplOiAnMThweCcsXG4gICAgICAgICAgICAgICAgY29sb3I6ICcjMjJjNTVlJyxcbiAgICAgICAgICAgICAgICBzdHJva2U6ICcjMGYxNzJhJyxcbiAgICAgICAgICAgICAgICBzdHJva2VUaGlja25lc3M6IDNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbGFiZWwuc2V0RGVwdGgoMTAwMik7XG4gICAgICAgICAgICB0aGlzLmRlYnVnTWFya2VyTGFiZWxzLnB1c2gobGFiZWwpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGVidWdNYXJrZXJHcmFwaGljcyA9IGdyYXBoaWNzO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0VmlzaWJsZVRSYW5nZSAoY3VydmU6IFBoYXNlci5DdXJ2ZXMuU3BsaW5lKVxuICAgIHtcbiAgICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSB0aGlzLnNjYWxlO1xuICAgICAgICBjb25zdCBtYXJnaW4gPSA4O1xuICAgICAgICBjb25zdCBzYW1wbGVzID0gNDAwO1xuICAgICAgICBsZXQgc3RhcnRUID0gMDtcbiAgICAgICAgbGV0IGVuZFQgPSAxO1xuICAgICAgICBsZXQgZm91bmRTdGFydCA9IGZhbHNlO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IHNhbXBsZXM7IGkgKz0gMSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IGkgLyBzYW1wbGVzO1xuICAgICAgICAgICAgY29uc3QgcCA9IGN1cnZlLmdldFBvaW50KHQpO1xuICAgICAgICAgICAgY29uc3QgaW5zaWRlID0gcC54ID49IG1hcmdpbiAmJiBwLnggPD0gd2lkdGggLSBtYXJnaW4gJiYgcC55ID49IG1hcmdpbiAmJiBwLnkgPD0gaGVpZ2h0IC0gbWFyZ2luO1xuICAgICAgICAgICAgaWYgKGluc2lkZSAmJiAhZm91bmRTdGFydCkge1xuICAgICAgICAgICAgICAgIHN0YXJ0VCA9IHQ7XG4gICAgICAgICAgICAgICAgZm91bmRTdGFydCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaW5zaWRlKSB7XG4gICAgICAgICAgICAgICAgZW5kVCA9IHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdGFydEV4dGVuZCA9IDAuMDtcbiAgICAgICAgY29uc3QgZW5kRXh0ZW5kID0gMC4wO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RhcnRUOiBNYXRoLm1heCgwLCBzdGFydFQgLSBzdGFydEV4dGVuZCksXG4gICAgICAgICAgICBlbmRUOiBNYXRoLm1pbigxLCBlbmRUICsgZW5kRXh0ZW5kKVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0VHJhY2tBbmdsZSAocG9pbnRzOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH1bXSwgaW5kZXg6IG51bWJlcilcbiAgICB7XG4gICAgICAgIGNvbnN0IGN1cnIgPSBwb2ludHNbaW5kZXhdO1xuICAgICAgICBjb25zdCBuZXh0ID0gcG9pbnRzW2luZGV4ICsgMV0gPz8gcG9pbnRzW2luZGV4IC0gMV0gPz8gY3VycjtcbiAgICAgICAgY29uc3QgYW5nbGUgPSBNYXRoLmF0YW4yKG5leHQueSAtIGN1cnIueSwgbmV4dC54IC0gY3Vyci54KTtcbiAgICAgICAgcmV0dXJuIGFuZ2xlO1xuICAgIH1cblxuICAgIHByaXZhdGUgYnVpbGRSYWlsUGF0aCAoc3BsaW5lOiBQaGFzZXIuQ3VydmVzLlNwbGluZSlcbiAgICB7XG4gICAgICAgIGNvbnN0IGxlbmd0aCA9IHNwbGluZS5nZXRMZW5ndGgoKTtcbiAgICAgICAgY29uc3Qgc2FtcGxlRXZlcnlQeCA9IDIwO1xuICAgICAgICBjb25zdCBzYW1wbGVzID0gTWF0aC5tYXgoNjAsIE1hdGgucm91bmQobGVuZ3RoIC8gc2FtcGxlRXZlcnlQeCkpO1xuICAgICAgICBjb25zdCBwb2ludHM6IFBoYXNlci5NYXRoLlZlY3RvcjJbXSA9IFtdO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IHNhbXBsZXM7IGkgKz0gMSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IGkgLyBzYW1wbGVzO1xuICAgICAgICAgICAgY29uc3QgcCA9IHNwbGluZS5nZXRQb2ludEF0KHQpO1xuICAgICAgICAgICAgcG9pbnRzLnB1c2gobmV3IFBoYXNlci5NYXRoLlZlY3RvcjIocC54LCBwLnkpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwb2ludHMubGVuZ3RoIDwgMikge1xuICAgICAgICAgICAgdGhpcy5yYWlsUGF0aFBvaW50cyA9IHBvaW50cztcbiAgICAgICAgICAgIHRoaXMucmFpbFNlZ21lbnRMZW5ndGhzID0gW107XG4gICAgICAgICAgICB0aGlzLnJhaWxUb3RhbExlbmd0aCA9IDA7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzZWdtZW50czogbnVtYmVyW10gPSBbXTtcbiAgICAgICAgbGV0IHRvdGFsID0gMDtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvaW50cy5sZW5ndGggLSAxOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnIgPSBwb2ludHNbaV07XG4gICAgICAgICAgICBjb25zdCBuZXh0ID0gcG9pbnRzW2kgKyAxXTtcbiAgICAgICAgICAgIGNvbnN0IHNlZ0xlbiA9IFBoYXNlci5NYXRoLkRpc3RhbmNlLkJldHdlZW4oY3Vyci54LCBjdXJyLnksIG5leHQueCwgbmV4dC55KTtcbiAgICAgICAgICAgIHNlZ21lbnRzLnB1c2goc2VnTGVuKTtcbiAgICAgICAgICAgIHRvdGFsICs9IHNlZ0xlbjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucmFpbFBhdGhQb2ludHMgPSBwb2ludHM7XG4gICAgICAgIHRoaXMucmFpbFNlZ21lbnRMZW5ndGhzID0gc2VnbWVudHM7XG4gICAgICAgIHRoaXMucmFpbFRvdGFsTGVuZ3RoID0gdG90YWw7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzYW1wbGVSYWlsQnlEaXN0YW5jZU5vV3JhcCAoZGlzdGFuY2VQeDogbnVtYmVyKVxuICAgIHtcbiAgICAgICAgaWYgKHRoaXMucmFpbFBhdGhQb2ludHMubGVuZ3RoIDwgMiB8fCB0aGlzLnJhaWxUb3RhbExlbmd0aCA8PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBuZXcgUGhhc2VyLk1hdGguVmVjdG9yMigwLCAwKSxcbiAgICAgICAgICAgICAgICBhbmdsZTogMFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHRvdGFsID0gdGhpcy5yYWlsVG90YWxMZW5ndGg7XG4gICAgICAgIGlmIChkaXN0YW5jZVB4IDw9IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5yYWlsUGF0aFBvaW50c1swXTtcbiAgICAgICAgICAgIGNvbnN0IG5leHQgPSB0aGlzLnJhaWxQYXRoUG9pbnRzWzFdO1xuICAgICAgICAgICAgY29uc3QgYW5nbGUgPSBNYXRoLmF0YW4yKG5leHQueSAtIHN0YXJ0LnksIG5leHQueCAtIHN0YXJ0LngpO1xuICAgICAgICAgICAgY29uc3QgZGlyID0gbmV3IFBoYXNlci5NYXRoLlZlY3RvcjIoTWF0aC5jb3MoYW5nbGUpLCBNYXRoLnNpbihhbmdsZSkpO1xuICAgICAgICAgICAgY29uc3QgcG9zID0gbmV3IFBoYXNlci5NYXRoLlZlY3RvcjIoc3RhcnQueCwgc3RhcnQueSkuYWRkKGRpci5zY2FsZShkaXN0YW5jZVB4KSk7XG4gICAgICAgICAgICByZXR1cm4geyBwb3NpdGlvbjogcG9zLCBhbmdsZSB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChkaXN0YW5jZVB4ID49IHRvdGFsKSB7XG4gICAgICAgICAgICBjb25zdCBlbmQgPSB0aGlzLnJhaWxQYXRoUG9pbnRzW3RoaXMucmFpbFBhdGhQb2ludHMubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICBjb25zdCBwcmV2ID0gdGhpcy5yYWlsUGF0aFBvaW50c1t0aGlzLnJhaWxQYXRoUG9pbnRzLmxlbmd0aCAtIDJdO1xuICAgICAgICAgICAgY29uc3QgYW5nbGUgPSBNYXRoLmF0YW4yKGVuZC55IC0gcHJldi55LCBlbmQueCAtIHByZXYueCk7XG4gICAgICAgICAgICBjb25zdCBkaXIgPSBuZXcgUGhhc2VyLk1hdGguVmVjdG9yMihNYXRoLmNvcyhhbmdsZSksIE1hdGguc2luKGFuZ2xlKSk7XG4gICAgICAgICAgICBjb25zdCBwb3MgPSBuZXcgUGhhc2VyLk1hdGguVmVjdG9yMihlbmQueCwgZW5kLnkpLmFkZChkaXIuc2NhbGUoZGlzdGFuY2VQeCAtIHRvdGFsKSk7XG4gICAgICAgICAgICByZXR1cm4geyBwb3NpdGlvbjogcG9zLCBhbmdsZSB9O1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlbWFpbmluZyA9IGRpc3RhbmNlUHg7XG4gICAgICAgIGxldCBzZWdJbmRleCA9IDA7XG5cbiAgICAgICAgd2hpbGUgKHNlZ0luZGV4IDwgdGhpcy5yYWlsU2VnbWVudExlbmd0aHMubGVuZ3RoICYmIHJlbWFpbmluZyA+IHRoaXMucmFpbFNlZ21lbnRMZW5ndGhzW3NlZ0luZGV4XSkge1xuICAgICAgICAgICAgcmVtYWluaW5nIC09IHRoaXMucmFpbFNlZ21lbnRMZW5ndGhzW3NlZ0luZGV4XTtcbiAgICAgICAgICAgIHNlZ0luZGV4ICs9IDE7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzYWZlSW5kZXggPSBNYXRoLm1pbihzZWdJbmRleCwgdGhpcy5yYWlsUGF0aFBvaW50cy5sZW5ndGggLSAyKTtcbiAgICAgICAgY29uc3QgY3VyciA9IHRoaXMucmFpbFBhdGhQb2ludHNbc2FmZUluZGV4XTtcbiAgICAgICAgY29uc3QgbmV4dCA9IHRoaXMucmFpbFBhdGhQb2ludHNbc2FmZUluZGV4ICsgMV07XG4gICAgICAgIGNvbnN0IHNlZ0xlbiA9IHRoaXMucmFpbFNlZ21lbnRMZW5ndGhzW3NhZmVJbmRleF0gfHwgMTtcbiAgICAgICAgY29uc3QgcmF0aW8gPSBQaGFzZXIuTWF0aC5DbGFtcChyZW1haW5pbmcgLyBzZWdMZW4sIDAsIDEpO1xuXG4gICAgICAgIGNvbnN0IHggPSBQaGFzZXIuTWF0aC5MaW5lYXIoY3Vyci54LCBuZXh0LngsIHJhdGlvKTtcbiAgICAgICAgY29uc3QgeSA9IFBoYXNlci5NYXRoLkxpbmVhcihjdXJyLnksIG5leHQueSwgcmF0aW8pO1xuICAgICAgICBjb25zdCBhbmdsZSA9IE1hdGguYXRhbjIobmV4dC55IC0gY3Vyci55LCBuZXh0LnggLSBjdXJyLngpO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBwb3NpdGlvbjogbmV3IFBoYXNlci5NYXRoLlZlY3RvcjIoeCwgeSksXG4gICAgICAgICAgICBhbmdsZVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlUmFpbHdheSAoKVxuICAgIHtcbiAgICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSB0aGlzLnNjYWxlO1xuICAgICAgICBjb25zdCBzcGxpbmUgPSB0aGlzLmNyZWF0ZVRyYWNrQ3VydmUod2lkdGgsIGhlaWdodCk7XG4gICAgICAgIHRoaXMudHJhY2tTcGxpbmUgPSBzcGxpbmU7XG4gICAgICAgIHRoaXMudHJhY2tMZW5ndGggPSBzcGxpbmUuZ2V0TGVuZ3RoKCk7XG4gICAgICAgIHRoaXMuYnVpbGRSYWlsUGF0aChzcGxpbmUpO1xuXG4gICAgICAgIGNvbnN0IGJhc2VTY2FsZSA9IE1hdGgubWluKHdpZHRoIC8gNzUwLCBoZWlnaHQgLyAxMzM0KTtcbiAgICAgICAgY29uc3QgcmFpbE9mZnNldCA9IDE4ICogYmFzZVNjYWxlO1xuICAgICAgICBjb25zdCBzbGVlcGVyV2lkdGggPSByYWlsT2Zmc2V0ICogMS44O1xuICAgICAgICBjb25zdCBzbGVlcGVySGVpZ2h0ID0gNyAqIGJhc2VTY2FsZTtcblxuICAgICAgICBjb25zdCByYWlsd2F5Q29udGFpbmVyID0gdGhpcy5hZGQuY29udGFpbmVyKDAsIDApO1xuICAgICAgICB0aGlzLnJhaWx3YXlDb250YWluZXIgPSByYWlsd2F5Q29udGFpbmVyO1xuXG4gICAgICAgIGNvbnN0IHJhaWxMZWZ0OiBQaGFzZXIuTWF0aC5WZWN0b3IyW10gPSBbXTtcbiAgICAgICAgY29uc3QgcmFpbFJpZ2h0OiBQaGFzZXIuTWF0aC5WZWN0b3IyW10gPSBbXTtcblxuICAgICAgICBjb25zdCBzYW1wbGVzID0gMTQwO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBzYW1wbGVzOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBpIC8gc2FtcGxlcztcbiAgICAgICAgICAgIGNvbnN0IHBvaW50ID0gc3BsaW5lLmdldFBvaW50KHQpO1xuICAgICAgICAgICAgY29uc3QgdGFuZ2VudCA9IHNwbGluZS5nZXRUYW5nZW50KHQpLm5vcm1hbGl6ZSgpO1xuICAgICAgICAgICAgY29uc3Qgbm9ybWFsID0gbmV3IFBoYXNlci5NYXRoLlZlY3RvcjIoLXRhbmdlbnQueSwgdGFuZ2VudC54KS5ub3JtYWxpemUoKTtcbiAgICAgICAgICAgIHJhaWxMZWZ0LnB1c2gobmV3IFBoYXNlci5NYXRoLlZlY3RvcjIoXG4gICAgICAgICAgICAgICAgcG9pbnQueCArIG5vcm1hbC54ICogcmFpbE9mZnNldCxcbiAgICAgICAgICAgICAgICBwb2ludC55ICsgbm9ybWFsLnkgKiByYWlsT2Zmc2V0XG4gICAgICAgICAgICApKTtcbiAgICAgICAgICAgIHJhaWxSaWdodC5wdXNoKG5ldyBQaGFzZXIuTWF0aC5WZWN0b3IyKFxuICAgICAgICAgICAgICAgIHBvaW50LnggLSBub3JtYWwueCAqIHJhaWxPZmZzZXQsXG4gICAgICAgICAgICAgICAgcG9pbnQueSAtIG5vcm1hbC55ICogcmFpbE9mZnNldFxuICAgICAgICAgICAgKSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByYWlscyA9IHRoaXMuYWRkLmdyYXBoaWNzKCk7XG4gICAgICAgIHJhaWxzLmxpbmVTdHlsZSg4ICogYmFzZVNjYWxlLCAweGY4ZmFmYywgMSk7XG4gICAgICAgIHJhaWxzLmJlZ2luUGF0aCgpO1xuICAgICAgICByYWlscy5tb3ZlVG8ocmFpbExlZnRbMF0ueCwgcmFpbExlZnRbMF0ueSk7XG4gICAgICAgIHJhaWxMZWZ0LmZvckVhY2goKHApID0+IHJhaWxzLmxpbmVUbyhwLngsIHAueSkpO1xuICAgICAgICByYWlscy5zdHJva2VQYXRoKCk7XG5cbiAgICAgICAgcmFpbHMuYmVnaW5QYXRoKCk7XG4gICAgICAgIHJhaWxzLm1vdmVUbyhyYWlsUmlnaHRbMF0ueCwgcmFpbFJpZ2h0WzBdLnkpO1xuICAgICAgICByYWlsUmlnaHQuZm9yRWFjaCgocCkgPT4gcmFpbHMubGluZVRvKHAueCwgcC55KSk7XG4gICAgICAgIHJhaWxzLnN0cm9rZVBhdGgoKTtcbiAgICAgICAgcmFpbHMuc2V0RGVwdGgoNSk7XG4gICAgICAgIHJhaWx3YXlDb250YWluZXIuYWRkKHJhaWxzKTtcblxuICAgICAgICBjb25zdCBzbGVlcGVyQ291bnQgPSAyODtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gc2xlZXBlckNvdW50OyBpICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBpIC8gc2xlZXBlckNvdW50O1xuICAgICAgICAgICAgY29uc3QgcG9pbnQgPSBzcGxpbmUuZ2V0UG9pbnQodCk7XG4gICAgICAgICAgICBjb25zdCB0YW5nZW50ID0gc3BsaW5lLmdldFRhbmdlbnQodCkubm9ybWFsaXplKCk7XG4gICAgICAgICAgICBjb25zdCBhbmdsZSA9IE1hdGguYXRhbjIodGFuZ2VudC55LCB0YW5nZW50LngpICsgTWF0aC5QSSAvIDI7XG4gICAgICAgICAgICBjb25zdCBzbGVlcGVyID0gdGhpcy5hZGQucmVjdGFuZ2xlKHBvaW50LngsIHBvaW50LnksIHNsZWVwZXJXaWR0aCwgc2xlZXBlckhlaWdodCwgMHhiNDUzMDksIDAuOTUpO1xuICAgICAgICAgICAgc2xlZXBlci5zZXRSb3RhdGlvbihhbmdsZSk7XG4gICAgICAgICAgICBzbGVlcGVyLnNldERlcHRoKDQpO1xuICAgICAgICAgICAgcmFpbHdheUNvbnRhaW5lci5hZGQoc2xlZXBlcik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5kZWJ1Z1RyYWNrKSB7XG4gICAgICAgICAgICB0aGlzLmRyYXdUcmFja0N1cnZlKHNwbGluZSk7XG4gICAgICAgICAgICB0aGlzLmRyYXdDdXJ2ZU1hcmtlcnMoc3BsaW5lLCAxMSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNldFJhaWx3YXlWaXNpYmxlKHRoaXMuc2hvd1JhaWxPdmVybGF5KTtcbiAgICAgICAgdGhpcy5zZXREZWJ1Z1RyYWNrVmlzaWJsZSh0aGlzLmRlYnVnVHJhY2spO1xuXG4gICAgICAgIHRoaXMudHJhaW5EaXN0YW5jZVB4ID0gMDtcbiAgICAgICAgaWYgKHRoaXMudHJhaW5TdGVwUHggPD0gMCkge1xuICAgICAgICAgICAgdGhpcy50cmFpblN0ZXBQeCA9IHRoaXMucmFpbFRvdGFsTGVuZ3RoID4gMSA/ICh0aGlzLnJhaWxUb3RhbExlbmd0aCAtIDEpIC8gdGhpcy5tYXhDYXJzIDogMDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlZnJlc2hMb2NrcygpO1xuICAgICAgICB0aGlzLnVwZGF0ZVRyYWluQ2Fycyh0cnVlKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZUJhcnJpZXJHYXRlICgpXG4gICAge1xuICAgICAgICBpZiAoIXRoaXMudGV4dHVyZXMuZXhpc3RzKCd0cmFpbi1iYXJyaWVyJykpIHJldHVybjtcbiAgICAgICAgY29uc3QgZ2F0ZSA9IHRoaXMuYWRkLmltYWdlKDAsIDAsICd0cmFpbi1iYXJyaWVyJyk7XG4gICAgICAgIGdhdGUuc2V0RGVwdGgoNik7XG4gICAgICAgIGdhdGUuc2V0T3JpZ2luKDAuMDgsIDAuNSk7XG4gICAgICAgIHRoaXMuYmFycmllckdhdGUgPSBnYXRlO1xuICAgICAgICB0aGlzLnVwZGF0ZUJhcnJpZXJQb3NpdGlvbigpO1xuICAgICAgICB0aGlzLnNldEJhcnJpZXJPcGVuKGZhbHNlLCB0cnVlKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHVwZGF0ZUJhcnJpZXJQb3NpdGlvbiAoKVxuICAgIHtcbiAgICAgICAgaWYgKCF0aGlzLmJhcnJpZXJHYXRlKSByZXR1cm47XG4gICAgICAgIGNvbnN0IGJhc2VXaWR0aCA9IDc1MDtcbiAgICAgICAgY29uc3QgYmFzZUhlaWdodCA9IDEzMzQ7XG4gICAgICAgIGNvbnN0IHNjYWxlWCA9IHRoaXMuc2NhbGUud2lkdGggLyBiYXNlV2lkdGg7XG4gICAgICAgIGNvbnN0IHNjYWxlWSA9IHRoaXMuc2NhbGUuaGVpZ2h0IC8gYmFzZUhlaWdodDtcbiAgICAgICAgY29uc3QgYmFzZVggPSAzNTU7XG4gICAgICAgIGNvbnN0IGJhc2VZID0gMjMwO1xuICAgICAgICB0aGlzLmJhcnJpZXJHYXRlLnNldFBvc2l0aW9uKGJhc2VYICogc2NhbGVYLCBiYXNlWSAqIHNjYWxlWSk7XG4gICAgICAgIGNvbnN0IHNjYWxlID0gTWF0aC5taW4oc2NhbGVYLCBzY2FsZVkpICogMC4zNTtcbiAgICAgICAgdGhpcy5iYXJyaWVyR2F0ZS5zZXRTY2FsZShzY2FsZSk7XG4gICAgICAgIHRoaXMuYmFycmllckJhc2VBbmdsZSA9IDA7XG4gICAgICAgIGNvbnN0IHRhcmdldEFuZ2xlID0gdGhpcy5iYXJyaWVySXNPcGVuID8gdGhpcy5iYXJyaWVyQmFzZUFuZ2xlIC0gUGhhc2VyLk1hdGguRGVnVG9SYWQoNDUpIDogdGhpcy5iYXJyaWVyQmFzZUFuZ2xlO1xuICAgICAgICB0aGlzLmJhcnJpZXJHYXRlLnNldFJvdGF0aW9uKHRhcmdldEFuZ2xlKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNldEJhcnJpZXJPcGVuIChvcGVuOiBib29sZWFuLCBpbW1lZGlhdGU6IGJvb2xlYW4gPSBmYWxzZSlcbiAgICB7XG4gICAgICAgIGlmICghdGhpcy5iYXJyaWVyR2F0ZSkgcmV0dXJuO1xuICAgICAgICB0aGlzLmJhcnJpZXJJc09wZW4gPSBvcGVuO1xuICAgICAgICBjb25zdCB0YXJnZXRBbmdsZSA9IG9wZW5cbiAgICAgICAgICAgID8gdGhpcy5iYXJyaWVyQmFzZUFuZ2xlIC0gUGhhc2VyLk1hdGguRGVnVG9SYWQoNDUpXG4gICAgICAgICAgICA6IHRoaXMuYmFycmllckJhc2VBbmdsZTtcbiAgICAgICAgaWYgKGltbWVkaWF0ZSkge1xuICAgICAgICAgICAgdGhpcy5iYXJyaWVyR2F0ZS5zZXRSb3RhdGlvbih0YXJnZXRBbmdsZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50d2VlbnMuYWRkKHtcbiAgICAgICAgICAgIHRhcmdldHM6IHRoaXMuYmFycmllckdhdGUsXG4gICAgICAgICAgICByb3RhdGlvbjogdGFyZ2V0QW5nbGUsXG4gICAgICAgICAgICBkdXJhdGlvbjogMjIwLFxuICAgICAgICAgICAgZWFzZTogJ1NpbmUuZWFzZUluT3V0J1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHVwZGF0ZVRyYWluQ2FycyAoZm9yY2U6IGJvb2xlYW4gPSBmYWxzZSlcbiAgICB7XG4gICAgICAgIGlmICghdGhpcy5zaG93Q2FycykgcmV0dXJuO1xuICAgICAgICBpZiAoIWZvcmNlICYmICF0aGlzLnRyYWluTW92aW5nKSByZXR1cm47XG4gICAgICAgIGlmICh0aGlzLnJhaWxUb3RhbExlbmd0aCA8PSAwKSByZXR1cm47XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNhclNsb3RzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICBjb25zdCBzbG90ID0gdGhpcy5jYXJTbG90c1tpXTtcbiAgICAgICAgICAgIGNvbnN0IGRpc3RhbmNlRnJvbUJvdHRvbSA9IHRoaXMudHJhaW5EaXN0YW5jZVB4IC0gaSAqIHRoaXMudHJhaW5HYXBQeDtcbiAgICAgICAgICAgIGNvbnN0IG1hcHBlZERpc3RhbmNlID0gTWF0aC5tYXgoMCwgdGhpcy5yYWlsVG90YWxMZW5ndGggLSAxKSAtIGRpc3RhbmNlRnJvbUJvdHRvbTtcbiAgICAgICAgICAgIGNvbnN0IHNhbXBsZSA9IHRoaXMuc2FtcGxlUmFpbEJ5RGlzdGFuY2VOb1dyYXAobWFwcGVkRGlzdGFuY2UpO1xuICAgICAgICAgICAgc2xvdC5jYXIuc2V0UG9zaXRpb24oc2FtcGxlLnBvc2l0aW9uLngsIHNhbXBsZS5wb3NpdGlvbi55KTtcbiAgICAgICAgICAgIHNsb3QuY2FyLnNldFJvdGF0aW9uKHNhbXBsZS5hbmdsZSArIHRoaXMudHJhaW5Sb3RhdGlvbk9mZnNldCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsZWFkQ2FyID0gdGhpcy5jYXJTbG90c1swXT8uY2FyO1xuICAgICAgICBpZiAobGVhZENhciAmJiB0aGlzLmxlYWRDYXJCYWRnZSAmJiB0aGlzLmxlYWRDYXJCYWRnZS5zY2VuZSkge1xuICAgICAgICAgICAgY29uc3Qgb2Zmc2V0WCA9IC1sZWFkQ2FyLmRpc3BsYXlXaWR0aCAqIDAuMzQ7XG4gICAgICAgICAgICBjb25zdCBvZmZzZXRZID0gLWxlYWRDYXIuZGlzcGxheUhlaWdodCAqIDAuMDg7XG4gICAgICAgICAgICBjb25zdCByb3RhdGlvbiA9IGxlYWRDYXIucm90YXRpb247XG4gICAgICAgICAgICBjb25zdCB3b3JsZFggPSBsZWFkQ2FyLnggKyBNYXRoLmNvcyhyb3RhdGlvbikgKiBvZmZzZXRYIC0gTWF0aC5zaW4ocm90YXRpb24pICogb2Zmc2V0WTtcbiAgICAgICAgICAgIGNvbnN0IHdvcmxkWSA9IGxlYWRDYXIueSArIE1hdGguc2luKHJvdGF0aW9uKSAqIG9mZnNldFggKyBNYXRoLmNvcyhyb3RhdGlvbikgKiBvZmZzZXRZO1xuICAgICAgICAgICAgdGhpcy5sZWFkQ2FyQmFkZ2Uuc2V0UG9zaXRpb24od29ybGRYLCB3b3JsZFkpO1xuICAgICAgICAgICAgdGhpcy5sZWFkQ2FyQmFkZ2Uuc2V0Um90YXRpb24ocm90YXRpb24pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZXRTaG93Q2FycyAodmFsdWU6IGJvb2xlYW4pXG4gICAge1xuICAgICAgICB0aGlzLnNob3dDYXJzID0gdmFsdWU7XG4gICAgICAgIHRoaXMuY2FyU2xvdHMuZm9yRWFjaCgoc2xvdCkgPT4ge1xuICAgICAgICAgICAgc2xvdC5jYXIuc2V0VmlzaWJsZSh2YWx1ZSk7XG4gICAgICAgICAgICBzbG90LmxvY2suc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodGhpcy5sZWFkQ2FyQmFkZ2UpIHtcbiAgICAgICAgICAgIHRoaXMubGVhZENhckJhZGdlLnNldFZpc2libGUodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoTG9ja3MoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVHJhaW5DYXJzKHRydWUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzZXRSYWlsd2F5VmlzaWJsZSAodmFsdWU6IGJvb2xlYW4pXG4gICAge1xuICAgICAgICBpZiAodGhpcy5yYWlsd2F5Q29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aGlzLnJhaWx3YXlDb250YWluZXIuc2V0VmlzaWJsZSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZGVidWdDdXJ2ZUdyYXBoaWNzKSB7XG4gICAgICAgICAgICB0aGlzLmRlYnVnQ3VydmVHcmFwaGljcy5zZXRWaXNpYmxlKHZhbHVlICYmIHRoaXMuZGVidWdUcmFjayk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZGVidWdNYXJrZXJHcmFwaGljcykge1xuICAgICAgICAgICAgdGhpcy5kZWJ1Z01hcmtlckdyYXBoaWNzLnNldFZpc2libGUodmFsdWUgJiYgdGhpcy5kZWJ1Z1RyYWNrKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRlYnVnTWFya2VyTGFiZWxzLmZvckVhY2goKGxhYmVsKSA9PiBsYWJlbC5zZXRWaXNpYmxlKHZhbHVlICYmIHRoaXMuZGVidWdUcmFjaykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaXNSYWlsd2F5VmlzaWJsZSAoKVxuICAgIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmFpbHdheUNvbnRhaW5lcj8udmlzaWJsZSA/PyB0cnVlO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2V0RGVidWdUcmFja1Zpc2libGUgKHZhbHVlOiBib29sZWFuKVxuICAgIHtcbiAgICAgICAgdGhpcy5kZWJ1Z1RyYWNrID0gdmFsdWU7XG4gICAgICAgIGlmICh0aGlzLmRlYnVnQ3VydmVHcmFwaGljcykge1xuICAgICAgICAgICAgdGhpcy5kZWJ1Z0N1cnZlR3JhcGhpY3Muc2V0VmlzaWJsZSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZGVidWdNYXJrZXJHcmFwaGljcykge1xuICAgICAgICAgICAgdGhpcy5kZWJ1Z01hcmtlckdyYXBoaWNzLnNldFZpc2libGUodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGVidWdNYXJrZXJMYWJlbHMuZm9yRWFjaCgobGFiZWwpID0+IGxhYmVsLnNldFZpc2libGUodmFsdWUpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNldFRyYWluTW92aW5nICh2YWx1ZTogYm9vbGVhbilcbiAgICB7XG4gICAgICAgIHRoaXMudHJhaW5Nb3ZpbmcgPSB2YWx1ZTtcbiAgICAgICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVUcmFpbkNhcnModHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGVuZEdhbWUgKHJlYXNvbjogc3RyaW5nLCByZXN1bHQ6ICd3aW4nIHwgJ2xvc2UnKVxuICAgIHtcbiAgICAgICAgaWYgKHRoaXMuZ2FtZU92ZXIpIHJldHVybjtcbiAgICAgICAgdGhpcy5nYW1lT3ZlciA9IHRydWU7XG4gICAgICAgIHRoaXMucXVpek9wZW4gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5xdWl6TG9ja2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaGFzU3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmNsb3NlUXVpeigpO1xuICAgICAgICB0aGlzLnN1Ym1pdFNlc3Npb25SZXN1bHQoKTtcblxuICAgICAgICBpZiAocmVzdWx0ID09PSAnbG9zZScpIHtcbiAgICAgICAgICAgIHRoaXMub3BlblRpbWVVcE1vZGFsKCdPdXQgb2YgdGltZSEgVHJ5IGFnYWluLicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub3BlblRpbWVVcE1vZGFsKHJlYXNvbiB8fCAnR3JlYXQgam9iISBZb3Ugd29uIScpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZm9ybWF0VGltZSAoc2Vjb25kczogbnVtYmVyKVxuICAgIHtcbiAgICAgICAgY29uc3QgbWlucyA9IE1hdGguZmxvb3Ioc2Vjb25kcyAvIDYwKTtcbiAgICAgICAgY29uc3Qgc2VjcyA9IHNlY29uZHMgJSA2MDtcbiAgICAgICAgcmV0dXJuIGAke21pbnN9bSAke3NlY3MudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfXNgO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJTY2VuZSIsIkV2ZW50QnVzIiwiZ2V0R2FtZUNvbmZpZyIsInJlc29sdmVHYW1lQ29kZSIsIlF1aXpQYW5lbCIsIkZBTExCQUNLX1FVRVNUSU9OUyIsInF1ZXN0aW9uIiwiY29udGVudCIsIm9wdGlvbnMiLCJ0ZXh0IiwiaXNfY29ycmVjdCIsIlRyYWluR2FtZSIsImNvbnN0cnVjdG9yIiwiZGVidWdUcmFjayIsInNob3dSYWlsT3ZlcmxheSIsInNob3dDYXJzIiwidHJhaW5Nb3ZpbmciLCJ0cmFmZmljTGlnaHRTdGF0ZSIsInRyYWluRGlzdGFuY2VQeCIsInRyYWluU3BlZWRQeFBlclNlYyIsInRyYWluR2FwUHgiLCJ0cmFja0xlbmd0aCIsInRyYWluQ2FyR2FwRmFjdG9yIiwidHJhaW5DYXJTY2FsZUZhY3RvciIsInJhaWxQYXRoUG9pbnRzIiwicmFpbFNlZ21lbnRMZW5ndGhzIiwicmFpbFRvdGFsTGVuZ3RoIiwidHJhaW5Sb3RhdGlvbk9mZnNldCIsIlBoYXNlciIsIk1hdGgiLCJEZWdUb1JhZCIsImxlYWRDYXJTdGF0ZSIsImxlYWRDYXJCYXNlU2l6ZSIsImRlYnVnTWFya2VyTGFiZWxzIiwic2hvd0hvdmVyQ29vcmRzIiwiYmFycmllckJhc2VBbmdsZSIsImJhcnJpZXJJc09wZW4iLCJjYXJTbG90cyIsInN0YXJ0TW9kYWxPcGVuIiwiaGFzU3RhcnRlZCIsImdhbWVDb2RlIiwic2Vzc2lvbklkIiwic2Vzc2lvbkdhbWVJZCIsInNlc3Npb25RdWVzdGlvbnMiLCJzZXNzaW9uVGltZUxpbWl0IiwibWF4Q2FycyIsImN1cnJlbnRJbmRleCIsInNjb3JlIiwidG90YWxUaW1lTXMiLCJyZW1haW5pbmdNcyIsImxhc3RTZWNvbmRTaG93biIsInF1aXpPcGVuIiwicXVpekxvY2tlZCIsImdhbWVPdmVyIiwicXVlc3Rpb25zIiwiY3VycmVudENvcnJlY3RJbmRleCIsImN1cnJlbnRTZXNzaW9uUXVlc3Rpb25JZCIsImN1cnJlbnRPcHRpb25JZHMiLCJ0cmFpblN0ZXBQeCIsImluaXQiLCJkYXRhIiwicmVnaXN0cnkiLCJnZXQiLCJzZXQiLCJnYW1lSWQiLCJ0aW1lTGltaXQiLCJjcmVhdGUiLCJ3aWR0aCIsImhlaWdodCIsInNjYWxlIiwiZ2FtZUNvbmZpZyIsImxlYWRDYXJCYWRnZSIsInVuZGVmaW5lZCIsImNhbWVyYSIsImNhbWVyYXMiLCJtYWluIiwic2V0QmFja2dyb3VuZENvbG9yIiwiYmFja2dyb3VuZENvbG9yIiwiYmFja2dyb3VuZCIsImFkZCIsImltYWdlIiwic2V0RGlzcGxheVNpemUiLCJzZXRPcmlnaW4iLCJzZXR1cFF1ZXN0aW9ucyIsInNldHVwVGltZXIiLCJjcmVhdGVIdWQiLCJjcmVhdGVSYWlsd2F5IiwibGF5b3V0VHJhaW4iLCJ1cGRhdGVUcmFpbkNhcnMiLCJjcmVhdGVCYXJyaWVyR2F0ZSIsImNyZWF0ZVF1aXpNb2RhbCIsImNyZWF0ZVN0YXJ0TW9kYWwiLCJjcmVhdGVUaW1lVXBNb2RhbCIsIm9wZW5TdGFydE1vZGFsIiwib24iLCJuZXdXaWR0aCIsIm5ld0hlaWdodCIsInNldFBvc2l0aW9uIiwibGF5b3V0SHVkIiwibGF5b3V0UXVpeiIsInVwZGF0ZUJhcnJpZXJQb3NpdGlvbiIsImxheW91dFN0YXJ0TW9kYWwiLCJsYXlvdXRUaW1lVXBNb2RhbCIsImVtaXQiLCJ1cGRhdGUiLCJfdGltZSIsImRlbHRhIiwibWF4Iiwic2Vjb25kcyIsImNlaWwiLCJ0aW1lclRleHQiLCJzZXRUZXh0IiwiZm9ybWF0VGltZSIsImVuZEdhbWUiLCJzb3VyY2UiLCJsZW5ndGgiLCJzbGljZSIsInVpUm9vdCIsImNvbnRhaW5lciIsInNldERlcHRoIiwiaHVkQmFja0J1dHRvbiIsImJhY2tCZyIsImdyYXBoaWNzIiwiZmlsbFN0eWxlIiwiZmlsbFJvdW5kZWRSZWN0IiwibGluZVN0eWxlIiwic3Ryb2tlUm91bmRlZFJlY3QiLCJiYWNrSWNvbiIsImZvbnRGYW1pbHkiLCJmb250U2l6ZSIsImNvbG9yIiwiYmFja0hpdCIsInpvbmUiLCJzZXRJbnRlcmFjdGl2ZSIsInVzZUhhbmRDdXJzb3IiLCJoYW5kbGVCYWNrVG9HYW1lTGlzdCIsInNldFNpemUiLCJodWRQb2ludHNQaWxsIiwicG9pbnRzQmciLCJwb2ludHNXIiwicG9pbnRzSCIsInN0YXIiLCJzZXRTY2FsZSIsInNldFRpbnQiLCJzY29yZVRleHQiLCJodWRUaW1lclBpbGwiLCJ0aW1lckJnIiwidGltZXJXIiwidGltZXJIIiwiY3JlYXRlVHJhZmZpY0xpZ2h0IiwidG9wSW5zZXQiLCJyb3VuZCIsInNpZGVJbnNldCIsInJpZ2h0RWRnZSIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsImxpZ2h0SGVpZ2h0Iiwic291cmNlSGVpZ2h0Iiwic291cmNlV2lkdGgiLCJsaWdodFdpZHRoIiwiYmFzZVgiLCJiYXNlWSIsImFuY2hvclkiLCJtYWtlVmFyaWFudCIsImtleSIsInNldEFscGhhIiwib2Zmc2V0cyIsInJlZCIsIngiLCJ5IiwieWVsbG93IiwiZ3JlZW4iLCJ0ZXh0dXJlcyIsImV4aXN0cyIsInJlY3RhbmdsZSIsIm5vcm1hbGl6ZSIsIm9iaiIsInRyYWZmaWNMaWdodFZhcmlhbnRzIiwidHJhZmZpY0xpZ2h0IiwiY3ljbGUiLCJjeWNsZUluZGV4Iiwic2V0VHJhZmZpY0xpZ2h0Q29sb3IiLCJ0aW1lIiwiYWRkRXZlbnQiLCJkZWxheSIsImxvb3AiLCJjYWxsYmFjayIsInNldFZpc2libGUiLCJzY2FsZVgiLCJkaXNwbGF5V2lkdGgiLCJzY2FsZVkiLCJkaXNwbGF5SGVpZ2h0IiwibWluIiwidHJhY2tDdXJ2ZSIsImNyZWF0ZVRyYWNrQ3VydmUiLCJ0cmFja1BvaW50cyIsInNhbXBsZVRyYWNrIiwiaSIsImNhcktleSIsInBvaW50IiwiYW5nbGUiLCJnZXRUcmFja0FuZ2xlIiwiY2FyIiwic2V0Um90YXRpb24iLCJsb2NrIiwiY3JlYXRlTG9ja092ZXJsYXkiLCJkaXNhYmxlSW50ZXJhY3RpdmUiLCJwdXNoIiwiaW5kZXgiLCJyZWZlcmVuY2VDYXIiLCJjYXJMZW5ndGgiLCJzZXRUZXh0dXJlIiwic2V0TGVhZENhclN0YXRlIiwicmVmcmVzaExvY2tzIiwiZ2V0TGVhZENhclRleHR1cmVLZXkiLCJzdGF0ZSIsImxlYWRDYXIiLCJzY2VuZSIsInRleHR1cmUiLCJ0ZXh0dXJlS2V5IiwiZGVwdGgiLCJwYW5lbFciLCJwYW5lbEgiLCJiZyIsInNldFN0cm9rZVN0eWxlIiwiaGl0QXJlYSIsIkdlb20iLCJSZWN0YW5nbGUiLCJDb250YWlucyIsInNldERhdGEiLCJzZXRGaWxsU3R5bGUiLCJpbnB1dCIsInNldERlZmF1bHRDdXJzb3IiLCJvcGVuUXVlc3Rpb24iLCJmb3JFYWNoIiwic2xvdCIsInBvaW50cyIsInRvU3RyaW5nIiwicGFkU3RhcnQiLCJxdWl6UGFuZWwiLCJvcHRpb25Db3VudCIsInBhcmVudCIsInNob3dJbmRleCIsInF1aXpNb2RhbCIsIm9uT3B0aW9uU2VsZWN0ZWQiLCJoYW5kbGVBbnN3ZXIiLCJvdmVybGF5IiwicGFuZWwiLCJwYW5lbFdpZHRoIiwicGFuZWxIZWlnaHQiLCJwYW5lbFNoYWRvdyIsInBhbmVsQmciLCJ0aXRsZSIsImFsaWduIiwibGluZVNwYWNpbmciLCJidXR0b24iLCJjcmVhdGVTdGFydEJ1dHRvbiIsInN0YXJ0TW9kYWwiLCJzdGFydE1vZGFsUGFuZWwiLCJ0aW1lVXBUaXRsZVRleHQiLCJjcmVhdGVUaW1lb3V0QnV0dG9uIiwidGltZVVwTW9kYWwiLCJ0aW1lVXBNb2RhbFBhbmVsIiwibGlzdCIsInJhZGl1cyIsInNoYWRvdyIsImRyYXciLCJmaWxsIiwic3Ryb2tlIiwiY2xlYXIiLCJoaXQiLCJ0d2VlbnMiLCJ0YXJnZXRzIiwiZHVyYXRpb24iLCJlYXNlIiwic3RhcnRHYW1lRmxvdyIsInlveW8iLCJyZXBlYXQiLCJnZXREYXRhIiwiZGVsYXllZENhbGwiLCJzeXMiLCJpc0FjdGl2ZSIsInJlc3RhcnRUcmFpblJ1biIsImFscGhhIiwiY2xvc2VTdGFydE1vZGFsIiwib3BlblRpbWVVcE1vZGFsIiwibWVzc2FnZSIsInN1Ym1pdFNlc3Npb25SZXN1bHQiLCJ0aGVuIiwiZW5kR2FtZVNlc3Npb24iLCJjYXRjaCIsImVycm9yIiwiY29uc29sZSIsImNsb3NlUXVpeiIsInJlc3RhcnQiLCJsYXlvdXQiLCJnZXRRdWVzdGlvbkZvckluZGV4IiwibWFwIiwib3B0IiwiaWQiLCJzZXNzaW9uX3F1ZXN0aW9uX2lkIiwiY29ycmVjdEluZGV4IiwiZmluZEluZGV4Iiwic2V0RmVlZGJhY2siLCJzZXRRdWVzdGlvbiIsInRvdGFsIiwic2V0QmFycmllck9wZW4iLCJzZWxlY3RlZEluZGV4IiwiaXNDb3JyZWN0Iiwic2VsZWN0ZWRPcHRpb25JZCIsInN1Ym1pdEFuc3dlciIsInJlcyIsInNldE9wdGlvblN0YXRlIiwiYXBwbHlDb3JyZWN0IiwiYXBwbHlXcm9uZyIsIm1vdmVUcmFpblRvRW5kIiwibW92ZVRyYWluVG9JbmRleCIsInRhcmdldEluZGV4Iiwib25Db21wbGV0ZSIsInZpc3VhbEluZGV4IiwiQ2xhbXAiLCJtYXhEaXN0YW5jZSIsInRhcmdldERpc3RhbmNlIiwiYWJzIiwidHdlZW5TdGF0ZSIsInZhbHVlIiwib25VcGRhdGUiLCJ0cmFpbkxlbmd0aCIsImJhc2VXaWR0aCIsImJhc2VIZWlnaHQiLCJwIiwiVmVjdG9yMiIsIkN1cnZlcyIsIlNwbGluZSIsImN1cnZlIiwiY291bnQiLCJ0IiwiZ2V0UG9pbnRBdCIsImRyYXdUcmFja0N1cnZlIiwic3RhcnRUIiwiZW5kVCIsImdldFZpc2libGVUUmFuZ2UiLCJzdGVwcyIsImZpcnN0IiwiZ2V0UG9pbnQiLCJiZWdpblBhdGgiLCJtb3ZlVG8iLCJsaW5lVG8iLCJzdHJva2VQYXRoIiwiZGVidWdDdXJ2ZUdyYXBoaWNzIiwiZHJhd0N1cnZlTWFya2VycyIsImNsYW1wZWRYIiwiY2xhbXBlZFkiLCJzdHJva2VMaW5lU2hhcGUiLCJMaW5lIiwiZmlsbENpcmNsZSIsImxhYmVsVGV4dCIsImxhYmVsIiwic3Ryb2tlVGhpY2tuZXNzIiwiZGVidWdNYXJrZXJHcmFwaGljcyIsIm1hcmdpbiIsInNhbXBsZXMiLCJmb3VuZFN0YXJ0IiwiaW5zaWRlIiwic3RhcnRFeHRlbmQiLCJlbmRFeHRlbmQiLCJjdXJyIiwibmV4dCIsImF0YW4yIiwiYnVpbGRSYWlsUGF0aCIsInNwbGluZSIsImdldExlbmd0aCIsInNhbXBsZUV2ZXJ5UHgiLCJzZWdtZW50cyIsInNlZ0xlbiIsIkRpc3RhbmNlIiwiQmV0d2VlbiIsInNhbXBsZVJhaWxCeURpc3RhbmNlTm9XcmFwIiwiZGlzdGFuY2VQeCIsInBvc2l0aW9uIiwic3RhcnQiLCJkaXIiLCJjb3MiLCJzaW4iLCJwb3MiLCJlbmQiLCJwcmV2IiwicmVtYWluaW5nIiwic2VnSW5kZXgiLCJzYWZlSW5kZXgiLCJyYXRpbyIsIkxpbmVhciIsInRyYWNrU3BsaW5lIiwiYmFzZVNjYWxlIiwicmFpbE9mZnNldCIsInNsZWVwZXJXaWR0aCIsInNsZWVwZXJIZWlnaHQiLCJyYWlsd2F5Q29udGFpbmVyIiwicmFpbExlZnQiLCJyYWlsUmlnaHQiLCJ0YW5nZW50IiwiZ2V0VGFuZ2VudCIsIm5vcm1hbCIsInJhaWxzIiwic2xlZXBlckNvdW50IiwiUEkiLCJzbGVlcGVyIiwic2V0UmFpbHdheVZpc2libGUiLCJzZXREZWJ1Z1RyYWNrVmlzaWJsZSIsImdhdGUiLCJiYXJyaWVyR2F0ZSIsInRhcmdldEFuZ2xlIiwib3BlbiIsImltbWVkaWF0ZSIsInJvdGF0aW9uIiwiZm9yY2UiLCJkaXN0YW5jZUZyb21Cb3R0b20iLCJtYXBwZWREaXN0YW5jZSIsInNhbXBsZSIsIm9mZnNldFgiLCJvZmZzZXRZIiwid29ybGRYIiwid29ybGRZIiwic2V0U2hvd0NhcnMiLCJpc1JhaWx3YXlWaXNpYmxlIiwidmlzaWJsZSIsInNldFRyYWluTW92aW5nIiwicmVhc29uIiwicmVzdWx0IiwibWlucyIsImZsb29yIiwic2VjcyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/game/scenes/TrainGame.ts\n");

/***/ }),

/***/ "(pages-dir-node)/./src/game/ui/QuizPanel.ts":
/*!**********************************!*\
  !*** ./src/game/ui/QuizPanel.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   QuizPanel: () => (/* binding */ QuizPanel)\n/* harmony export */ });\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! phaser */ \"phaser\");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_0__);\n\nclass QuizPanel {\n    constructor(scene, config = {}){\n        this.optionButtons = [];\n        this.scene = scene;\n        this.optionCount = config.optionCount ?? 4;\n        this.showIndex = config.showIndex ?? true;\n        this.container = this.scene.add.container(0, 0).setDepth(config.depth ?? 200);\n        this.container.setScrollFactor(0);\n        this.container.setVisible(false);\n        this.panelContainer = this.scene.add.container(0, 0);\n        this.panelShadow = this.scene.add.graphics();\n        this.panelBg = this.scene.add.graphics();\n        this.panelGlow = this.scene.add.graphics();\n        this.indexText = this.scene.add.text(0, 0, 'Question 1/4', {\n            fontFamily: 'Arial Black',\n            fontSize: '14px',\n            color: '#38bdf8'\n        }).setOrigin(0.5, 0);\n        this.feedbackTitleText = this.scene.add.text(0, 0, 'Correct!', {\n            fontFamily: 'Arial Black',\n            fontSize: '22px',\n            color: '#22c55e',\n            align: 'center',\n            wordWrap: {\n                width: 600,\n                useAdvancedWrap: true\n            }\n        }).setOrigin(0.5, 0);\n        this.feedbackSubtitleText = this.scene.add.text(0, 0, 'You earned 1 point!', {\n            fontFamily: 'Arial Black',\n            fontSize: '18px',\n            color: '#16a34a',\n            align: 'center',\n            wordWrap: {\n                width: 600,\n                useAdvancedWrap: true\n            }\n        }).setOrigin(0.5, 0);\n        this.questionText = this.scene.add.text(0, 0, '...', {\n            fontFamily: 'Arial Black',\n            fontSize: '28px',\n            color: '#0f172a',\n            align: 'center',\n            wordWrap: {\n                width: 600,\n                useAdvancedWrap: true\n            }\n        }).setOrigin(0.5, 0);\n        this.panelContainer.add([\n            this.panelShadow,\n            this.panelBg,\n            this.panelGlow,\n            this.indexText,\n            this.feedbackTitleText,\n            this.feedbackSubtitleText,\n            this.questionText\n        ]);\n        for(let i = 0; i < this.optionCount; i += 1){\n            const option = this.createOptionButton(0, 0);\n            this.optionButtons.push(option);\n            this.panelContainer.add(option);\n        }\n        this.container.add(this.panelContainer);\n        if (config.parent) {\n            config.parent.add(this.container);\n        }\n    }\n    setVisible(value) {\n        this.container.setVisible(value);\n    }\n    setAlpha(value) {\n        this.container.setAlpha(value);\n    }\n    setInteractive(enabled) {\n        this.optionButtons.forEach((btn)=>{\n            const hit = btn.getData('hit');\n            if (!hit) return;\n            if (enabled) {\n                hit.setInteractive();\n            } else {\n                hit.disableInteractive();\n            }\n        });\n    }\n    onOptionSelected(callback) {\n        this.optionButtons.forEach((btn, index)=>{\n            const hit = btn.getData('hit');\n            if (!hit) return;\n            hit.removeAllListeners('pointerdown');\n            hit.on('pointerdown', ()=>callback(index));\n        });\n    }\n    setQuestion(data) {\n        if (this.showIndex && data.index && data.total) {\n            this.indexText.setText(`Question ${data.index}/${data.total}`);\n            this.indexText.setAlpha(1);\n        } else {\n            this.indexText.setAlpha(0);\n        }\n        const maxQuestionChars = 55;\n        const question = data.question.length > maxQuestionChars ? `${data.question.slice(0, maxQuestionChars - 1)}…` : data.question;\n        this.questionText.setText(question);\n        this.optionButtons.forEach((btn, i)=>{\n            const redraw = btn.getData('redraw');\n            const text = btn.getData('text');\n            redraw('normal');\n            text.setFontSize(20);\n            text.setText(`${data.options[i] ?? ''}`);\n            if (text.width > 520) text.setFontSize(18);\n            if (text.width > 560) text.setFontSize(17);\n        });\n    }\n    setFeedback(state) {\n        if (state === 'correct') {\n            this.feedbackTitleText.setText('Correct!');\n            this.feedbackTitleText.setColor('#22c55e');\n            this.feedbackSubtitleText.setText('You earned 1 point!');\n            this.feedbackSubtitleText.setColor('#16a34a');\n            this.feedbackTitleText.setAlpha(1);\n            this.feedbackSubtitleText.setAlpha(1);\n        } else if (state === 'wrong') {\n            this.feedbackTitleText.setText('Sorry!');\n            this.feedbackTitleText.setColor('#ef4444');\n            this.feedbackSubtitleText.setText('You have to start over.');\n            this.feedbackSubtitleText.setColor('#0f172a');\n            this.feedbackTitleText.setAlpha(1);\n            this.feedbackSubtitleText.setAlpha(1);\n        } else {\n            this.feedbackTitleText.setAlpha(0);\n            this.feedbackSubtitleText.setAlpha(0);\n        }\n    }\n    setOptionState(index, state) {\n        const btn = this.optionButtons[index];\n        if (!btn) return;\n        const redraw = btn.getData('redraw');\n        redraw(state);\n    }\n    layout(width, height) {\n        const uiScale = phaser__WEBPACK_IMPORTED_MODULE_0___default().Math.Clamp(width / 900, 0.9, 1.05);\n        const panelWidth = Math.floor(width * 0.9);\n        const maxPanelHeight = Math.floor(height * 0.62 / uiScale);\n        const questionWrap = Math.floor(panelWidth * 0.8);\n        this.questionText.setWordWrapWidth(questionWrap, true);\n        this.feedbackTitleText.setWordWrapWidth(questionWrap, true);\n        this.feedbackSubtitleText.setWordWrapWidth(questionWrap, true);\n        let fontSize = 28;\n        const minFont = 20;\n        let panelHeight = 0;\n        while(fontSize >= minFont){\n            this.questionText.setFontSize(fontSize);\n            const qBounds = this.questionText.getBounds();\n            const headerH = this.indexText.getBounds().height;\n            const feedbackTitleH = 22;\n            const feedbackSubtitleH = 18;\n            const feedbackGap = 4;\n            const feedbackTopGap = 8;\n            const feedbackBottomGap = 8;\n            const paddingTop = 10;\n            const paddingBottom = 14;\n            const questionGap = 6;\n            const optionsTopGap = 14;\n            const buttonHeight = 62;\n            const buttonGap = 14;\n            panelHeight = paddingTop + headerH + feedbackTopGap + feedbackTitleH + feedbackGap + feedbackSubtitleH + feedbackBottomGap + qBounds.height + optionsTopGap + buttonHeight * this.optionCount + buttonGap * (this.optionCount - 1) + paddingBottom;\n            if (panelHeight <= maxPanelHeight) break;\n            fontSize -= 2;\n        }\n        const qBounds = this.questionText.getBounds();\n        const headerH = this.indexText.getBounds().height;\n        let paddingTop = 12;\n        let paddingBottom = 16;\n        let optionsTopGap = 14;\n        let buttonHeight = 62;\n        let buttonGap = 14;\n        let feedbackTopGap = 8;\n        let feedbackBottomGap = 8;\n        const feedbackTitleH = 22;\n        const feedbackSubtitleH = 18;\n        const feedbackGap = 4;\n        if (panelHeight > maxPanelHeight) {\n            paddingTop = 10;\n            paddingBottom = 12;\n            optionsTopGap = 12;\n            feedbackTopGap = 6;\n            feedbackBottomGap = 6;\n        }\n        const minButtonHeight = 52;\n        const minButtonGap = 8;\n        const fixedHeight = paddingTop + headerH + feedbackTopGap + feedbackTitleH + feedbackGap + feedbackSubtitleH + feedbackBottomGap + qBounds.height + optionsTopGap + paddingBottom;\n        const maxButtonsSpace = Math.max(0, maxPanelHeight - fixedHeight);\n        const desiredButtonsSpace = buttonHeight * this.optionCount + buttonGap * (this.optionCount - 1);\n        if (desiredButtonsSpace > maxButtonsSpace) {\n            const perButton = Math.floor((maxButtonsSpace - buttonGap * (this.optionCount - 1)) / this.optionCount);\n            buttonHeight = phaser__WEBPACK_IMPORTED_MODULE_0___default().Math.Clamp(perButton, minButtonHeight, buttonHeight);\n            const remaining = maxButtonsSpace - buttonHeight * this.optionCount;\n            const perGap = Math.floor(remaining / (this.optionCount - 1));\n            buttonGap = phaser__WEBPACK_IMPORTED_MODULE_0___default().Math.Clamp(perGap, minButtonGap, buttonGap);\n        }\n        panelHeight = paddingTop + headerH + feedbackTopGap + feedbackTitleH + feedbackGap + feedbackSubtitleH + feedbackBottomGap + qBounds.height + optionsTopGap + buttonHeight * this.optionCount + buttonGap * (this.optionCount - 1) + paddingBottom;\n        const panelX = width / 2;\n        const panelY = height / 2;\n        this.panelContainer.setScale(uiScale);\n        this.panelContainer.setPosition(panelX, panelY);\n        this.panelShadow.clear();\n        this.panelShadow.fillStyle(0x000000, 0.18);\n        this.panelShadow.fillRoundedRect(-panelWidth / 2 + 8, -panelHeight / 2 + 14, panelWidth, panelHeight, 28);\n        this.panelBg.clear();\n        this.panelBg.fillStyle(0xf8fbff, 0.92);\n        this.panelBg.fillRoundedRect(-panelWidth / 2, -panelHeight / 2, panelWidth, panelHeight, 28);\n        this.panelBg.lineStyle(2, 0x93c5fd, 0.6);\n        this.panelBg.strokeRoundedRect(-panelWidth / 2, -panelHeight / 2, panelWidth, panelHeight, 28);\n        this.panelGlow.clear();\n        this.panelGlow.fillStyle(0xe0f2fe, 0.5);\n        this.panelGlow.fillRoundedRect(-panelWidth / 2 + 10, -panelHeight / 2 + 10, panelWidth - 20, panelHeight - 20, 20);\n        const headerY = -panelHeight / 2 + paddingTop;\n        this.indexText.setPosition(0, headerY);\n        const feedbackY = headerY + headerH + feedbackTopGap;\n        this.feedbackTitleText.setPosition(0, feedbackY);\n        this.feedbackSubtitleText.setPosition(0, feedbackY + feedbackTitleH + feedbackGap);\n        const questionY = feedbackY + feedbackTitleH + feedbackGap + feedbackSubtitleH + feedbackBottomGap;\n        this.questionText.setPosition(0, questionY);\n        const answersStartY = questionY + qBounds.height + optionsTopGap + buttonHeight / 2;\n        this.optionButtons.forEach((btn, i)=>{\n            const y = answersStartY + i * (buttonHeight + buttonGap);\n            btn.setPosition(0, y);\n            btn.setData('layout', {\n                x: -panelWidth / 2 + 32,\n                w: panelWidth - 64,\n                h: buttonHeight,\n                radius: 22\n            });\n            const redraw = btn.getData('redraw');\n            redraw('normal');\n            const text = btn.getData('text');\n            const hit = btn.getData('hit');\n            const layout = btn.getData('layout');\n            text.setPosition(layout.x + layout.w / 2, 0);\n            hit.setSize(layout.w, layout.h);\n            hit.setPosition(layout.x + layout.w / 2, 0);\n            btn.setSize(layout.w, layout.h);\n        });\n        const halfPanel = panelHeight * uiScale / 2;\n        if (this.panelContainer.y - halfPanel < 60) {\n            this.panelContainer.y = 60 + halfPanel;\n        }\n        if (this.panelContainer.y + halfPanel > height - 40) {\n            this.panelContainer.y = height - 40 - halfPanel;\n        }\n        return {\n            uiScale,\n            panelHeight,\n            panelWidth\n        };\n    }\n    createOptionButton(x, y) {\n        const container = this.scene.add.container(x, y);\n        const width = 640;\n        const height = 54;\n        const radius = 22;\n        const baseColor = 0x38bdf8;\n        const shadow = this.scene.add.graphics();\n        const bg = this.scene.add.graphics();\n        const text = this.scene.add.text(0, 0, '...', {\n            fontFamily: 'Arial Black',\n            fontSize: '20px',\n            color: '#ffffff'\n        }).setOrigin(0.5);\n        const hit = this.scene.add.rectangle(0, 0, width, height, 0xffffff, 0.001);\n        hit.setInteractive();\n        const redraw = (state)=>{\n            const layout = container.getData('layout');\n            const drawX = layout?.x ?? -width / 2;\n            const drawW = layout?.w ?? width;\n            const drawH = layout?.h ?? height;\n            const drawR = layout?.radius ?? radius;\n            let fill = baseColor;\n            let stroke = 0x7dd3fc;\n            if (state === 'correct') {\n                fill = 0x22c55e;\n                stroke = 0x86efac;\n            } else if (state === 'wrong') {\n                fill = 0xef4444;\n                stroke = 0xfca5a5;\n            }\n            shadow.clear();\n            shadow.fillStyle(0x000000, 0.18);\n            shadow.fillRoundedRect(drawX + 2, -drawH / 2 + 4, drawW, drawH, drawR);\n            bg.clear();\n            bg.fillStyle(fill, 1);\n            bg.fillRoundedRect(drawX, -drawH / 2, drawW, drawH, drawR);\n            bg.lineStyle(2, stroke, 0.9);\n            bg.strokeRoundedRect(drawX, -drawH / 2, drawW, drawH, drawR);\n        };\n        redraw('normal');\n        container.add([\n            shadow,\n            bg,\n            text,\n            hit\n        ]);\n        container.setSize(width, height);\n        container.setData('redraw', redraw);\n        container.setData('text', text);\n        container.setData('hit', hit);\n        return container;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9nYW1lL3VpL1F1aXpQYW5lbC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBNEI7QUFTckIsTUFBTUM7SUFnQlRDLFlBQVlDLEtBQW1CLEVBQUVDLFNBQTBCLENBQUMsQ0FBQyxDQUFFO2FBTHREQyxnQkFBZ0QsRUFBRTtRQU12RCxJQUFJLENBQUNGLEtBQUssR0FBR0E7UUFDYixJQUFJLENBQUNHLFdBQVcsR0FBR0YsT0FBT0UsV0FBVyxJQUFJO1FBQ3pDLElBQUksQ0FBQ0MsU0FBUyxHQUFHSCxPQUFPRyxTQUFTLElBQUk7UUFFckMsSUFBSSxDQUFDQyxTQUFTLEdBQUcsSUFBSSxDQUFDTCxLQUFLLENBQUNNLEdBQUcsQ0FBQ0QsU0FBUyxDQUFDLEdBQUcsR0FBR0UsUUFBUSxDQUFDTixPQUFPTyxLQUFLLElBQUk7UUFDekUsSUFBSSxDQUFDSCxTQUFTLENBQUNJLGVBQWUsQ0FBQztRQUMvQixJQUFJLENBQUNKLFNBQVMsQ0FBQ0ssVUFBVSxDQUFDO1FBRTFCLElBQUksQ0FBQ0MsY0FBYyxHQUFHLElBQUksQ0FBQ1gsS0FBSyxDQUFDTSxHQUFHLENBQUNELFNBQVMsQ0FBQyxHQUFHO1FBQ2xELElBQUksQ0FBQ08sV0FBVyxHQUFHLElBQUksQ0FBQ1osS0FBSyxDQUFDTSxHQUFHLENBQUNPLFFBQVE7UUFDMUMsSUFBSSxDQUFDQyxPQUFPLEdBQUcsSUFBSSxDQUFDZCxLQUFLLENBQUNNLEdBQUcsQ0FBQ08sUUFBUTtRQUN0QyxJQUFJLENBQUNFLFNBQVMsR0FBRyxJQUFJLENBQUNmLEtBQUssQ0FBQ00sR0FBRyxDQUFDTyxRQUFRO1FBRXhDLElBQUksQ0FBQ0csU0FBUyxHQUFHLElBQUksQ0FBQ2hCLEtBQUssQ0FBQ00sR0FBRyxDQUFDVyxJQUFJLENBQUMsR0FBRyxHQUFHLGdCQUFnQjtZQUN2REMsWUFBWTtZQUNaQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWCxHQUFHQyxTQUFTLENBQUMsS0FBSztRQUVsQixJQUFJLENBQUNDLGlCQUFpQixHQUFHLElBQUksQ0FBQ3RCLEtBQUssQ0FBQ00sR0FBRyxDQUFDVyxJQUFJLENBQUMsR0FBRyxHQUFHLFlBQVk7WUFDM0RDLFlBQVk7WUFDWkMsVUFBVTtZQUNWQyxPQUFPO1lBQ1BHLE9BQU87WUFDUEMsVUFBVTtnQkFBRUMsT0FBTztnQkFBS0MsaUJBQWlCO1lBQUs7UUFDbEQsR0FBR0wsU0FBUyxDQUFDLEtBQUs7UUFFbEIsSUFBSSxDQUFDTSxvQkFBb0IsR0FBRyxJQUFJLENBQUMzQixLQUFLLENBQUNNLEdBQUcsQ0FBQ1csSUFBSSxDQUFDLEdBQUcsR0FBRyx1QkFBdUI7WUFDekVDLFlBQVk7WUFDWkMsVUFBVTtZQUNWQyxPQUFPO1lBQ1BHLE9BQU87WUFDUEMsVUFBVTtnQkFBRUMsT0FBTztnQkFBS0MsaUJBQWlCO1lBQUs7UUFDbEQsR0FBR0wsU0FBUyxDQUFDLEtBQUs7UUFFbEIsSUFBSSxDQUFDTyxZQUFZLEdBQUcsSUFBSSxDQUFDNUIsS0FBSyxDQUFDTSxHQUFHLENBQUNXLElBQUksQ0FBQyxHQUFHLEdBQUcsT0FBTztZQUNqREMsWUFBWTtZQUNaQyxVQUFVO1lBQ1ZDLE9BQU87WUFDUEcsT0FBTztZQUNQQyxVQUFVO2dCQUFFQyxPQUFPO2dCQUFLQyxpQkFBaUI7WUFBSztRQUNsRCxHQUFHTCxTQUFTLENBQUMsS0FBSztRQUVsQixJQUFJLENBQUNWLGNBQWMsQ0FBQ0wsR0FBRyxDQUFDO1lBQ3BCLElBQUksQ0FBQ00sV0FBVztZQUNoQixJQUFJLENBQUNFLE9BQU87WUFDWixJQUFJLENBQUNDLFNBQVM7WUFDZCxJQUFJLENBQUNDLFNBQVM7WUFDZCxJQUFJLENBQUNNLGlCQUFpQjtZQUN0QixJQUFJLENBQUNLLG9CQUFvQjtZQUN6QixJQUFJLENBQUNDLFlBQVk7U0FDcEI7UUFFRCxJQUFLLElBQUlDLElBQUksR0FBR0EsSUFBSSxJQUFJLENBQUMxQixXQUFXLEVBQUUwQixLQUFLLEVBQUc7WUFDMUMsTUFBTUMsU0FBUyxJQUFJLENBQUNDLGtCQUFrQixDQUFDLEdBQUc7WUFDMUMsSUFBSSxDQUFDN0IsYUFBYSxDQUFDOEIsSUFBSSxDQUFDRjtZQUN4QixJQUFJLENBQUNuQixjQUFjLENBQUNMLEdBQUcsQ0FBQ3dCO1FBQzVCO1FBRUEsSUFBSSxDQUFDekIsU0FBUyxDQUFDQyxHQUFHLENBQUMsSUFBSSxDQUFDSyxjQUFjO1FBRXRDLElBQUlWLE9BQU9nQyxNQUFNLEVBQUU7WUFDZmhDLE9BQU9nQyxNQUFNLENBQUMzQixHQUFHLENBQUMsSUFBSSxDQUFDRCxTQUFTO1FBQ3BDO0lBQ0o7SUFFQUssV0FBV3dCLEtBQWMsRUFBUTtRQUM3QixJQUFJLENBQUM3QixTQUFTLENBQUNLLFVBQVUsQ0FBQ3dCO0lBQzlCO0lBRUFDLFNBQVNELEtBQWEsRUFBUTtRQUMxQixJQUFJLENBQUM3QixTQUFTLENBQUM4QixRQUFRLENBQUNEO0lBQzVCO0lBRUFFLGVBQWVDLE9BQWdCLEVBQVE7UUFDbkMsSUFBSSxDQUFDbkMsYUFBYSxDQUFDb0MsT0FBTyxDQUFDLENBQUNDO1lBQ3hCLE1BQU1DLE1BQU1ELElBQUlFLE9BQU8sQ0FBQztZQUN4QixJQUFJLENBQUNELEtBQUs7WUFDVixJQUFJSCxTQUFTO2dCQUNURyxJQUFJSixjQUFjO1lBQ3RCLE9BQU87Z0JBQ0hJLElBQUlFLGtCQUFrQjtZQUMxQjtRQUNKO0lBQ0o7SUFFQUMsaUJBQWlCQyxRQUFpQyxFQUFRO1FBQ3RELElBQUksQ0FBQzFDLGFBQWEsQ0FBQ29DLE9BQU8sQ0FBQyxDQUFDQyxLQUFLTTtZQUM3QixNQUFNTCxNQUFNRCxJQUFJRSxPQUFPLENBQUM7WUFDeEIsSUFBSSxDQUFDRCxLQUFLO1lBQ1ZBLElBQUlNLGtCQUFrQixDQUFDO1lBQ3ZCTixJQUFJTyxFQUFFLENBQUMsZUFBZSxJQUFNSCxTQUFTQztRQUN6QztJQUNKO0lBRUFHLFlBQVlDLElBQTZFLEVBQVE7UUFDN0YsSUFBSSxJQUFJLENBQUM3QyxTQUFTLElBQUk2QyxLQUFLSixLQUFLLElBQUlJLEtBQUtDLEtBQUssRUFBRTtZQUM1QyxJQUFJLENBQUNsQyxTQUFTLENBQUNtQyxPQUFPLENBQUMsQ0FBQyxTQUFTLEVBQUVGLEtBQUtKLEtBQUssQ0FBQyxDQUFDLEVBQUVJLEtBQUtDLEtBQUssRUFBRTtZQUM3RCxJQUFJLENBQUNsQyxTQUFTLENBQUNtQixRQUFRLENBQUM7UUFDNUIsT0FBTztZQUNILElBQUksQ0FBQ25CLFNBQVMsQ0FBQ21CLFFBQVEsQ0FBQztRQUM1QjtRQUVBLE1BQU1pQixtQkFBbUI7UUFDekIsTUFBTUMsV0FDRkosS0FBS0ksUUFBUSxDQUFDQyxNQUFNLEdBQUdGLG1CQUNqQixHQUFHSCxLQUFLSSxRQUFRLENBQUNFLEtBQUssQ0FBQyxHQUFHSCxtQkFBbUIsR0FBRyxDQUFDLENBQUMsR0FDbERILEtBQUtJLFFBQVE7UUFDdkIsSUFBSSxDQUFDekIsWUFBWSxDQUFDdUIsT0FBTyxDQUFDRTtRQUUxQixJQUFJLENBQUNuRCxhQUFhLENBQUNvQyxPQUFPLENBQUMsQ0FBQ0MsS0FBS1Y7WUFDN0IsTUFBTTJCLFNBQVNqQixJQUFJRSxPQUFPLENBQUM7WUFDM0IsTUFBTXhCLE9BQU9zQixJQUFJRSxPQUFPLENBQUM7WUFFekJlLE9BQU87WUFDUHZDLEtBQUt3QyxXQUFXLENBQUM7WUFDakJ4QyxLQUFLa0MsT0FBTyxDQUFDLEdBQUdGLEtBQUtTLE9BQU8sQ0FBQzdCLEVBQUUsSUFBSSxJQUFJO1lBRXZDLElBQUlaLEtBQUtRLEtBQUssR0FBRyxLQUFLUixLQUFLd0MsV0FBVyxDQUFDO1lBQ3ZDLElBQUl4QyxLQUFLUSxLQUFLLEdBQUcsS0FBS1IsS0FBS3dDLFdBQVcsQ0FBQztRQUMzQztJQUNKO0lBRUFFLFlBQVlDLEtBQW1DLEVBQVE7UUFDbkQsSUFBSUEsVUFBVSxXQUFXO1lBQ3JCLElBQUksQ0FBQ3RDLGlCQUFpQixDQUFDNkIsT0FBTyxDQUFDO1lBQy9CLElBQUksQ0FBQzdCLGlCQUFpQixDQUFDdUMsUUFBUSxDQUFDO1lBQ2hDLElBQUksQ0FBQ2xDLG9CQUFvQixDQUFDd0IsT0FBTyxDQUFDO1lBQ2xDLElBQUksQ0FBQ3hCLG9CQUFvQixDQUFDa0MsUUFBUSxDQUFDO1lBQ25DLElBQUksQ0FBQ3ZDLGlCQUFpQixDQUFDYSxRQUFRLENBQUM7WUFDaEMsSUFBSSxDQUFDUixvQkFBb0IsQ0FBQ1EsUUFBUSxDQUFDO1FBQ3ZDLE9BQU8sSUFBSXlCLFVBQVUsU0FBUztZQUMxQixJQUFJLENBQUN0QyxpQkFBaUIsQ0FBQzZCLE9BQU8sQ0FBQztZQUMvQixJQUFJLENBQUM3QixpQkFBaUIsQ0FBQ3VDLFFBQVEsQ0FBQztZQUNoQyxJQUFJLENBQUNsQyxvQkFBb0IsQ0FBQ3dCLE9BQU8sQ0FBQztZQUNsQyxJQUFJLENBQUN4QixvQkFBb0IsQ0FBQ2tDLFFBQVEsQ0FBQztZQUNuQyxJQUFJLENBQUN2QyxpQkFBaUIsQ0FBQ2EsUUFBUSxDQUFDO1lBQ2hDLElBQUksQ0FBQ1Isb0JBQW9CLENBQUNRLFFBQVEsQ0FBQztRQUN2QyxPQUFPO1lBQ0gsSUFBSSxDQUFDYixpQkFBaUIsQ0FBQ2EsUUFBUSxDQUFDO1lBQ2hDLElBQUksQ0FBQ1Isb0JBQW9CLENBQUNRLFFBQVEsQ0FBQztRQUN2QztJQUNKO0lBRUEyQixlQUFlakIsS0FBYSxFQUFFZSxLQUFxQyxFQUFRO1FBQ3ZFLE1BQU1yQixNQUFNLElBQUksQ0FBQ3JDLGFBQWEsQ0FBQzJDLE1BQU07UUFDckMsSUFBSSxDQUFDTixLQUFLO1FBQ1YsTUFBTWlCLFNBQVNqQixJQUFJRSxPQUFPLENBQUM7UUFDM0JlLE9BQU9JO0lBQ1g7SUFFQUcsT0FBT3RDLEtBQWEsRUFBRXVDLE1BQWMsRUFBZ0U7UUFDaEcsTUFBTUMsVUFBVXBFLGtEQUFXLENBQUNzRSxLQUFLLENBQUMxQyxRQUFRLEtBQUssS0FBSztRQUNwRCxNQUFNMkMsYUFBYUYsS0FBS0csS0FBSyxDQUFDNUMsUUFBUTtRQUN0QyxNQUFNNkMsaUJBQWlCSixLQUFLRyxLQUFLLENBQUNMLFNBQVMsT0FBT0M7UUFFbEQsTUFBTU0sZUFBZUwsS0FBS0csS0FBSyxDQUFDRCxhQUFhO1FBQzdDLElBQUksQ0FBQ3hDLFlBQVksQ0FBQzRDLGdCQUFnQixDQUFDRCxjQUFjO1FBQ2pELElBQUksQ0FBQ2pELGlCQUFpQixDQUFDa0QsZ0JBQWdCLENBQUNELGNBQWM7UUFDdEQsSUFBSSxDQUFDNUMsb0JBQW9CLENBQUM2QyxnQkFBZ0IsQ0FBQ0QsY0FBYztRQUV6RCxJQUFJcEQsV0FBVztRQUNmLE1BQU1zRCxVQUFVO1FBQ2hCLElBQUlDLGNBQWM7UUFFbEIsTUFBT3ZELFlBQVlzRCxRQUFTO1lBQ3hCLElBQUksQ0FBQzdDLFlBQVksQ0FBQzZCLFdBQVcsQ0FBQ3RDO1lBQzlCLE1BQU13RCxVQUFVLElBQUksQ0FBQy9DLFlBQVksQ0FBQ2dELFNBQVM7WUFDM0MsTUFBTUMsVUFBVSxJQUFJLENBQUM3RCxTQUFTLENBQUM0RCxTQUFTLEdBQUdaLE1BQU07WUFDakQsTUFBTWMsaUJBQWlCO1lBQ3ZCLE1BQU1DLG9CQUFvQjtZQUMxQixNQUFNQyxjQUFjO1lBQ3BCLE1BQU1DLGlCQUFpQjtZQUN2QixNQUFNQyxvQkFBb0I7WUFDMUIsTUFBTUMsYUFBYTtZQUNuQixNQUFNQyxnQkFBZ0I7WUFDdEIsTUFBTUMsY0FBYztZQUNwQixNQUFNQyxnQkFBZ0I7WUFDdEIsTUFBTUMsZUFBZTtZQUNyQixNQUFNQyxZQUFZO1lBRWxCZCxjQUNJUyxhQUNBTixVQUNBSSxpQkFDQUgsaUJBQ0FFLGNBQ0FELG9CQUNBRyxvQkFDQVAsUUFBUVgsTUFBTSxHQUNkc0IsZ0JBQ0NDLGVBQWUsSUFBSSxDQUFDcEYsV0FBVyxHQUMvQnFGLFlBQWEsS0FBSSxDQUFDckYsV0FBVyxHQUFHLEtBQ2pDaUY7WUFFSixJQUFJVixlQUFlSixnQkFBZ0I7WUFDbkNuRCxZQUFZO1FBQ2hCO1FBRUEsTUFBTXdELFVBQVUsSUFBSSxDQUFDL0MsWUFBWSxDQUFDZ0QsU0FBUztRQUMzQyxNQUFNQyxVQUFVLElBQUksQ0FBQzdELFNBQVMsQ0FBQzRELFNBQVMsR0FBR1osTUFBTTtRQUNqRCxJQUFJbUIsYUFBYTtRQUNqQixJQUFJQyxnQkFBZ0I7UUFDcEIsSUFBSUUsZ0JBQWdCO1FBQ3BCLElBQUlDLGVBQWU7UUFDbkIsSUFBSUMsWUFBWTtRQUNoQixJQUFJUCxpQkFBaUI7UUFDckIsSUFBSUMsb0JBQW9CO1FBQ3hCLE1BQU1KLGlCQUFpQjtRQUN2QixNQUFNQyxvQkFBb0I7UUFDMUIsTUFBTUMsY0FBYztRQUNwQixJQUFJTixjQUFjSixnQkFBZ0I7WUFDOUJhLGFBQWE7WUFDYkMsZ0JBQWdCO1lBQ2hCRSxnQkFBZ0I7WUFDaEJMLGlCQUFpQjtZQUNqQkMsb0JBQW9CO1FBQ3hCO1FBRUEsTUFBTU8sa0JBQWtCO1FBQ3hCLE1BQU1DLGVBQWU7UUFDckIsTUFBTUMsY0FDRlIsYUFDQU4sVUFDQUksaUJBQ0FILGlCQUNBRSxjQUNBRCxvQkFDQUcsb0JBQ0FQLFFBQVFYLE1BQU0sR0FDZHNCLGdCQUNBRjtRQUNKLE1BQU1RLGtCQUFrQjFCLEtBQUsyQixHQUFHLENBQUMsR0FBR3ZCLGlCQUFpQnFCO1FBQ3JELE1BQU1HLHNCQUFzQixlQUFnQixJQUFJLENBQUMzRixXQUFXLEdBQUtxRixZQUFhLEtBQUksQ0FBQ3JGLFdBQVcsR0FBRztRQUNqRyxJQUFJMkYsc0JBQXNCRixpQkFBaUI7WUFDdkMsTUFBTUcsWUFBWTdCLEtBQUtHLEtBQUssQ0FBQyxDQUFDdUIsa0JBQW1CSixZQUFhLEtBQUksQ0FBQ3JGLFdBQVcsR0FBRyxFQUFFLElBQUssSUFBSSxDQUFDQSxXQUFXO1lBQ3hHb0YsZUFBZTFGLGtEQUFXLENBQUNzRSxLQUFLLENBQUM0QixXQUFXTixpQkFBaUJGO1lBQzdELE1BQU1TLFlBQVlKLGtCQUFtQkwsZUFBZSxJQUFJLENBQUNwRixXQUFXO1lBQ3BFLE1BQU04RixTQUFTL0IsS0FBS0csS0FBSyxDQUFDMkIsWUFBYSxLQUFJLENBQUM3RixXQUFXLEdBQUc7WUFDMURxRixZQUFZM0Ysa0RBQVcsQ0FBQ3NFLEtBQUssQ0FBQzhCLFFBQVFQLGNBQWNGO1FBQ3hEO1FBRUFkLGNBQ0lTLGFBQ0FOLFVBQ0FJLGlCQUNBSCxpQkFDQUUsY0FDQUQsb0JBQ0FHLG9CQUNBUCxRQUFRWCxNQUFNLEdBQ2RzQixnQkFDQ0MsZUFBZSxJQUFJLENBQUNwRixXQUFXLEdBQy9CcUYsWUFBYSxLQUFJLENBQUNyRixXQUFXLEdBQUcsS0FDakNpRjtRQUVKLE1BQU1jLFNBQVN6RSxRQUFRO1FBQ3ZCLE1BQU0wRSxTQUFTbkMsU0FBUztRQUN4QixJQUFJLENBQUNyRCxjQUFjLENBQUN5RixRQUFRLENBQUNuQztRQUM3QixJQUFJLENBQUN0RCxjQUFjLENBQUMwRixXQUFXLENBQUNILFFBQVFDO1FBRXhDLElBQUksQ0FBQ3ZGLFdBQVcsQ0FBQzBGLEtBQUs7UUFDdEIsSUFBSSxDQUFDMUYsV0FBVyxDQUFDMkYsU0FBUyxDQUFDLFVBQVU7UUFDckMsSUFBSSxDQUFDM0YsV0FBVyxDQUFDNEYsZUFBZSxDQUFDLENBQUNwQyxhQUFhLElBQUksR0FBRyxDQUFDTSxjQUFjLElBQUksSUFBSU4sWUFBWU0sYUFBYTtRQUV0RyxJQUFJLENBQUM1RCxPQUFPLENBQUN3RixLQUFLO1FBQ2xCLElBQUksQ0FBQ3hGLE9BQU8sQ0FBQ3lGLFNBQVMsQ0FBQyxVQUFVO1FBQ2pDLElBQUksQ0FBQ3pGLE9BQU8sQ0FBQzBGLGVBQWUsQ0FBQyxDQUFDcEMsYUFBYSxHQUFHLENBQUNNLGNBQWMsR0FBR04sWUFBWU0sYUFBYTtRQUN6RixJQUFJLENBQUM1RCxPQUFPLENBQUMyRixTQUFTLENBQUMsR0FBRyxVQUFVO1FBQ3BDLElBQUksQ0FBQzNGLE9BQU8sQ0FBQzRGLGlCQUFpQixDQUFDLENBQUN0QyxhQUFhLEdBQUcsQ0FBQ00sY0FBYyxHQUFHTixZQUFZTSxhQUFhO1FBRTNGLElBQUksQ0FBQzNELFNBQVMsQ0FBQ3VGLEtBQUs7UUFDcEIsSUFBSSxDQUFDdkYsU0FBUyxDQUFDd0YsU0FBUyxDQUFDLFVBQVU7UUFDbkMsSUFBSSxDQUFDeEYsU0FBUyxDQUFDeUYsZUFBZSxDQUFDLENBQUNwQyxhQUFhLElBQUksSUFBSSxDQUFDTSxjQUFjLElBQUksSUFBSU4sYUFBYSxJQUFJTSxjQUFjLElBQUk7UUFFL0csTUFBTWlDLFVBQVUsQ0FBQ2pDLGNBQWMsSUFBSVM7UUFDbkMsSUFBSSxDQUFDbkUsU0FBUyxDQUFDcUYsV0FBVyxDQUFDLEdBQUdNO1FBQzlCLE1BQU1DLFlBQVlELFVBQVU5QixVQUFVSTtRQUN0QyxJQUFJLENBQUMzRCxpQkFBaUIsQ0FBQytFLFdBQVcsQ0FBQyxHQUFHTztRQUN0QyxJQUFJLENBQUNqRixvQkFBb0IsQ0FBQzBFLFdBQVcsQ0FBQyxHQUFHTyxZQUFZOUIsaUJBQWlCRTtRQUN0RSxNQUFNNkIsWUFBWUQsWUFBWTlCLGlCQUFpQkUsY0FBY0Qsb0JBQW9CRztRQUNqRixJQUFJLENBQUN0RCxZQUFZLENBQUN5RSxXQUFXLENBQUMsR0FBR1E7UUFFakMsTUFBTUMsZ0JBQWdCRCxZQUFZbEMsUUFBUVgsTUFBTSxHQUFHc0IsZ0JBQWlCQyxlQUFlO1FBQ25GLElBQUksQ0FBQ3JGLGFBQWEsQ0FBQ29DLE9BQU8sQ0FBQyxDQUFDQyxLQUFLVjtZQUM3QixNQUFNa0YsSUFBSUQsZ0JBQWdCakYsSUFBSzBELENBQUFBLGVBQWVDLFNBQVE7WUFDdERqRCxJQUFJOEQsV0FBVyxDQUFDLEdBQUdVO1lBQ25CeEUsSUFBSXlFLE9BQU8sQ0FBQyxVQUFVO2dCQUFFQyxHQUFHLENBQUM3QyxhQUFhLElBQUk7Z0JBQUk4QyxHQUFHOUMsYUFBYTtnQkFBSStDLEdBQUc1QjtnQkFBYzZCLFFBQVE7WUFBRztZQUNqRyxNQUFNNUQsU0FBU2pCLElBQUlFLE9BQU8sQ0FBQztZQUMzQmUsT0FBTztZQUNQLE1BQU12QyxPQUFPc0IsSUFBSUUsT0FBTyxDQUFDO1lBQ3pCLE1BQU1ELE1BQU1ELElBQUlFLE9BQU8sQ0FBQztZQUN4QixNQUFNc0IsU0FBU3hCLElBQUlFLE9BQU8sQ0FBQztZQUMzQnhCLEtBQUtvRixXQUFXLENBQUN0QyxPQUFPa0QsQ0FBQyxHQUFHbEQsT0FBT21ELENBQUMsR0FBRyxHQUFHO1lBQzFDMUUsSUFBSTZFLE9BQU8sQ0FBQ3RELE9BQU9tRCxDQUFDLEVBQUVuRCxPQUFPb0QsQ0FBQztZQUM5QjNFLElBQUk2RCxXQUFXLENBQUN0QyxPQUFPa0QsQ0FBQyxHQUFHbEQsT0FBT21ELENBQUMsR0FBRyxHQUFHO1lBQ3pDM0UsSUFBSThFLE9BQU8sQ0FBQ3RELE9BQU9tRCxDQUFDLEVBQUVuRCxPQUFPb0QsQ0FBQztRQUNsQztRQUVBLE1BQU1HLFlBQVksY0FBZXJELFVBQVc7UUFDNUMsSUFBSSxJQUFJLENBQUN0RCxjQUFjLENBQUNvRyxDQUFDLEdBQUdPLFlBQVksSUFBSTtZQUN4QyxJQUFJLENBQUMzRyxjQUFjLENBQUNvRyxDQUFDLEdBQUcsS0FBS087UUFDakM7UUFDQSxJQUFJLElBQUksQ0FBQzNHLGNBQWMsQ0FBQ29HLENBQUMsR0FBR08sWUFBWXRELFNBQVMsSUFBSTtZQUNqRCxJQUFJLENBQUNyRCxjQUFjLENBQUNvRyxDQUFDLEdBQUcvQyxTQUFTLEtBQUtzRDtRQUMxQztRQUVBLE9BQU87WUFBRXJEO1lBQVNTO1lBQWFOO1FBQVc7SUFDOUM7SUFFUXJDLG1CQUFtQmtGLENBQVMsRUFBRUYsQ0FBUyxFQUFnQztRQUMzRSxNQUFNMUcsWUFBWSxJQUFJLENBQUNMLEtBQUssQ0FBQ00sR0FBRyxDQUFDRCxTQUFTLENBQUM0RyxHQUFHRjtRQUU5QyxNQUFNdEYsUUFBUTtRQUNkLE1BQU11QyxTQUFTO1FBQ2YsTUFBTW9ELFNBQVM7UUFDZixNQUFNRyxZQUFZO1FBRWxCLE1BQU1DLFNBQVMsSUFBSSxDQUFDeEgsS0FBSyxDQUFDTSxHQUFHLENBQUNPLFFBQVE7UUFDdEMsTUFBTTRHLEtBQUssSUFBSSxDQUFDekgsS0FBSyxDQUFDTSxHQUFHLENBQUNPLFFBQVE7UUFFbEMsTUFBTUksT0FBTyxJQUFJLENBQUNqQixLQUFLLENBQUNNLEdBQUcsQ0FBQ1csSUFBSSxDQUFDLEdBQUcsR0FBRyxPQUFPO1lBQzFDQyxZQUFZO1lBQ1pDLFVBQVU7WUFDVkMsT0FBTztRQUNYLEdBQUdDLFNBQVMsQ0FBQztRQUViLE1BQU1tQixNQUFNLElBQUksQ0FBQ3hDLEtBQUssQ0FBQ00sR0FBRyxDQUFDb0gsU0FBUyxDQUFDLEdBQUcsR0FBR2pHLE9BQU91QyxRQUFRLFVBQVU7UUFDcEV4QixJQUFJSixjQUFjO1FBRWxCLE1BQU1vQixTQUFTLENBQUNJO1lBQ1osTUFBTUcsU0FBUzFELFVBQVVvQyxPQUFPLENBQUM7WUFDakMsTUFBTWtGLFFBQVE1RCxRQUFRa0QsS0FBSyxDQUFDeEYsUUFBUTtZQUNwQyxNQUFNbUcsUUFBUTdELFFBQVFtRCxLQUFLekY7WUFDM0IsTUFBTW9HLFFBQVE5RCxRQUFRb0QsS0FBS25EO1lBQzNCLE1BQU04RCxRQUFRL0QsUUFBUXFELFVBQVVBO1lBRWhDLElBQUlXLE9BQU9SO1lBQ1gsSUFBSVMsU0FBUztZQUViLElBQUlwRSxVQUFVLFdBQVc7Z0JBQ3JCbUUsT0FBTztnQkFDUEMsU0FBUztZQUNiLE9BQU8sSUFBSXBFLFVBQVUsU0FBUztnQkFDMUJtRSxPQUFPO2dCQUNQQyxTQUFTO1lBQ2I7WUFFQVIsT0FBT2xCLEtBQUs7WUFDWmtCLE9BQU9qQixTQUFTLENBQUMsVUFBVTtZQUMzQmlCLE9BQU9oQixlQUFlLENBQUNtQixRQUFRLEdBQUcsQ0FBQ0UsUUFBUSxJQUFJLEdBQUdELE9BQU9DLE9BQU9DO1lBRWhFTCxHQUFHbkIsS0FBSztZQUNSbUIsR0FBR2xCLFNBQVMsQ0FBQ3dCLE1BQU07WUFDbkJOLEdBQUdqQixlQUFlLENBQUNtQixPQUFPLENBQUNFLFFBQVEsR0FBR0QsT0FBT0MsT0FBT0M7WUFDcERMLEdBQUdoQixTQUFTLENBQUMsR0FBR3VCLFFBQVE7WUFDeEJQLEdBQUdmLGlCQUFpQixDQUFDaUIsT0FBTyxDQUFDRSxRQUFRLEdBQUdELE9BQU9DLE9BQU9DO1FBQzFEO1FBRUF0RSxPQUFPO1FBRVBuRCxVQUFVQyxHQUFHLENBQUM7WUFBQ2tIO1lBQVFDO1lBQUl4RztZQUFNdUI7U0FBSTtRQUNyQ25DLFVBQVVnSCxPQUFPLENBQUM1RixPQUFPdUM7UUFFekIzRCxVQUFVMkcsT0FBTyxDQUFDLFVBQVV4RDtRQUM1Qm5ELFVBQVUyRyxPQUFPLENBQUMsUUFBUS9GO1FBQzFCWixVQUFVMkcsT0FBTyxDQUFDLE9BQU94RTtRQUV6QixPQUFPbkM7SUFDWDtBQUNKIiwic291cmNlcyI6WyIvVXNlcnMvbmIyMzA2MDEvRG9jdW1lbnRzL3BoYXNlci1nYW1lZGV2L3NyYy9nYW1lL3VpL1F1aXpQYW5lbC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUGhhc2VyIGZyb20gJ3BoYXNlcic7XG5cbnR5cGUgUXVpelBhbmVsQ29uZmlnID0ge1xuICAgIG9wdGlvbkNvdW50PzogbnVtYmVyO1xuICAgIGRlcHRoPzogbnVtYmVyO1xuICAgIHBhcmVudD86IFBoYXNlci5HYW1lT2JqZWN0cy5Db250YWluZXI7XG4gICAgc2hvd0luZGV4PzogYm9vbGVhbjtcbn07XG5cbmV4cG9ydCBjbGFzcyBRdWl6UGFuZWwge1xuICAgIHJlYWRvbmx5IHNjZW5lOiBQaGFzZXIuU2NlbmU7XG4gICAgcmVhZG9ubHkgY29udGFpbmVyOiBQaGFzZXIuR2FtZU9iamVjdHMuQ29udGFpbmVyO1xuICAgIHJlYWRvbmx5IHBhbmVsQ29udGFpbmVyOiBQaGFzZXIuR2FtZU9iamVjdHMuQ29udGFpbmVyO1xuICAgIHJlYWRvbmx5IHBhbmVsU2hhZG93OiBQaGFzZXIuR2FtZU9iamVjdHMuR3JhcGhpY3M7XG4gICAgcmVhZG9ubHkgcGFuZWxCZzogUGhhc2VyLkdhbWVPYmplY3RzLkdyYXBoaWNzO1xuICAgIHJlYWRvbmx5IHBhbmVsR2xvdzogUGhhc2VyLkdhbWVPYmplY3RzLkdyYXBoaWNzO1xuICAgIHJlYWRvbmx5IGluZGV4VGV4dDogUGhhc2VyLkdhbWVPYmplY3RzLlRleHQ7XG4gICAgcmVhZG9ubHkgZmVlZGJhY2tUaXRsZVRleHQ6IFBoYXNlci5HYW1lT2JqZWN0cy5UZXh0O1xuICAgIHJlYWRvbmx5IGZlZWRiYWNrU3VidGl0bGVUZXh0OiBQaGFzZXIuR2FtZU9iamVjdHMuVGV4dDtcbiAgICByZWFkb25seSBxdWVzdGlvblRleHQ6IFBoYXNlci5HYW1lT2JqZWN0cy5UZXh0O1xuICAgIHJlYWRvbmx5IG9wdGlvbkJ1dHRvbnM6IFBoYXNlci5HYW1lT2JqZWN0cy5Db250YWluZXJbXSA9IFtdO1xuXG4gICAgcHJpdmF0ZSByZWFkb25seSBvcHRpb25Db3VudDogbnVtYmVyO1xuICAgIHByaXZhdGUgcmVhZG9ubHkgc2hvd0luZGV4OiBib29sZWFuO1xuXG4gICAgY29uc3RydWN0b3Ioc2NlbmU6IFBoYXNlci5TY2VuZSwgY29uZmlnOiBRdWl6UGFuZWxDb25maWcgPSB7fSkge1xuICAgICAgICB0aGlzLnNjZW5lID0gc2NlbmU7XG4gICAgICAgIHRoaXMub3B0aW9uQ291bnQgPSBjb25maWcub3B0aW9uQ291bnQgPz8gNDtcbiAgICAgICAgdGhpcy5zaG93SW5kZXggPSBjb25maWcuc2hvd0luZGV4ID8/IHRydWU7XG5cbiAgICAgICAgdGhpcy5jb250YWluZXIgPSB0aGlzLnNjZW5lLmFkZC5jb250YWluZXIoMCwgMCkuc2V0RGVwdGgoY29uZmlnLmRlcHRoID8/IDIwMCk7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLnNldFNjcm9sbEZhY3RvcigwKTtcbiAgICAgICAgdGhpcy5jb250YWluZXIuc2V0VmlzaWJsZShmYWxzZSk7XG5cbiAgICAgICAgdGhpcy5wYW5lbENvbnRhaW5lciA9IHRoaXMuc2NlbmUuYWRkLmNvbnRhaW5lcigwLCAwKTtcbiAgICAgICAgdGhpcy5wYW5lbFNoYWRvdyA9IHRoaXMuc2NlbmUuYWRkLmdyYXBoaWNzKCk7XG4gICAgICAgIHRoaXMucGFuZWxCZyA9IHRoaXMuc2NlbmUuYWRkLmdyYXBoaWNzKCk7XG4gICAgICAgIHRoaXMucGFuZWxHbG93ID0gdGhpcy5zY2VuZS5hZGQuZ3JhcGhpY3MoKTtcblxuICAgICAgICB0aGlzLmluZGV4VGV4dCA9IHRoaXMuc2NlbmUuYWRkLnRleHQoMCwgMCwgJ1F1ZXN0aW9uIDEvNCcsIHtcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCBCbGFjaycsXG4gICAgICAgICAgICBmb250U2l6ZTogJzE0cHgnLFxuICAgICAgICAgICAgY29sb3I6ICcjMzhiZGY4J1xuICAgICAgICB9KS5zZXRPcmlnaW4oMC41LCAwKTtcblxuICAgICAgICB0aGlzLmZlZWRiYWNrVGl0bGVUZXh0ID0gdGhpcy5zY2VuZS5hZGQudGV4dCgwLCAwLCAnQ29ycmVjdCEnLCB7XG4gICAgICAgICAgICBmb250RmFtaWx5OiAnQXJpYWwgQmxhY2snLFxuICAgICAgICAgICAgZm9udFNpemU6ICcyMnB4JyxcbiAgICAgICAgICAgIGNvbG9yOiAnIzIyYzU1ZScsXG4gICAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsXG4gICAgICAgICAgICB3b3JkV3JhcDogeyB3aWR0aDogNjAwLCB1c2VBZHZhbmNlZFdyYXA6IHRydWUgfVxuICAgICAgICB9KS5zZXRPcmlnaW4oMC41LCAwKTtcblxuICAgICAgICB0aGlzLmZlZWRiYWNrU3VidGl0bGVUZXh0ID0gdGhpcy5zY2VuZS5hZGQudGV4dCgwLCAwLCAnWW91IGVhcm5lZCAxIHBvaW50IScsIHtcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCBCbGFjaycsXG4gICAgICAgICAgICBmb250U2l6ZTogJzE4cHgnLFxuICAgICAgICAgICAgY29sb3I6ICcjMTZhMzRhJyxcbiAgICAgICAgICAgIGFsaWduOiAnY2VudGVyJyxcbiAgICAgICAgICAgIHdvcmRXcmFwOiB7IHdpZHRoOiA2MDAsIHVzZUFkdmFuY2VkV3JhcDogdHJ1ZSB9XG4gICAgICAgIH0pLnNldE9yaWdpbigwLjUsIDApO1xuXG4gICAgICAgIHRoaXMucXVlc3Rpb25UZXh0ID0gdGhpcy5zY2VuZS5hZGQudGV4dCgwLCAwLCAnLi4uJywge1xuICAgICAgICAgICAgZm9udEZhbWlseTogJ0FyaWFsIEJsYWNrJyxcbiAgICAgICAgICAgIGZvbnRTaXplOiAnMjhweCcsXG4gICAgICAgICAgICBjb2xvcjogJyMwZjE3MmEnLFxuICAgICAgICAgICAgYWxpZ246ICdjZW50ZXInLFxuICAgICAgICAgICAgd29yZFdyYXA6IHsgd2lkdGg6IDYwMCwgdXNlQWR2YW5jZWRXcmFwOiB0cnVlIH1cbiAgICAgICAgfSkuc2V0T3JpZ2luKDAuNSwgMCk7XG5cbiAgICAgICAgdGhpcy5wYW5lbENvbnRhaW5lci5hZGQoW1xuICAgICAgICAgICAgdGhpcy5wYW5lbFNoYWRvdyxcbiAgICAgICAgICAgIHRoaXMucGFuZWxCZyxcbiAgICAgICAgICAgIHRoaXMucGFuZWxHbG93LFxuICAgICAgICAgICAgdGhpcy5pbmRleFRleHQsXG4gICAgICAgICAgICB0aGlzLmZlZWRiYWNrVGl0bGVUZXh0LFxuICAgICAgICAgICAgdGhpcy5mZWVkYmFja1N1YnRpdGxlVGV4dCxcbiAgICAgICAgICAgIHRoaXMucXVlc3Rpb25UZXh0XG4gICAgICAgIF0pO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5vcHRpb25Db3VudDsgaSArPSAxKSB7XG4gICAgICAgICAgICBjb25zdCBvcHRpb24gPSB0aGlzLmNyZWF0ZU9wdGlvbkJ1dHRvbigwLCAwKTtcbiAgICAgICAgICAgIHRoaXMub3B0aW9uQnV0dG9ucy5wdXNoKG9wdGlvbik7XG4gICAgICAgICAgICB0aGlzLnBhbmVsQ29udGFpbmVyLmFkZChvcHRpb24pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jb250YWluZXIuYWRkKHRoaXMucGFuZWxDb250YWluZXIpO1xuXG4gICAgICAgIGlmIChjb25maWcucGFyZW50KSB7XG4gICAgICAgICAgICBjb25maWcucGFyZW50LmFkZCh0aGlzLmNvbnRhaW5lcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRWaXNpYmxlKHZhbHVlOiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLnNldFZpc2libGUodmFsdWUpO1xuICAgIH1cblxuICAgIHNldEFscGhhKHZhbHVlOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5jb250YWluZXIuc2V0QWxwaGEodmFsdWUpO1xuICAgIH1cblxuICAgIHNldEludGVyYWN0aXZlKGVuYWJsZWQ6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5vcHRpb25CdXR0b25zLmZvckVhY2goKGJ0bikgPT4ge1xuICAgICAgICAgICAgY29uc3QgaGl0ID0gYnRuLmdldERhdGEoJ2hpdCcpIGFzIFBoYXNlci5HYW1lT2JqZWN0cy5SZWN0YW5nbGUgfCB1bmRlZmluZWQ7XG4gICAgICAgICAgICBpZiAoIWhpdCkgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKGVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICBoaXQuc2V0SW50ZXJhY3RpdmUoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaGl0LmRpc2FibGVJbnRlcmFjdGl2ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBvbk9wdGlvblNlbGVjdGVkKGNhbGxiYWNrOiAoaW5kZXg6IG51bWJlcikgPT4gdm9pZCk6IHZvaWQge1xuICAgICAgICB0aGlzLm9wdGlvbkJ1dHRvbnMuZm9yRWFjaCgoYnRuLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaGl0ID0gYnRuLmdldERhdGEoJ2hpdCcpIGFzIFBoYXNlci5HYW1lT2JqZWN0cy5SZWN0YW5nbGUgfCB1bmRlZmluZWQ7XG4gICAgICAgICAgICBpZiAoIWhpdCkgcmV0dXJuO1xuICAgICAgICAgICAgaGl0LnJlbW92ZUFsbExpc3RlbmVycygncG9pbnRlcmRvd24nKTtcbiAgICAgICAgICAgIGhpdC5vbigncG9pbnRlcmRvd24nLCAoKSA9PiBjYWxsYmFjayhpbmRleCkpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzZXRRdWVzdGlvbihkYXRhOiB7IGluZGV4PzogbnVtYmVyOyB0b3RhbD86IG51bWJlcjsgcXVlc3Rpb246IHN0cmluZzsgb3B0aW9uczogc3RyaW5nW10gfSk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5zaG93SW5kZXggJiYgZGF0YS5pbmRleCAmJiBkYXRhLnRvdGFsKSB7XG4gICAgICAgICAgICB0aGlzLmluZGV4VGV4dC5zZXRUZXh0KGBRdWVzdGlvbiAke2RhdGEuaW5kZXh9LyR7ZGF0YS50b3RhbH1gKTtcbiAgICAgICAgICAgIHRoaXMuaW5kZXhUZXh0LnNldEFscGhhKDEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5pbmRleFRleHQuc2V0QWxwaGEoMCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBtYXhRdWVzdGlvbkNoYXJzID0gNTU7XG4gICAgICAgIGNvbnN0IHF1ZXN0aW9uID1cbiAgICAgICAgICAgIGRhdGEucXVlc3Rpb24ubGVuZ3RoID4gbWF4UXVlc3Rpb25DaGFyc1xuICAgICAgICAgICAgICAgID8gYCR7ZGF0YS5xdWVzdGlvbi5zbGljZSgwLCBtYXhRdWVzdGlvbkNoYXJzIC0gMSl94oCmYFxuICAgICAgICAgICAgICAgIDogZGF0YS5xdWVzdGlvbjtcbiAgICAgICAgdGhpcy5xdWVzdGlvblRleHQuc2V0VGV4dChxdWVzdGlvbik7XG5cbiAgICAgICAgdGhpcy5vcHRpb25CdXR0b25zLmZvckVhY2goKGJ0biwgaSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVkcmF3ID0gYnRuLmdldERhdGEoJ3JlZHJhdycpIGFzIChzdGF0ZTogJ25vcm1hbCcgfCAnY29ycmVjdCcgfCAnd3JvbmcnKSA9PiB2b2lkO1xuICAgICAgICAgICAgY29uc3QgdGV4dCA9IGJ0bi5nZXREYXRhKCd0ZXh0JykgYXMgUGhhc2VyLkdhbWVPYmplY3RzLlRleHQ7XG5cbiAgICAgICAgICAgIHJlZHJhdygnbm9ybWFsJyk7XG4gICAgICAgICAgICB0ZXh0LnNldEZvbnRTaXplKDIwKTtcbiAgICAgICAgICAgIHRleHQuc2V0VGV4dChgJHtkYXRhLm9wdGlvbnNbaV0gPz8gJyd9YCk7XG5cbiAgICAgICAgICAgIGlmICh0ZXh0LndpZHRoID4gNTIwKSB0ZXh0LnNldEZvbnRTaXplKDE4KTtcbiAgICAgICAgICAgIGlmICh0ZXh0LndpZHRoID4gNTYwKSB0ZXh0LnNldEZvbnRTaXplKDE3KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc2V0RmVlZGJhY2soc3RhdGU6ICdpZGxlJyB8ICdjb3JyZWN0JyB8ICd3cm9uZycpOiB2b2lkIHtcbiAgICAgICAgaWYgKHN0YXRlID09PSAnY29ycmVjdCcpIHtcbiAgICAgICAgICAgIHRoaXMuZmVlZGJhY2tUaXRsZVRleHQuc2V0VGV4dCgnQ29ycmVjdCEnKTtcbiAgICAgICAgICAgIHRoaXMuZmVlZGJhY2tUaXRsZVRleHQuc2V0Q29sb3IoJyMyMmM1NWUnKTtcbiAgICAgICAgICAgIHRoaXMuZmVlZGJhY2tTdWJ0aXRsZVRleHQuc2V0VGV4dCgnWW91IGVhcm5lZCAxIHBvaW50IScpO1xuICAgICAgICAgICAgdGhpcy5mZWVkYmFja1N1YnRpdGxlVGV4dC5zZXRDb2xvcignIzE2YTM0YScpO1xuICAgICAgICAgICAgdGhpcy5mZWVkYmFja1RpdGxlVGV4dC5zZXRBbHBoYSgxKTtcbiAgICAgICAgICAgIHRoaXMuZmVlZGJhY2tTdWJ0aXRsZVRleHQuc2V0QWxwaGEoMSk7XG4gICAgICAgIH0gZWxzZSBpZiAoc3RhdGUgPT09ICd3cm9uZycpIHtcbiAgICAgICAgICAgIHRoaXMuZmVlZGJhY2tUaXRsZVRleHQuc2V0VGV4dCgnU29ycnkhJyk7XG4gICAgICAgICAgICB0aGlzLmZlZWRiYWNrVGl0bGVUZXh0LnNldENvbG9yKCcjZWY0NDQ0Jyk7XG4gICAgICAgICAgICB0aGlzLmZlZWRiYWNrU3VidGl0bGVUZXh0LnNldFRleHQoJ1lvdSBoYXZlIHRvIHN0YXJ0IG92ZXIuJyk7XG4gICAgICAgICAgICB0aGlzLmZlZWRiYWNrU3VidGl0bGVUZXh0LnNldENvbG9yKCcjMGYxNzJhJyk7XG4gICAgICAgICAgICB0aGlzLmZlZWRiYWNrVGl0bGVUZXh0LnNldEFscGhhKDEpO1xuICAgICAgICAgICAgdGhpcy5mZWVkYmFja1N1YnRpdGxlVGV4dC5zZXRBbHBoYSgxKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZmVlZGJhY2tUaXRsZVRleHQuc2V0QWxwaGEoMCk7XG4gICAgICAgICAgICB0aGlzLmZlZWRiYWNrU3VidGl0bGVUZXh0LnNldEFscGhhKDApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0T3B0aW9uU3RhdGUoaW5kZXg6IG51bWJlciwgc3RhdGU6ICdub3JtYWwnIHwgJ2NvcnJlY3QnIHwgJ3dyb25nJyk6IHZvaWQge1xuICAgICAgICBjb25zdCBidG4gPSB0aGlzLm9wdGlvbkJ1dHRvbnNbaW5kZXhdO1xuICAgICAgICBpZiAoIWJ0bikgcmV0dXJuO1xuICAgICAgICBjb25zdCByZWRyYXcgPSBidG4uZ2V0RGF0YSgncmVkcmF3JykgYXMgKHZhbHVlOiAnbm9ybWFsJyB8ICdjb3JyZWN0JyB8ICd3cm9uZycpID0+IHZvaWQ7XG4gICAgICAgIHJlZHJhdyhzdGF0ZSk7XG4gICAgfVxuXG4gICAgbGF5b3V0KHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKTogeyB1aVNjYWxlOiBudW1iZXI7IHBhbmVsSGVpZ2h0OiBudW1iZXI7IHBhbmVsV2lkdGg6IG51bWJlciB9IHtcbiAgICAgICAgY29uc3QgdWlTY2FsZSA9IFBoYXNlci5NYXRoLkNsYW1wKHdpZHRoIC8gOTAwLCAwLjksIDEuMDUpO1xuICAgICAgICBjb25zdCBwYW5lbFdpZHRoID0gTWF0aC5mbG9vcih3aWR0aCAqIDAuOSk7XG4gICAgICAgIGNvbnN0IG1heFBhbmVsSGVpZ2h0ID0gTWF0aC5mbG9vcihoZWlnaHQgKiAwLjYyIC8gdWlTY2FsZSk7XG5cbiAgICAgICAgY29uc3QgcXVlc3Rpb25XcmFwID0gTWF0aC5mbG9vcihwYW5lbFdpZHRoICogMC44KTtcbiAgICAgICAgdGhpcy5xdWVzdGlvblRleHQuc2V0V29yZFdyYXBXaWR0aChxdWVzdGlvbldyYXAsIHRydWUpO1xuICAgICAgICB0aGlzLmZlZWRiYWNrVGl0bGVUZXh0LnNldFdvcmRXcmFwV2lkdGgocXVlc3Rpb25XcmFwLCB0cnVlKTtcbiAgICAgICAgdGhpcy5mZWVkYmFja1N1YnRpdGxlVGV4dC5zZXRXb3JkV3JhcFdpZHRoKHF1ZXN0aW9uV3JhcCwgdHJ1ZSk7XG5cbiAgICAgICAgbGV0IGZvbnRTaXplID0gMjg7XG4gICAgICAgIGNvbnN0IG1pbkZvbnQgPSAyMDtcbiAgICAgICAgbGV0IHBhbmVsSGVpZ2h0ID0gMDtcblxuICAgICAgICB3aGlsZSAoZm9udFNpemUgPj0gbWluRm9udCkge1xuICAgICAgICAgICAgdGhpcy5xdWVzdGlvblRleHQuc2V0Rm9udFNpemUoZm9udFNpemUpO1xuICAgICAgICAgICAgY29uc3QgcUJvdW5kcyA9IHRoaXMucXVlc3Rpb25UZXh0LmdldEJvdW5kcygpO1xuICAgICAgICAgICAgY29uc3QgaGVhZGVySCA9IHRoaXMuaW5kZXhUZXh0LmdldEJvdW5kcygpLmhlaWdodDtcbiAgICAgICAgICAgIGNvbnN0IGZlZWRiYWNrVGl0bGVIID0gMjI7XG4gICAgICAgICAgICBjb25zdCBmZWVkYmFja1N1YnRpdGxlSCA9IDE4O1xuICAgICAgICAgICAgY29uc3QgZmVlZGJhY2tHYXAgPSA0O1xuICAgICAgICAgICAgY29uc3QgZmVlZGJhY2tUb3BHYXAgPSA4O1xuICAgICAgICAgICAgY29uc3QgZmVlZGJhY2tCb3R0b21HYXAgPSA4O1xuICAgICAgICAgICAgY29uc3QgcGFkZGluZ1RvcCA9IDEwO1xuICAgICAgICAgICAgY29uc3QgcGFkZGluZ0JvdHRvbSA9IDE0O1xuICAgICAgICAgICAgY29uc3QgcXVlc3Rpb25HYXAgPSA2O1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9uc1RvcEdhcCA9IDE0O1xuICAgICAgICAgICAgY29uc3QgYnV0dG9uSGVpZ2h0ID0gNjI7XG4gICAgICAgICAgICBjb25zdCBidXR0b25HYXAgPSAxNDtcblxuICAgICAgICAgICAgcGFuZWxIZWlnaHQgPVxuICAgICAgICAgICAgICAgIHBhZGRpbmdUb3AgK1xuICAgICAgICAgICAgICAgIGhlYWRlckggK1xuICAgICAgICAgICAgICAgIGZlZWRiYWNrVG9wR2FwICtcbiAgICAgICAgICAgICAgICBmZWVkYmFja1RpdGxlSCArXG4gICAgICAgICAgICAgICAgZmVlZGJhY2tHYXAgK1xuICAgICAgICAgICAgICAgIGZlZWRiYWNrU3VidGl0bGVIICtcbiAgICAgICAgICAgICAgICBmZWVkYmFja0JvdHRvbUdhcCArXG4gICAgICAgICAgICAgICAgcUJvdW5kcy5oZWlnaHQgK1xuICAgICAgICAgICAgICAgIG9wdGlvbnNUb3BHYXAgK1xuICAgICAgICAgICAgICAgIChidXR0b25IZWlnaHQgKiB0aGlzLm9wdGlvbkNvdW50KSArXG4gICAgICAgICAgICAgICAgKGJ1dHRvbkdhcCAqICh0aGlzLm9wdGlvbkNvdW50IC0gMSkpICtcbiAgICAgICAgICAgICAgICBwYWRkaW5nQm90dG9tO1xuXG4gICAgICAgICAgICBpZiAocGFuZWxIZWlnaHQgPD0gbWF4UGFuZWxIZWlnaHQpIGJyZWFrO1xuICAgICAgICAgICAgZm9udFNpemUgLT0gMjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHFCb3VuZHMgPSB0aGlzLnF1ZXN0aW9uVGV4dC5nZXRCb3VuZHMoKTtcbiAgICAgICAgY29uc3QgaGVhZGVySCA9IHRoaXMuaW5kZXhUZXh0LmdldEJvdW5kcygpLmhlaWdodDtcbiAgICAgICAgbGV0IHBhZGRpbmdUb3AgPSAxMjtcbiAgICAgICAgbGV0IHBhZGRpbmdCb3R0b20gPSAxNjtcbiAgICAgICAgbGV0IG9wdGlvbnNUb3BHYXAgPSAxNDtcbiAgICAgICAgbGV0IGJ1dHRvbkhlaWdodCA9IDYyO1xuICAgICAgICBsZXQgYnV0dG9uR2FwID0gMTQ7XG4gICAgICAgIGxldCBmZWVkYmFja1RvcEdhcCA9IDg7XG4gICAgICAgIGxldCBmZWVkYmFja0JvdHRvbUdhcCA9IDg7XG4gICAgICAgIGNvbnN0IGZlZWRiYWNrVGl0bGVIID0gMjI7XG4gICAgICAgIGNvbnN0IGZlZWRiYWNrU3VidGl0bGVIID0gMTg7XG4gICAgICAgIGNvbnN0IGZlZWRiYWNrR2FwID0gNDtcbiAgICAgICAgaWYgKHBhbmVsSGVpZ2h0ID4gbWF4UGFuZWxIZWlnaHQpIHtcbiAgICAgICAgICAgIHBhZGRpbmdUb3AgPSAxMDtcbiAgICAgICAgICAgIHBhZGRpbmdCb3R0b20gPSAxMjtcbiAgICAgICAgICAgIG9wdGlvbnNUb3BHYXAgPSAxMjtcbiAgICAgICAgICAgIGZlZWRiYWNrVG9wR2FwID0gNjtcbiAgICAgICAgICAgIGZlZWRiYWNrQm90dG9tR2FwID0gNjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG1pbkJ1dHRvbkhlaWdodCA9IDUyO1xuICAgICAgICBjb25zdCBtaW5CdXR0b25HYXAgPSA4O1xuICAgICAgICBjb25zdCBmaXhlZEhlaWdodCA9XG4gICAgICAgICAgICBwYWRkaW5nVG9wICtcbiAgICAgICAgICAgIGhlYWRlckggK1xuICAgICAgICAgICAgZmVlZGJhY2tUb3BHYXAgK1xuICAgICAgICAgICAgZmVlZGJhY2tUaXRsZUggK1xuICAgICAgICAgICAgZmVlZGJhY2tHYXAgK1xuICAgICAgICAgICAgZmVlZGJhY2tTdWJ0aXRsZUggK1xuICAgICAgICAgICAgZmVlZGJhY2tCb3R0b21HYXAgK1xuICAgICAgICAgICAgcUJvdW5kcy5oZWlnaHQgK1xuICAgICAgICAgICAgb3B0aW9uc1RvcEdhcCArXG4gICAgICAgICAgICBwYWRkaW5nQm90dG9tO1xuICAgICAgICBjb25zdCBtYXhCdXR0b25zU3BhY2UgPSBNYXRoLm1heCgwLCBtYXhQYW5lbEhlaWdodCAtIGZpeGVkSGVpZ2h0KTtcbiAgICAgICAgY29uc3QgZGVzaXJlZEJ1dHRvbnNTcGFjZSA9IChidXR0b25IZWlnaHQgKiB0aGlzLm9wdGlvbkNvdW50KSArIChidXR0b25HYXAgKiAodGhpcy5vcHRpb25Db3VudCAtIDEpKTtcbiAgICAgICAgaWYgKGRlc2lyZWRCdXR0b25zU3BhY2UgPiBtYXhCdXR0b25zU3BhY2UpIHtcbiAgICAgICAgICAgIGNvbnN0IHBlckJ1dHRvbiA9IE1hdGguZmxvb3IoKG1heEJ1dHRvbnNTcGFjZSAtIChidXR0b25HYXAgKiAodGhpcy5vcHRpb25Db3VudCAtIDEpKSkgLyB0aGlzLm9wdGlvbkNvdW50KTtcbiAgICAgICAgICAgIGJ1dHRvbkhlaWdodCA9IFBoYXNlci5NYXRoLkNsYW1wKHBlckJ1dHRvbiwgbWluQnV0dG9uSGVpZ2h0LCBidXR0b25IZWlnaHQpO1xuICAgICAgICAgICAgY29uc3QgcmVtYWluaW5nID0gbWF4QnV0dG9uc1NwYWNlIC0gKGJ1dHRvbkhlaWdodCAqIHRoaXMub3B0aW9uQ291bnQpO1xuICAgICAgICAgICAgY29uc3QgcGVyR2FwID0gTWF0aC5mbG9vcihyZW1haW5pbmcgLyAodGhpcy5vcHRpb25Db3VudCAtIDEpKTtcbiAgICAgICAgICAgIGJ1dHRvbkdhcCA9IFBoYXNlci5NYXRoLkNsYW1wKHBlckdhcCwgbWluQnV0dG9uR2FwLCBidXR0b25HYXApO1xuICAgICAgICB9XG5cbiAgICAgICAgcGFuZWxIZWlnaHQgPVxuICAgICAgICAgICAgcGFkZGluZ1RvcCArXG4gICAgICAgICAgICBoZWFkZXJIICtcbiAgICAgICAgICAgIGZlZWRiYWNrVG9wR2FwICtcbiAgICAgICAgICAgIGZlZWRiYWNrVGl0bGVIICtcbiAgICAgICAgICAgIGZlZWRiYWNrR2FwICtcbiAgICAgICAgICAgIGZlZWRiYWNrU3VidGl0bGVIICtcbiAgICAgICAgICAgIGZlZWRiYWNrQm90dG9tR2FwICtcbiAgICAgICAgICAgIHFCb3VuZHMuaGVpZ2h0ICtcbiAgICAgICAgICAgIG9wdGlvbnNUb3BHYXAgK1xuICAgICAgICAgICAgKGJ1dHRvbkhlaWdodCAqIHRoaXMub3B0aW9uQ291bnQpICtcbiAgICAgICAgICAgIChidXR0b25HYXAgKiAodGhpcy5vcHRpb25Db3VudCAtIDEpKSArXG4gICAgICAgICAgICBwYWRkaW5nQm90dG9tO1xuXG4gICAgICAgIGNvbnN0IHBhbmVsWCA9IHdpZHRoIC8gMjtcbiAgICAgICAgY29uc3QgcGFuZWxZID0gaGVpZ2h0IC8gMjtcbiAgICAgICAgdGhpcy5wYW5lbENvbnRhaW5lci5zZXRTY2FsZSh1aVNjYWxlKTtcbiAgICAgICAgdGhpcy5wYW5lbENvbnRhaW5lci5zZXRQb3NpdGlvbihwYW5lbFgsIHBhbmVsWSk7XG5cbiAgICAgICAgdGhpcy5wYW5lbFNoYWRvdy5jbGVhcigpO1xuICAgICAgICB0aGlzLnBhbmVsU2hhZG93LmZpbGxTdHlsZSgweDAwMDAwMCwgMC4xOCk7XG4gICAgICAgIHRoaXMucGFuZWxTaGFkb3cuZmlsbFJvdW5kZWRSZWN0KC1wYW5lbFdpZHRoIC8gMiArIDgsIC1wYW5lbEhlaWdodCAvIDIgKyAxNCwgcGFuZWxXaWR0aCwgcGFuZWxIZWlnaHQsIDI4KTtcblxuICAgICAgICB0aGlzLnBhbmVsQmcuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5wYW5lbEJnLmZpbGxTdHlsZSgweGY4ZmJmZiwgMC45Mik7XG4gICAgICAgIHRoaXMucGFuZWxCZy5maWxsUm91bmRlZFJlY3QoLXBhbmVsV2lkdGggLyAyLCAtcGFuZWxIZWlnaHQgLyAyLCBwYW5lbFdpZHRoLCBwYW5lbEhlaWdodCwgMjgpO1xuICAgICAgICB0aGlzLnBhbmVsQmcubGluZVN0eWxlKDIsIDB4OTNjNWZkLCAwLjYpO1xuICAgICAgICB0aGlzLnBhbmVsQmcuc3Ryb2tlUm91bmRlZFJlY3QoLXBhbmVsV2lkdGggLyAyLCAtcGFuZWxIZWlnaHQgLyAyLCBwYW5lbFdpZHRoLCBwYW5lbEhlaWdodCwgMjgpO1xuXG4gICAgICAgIHRoaXMucGFuZWxHbG93LmNsZWFyKCk7XG4gICAgICAgIHRoaXMucGFuZWxHbG93LmZpbGxTdHlsZSgweGUwZjJmZSwgMC41KTtcbiAgICAgICAgdGhpcy5wYW5lbEdsb3cuZmlsbFJvdW5kZWRSZWN0KC1wYW5lbFdpZHRoIC8gMiArIDEwLCAtcGFuZWxIZWlnaHQgLyAyICsgMTAsIHBhbmVsV2lkdGggLSAyMCwgcGFuZWxIZWlnaHQgLSAyMCwgMjApO1xuXG4gICAgICAgIGNvbnN0IGhlYWRlclkgPSAtcGFuZWxIZWlnaHQgLyAyICsgcGFkZGluZ1RvcDtcbiAgICAgICAgdGhpcy5pbmRleFRleHQuc2V0UG9zaXRpb24oMCwgaGVhZGVyWSk7XG4gICAgICAgIGNvbnN0IGZlZWRiYWNrWSA9IGhlYWRlclkgKyBoZWFkZXJIICsgZmVlZGJhY2tUb3BHYXA7XG4gICAgICAgIHRoaXMuZmVlZGJhY2tUaXRsZVRleHQuc2V0UG9zaXRpb24oMCwgZmVlZGJhY2tZKTtcbiAgICAgICAgdGhpcy5mZWVkYmFja1N1YnRpdGxlVGV4dC5zZXRQb3NpdGlvbigwLCBmZWVkYmFja1kgKyBmZWVkYmFja1RpdGxlSCArIGZlZWRiYWNrR2FwKTtcbiAgICAgICAgY29uc3QgcXVlc3Rpb25ZID0gZmVlZGJhY2tZICsgZmVlZGJhY2tUaXRsZUggKyBmZWVkYmFja0dhcCArIGZlZWRiYWNrU3VidGl0bGVIICsgZmVlZGJhY2tCb3R0b21HYXA7XG4gICAgICAgIHRoaXMucXVlc3Rpb25UZXh0LnNldFBvc2l0aW9uKDAsIHF1ZXN0aW9uWSk7XG5cbiAgICAgICAgY29uc3QgYW5zd2Vyc1N0YXJ0WSA9IHF1ZXN0aW9uWSArIHFCb3VuZHMuaGVpZ2h0ICsgb3B0aW9uc1RvcEdhcCArIChidXR0b25IZWlnaHQgLyAyKTtcbiAgICAgICAgdGhpcy5vcHRpb25CdXR0b25zLmZvckVhY2goKGJ0biwgaSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeSA9IGFuc3dlcnNTdGFydFkgKyBpICogKGJ1dHRvbkhlaWdodCArIGJ1dHRvbkdhcCk7XG4gICAgICAgICAgICBidG4uc2V0UG9zaXRpb24oMCwgeSk7XG4gICAgICAgICAgICBidG4uc2V0RGF0YSgnbGF5b3V0JywgeyB4OiAtcGFuZWxXaWR0aCAvIDIgKyAzMiwgdzogcGFuZWxXaWR0aCAtIDY0LCBoOiBidXR0b25IZWlnaHQsIHJhZGl1czogMjIgfSk7XG4gICAgICAgICAgICBjb25zdCByZWRyYXcgPSBidG4uZ2V0RGF0YSgncmVkcmF3JykgYXMgKHN0YXRlOiAnbm9ybWFsJyB8ICdjb3JyZWN0JyB8ICd3cm9uZycpID0+IHZvaWQ7XG4gICAgICAgICAgICByZWRyYXcoJ25vcm1hbCcpO1xuICAgICAgICAgICAgY29uc3QgdGV4dCA9IGJ0bi5nZXREYXRhKCd0ZXh0JykgYXMgUGhhc2VyLkdhbWVPYmplY3RzLlRleHQ7XG4gICAgICAgICAgICBjb25zdCBoaXQgPSBidG4uZ2V0RGF0YSgnaGl0JykgYXMgUGhhc2VyLkdhbWVPYmplY3RzLlJlY3RhbmdsZTtcbiAgICAgICAgICAgIGNvbnN0IGxheW91dCA9IGJ0bi5nZXREYXRhKCdsYXlvdXQnKSBhcyB7IHg6IG51bWJlcjsgdzogbnVtYmVyOyBoOiBudW1iZXI7IHJhZGl1czogbnVtYmVyIH07XG4gICAgICAgICAgICB0ZXh0LnNldFBvc2l0aW9uKGxheW91dC54ICsgbGF5b3V0LncgLyAyLCAwKTtcbiAgICAgICAgICAgIGhpdC5zZXRTaXplKGxheW91dC53LCBsYXlvdXQuaCk7XG4gICAgICAgICAgICBoaXQuc2V0UG9zaXRpb24obGF5b3V0LnggKyBsYXlvdXQudyAvIDIsIDApO1xuICAgICAgICAgICAgYnRuLnNldFNpemUobGF5b3V0LncsIGxheW91dC5oKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgaGFsZlBhbmVsID0gKHBhbmVsSGVpZ2h0ICogdWlTY2FsZSkgLyAyO1xuICAgICAgICBpZiAodGhpcy5wYW5lbENvbnRhaW5lci55IC0gaGFsZlBhbmVsIDwgNjApIHtcbiAgICAgICAgICAgIHRoaXMucGFuZWxDb250YWluZXIueSA9IDYwICsgaGFsZlBhbmVsO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnBhbmVsQ29udGFpbmVyLnkgKyBoYWxmUGFuZWwgPiBoZWlnaHQgLSA0MCkge1xuICAgICAgICAgICAgdGhpcy5wYW5lbENvbnRhaW5lci55ID0gaGVpZ2h0IC0gNDAgLSBoYWxmUGFuZWw7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4geyB1aVNjYWxlLCBwYW5lbEhlaWdodCwgcGFuZWxXaWR0aCB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlT3B0aW9uQnV0dG9uKHg6IG51bWJlciwgeTogbnVtYmVyKTogUGhhc2VyLkdhbWVPYmplY3RzLkNvbnRhaW5lciB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuc2NlbmUuYWRkLmNvbnRhaW5lcih4LCB5KTtcblxuICAgICAgICBjb25zdCB3aWR0aCA9IDY0MDtcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gNTQ7XG4gICAgICAgIGNvbnN0IHJhZGl1cyA9IDIyO1xuICAgICAgICBjb25zdCBiYXNlQ29sb3IgPSAweDM4YmRmODtcblxuICAgICAgICBjb25zdCBzaGFkb3cgPSB0aGlzLnNjZW5lLmFkZC5ncmFwaGljcygpO1xuICAgICAgICBjb25zdCBiZyA9IHRoaXMuc2NlbmUuYWRkLmdyYXBoaWNzKCk7XG5cbiAgICAgICAgY29uc3QgdGV4dCA9IHRoaXMuc2NlbmUuYWRkLnRleHQoMCwgMCwgJy4uLicsIHtcbiAgICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCBCbGFjaycsXG4gICAgICAgICAgICBmb250U2l6ZTogJzIwcHgnLFxuICAgICAgICAgICAgY29sb3I6ICcjZmZmZmZmJ1xuICAgICAgICB9KS5zZXRPcmlnaW4oMC41KTtcblxuICAgICAgICBjb25zdCBoaXQgPSB0aGlzLnNjZW5lLmFkZC5yZWN0YW5nbGUoMCwgMCwgd2lkdGgsIGhlaWdodCwgMHhmZmZmZmYsIDAuMDAxKTtcbiAgICAgICAgaGl0LnNldEludGVyYWN0aXZlKCk7XG5cbiAgICAgICAgY29uc3QgcmVkcmF3ID0gKHN0YXRlOiAnbm9ybWFsJyB8ICdjb3JyZWN0JyB8ICd3cm9uZycpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGxheW91dCA9IGNvbnRhaW5lci5nZXREYXRhKCdsYXlvdXQnKSBhcyB7IHg6IG51bWJlcjsgdzogbnVtYmVyOyBoOiBudW1iZXI7IHJhZGl1czogbnVtYmVyIH0gfCB1bmRlZmluZWQ7XG4gICAgICAgICAgICBjb25zdCBkcmF3WCA9IGxheW91dD8ueCA/PyAtd2lkdGggLyAyO1xuICAgICAgICAgICAgY29uc3QgZHJhd1cgPSBsYXlvdXQ/LncgPz8gd2lkdGg7XG4gICAgICAgICAgICBjb25zdCBkcmF3SCA9IGxheW91dD8uaCA/PyBoZWlnaHQ7XG4gICAgICAgICAgICBjb25zdCBkcmF3UiA9IGxheW91dD8ucmFkaXVzID8/IHJhZGl1cztcblxuICAgICAgICAgICAgbGV0IGZpbGwgPSBiYXNlQ29sb3I7XG4gICAgICAgICAgICBsZXQgc3Ryb2tlID0gMHg3ZGQzZmM7XG5cbiAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gJ2NvcnJlY3QnKSB7XG4gICAgICAgICAgICAgICAgZmlsbCA9IDB4MjJjNTVlO1xuICAgICAgICAgICAgICAgIHN0cm9rZSA9IDB4ODZlZmFjO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzdGF0ZSA9PT0gJ3dyb25nJykge1xuICAgICAgICAgICAgICAgIGZpbGwgPSAweGVmNDQ0NDtcbiAgICAgICAgICAgICAgICBzdHJva2UgPSAweGZjYTVhNTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2hhZG93LmNsZWFyKCk7XG4gICAgICAgICAgICBzaGFkb3cuZmlsbFN0eWxlKDB4MDAwMDAwLCAwLjE4KTtcbiAgICAgICAgICAgIHNoYWRvdy5maWxsUm91bmRlZFJlY3QoZHJhd1ggKyAyLCAtZHJhd0ggLyAyICsgNCwgZHJhd1csIGRyYXdILCBkcmF3Uik7XG5cbiAgICAgICAgICAgIGJnLmNsZWFyKCk7XG4gICAgICAgICAgICBiZy5maWxsU3R5bGUoZmlsbCwgMSk7XG4gICAgICAgICAgICBiZy5maWxsUm91bmRlZFJlY3QoZHJhd1gsIC1kcmF3SCAvIDIsIGRyYXdXLCBkcmF3SCwgZHJhd1IpO1xuICAgICAgICAgICAgYmcubGluZVN0eWxlKDIsIHN0cm9rZSwgMC45KTtcbiAgICAgICAgICAgIGJnLnN0cm9rZVJvdW5kZWRSZWN0KGRyYXdYLCAtZHJhd0ggLyAyLCBkcmF3VywgZHJhd0gsIGRyYXdSKTtcbiAgICAgICAgfTtcblxuICAgICAgICByZWRyYXcoJ25vcm1hbCcpO1xuXG4gICAgICAgIGNvbnRhaW5lci5hZGQoW3NoYWRvdywgYmcsIHRleHQsIGhpdF0pO1xuICAgICAgICBjb250YWluZXIuc2V0U2l6ZSh3aWR0aCwgaGVpZ2h0KTtcblxuICAgICAgICBjb250YWluZXIuc2V0RGF0YSgncmVkcmF3JywgcmVkcmF3KTtcbiAgICAgICAgY29udGFpbmVyLnNldERhdGEoJ3RleHQnLCB0ZXh0KTtcbiAgICAgICAgY29udGFpbmVyLnNldERhdGEoJ2hpdCcsIGhpdCk7XG5cbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiUGhhc2VyIiwiUXVpelBhbmVsIiwiY29uc3RydWN0b3IiLCJzY2VuZSIsImNvbmZpZyIsIm9wdGlvbkJ1dHRvbnMiLCJvcHRpb25Db3VudCIsInNob3dJbmRleCIsImNvbnRhaW5lciIsImFkZCIsInNldERlcHRoIiwiZGVwdGgiLCJzZXRTY3JvbGxGYWN0b3IiLCJzZXRWaXNpYmxlIiwicGFuZWxDb250YWluZXIiLCJwYW5lbFNoYWRvdyIsImdyYXBoaWNzIiwicGFuZWxCZyIsInBhbmVsR2xvdyIsImluZGV4VGV4dCIsInRleHQiLCJmb250RmFtaWx5IiwiZm9udFNpemUiLCJjb2xvciIsInNldE9yaWdpbiIsImZlZWRiYWNrVGl0bGVUZXh0IiwiYWxpZ24iLCJ3b3JkV3JhcCIsIndpZHRoIiwidXNlQWR2YW5jZWRXcmFwIiwiZmVlZGJhY2tTdWJ0aXRsZVRleHQiLCJxdWVzdGlvblRleHQiLCJpIiwib3B0aW9uIiwiY3JlYXRlT3B0aW9uQnV0dG9uIiwicHVzaCIsInBhcmVudCIsInZhbHVlIiwic2V0QWxwaGEiLCJzZXRJbnRlcmFjdGl2ZSIsImVuYWJsZWQiLCJmb3JFYWNoIiwiYnRuIiwiaGl0IiwiZ2V0RGF0YSIsImRpc2FibGVJbnRlcmFjdGl2ZSIsIm9uT3B0aW9uU2VsZWN0ZWQiLCJjYWxsYmFjayIsImluZGV4IiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwib24iLCJzZXRRdWVzdGlvbiIsImRhdGEiLCJ0b3RhbCIsInNldFRleHQiLCJtYXhRdWVzdGlvbkNoYXJzIiwicXVlc3Rpb24iLCJsZW5ndGgiLCJzbGljZSIsInJlZHJhdyIsInNldEZvbnRTaXplIiwib3B0aW9ucyIsInNldEZlZWRiYWNrIiwic3RhdGUiLCJzZXRDb2xvciIsInNldE9wdGlvblN0YXRlIiwibGF5b3V0IiwiaGVpZ2h0IiwidWlTY2FsZSIsIk1hdGgiLCJDbGFtcCIsInBhbmVsV2lkdGgiLCJmbG9vciIsIm1heFBhbmVsSGVpZ2h0IiwicXVlc3Rpb25XcmFwIiwic2V0V29yZFdyYXBXaWR0aCIsIm1pbkZvbnQiLCJwYW5lbEhlaWdodCIsInFCb3VuZHMiLCJnZXRCb3VuZHMiLCJoZWFkZXJIIiwiZmVlZGJhY2tUaXRsZUgiLCJmZWVkYmFja1N1YnRpdGxlSCIsImZlZWRiYWNrR2FwIiwiZmVlZGJhY2tUb3BHYXAiLCJmZWVkYmFja0JvdHRvbUdhcCIsInBhZGRpbmdUb3AiLCJwYWRkaW5nQm90dG9tIiwicXVlc3Rpb25HYXAiLCJvcHRpb25zVG9wR2FwIiwiYnV0dG9uSGVpZ2h0IiwiYnV0dG9uR2FwIiwibWluQnV0dG9uSGVpZ2h0IiwibWluQnV0dG9uR2FwIiwiZml4ZWRIZWlnaHQiLCJtYXhCdXR0b25zU3BhY2UiLCJtYXgiLCJkZXNpcmVkQnV0dG9uc1NwYWNlIiwicGVyQnV0dG9uIiwicmVtYWluaW5nIiwicGVyR2FwIiwicGFuZWxYIiwicGFuZWxZIiwic2V0U2NhbGUiLCJzZXRQb3NpdGlvbiIsImNsZWFyIiwiZmlsbFN0eWxlIiwiZmlsbFJvdW5kZWRSZWN0IiwibGluZVN0eWxlIiwic3Ryb2tlUm91bmRlZFJlY3QiLCJoZWFkZXJZIiwiZmVlZGJhY2tZIiwicXVlc3Rpb25ZIiwiYW5zd2Vyc1N0YXJ0WSIsInkiLCJzZXREYXRhIiwieCIsInciLCJoIiwicmFkaXVzIiwic2V0U2l6ZSIsImhhbGZQYW5lbCIsImJhc2VDb2xvciIsInNoYWRvdyIsImJnIiwicmVjdGFuZ2xlIiwiZHJhd1giLCJkcmF3VyIsImRyYXdIIiwiZHJhd1IiLCJmaWxsIiwic3Ryb2tlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/game/ui/QuizPanel.ts\n");

/***/ }),

/***/ "(pages-dir-node)/./src/services/api.ts":
/*!*****************************!*\
  !*** ./src/services/api.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   endGameSession: () => (/* binding */ endGameSession),\n/* harmony export */   fetchGameList: () => (/* binding */ fetchGameList),\n/* harmony export */   startGameSession: () => (/* binding */ startGameSession),\n/* harmony export */   submitAnswer: () => (/* binding */ submitAnswer)\n/* harmony export */ });\nconst API_BASE_URL = (\"https://dev-api.apex-academy.kyanon.dev\" ?? 0 ?? 0).replace(/\\/$/, '');\nconst STATIC_DEBUG_TOKEN = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjMyMDI4N2Y1LWU3NTktNGNlNy1hODZmLWI5NTRkOTU5ZmViMSIsImVtYWlsIjoidGhhbmguZGFvQGt5YW5vbi5kaWdpdGFsIiwiaWF0IjoxNzY3Njg5ODIyLCJleHAiOjE3NzAyODE4MjIsImlzcyI6IkRldkFwZXhBY2FkIn0.bSjUGFkIT87qkij2jobMVw-ZyRYRAUppRdoLTUZsl_o\" ?? 0;\nconst mockGameSession = {\n    id: 'session_mock_001',\n    game_id: 'game_mock_001',\n    game_session_questions: [\n        {\n            id: 'q_1',\n            order: 1,\n            is_answered: false,\n            question_id: 'question_1'\n        },\n        {\n            id: 'q_2',\n            order: 2,\n            is_answered: false,\n            question_id: 'question_2'\n        },\n        {\n            id: 'q_3',\n            order: 3,\n            is_answered: false,\n            question_id: 'question_3'\n        }\n    ],\n    game: {\n        code: 'vocab_race',\n        time_limit: 180\n    }\n};\nconst mockQuestions = [\n    {\n        session_question_id: 'q_1',\n        question: {\n            content: 'Thủ đô của Việt Nam là gì?',\n            options: [\n                {\n                    id: 'q_1_o_1',\n                    text: 'Hà Nội',\n                    is_correct: true\n                },\n                {\n                    id: 'q_1_o_2',\n                    text: 'Đà Nẵng',\n                    is_correct: false\n                },\n                {\n                    id: 'q_1_o_3',\n                    text: 'Hải Phòng',\n                    is_correct: false\n                },\n                {\n                    id: 'q_1_o_4',\n                    text: 'Cần Thơ',\n                    is_correct: false\n                }\n            ]\n        }\n    },\n    {\n        session_question_id: 'q_2',\n        question: {\n            content: 'Phaser sử dụng ngôn ngữ nào?',\n            options: [\n                {\n                    id: 'q_2_o_1',\n                    text: 'TypeScript/JavaScript',\n                    is_correct: true\n                },\n                {\n                    id: 'q_2_o_2',\n                    text: 'C#',\n                    is_correct: false\n                },\n                {\n                    id: 'q_2_o_3',\n                    text: 'Python',\n                    is_correct: false\n                },\n                {\n                    id: 'q_2_o_4',\n                    text: 'Go',\n                    is_correct: false\n                }\n            ]\n        }\n    },\n    {\n        session_question_id: 'q_3',\n        question: {\n            content: 'Chọn từ trái nghĩa của “fast”.',\n            options: [\n                {\n                    id: 'q_3_o_1',\n                    text: 'slow',\n                    is_correct: true\n                },\n                {\n                    id: 'q_3_o_2',\n                    text: 'far',\n                    is_correct: false\n                },\n                {\n                    id: 'q_3_o_3',\n                    text: 'high',\n                    is_correct: false\n                },\n                {\n                    id: 'q_3_o_4',\n                    text: 'small',\n                    is_correct: false\n                }\n            ]\n        }\n    }\n];\nconst delay = (ms)=>new Promise((resolve)=>setTimeout(resolve, ms));\nconst ALWAYS_USE_MOCK_API = true;\nfunction shouldUseMock(options) {\n    if (ALWAYS_USE_MOCK_API) return true;\n    if (options?.forceReal) return false;\n    return true;\n}\nfunction toApiGameCode(gameCode) {\n    if (gameCode === 'train_game' || gameCode === 'train') return 'trains_cars';\n    if (gameCode === 'tower') return 'vocab_race';\n    return gameCode;\n}\nfunction ensureApiBaseUrl() {\n    if (!API_BASE_URL) {\n        throw new Error('Missing NEXT_PUBLIC_API_URL (or VITE_API_URL)');\n    }\n    return API_BASE_URL;\n}\nfunction getAuthHeader() {\n    return {\n        Authorization: `Bearer ${STATIC_DEBUG_TOKEN}`\n    };\n}\nasync function requestJson(path, init) {\n    const baseUrl = ensureApiBaseUrl();\n    const authHeader = getAuthHeader();\n    console.log('[API][HTTP] request', {\n        url: `${baseUrl}${path}`,\n        method: init?.method ?? 'GET',\n        hasAuthToken: Boolean(authHeader.Authorization),\n        authSource:  true ? 'env_debug_token' : 0\n    });\n    console.error('[API][HTTP] request-visible', `${init?.method ?? 'GET'} ${baseUrl}${path}`);\n    const response = await fetch(`${baseUrl}${path}`, {\n        method: init?.method ?? 'GET',\n        headers: {\n            'Content-Type': 'application/json',\n            ...authHeader,\n            ...init?.headers ?? {}\n        },\n        ...init\n    });\n    if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n    }\n    const payload = await response.json();\n    if (!payload?.success) {\n        throw new Error(payload?.message ?? 'API response was not successful');\n    }\n    return payload;\n}\nasync function fetchQuestionDetail(sessionId, sessionQuestionId) {\n    try {\n        const res = await requestJson(`/api/v1/game/${sessionId}/question/${sessionQuestionId}`);\n        return {\n            session_question_id: res.data.id,\n            question: {\n                content: res.data.question.content,\n                options: res.data.question.options.map((opt)=>({\n                        id: opt.id,\n                        text: opt.text,\n                        is_correct: opt.is_correct\n                    }))\n            }\n        };\n    } catch (error) {\n        console.error('fetchQuestionDetail failed', error);\n        return null;\n    }\n}\nasync function fetchSessionQuestionWithFallback(sessionId, item) {\n    const bySessionQuestionId = await fetchQuestionDetail(sessionId, item.id);\n    if (bySessionQuestionId) return bySessionQuestionId;\n    if (item.question_id && item.question_id !== item.id) {\n        const byQuestionId = await fetchQuestionDetail(sessionId, item.question_id);\n        if (byQuestionId) return byQuestionId;\n    }\n    console.error('[API][REAL] Cannot resolve question detail from both ids', {\n        sessionId,\n        sessionQuestionId: item.id,\n        questionId: item.question_id\n    });\n    return null;\n}\nasync function startGameSession(gameCode, options) {\n    console.log('[API] startGameSession invoked', {\n        gameCode,\n        forceReal: Boolean(options?.forceReal),\n        mockMode: shouldUseMock(options)\n    });\n    if (shouldUseMock(options)) {\n        await delay(200);\n        console.log('[API][MOCK] startGameSession', {\n            gameCode,\n            sessionId: mockGameSession.id,\n            gameId: mockGameSession.game_id,\n            questionCount: mockQuestions.length\n        });\n        return {\n            success: true,\n            message: `Mock start for ${gameCode}`,\n            data: {\n                ...mockGameSession,\n                questions: mockQuestions\n            }\n        };\n    }\n    const apiGameCode = toApiGameCode(gameCode);\n    const sessionRes = await requestJson('/api/v1/game/start-game', {\n        method: 'POST',\n        body: JSON.stringify({\n            game_code: apiGameCode\n        })\n    });\n    const sessionId = sessionRes.data.id;\n    const sessionQuestions = sessionRes.data.game_session_questions ?? [];\n    const details = await Promise.all(sessionQuestions.sort((a, b)=>a.order - b.order).map((item)=>fetchSessionQuestionWithFallback(sessionId, item)));\n    const questions = details.filter((item)=>item !== null);\n    if (questions.length === 0) {\n        throw new Error('No question details resolved from real API');\n    }\n    return {\n        ...sessionRes,\n        data: {\n            ...sessionRes.data,\n            questions\n        }\n    };\n}\nasync function fetchGameList(options) {\n    if (shouldUseMock(options)) {\n        await delay(120);\n        return {\n            success: true,\n            message: 'Mock game list',\n            data: [\n                {\n                    id: 'mock_town',\n                    code: 'vocab_race',\n                    name: 'Town',\n                    is_accessible: true\n                },\n                {\n                    id: 'mock_train',\n                    code: 'trains_cars',\n                    name: 'Train',\n                    is_accessible: true\n                }\n            ]\n        };\n    }\n    return requestJson('/api/v1/game/list-game');\n}\nasync function submitAnswer(sessionId, sessionQuestionId, answerId, options) {\n    if (shouldUseMock(options)) {\n        await delay(120);\n        console.log('[API][MOCK] submitAnswer', {\n            sessionId,\n            sessionQuestionId,\n            answerId\n        });\n        return {\n            success: true,\n            message: 'Mock answer submitted',\n            data: {\n                remain_sec: 0,\n                is_end_game: false,\n                is_win: false,\n                is_lose: false,\n                is_correct: true,\n                is_answered: true,\n                session: {\n                    id: sessionId,\n                    score: 0,\n                    current_question: 0\n                }\n            }\n        };\n    }\n    return requestJson('/api/v1/game/answer', {\n        method: 'POST',\n        body: JSON.stringify({\n            session_id: sessionId,\n            question_id: sessionQuestionId,\n            answer_id: answerId\n        })\n    });\n}\nasync function endGameSession(gameId, score, options) {\n    if (shouldUseMock(options)) {\n        await delay(150);\n        console.log('[API][MOCK] endGameSession', {\n            gameId,\n            score\n        });\n        return {\n            success: true,\n            message: `Mock end for ${gameId} with score ${score}`,\n            data: {\n                ok: true\n            }\n        };\n    }\n    return requestJson('/api/v1/game/answer-batching', {\n        method: 'POST',\n        body: JSON.stringify({\n            game_id: gameId,\n            score\n        })\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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L2FwaS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgdHlwZSBHYW1lT3B0aW9uID0ge1xuICAgIGlkPzogc3RyaW5nO1xuICAgIHRleHQ6IHN0cmluZztcbiAgICBpc19jb3JyZWN0OiBib29sZWFuO1xufTtcblxuZXhwb3J0IHR5cGUgR2FtZVF1ZXN0aW9uID0ge1xuICAgIHNlc3Npb25fcXVlc3Rpb25faWQ/OiBzdHJpbmc7XG4gICAgcXVlc3Rpb246IHtcbiAgICAgICAgY29udGVudDogc3RyaW5nO1xuICAgICAgICBvcHRpb25zOiBHYW1lT3B0aW9uW107XG4gICAgfTtcbn07XG5cbnR5cGUgUmF3U2Vzc2lvblF1ZXN0aW9uID0ge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgb3JkZXI6IG51bWJlcjtcbiAgICBpc19hbnN3ZXJlZDogYm9vbGVhbjtcbiAgICBxdWVzdGlvbl9pZDogc3RyaW5nO1xufTtcblxuZXhwb3J0IHR5cGUgU3RhcnRHYW1lU2Vzc2lvbkRhdGEgPSB7XG4gICAgaWQ6IHN0cmluZztcbiAgICBnYW1lX2lkOiBzdHJpbmc7XG4gICAgZ2FtZV9zZXNzaW9uX3F1ZXN0aW9uczogUmF3U2Vzc2lvblF1ZXN0aW9uW107XG4gICAgZ2FtZToge1xuICAgICAgICBjb2RlPzogc3RyaW5nO1xuICAgICAgICB0aW1lX2xpbWl0OiBudW1iZXI7XG4gICAgfTtcbn07XG5cbmV4cG9ydCB0eXBlIEdhbWVMaXN0SXRlbSA9IHtcbiAgICBpZDogc3RyaW5nO1xuICAgIGNvZGU6IHN0cmluZztcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgaXNfYWNjZXNzaWJsZTogYm9vbGVhbjtcbn07XG5cbmV4cG9ydCB0eXBlIEFuc3dlclN1Ym1pdFJlc3BvbnNlID0ge1xuICAgIHJlbWFpbl9zZWM6IG51bWJlcjtcbiAgICBpc19lbmRfZ2FtZTogYm9vbGVhbjtcbiAgICBpc193aW46IGJvb2xlYW47XG4gICAgaXNfbG9zZTogYm9vbGVhbjtcbiAgICBpc19jb3JyZWN0OiBib29sZWFuO1xuICAgIGlzX2Fuc3dlcmVkOiBib29sZWFuO1xuICAgIHNlc3Npb246IHtcbiAgICAgICAgaWQ6IHN0cmluZztcbiAgICAgICAgc2NvcmU6IG51bWJlcjtcbiAgICAgICAgY3VycmVudF9xdWVzdGlvbjogbnVtYmVyO1xuICAgIH07XG59O1xuXG50eXBlIEFwaVJlc3BvbnNlPFQ+ID0ge1xuICAgIHN1Y2Nlc3M6IGJvb2xlYW47XG4gICAgbWVzc2FnZT86IHN0cmluZztcbiAgICBkYXRhOiBUO1xufTtcblxudHlwZSBBcGlDYWxsT3B0aW9ucyA9IHtcbiAgICBmb3JjZVJlYWw/OiBib29sZWFuO1xufTtcblxuY29uc3QgQVBJX0JBU0VfVVJMID0gKHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FQSV9VUkwgPz8gcHJvY2Vzcy5lbnYuVklURV9BUElfVVJMID8/ICcnKS5yZXBsYWNlKC9cXC8kLywgJycpO1xuY29uc3QgU1RBVElDX0RFQlVHX1RPS0VOID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfREVCVUdfQkVBUkVSX1RPS0VOID8/ICdkZWJ1Zy1zdGF0aWMtdG9rZW4nO1xuXG5jb25zdCBtb2NrR2FtZVNlc3Npb246IFN0YXJ0R2FtZVNlc3Npb25EYXRhID0ge1xuICAgIGlkOiAnc2Vzc2lvbl9tb2NrXzAwMScsXG4gICAgZ2FtZV9pZDogJ2dhbWVfbW9ja18wMDEnLFxuICAgIGdhbWVfc2Vzc2lvbl9xdWVzdGlvbnM6IFtcbiAgICAgICAgeyBpZDogJ3FfMScsIG9yZGVyOiAxLCBpc19hbnN3ZXJlZDogZmFsc2UsIHF1ZXN0aW9uX2lkOiAncXVlc3Rpb25fMScgfSxcbiAgICAgICAgeyBpZDogJ3FfMicsIG9yZGVyOiAyLCBpc19hbnN3ZXJlZDogZmFsc2UsIHF1ZXN0aW9uX2lkOiAncXVlc3Rpb25fMicgfSxcbiAgICAgICAgeyBpZDogJ3FfMycsIG9yZGVyOiAzLCBpc19hbnN3ZXJlZDogZmFsc2UsIHF1ZXN0aW9uX2lkOiAncXVlc3Rpb25fMycgfVxuICAgIF0sXG4gICAgZ2FtZToge1xuICAgICAgICBjb2RlOiAndm9jYWJfcmFjZScsXG4gICAgICAgIHRpbWVfbGltaXQ6IDE4MFxuICAgIH1cbn07XG5cbmNvbnN0IG1vY2tRdWVzdGlvbnM6IEdhbWVRdWVzdGlvbltdID0gW1xuICAgIHtcbiAgICAgICAgc2Vzc2lvbl9xdWVzdGlvbl9pZDogJ3FfMScsXG4gICAgICAgIHF1ZXN0aW9uOiB7XG4gICAgICAgICAgICBjb250ZW50OiAnVGjhu6cgxJHDtCBj4bunYSBWaeG7h3QgTmFtIGzDoCBnw6w/JyxcbiAgICAgICAgICAgIG9wdGlvbnM6IFtcbiAgICAgICAgICAgICAgICB7IGlkOiAncV8xX29fMScsIHRleHQ6ICdIw6AgTuG7mWknLCBpc19jb3JyZWN0OiB0cnVlIH0sXG4gICAgICAgICAgICAgICAgeyBpZDogJ3FfMV9vXzInLCB0ZXh0OiAnxJDDoCBO4bq1bmcnLCBpc19jb3JyZWN0OiBmYWxzZSB9LFxuICAgICAgICAgICAgICAgIHsgaWQ6ICdxXzFfb18zJywgdGV4dDogJ0jhuqNpIFBow7JuZycsIGlzX2NvcnJlY3Q6IGZhbHNlIH0sXG4gICAgICAgICAgICAgICAgeyBpZDogJ3FfMV9vXzQnLCB0ZXh0OiAnQ+G6p24gVGjGoScsIGlzX2NvcnJlY3Q6IGZhbHNlIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgICBzZXNzaW9uX3F1ZXN0aW9uX2lkOiAncV8yJyxcbiAgICAgICAgcXVlc3Rpb246IHtcbiAgICAgICAgICAgIGNvbnRlbnQ6ICdQaGFzZXIgc+G7rSBk4bulbmcgbmfDtG4gbmfhu68gbsOgbz8nLFxuICAgICAgICAgICAgb3B0aW9uczogW1xuICAgICAgICAgICAgICAgIHsgaWQ6ICdxXzJfb18xJywgdGV4dDogJ1R5cGVTY3JpcHQvSmF2YVNjcmlwdCcsIGlzX2NvcnJlY3Q6IHRydWUgfSxcbiAgICAgICAgICAgICAgICB7IGlkOiAncV8yX29fMicsIHRleHQ6ICdDIycsIGlzX2NvcnJlY3Q6IGZhbHNlIH0sXG4gICAgICAgICAgICAgICAgeyBpZDogJ3FfMl9vXzMnLCB0ZXh0OiAnUHl0aG9uJywgaXNfY29ycmVjdDogZmFsc2UgfSxcbiAgICAgICAgICAgICAgICB7IGlkOiAncV8yX29fNCcsIHRleHQ6ICdHbycsIGlzX2NvcnJlY3Q6IGZhbHNlIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgICBzZXNzaW9uX3F1ZXN0aW9uX2lkOiAncV8zJyxcbiAgICAgICAgcXVlc3Rpb246IHtcbiAgICAgICAgICAgIGNvbnRlbnQ6ICdDaOG7jW4gdOG7qyB0csOhaSBuZ2jEqWEgY+G7p2Eg4oCcZmFzdOKAnS4nLFxuICAgICAgICAgICAgb3B0aW9uczogW1xuICAgICAgICAgICAgICAgIHsgaWQ6ICdxXzNfb18xJywgdGV4dDogJ3Nsb3cnLCBpc19jb3JyZWN0OiB0cnVlIH0sXG4gICAgICAgICAgICAgICAgeyBpZDogJ3FfM19vXzInLCB0ZXh0OiAnZmFyJywgaXNfY29ycmVjdDogZmFsc2UgfSxcbiAgICAgICAgICAgICAgICB7IGlkOiAncV8zX29fMycsIHRleHQ6ICdoaWdoJywgaXNfY29ycmVjdDogZmFsc2UgfSxcbiAgICAgICAgICAgICAgICB7IGlkOiAncV8zX29fNCcsIHRleHQ6ICdzbWFsbCcsIGlzX2NvcnJlY3Q6IGZhbHNlIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgfVxuICAgIH1cbl07XG5cbmNvbnN0IGRlbGF5ID0gKG1zOiBudW1iZXIpID0+IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7XG5jb25zdCBBTFdBWVNfVVNFX01PQ0tfQVBJID0gdHJ1ZTtcblxuZnVuY3Rpb24gc2hvdWxkVXNlTW9jayhvcHRpb25zPzogQXBpQ2FsbE9wdGlvbnMpOiBib29sZWFuIHtcbiAgICBpZiAoQUxXQVlTX1VTRV9NT0NLX0FQSSkgcmV0dXJuIHRydWU7XG4gICAgaWYgKG9wdGlvbnM/LmZvcmNlUmVhbCkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiB0b0FwaUdhbWVDb2RlKGdhbWVDb2RlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmIChnYW1lQ29kZSA9PT0gJ3RyYWluX2dhbWUnIHx8IGdhbWVDb2RlID09PSAndHJhaW4nKSByZXR1cm4gJ3RyYWluc19jYXJzJztcbiAgICBpZiAoZ2FtZUNvZGUgPT09ICd0b3dlcicpIHJldHVybiAndm9jYWJfcmFjZSc7XG4gICAgcmV0dXJuIGdhbWVDb2RlO1xufVxuXG5mdW5jdGlvbiBlbnN1cmVBcGlCYXNlVXJsKCk6IHN0cmluZyB7XG4gICAgaWYgKCFBUElfQkFTRV9VUkwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIE5FWFRfUFVCTElDX0FQSV9VUkwgKG9yIFZJVEVfQVBJX1VSTCknKTtcbiAgICB9XG5cbiAgICByZXR1cm4gQVBJX0JBU0VfVVJMO1xufVxuXG5mdW5jdGlvbiBnZXRBdXRoSGVhZGVyKCk6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4ge1xuICAgIHJldHVybiB7XG4gICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtTVEFUSUNfREVCVUdfVE9LRU59YFxuICAgIH07XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHJlcXVlc3RKc29uPFQ+KHBhdGg6IHN0cmluZywgaW5pdD86IFJlcXVlc3RJbml0KTogUHJvbWlzZTxBcGlSZXNwb25zZTxUPj4ge1xuICAgIGNvbnN0IGJhc2VVcmwgPSBlbnN1cmVBcGlCYXNlVXJsKCk7XG4gICAgY29uc3QgYXV0aEhlYWRlciA9IGdldEF1dGhIZWFkZXIoKTtcbiAgICBjb25zb2xlLmxvZygnW0FQSV1bSFRUUF0gcmVxdWVzdCcsIHtcbiAgICAgICAgdXJsOiBgJHtiYXNlVXJsfSR7cGF0aH1gLFxuICAgICAgICBtZXRob2Q6IGluaXQ/Lm1ldGhvZCA/PyAnR0VUJyxcbiAgICAgICAgaGFzQXV0aFRva2VuOiBCb29sZWFuKGF1dGhIZWFkZXIuQXV0aG9yaXphdGlvbiksXG4gICAgICAgIGF1dGhTb3VyY2U6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0RFQlVHX0JFQVJFUl9UT0tFTiA/ICdlbnZfZGVidWdfdG9rZW4nIDogJ2hhcmRjb2RlZF9kZWJ1Z190b2tlbidcbiAgICB9KTtcbiAgICBjb25zb2xlLmVycm9yKCdbQVBJXVtIVFRQXSByZXF1ZXN0LXZpc2libGUnLCBgJHtpbml0Py5tZXRob2QgPz8gJ0dFVCd9ICR7YmFzZVVybH0ke3BhdGh9YCk7XG5cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke2Jhc2VVcmx9JHtwYXRofWAsIHtcbiAgICAgICAgbWV0aG9kOiBpbml0Py5tZXRob2QgPz8gJ0dFVCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAuLi5hdXRoSGVhZGVyLFxuICAgICAgICAgICAgLi4uKGluaXQ/LmhlYWRlcnMgPz8ge30pXG4gICAgICAgIH0sXG4gICAgICAgIC4uLmluaXRcbiAgICB9KTtcblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIVFRQIGVycm9yISBzdGF0dXM6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xuICAgIH1cblxuICAgIGNvbnN0IHBheWxvYWQgPSAoYXdhaXQgcmVzcG9uc2UuanNvbigpKSBhcyBBcGlSZXNwb25zZTxUPjtcbiAgICBpZiAoIXBheWxvYWQ/LnN1Y2Nlc3MpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHBheWxvYWQ/Lm1lc3NhZ2UgPz8gJ0FQSSByZXNwb25zZSB3YXMgbm90IHN1Y2Nlc3NmdWwnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcGF5bG9hZDtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZmV0Y2hRdWVzdGlvbkRldGFpbChzZXNzaW9uSWQ6IHN0cmluZywgc2Vzc2lvblF1ZXN0aW9uSWQ6IHN0cmluZyk6IFByb21pc2U8R2FtZVF1ZXN0aW9uIHwgbnVsbD4ge1xuICAgIHR5cGUgUXVlc3Rpb25EZXRhaWxSZXNwb25zZSA9IHtcbiAgICAgICAgaWQ6IHN0cmluZztcbiAgICAgICAgcXVlc3Rpb246IHtcbiAgICAgICAgICAgIGNvbnRlbnQ6IHN0cmluZztcbiAgICAgICAgICAgIG9wdGlvbnM6IEFycmF5PHtcbiAgICAgICAgICAgICAgICBpZDogc3RyaW5nO1xuICAgICAgICAgICAgICAgIHRleHQ6IHN0cmluZztcbiAgICAgICAgICAgICAgICBpc19jb3JyZWN0OiBib29sZWFuO1xuICAgICAgICAgICAgfT47XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHJlcXVlc3RKc29uPFF1ZXN0aW9uRGV0YWlsUmVzcG9uc2U+KFxuICAgICAgICAgICAgYC9hcGkvdjEvZ2FtZS8ke3Nlc3Npb25JZH0vcXVlc3Rpb24vJHtzZXNzaW9uUXVlc3Rpb25JZH1gXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNlc3Npb25fcXVlc3Rpb25faWQ6IHJlcy5kYXRhLmlkLFxuICAgICAgICAgICAgcXVlc3Rpb246IHtcbiAgICAgICAgICAgICAgICBjb250ZW50OiByZXMuZGF0YS5xdWVzdGlvbi5jb250ZW50LFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IHJlcy5kYXRhLnF1ZXN0aW9uLm9wdGlvbnMubWFwKChvcHQpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBvcHQuaWQsXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IG9wdC50ZXh0LFxuICAgICAgICAgICAgICAgICAgICBpc19jb3JyZWN0OiBvcHQuaXNfY29ycmVjdFxuICAgICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ2ZldGNoUXVlc3Rpb25EZXRhaWwgZmFpbGVkJywgZXJyb3IpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGZldGNoU2Vzc2lvblF1ZXN0aW9uV2l0aEZhbGxiYWNrKFxuICAgIHNlc3Npb25JZDogc3RyaW5nLFxuICAgIGl0ZW06IFJhd1Nlc3Npb25RdWVzdGlvblxuKTogUHJvbWlzZTxHYW1lUXVlc3Rpb24gfCBudWxsPiB7XG4gICAgY29uc3QgYnlTZXNzaW9uUXVlc3Rpb25JZCA9IGF3YWl0IGZldGNoUXVlc3Rpb25EZXRhaWwoc2Vzc2lvbklkLCBpdGVtLmlkKTtcbiAgICBpZiAoYnlTZXNzaW9uUXVlc3Rpb25JZCkgcmV0dXJuIGJ5U2Vzc2lvblF1ZXN0aW9uSWQ7XG5cbiAgICBpZiAoaXRlbS5xdWVzdGlvbl9pZCAmJiBpdGVtLnF1ZXN0aW9uX2lkICE9PSBpdGVtLmlkKSB7XG4gICAgICAgIGNvbnN0IGJ5UXVlc3Rpb25JZCA9IGF3YWl0IGZldGNoUXVlc3Rpb25EZXRhaWwoc2Vzc2lvbklkLCBpdGVtLnF1ZXN0aW9uX2lkKTtcbiAgICAgICAgaWYgKGJ5UXVlc3Rpb25JZCkgcmV0dXJuIGJ5UXVlc3Rpb25JZDtcbiAgICB9XG5cbiAgICBjb25zb2xlLmVycm9yKCdbQVBJXVtSRUFMXSBDYW5ub3QgcmVzb2x2ZSBxdWVzdGlvbiBkZXRhaWwgZnJvbSBib3RoIGlkcycsIHtcbiAgICAgICAgc2Vzc2lvbklkLFxuICAgICAgICBzZXNzaW9uUXVlc3Rpb25JZDogaXRlbS5pZCxcbiAgICAgICAgcXVlc3Rpb25JZDogaXRlbS5xdWVzdGlvbl9pZFxuICAgIH0pO1xuICAgIHJldHVybiBudWxsO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc3RhcnRHYW1lU2Vzc2lvbihcbiAgICBnYW1lQ29kZTogc3RyaW5nLFxuICAgIG9wdGlvbnM/OiBBcGlDYWxsT3B0aW9uc1xuKTogUHJvbWlzZTxBcGlSZXNwb25zZTxTdGFydEdhbWVTZXNzaW9uRGF0YSAmIHsgcXVlc3Rpb25zOiBHYW1lUXVlc3Rpb25bXSB9Pj4ge1xuICAgIGNvbnNvbGUubG9nKCdbQVBJXSBzdGFydEdhbWVTZXNzaW9uIGludm9rZWQnLCB7XG4gICAgICAgIGdhbWVDb2RlLFxuICAgICAgICBmb3JjZVJlYWw6IEJvb2xlYW4ob3B0aW9ucz8uZm9yY2VSZWFsKSxcbiAgICAgICAgbW9ja01vZGU6IHNob3VsZFVzZU1vY2sob3B0aW9ucylcbiAgICB9KTtcblxuICAgIGlmIChzaG91bGRVc2VNb2NrKG9wdGlvbnMpKSB7XG4gICAgICAgIGF3YWl0IGRlbGF5KDIwMCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbQVBJXVtNT0NLXSBzdGFydEdhbWVTZXNzaW9uJywge1xuICAgICAgICAgICAgZ2FtZUNvZGUsXG4gICAgICAgICAgICBzZXNzaW9uSWQ6IG1vY2tHYW1lU2Vzc2lvbi5pZCxcbiAgICAgICAgICAgIGdhbWVJZDogbW9ja0dhbWVTZXNzaW9uLmdhbWVfaWQsXG4gICAgICAgICAgICBxdWVzdGlvbkNvdW50OiBtb2NrUXVlc3Rpb25zLmxlbmd0aFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBgTW9jayBzdGFydCBmb3IgJHtnYW1lQ29kZX1gLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIC4uLm1vY2tHYW1lU2Vzc2lvbixcbiAgICAgICAgICAgICAgICBxdWVzdGlvbnM6IG1vY2tRdWVzdGlvbnNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBjb25zdCBhcGlHYW1lQ29kZSA9IHRvQXBpR2FtZUNvZGUoZ2FtZUNvZGUpO1xuICAgIGNvbnN0IHNlc3Npb25SZXMgPSBhd2FpdCByZXF1ZXN0SnNvbjxTdGFydEdhbWVTZXNzaW9uRGF0YT4oJy9hcGkvdjEvZ2FtZS9zdGFydC1nYW1lJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBnYW1lX2NvZGU6IGFwaUdhbWVDb2RlIH0pXG4gICAgfSk7XG5cbiAgICBjb25zdCBzZXNzaW9uSWQgPSBzZXNzaW9uUmVzLmRhdGEuaWQ7XG4gICAgY29uc3Qgc2Vzc2lvblF1ZXN0aW9ucyA9IHNlc3Npb25SZXMuZGF0YS5nYW1lX3Nlc3Npb25fcXVlc3Rpb25zID8/IFtdO1xuXG4gICAgY29uc3QgZGV0YWlscyA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICBzZXNzaW9uUXVlc3Rpb25zXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gYS5vcmRlciAtIGIub3JkZXIpXG4gICAgICAgICAgICAubWFwKChpdGVtKSA9PiBmZXRjaFNlc3Npb25RdWVzdGlvbldpdGhGYWxsYmFjayhzZXNzaW9uSWQsIGl0ZW0pKVxuICAgICk7XG5cbiAgICBjb25zdCBxdWVzdGlvbnMgPSBkZXRhaWxzLmZpbHRlcigoaXRlbSk6IGl0ZW0gaXMgR2FtZVF1ZXN0aW9uID0+IGl0ZW0gIT09IG51bGwpO1xuICAgIGlmIChxdWVzdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gcXVlc3Rpb24gZGV0YWlscyByZXNvbHZlZCBmcm9tIHJlYWwgQVBJJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc2Vzc2lvblJlcyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgLi4uc2Vzc2lvblJlcy5kYXRhLFxuICAgICAgICAgICAgcXVlc3Rpb25zXG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hHYW1lTGlzdChvcHRpb25zPzogQXBpQ2FsbE9wdGlvbnMpOiBQcm9taXNlPEFwaVJlc3BvbnNlPEdhbWVMaXN0SXRlbVtdPj4ge1xuICAgIGlmIChzaG91bGRVc2VNb2NrKG9wdGlvbnMpKSB7XG4gICAgICAgIGF3YWl0IGRlbGF5KDEyMCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgbWVzc2FnZTogJ01vY2sgZ2FtZSBsaXN0JyxcbiAgICAgICAgICAgIGRhdGE6IFtcbiAgICAgICAgICAgICAgICB7IGlkOiAnbW9ja190b3duJywgY29kZTogJ3ZvY2FiX3JhY2UnLCBuYW1lOiAnVG93bicsIGlzX2FjY2Vzc2libGU6IHRydWUgfSxcbiAgICAgICAgICAgICAgICB7IGlkOiAnbW9ja190cmFpbicsIGNvZGU6ICd0cmFpbnNfY2FycycsIG5hbWU6ICdUcmFpbicsIGlzX2FjY2Vzc2libGU6IHRydWUgfVxuICAgICAgICAgICAgXVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiByZXF1ZXN0SnNvbjxHYW1lTGlzdEl0ZW1bXT4oJy9hcGkvdjEvZ2FtZS9saXN0LWdhbWUnKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHN1Ym1pdEFuc3dlcihcbiAgICBzZXNzaW9uSWQ6IHN0cmluZyxcbiAgICBzZXNzaW9uUXVlc3Rpb25JZDogc3RyaW5nLFxuICAgIGFuc3dlcklkOiBzdHJpbmcsXG4gICAgb3B0aW9ucz86IEFwaUNhbGxPcHRpb25zXG4pOiBQcm9taXNlPEFwaVJlc3BvbnNlPEFuc3dlclN1Ym1pdFJlc3BvbnNlPj4ge1xuICAgIGlmIChzaG91bGRVc2VNb2NrKG9wdGlvbnMpKSB7XG4gICAgICAgIGF3YWl0IGRlbGF5KDEyMCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbQVBJXVtNT0NLXSBzdWJtaXRBbnN3ZXInLCB7XG4gICAgICAgICAgICBzZXNzaW9uSWQsXG4gICAgICAgICAgICBzZXNzaW9uUXVlc3Rpb25JZCxcbiAgICAgICAgICAgIGFuc3dlcklkXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdNb2NrIGFuc3dlciBzdWJtaXR0ZWQnLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIHJlbWFpbl9zZWM6IDAsXG4gICAgICAgICAgICAgICAgaXNfZW5kX2dhbWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGlzX3dpbjogZmFsc2UsXG4gICAgICAgICAgICAgICAgaXNfbG9zZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgaXNfY29ycmVjdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBpc19hbnN3ZXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzZXNzaW9uOiB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBzZXNzaW9uSWQsXG4gICAgICAgICAgICAgICAgICAgIHNjb3JlOiAwLFxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50X3F1ZXN0aW9uOiAwXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiByZXF1ZXN0SnNvbjxBbnN3ZXJTdWJtaXRSZXNwb25zZT4oJy9hcGkvdjEvZ2FtZS9hbnN3ZXInLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICBzZXNzaW9uX2lkOiBzZXNzaW9uSWQsXG4gICAgICAgICAgICBxdWVzdGlvbl9pZDogc2Vzc2lvblF1ZXN0aW9uSWQsXG4gICAgICAgICAgICBhbnN3ZXJfaWQ6IGFuc3dlcklkXG4gICAgICAgIH0pXG4gICAgfSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBlbmRHYW1lU2Vzc2lvbihcbiAgICBnYW1lSWQ6IHN0cmluZyxcbiAgICBzY29yZTogbnVtYmVyLFxuICAgIG9wdGlvbnM/OiBBcGlDYWxsT3B0aW9uc1xuKTogUHJvbWlzZTxBcGlSZXNwb25zZTxSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4+IHtcbiAgICBpZiAoc2hvdWxkVXNlTW9jayhvcHRpb25zKSkge1xuICAgICAgICBhd2FpdCBkZWxheSgxNTApO1xuICAgICAgICBjb25zb2xlLmxvZygnW0FQSV1bTU9DS10gZW5kR2FtZVNlc3Npb24nLCB7IGdhbWVJZCwgc2NvcmUgfSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgbWVzc2FnZTogYE1vY2sgZW5kIGZvciAke2dhbWVJZH0gd2l0aCBzY29yZSAke3Njb3JlfWAsXG4gICAgICAgICAgICBkYXRhOiB7IG9rOiB0cnVlIH1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVxdWVzdEpzb248UmVjb3JkPHN0cmluZywgdW5rbm93bj4+KCcvYXBpL3YxL2dhbWUvYW5zd2VyLWJhdGNoaW5nJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBnYW1lX2lkOiBnYW1lSWQsIHNjb3JlIH0pXG4gICAgfSk7XG59XG4iXSwibmFtZXMiOlsiQVBJX0JBU0VfVVJMIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX0FQSV9VUkwiLCJWSVRFX0FQSV9VUkwiLCJyZXBsYWNlIiwiU1RBVElDX0RFQlVHX1RPS0VOIiwiTkVYVF9QVUJMSUNfREVCVUdfQkVBUkVSX1RPS0VOIiwibW9ja0dhbWVTZXNzaW9uIiwiaWQiLCJnYW1lX2lkIiwiZ2FtZV9zZXNzaW9uX3F1ZXN0aW9ucyIsIm9yZGVyIiwiaXNfYW5zd2VyZWQiLCJxdWVzdGlvbl9pZCIsImdhbWUiLCJjb2RlIiwidGltZV9saW1pdCIsIm1vY2tRdWVzdGlvbnMiLCJzZXNzaW9uX3F1ZXN0aW9uX2lkIiwicXVlc3Rpb24iLCJjb250ZW50Iiwib3B0aW9ucyIsInRleHQiLCJpc19jb3JyZWN0IiwiZGVsYXkiLCJtcyIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsIkFMV0FZU19VU0VfTU9DS19BUEkiLCJzaG91bGRVc2VNb2NrIiwiZm9yY2VSZWFsIiwidG9BcGlHYW1lQ29kZSIsImdhbWVDb2RlIiwiZW5zdXJlQXBpQmFzZVVybCIsIkVycm9yIiwiZ2V0QXV0aEhlYWRlciIsIkF1dGhvcml6YXRpb24iLCJyZXF1ZXN0SnNvbiIsInBhdGgiLCJpbml0IiwiYmFzZVVybCIsImF1dGhIZWFkZXIiLCJjb25zb2xlIiwibG9nIiwidXJsIiwibWV0aG9kIiwiaGFzQXV0aFRva2VuIiwiQm9vbGVhbiIsImF1dGhTb3VyY2UiLCJlcnJvciIsInJlc3BvbnNlIiwiZmV0Y2giLCJoZWFkZXJzIiwib2siLCJzdGF0dXMiLCJwYXlsb2FkIiwianNvbiIsInN1Y2Nlc3MiLCJtZXNzYWdlIiwiZmV0Y2hRdWVzdGlvbkRldGFpbCIsInNlc3Npb25JZCIsInNlc3Npb25RdWVzdGlvbklkIiwicmVzIiwiZGF0YSIsIm1hcCIsIm9wdCIsImZldGNoU2Vzc2lvblF1ZXN0aW9uV2l0aEZhbGxiYWNrIiwiaXRlbSIsImJ5U2Vzc2lvblF1ZXN0aW9uSWQiLCJieVF1ZXN0aW9uSWQiLCJxdWVzdGlvbklkIiwic3RhcnRHYW1lU2Vzc2lvbiIsIm1vY2tNb2RlIiwiZ2FtZUlkIiwicXVlc3Rpb25Db3VudCIsImxlbmd0aCIsInF1ZXN0aW9ucyIsImFwaUdhbWVDb2RlIiwic2Vzc2lvblJlcyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiZ2FtZV9jb2RlIiwic2Vzc2lvblF1ZXN0aW9ucyIsImRldGFpbHMiLCJhbGwiLCJzb3J0IiwiYSIsImIiLCJmaWx0ZXIiLCJmZXRjaEdhbWVMaXN0IiwibmFtZSIsImlzX2FjY2Vzc2libGUiLCJzdWJtaXRBbnN3ZXIiLCJhbnN3ZXJJZCIsInJlbWFpbl9zZWMiLCJpc19lbmRfZ2FtZSIsImlzX3dpbiIsImlzX2xvc2UiLCJzZXNzaW9uIiwic2NvcmUiLCJjdXJyZW50X3F1ZXN0aW9uIiwic2Vzc2lvbl9pZCIsImFuc3dlcl9pZCIsImVuZEdhbWVTZXNzaW9uIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/services/api.ts\n");

/***/ }),

/***/ "(pages-dir-node)/./src/services/apiMode.ts":
/*!*********************************!*\
  !*** ./src/services/apiMode.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getApiMode: () => (/* binding */ getApiMode),\n/* harmony export */   getDefaultApiMode: () => (/* binding */ getDefaultApiMode),\n/* harmony export */   isMockApiMode: () => (/* binding */ isMockApiMode),\n/* harmony export */   setApiMode: () => (/* binding */ setApiMode)\n/* harmony export */ });\nconst API_MODE_STORAGE_KEY = 'debug_api_mode';\nconst ENV_DEFAULT_MODE =  false ? 0 : 'real';\nfunction getApiMode() {\n    if (true) return ENV_DEFAULT_MODE;\n    const value = window.localStorage.getItem(API_MODE_STORAGE_KEY);\n    if (value === 'mock' || value === 'real') {\n        return value;\n    }\n    return ENV_DEFAULT_MODE;\n}\nfunction setApiMode(mode) {\n    if (true) return;\n    window.localStorage.setItem(API_MODE_STORAGE_KEY, mode);\n}\nfunction getDefaultApiMode() {\n    return ENV_DEFAULT_MODE;\n}\nfunction isMockApiMode() {\n    return getApiMode() === 'mock';\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3NyYy9zZXJ2aWNlcy9hcGlNb2RlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFFQSxNQUFNQSx1QkFBdUI7QUFDN0IsTUFBTUMsbUJBQTRCQyxNQUErQyxHQUFHLENBQU0sR0FBRztBQUV0RixTQUFTRztJQUNaLElBQUksSUFBNkIsRUFBRSxPQUFPSjtJQUUxQyxNQUFNSyxRQUFRQyxPQUFPQyxZQUFZLENBQUNDLE9BQU8sQ0FBQ1Q7SUFDMUMsSUFBSU0sVUFBVSxVQUFVQSxVQUFVLFFBQVE7UUFDdEMsT0FBT0E7SUFDWDtJQUVBLE9BQU9MO0FBQ1g7QUFFTyxTQUFTUyxXQUFXQyxJQUFhO0lBQ3BDLElBQUksSUFBNkIsRUFBRTtJQUNuQ0osT0FBT0MsWUFBWSxDQUFDSSxPQUFPLENBQUNaLHNCQUFzQlc7QUFDdEQ7QUFFTyxTQUFTRTtJQUNaLE9BQU9aO0FBQ1g7QUFFTyxTQUFTYTtJQUNaLE9BQU9ULGlCQUFpQjtBQUM1QiIsInNvdXJjZXMiOlsiL1VzZXJzL25iMjMwNjAxL0RvY3VtZW50cy9waGFzZXItZ2FtZWRldi9zcmMvc2VydmljZXMvYXBpTW9kZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgdHlwZSBBcGlNb2RlID0gJ3JlYWwnIHwgJ21vY2snO1xuXG5jb25zdCBBUElfTU9ERV9TVE9SQUdFX0tFWSA9ICdkZWJ1Z19hcGlfbW9kZSc7XG5jb25zdCBFTlZfREVGQVVMVF9NT0RFOiBBcGlNb2RlID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfVVNFX01PQ0tfQVBJID09PSAndHJ1ZScgPyAnbW9jaycgOiAncmVhbCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRBcGlNb2RlKCk6IEFwaU1vZGUge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykgcmV0dXJuIEVOVl9ERUZBVUxUX01PREU7XG5cbiAgICBjb25zdCB2YWx1ZSA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShBUElfTU9ERV9TVE9SQUdFX0tFWSk7XG4gICAgaWYgKHZhbHVlID09PSAnbW9jaycgfHwgdmFsdWUgPT09ICdyZWFsJykge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIEVOVl9ERUZBVUxUX01PREU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRBcGlNb2RlKG1vZGU6IEFwaU1vZGUpOiB2b2lkIHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybjtcbiAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oQVBJX01PREVfU1RPUkFHRV9LRVksIG1vZGUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVmYXVsdEFwaU1vZGUoKTogQXBpTW9kZSB7XG4gICAgcmV0dXJuIEVOVl9ERUZBVUxUX01PREU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc01vY2tBcGlNb2RlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBnZXRBcGlNb2RlKCkgPT09ICdtb2NrJztcbn1cbiJdLCJuYW1lcyI6WyJBUElfTU9ERV9TVE9SQUdFX0tFWSIsIkVOVl9ERUZBVUxUX01PREUiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfVVNFX01PQ0tfQVBJIiwiZ2V0QXBpTW9kZSIsInZhbHVlIiwid2luZG93IiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInNldEFwaU1vZGUiLCJtb2RlIiwic2V0SXRlbSIsImdldERlZmF1bHRBcGlNb2RlIiwiaXNNb2NrQXBpTW9kZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./src/services/apiMode.ts\n");

/***/ })

};
;